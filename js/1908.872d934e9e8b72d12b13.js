(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[1908,459],{55218:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var a=o(28416),n=o.n(a),l=o(80236),r=o(47173),s=o(93149);const i=e=>{var{isOpen:t,onConfirm:o,onClose:i,children:c,confirmButtonLabel:u="Confirm",cancelButtonLabel:d="Cancel",variant:m=l.v.small,titleIconVariant:p="warning",withCheckbox:f=!1,checkboxLabel:g="I understand that this action cannot be undone",confirmButtonVariant:b=r.Wu.primary}=e,h=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["isOpen","onConfirm","onClose","children","confirmButtonLabel","cancelButtonLabel","variant","titleIconVariant","withCheckbox","checkboxLabel","confirmButtonVariant"]);const[C,v]=(0,a.useState)(!1);return n().createElement(l.u,Object.assign({variant:m,isOpen:t,onClose:i,onEscapePress:i,titleIconVariant:p,actions:[n().createElement(r.zx,{ouiaId:"primary-confirm-button",key:"confirm",variant:b,onClick:o,isDisabled:f&&!C},u),n().createElement(r.zx,{ouiaId:"secondary-cancel-button",key:"cancel",variant:r.Wu.link,onClick:i},d)]},h),c,f?n().createElement(s.X,{isChecked:C,onChange:()=>v(!C),label:g,id:"warning-modal-check",className:"pf-v5-u-mt-lg"}):null)}},41435:(e,t,o)=>{"use strict";o.d(t,{Dl:()=>r,dw:()=>n,e4:()=>s,ir:()=>a});var a,n,l=o(28416);!function(e){e.right="right",e.left="left"}(a||(a={})),function(e){e.up="up",e.down="down"}(n||(n={}));const r=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),s=l.createContext({keyHandler:null,sendRef:null})},19993:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(70347);const a={backdrop:"pf-v5-c-backdrop",backdropOpen:"pf-v5-c-backdrop__open"}},62702:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(25238);const a={button:"pf-v5-c-button",modalBox:"pf-v5-c-modal-box",modalBoxBody:"pf-v5-c-modal-box__body",modalBoxClose:"pf-v5-c-modal-box__close",modalBoxDescription:"pf-v5-c-modal-box__description",modalBoxFooter:"pf-v5-c-modal-box__footer",modalBoxHeader:"pf-v5-c-modal-box__header",modalBoxHeaderMain:"pf-v5-c-modal-box__header-main",modalBoxTitle:"pf-v5-c-modal-box__title",modalBoxTitleIcon:"pf-v5-c-modal-box__title-icon",modalBoxTitleText:"pf-v5-c-modal-box__title-text",modifiers:{sm:"pf-m-sm",md:"pf-m-md",lg:"pf-m-lg",alignTop:"pf-m-align-top",danger:"pf-m-danger",warning:"pf-m-warning",success:"pf-m-success",custom:"pf-m-custom",info:"pf-m-info",help:"pf-m-help",icon:"pf-m-icon"},themeDark:"pf-v5-theme-dark"}},7876:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var a=o(85893),n=o(94184),l=o.n(n),r=function(){return r=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};const s=function(e){var t,o=e.type,n=e.children,s=e.className,i=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["type","children","className"]),c=l()(s,((t={})["ins-l-".concat(o)]=void 0!==o,t));return(0,a.jsxs)("section",r({},i,{className:c,children:[" ",n," "]}))}},84414:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var a=o(62012),n=o(64756);const l=e=>{const t=(0,a.useNavigate)();return(o,a)=>t((0,n.n)(o,e),a)}},5839:(e,t,o)=>{"use strict";o.d(t,{Z:()=>m});var a=o(28416),n=o.n(a),l=o(45697),r=o.n(l),s=o(64380),i=o(55218),c=o(25387),u=o(2550);const d=({isOpen:e,onClose:t,onSubmit:o})=>{const a=(0,c.YB)();return n().createElement(i.Z,{withCheckbox:!0,isOpen:e,title:a.formatMessage(u.Z.warning),checkboxLabel:a.formatMessage(u.Z.confirmCheckMessage),confirmButtonLabel:a.formatMessage(u.Z.continue),onClose:t,onConfirm:o},n().createElement(s.TextContent,null,n().createElement(s.Text,null,n().createElement(c._H,{...u.Z.defaultAccessGroupEditWarning,values:{b:e=>n().createElement("b",null,e)}}))))};d.propTypes={onSubmit:r().func,onClose:r().func,isOpen:r().bool};const m=d},91670:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>L});var a=o(28416),n=o.n(a),l=o(86706),r=o(25387),s=o(45697),i=o.n(s),c=o(62012),u=o(31055),d=o(50247),m=o(55140),p=o(7876),f=o(62410),g=o(74982),b=o(97246),h=o(77044),C=o(55218),v=o(5839);const y=({title:e,text:t,onClose:o,onSubmit:l,isOpen:r,confirmButtonLabel:s,isDefault:i,isChanged:c})=>{const[d,m]=(0,a.useState)(!1);return i&&!c&&d?n().createElement(v.Z,{isOpen:d&&r,onClose:()=>{o(),m(!1)},onSubmit:l}):n().createElement(C.Z,{title:e,isOpen:r,confirmButtonLabel:s,confirmButtonVariant:u.ButtonVariant.danger,onClose:o,onConfirm:()=>{m(!0),(!i||c)&&l()}},t)};y.propTypes={text:i().node,title:i().node,confirmButtonLabel:i().string,onSubmit:i().func,onClose:i().func,isOpen:i().bool,isDefault:i().bool,isChanged:i().bool},y.defaultProps={isDefault:!1,isChanged:!1};const x=y;var Z=o(29301),k=o(86601),O=o(64756),R=o(84414),B=o(75614),E=o(2550),M=o(14289);const _=(e,t,o=[])=>t?.reduce(((t,{uuid:l,display_name:r,name:s,description:i,modified:c})=>[...t,{uuid:l,title:r||s,cells:[n().createElement(a.Fragment,{key:`${l}-name`},n().createElement(O.Z,{to:M.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",l)},r||s)),i,n().createElement(a.Fragment,{key:`${l}-modified`},n().createElement(f.Z,{date:c,type:(0,Z.mh)(c)}))],selected:Boolean(o&&o.find((e=>e.uuid===l)))}]),[])||[],S=e=>e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button",w=(e,t,o)=>{const a=(0,r.YB)(),l=n().createElement(u.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},a.formatMessage(E.Z.addRole));return e?n().createElement(d.Tooltip,{content:o||a.formatMessage(E.Z.allRolesAdded)},l):l},I=({groupReducer:{selectedGroup:e,systemGroup:t,groups:o}})=>({roles:e.roles?.data||[],pagination:{...g.he,...e.roles?.meta||{}},groupsPagination:o.pagination||o.meta,groupsFilters:o.filters,isLoading:e.roles?.isLoading,isPlatformDefault:e.platform_default,isAdminDefault:e.admin_default,isChanged:!e.system,disableAddRoles:Object.keys(e.addRoles.pagination||{}).length>0?!(e.addRoles.pagination&&e.addRoles.pagination.count>0&&!e.admin_default):!!e.admin_default,systemGroupUuid:t?.uuid,group:e}),D=({onDefaultGroupChanged:e})=>{const t=(0,r.YB)(),o=(0,m.Z)(),s=(0,l.useDispatch)(),i=(0,R.Z)(),{groupId:u}=(0,c.useParams)(),[d,f]=(0,a.useState)(""),[g,C]=(0,a.useState)(""),[v,y]=(0,a.useState)([]),[D,L]=(0,a.useState)([]),[T,P]=(0,a.useState)(!1),[j,A]=(0,a.useState)((()=>null)),[G,F]=(0,a.useState)({}),{userAccessAdministrator:N,orgAdmin:V}=(0,a.useContext)(k.Z),U=(0,a.useRef)(V||N),{roles:W,pagination:H,groupsPagination:z,groupsFilters:Q,isLoading:Y,group:$,isPlatformDefault:q,isAdminDefault:X,isChanged:J,disableAddRoles:K,systemGroupUuid:ee}=(0,l.useSelector)(I),te=(e,t)=>(e.payload.then(t),e),oe=e=>s((0,h.nr)(e,{},{})),ae=e=>s((0,h.yi)(e??u)),ne=()=>s((0,h.WD)({chrome:o})),le=(e,t,o)=>s(te((0,h.W3)(e,t),o)),re=e=>(t,o)=>s((0,h.nV)(t,e,o)),se=[{title:t.formatMessage(E.Z.name),orderBy:"name"},{title:t.formatMessage(E.Z.description)},{title:t.formatMessage(E.Z.lastModified)}];(0,a.useEffect)((()=>{u!==B.Cn?re({...H,offset:0})(u):ee&&re({...H,offset:0})(ee)}),[ee]),(0,a.useEffect)((()=>{W.length>0&&(u!==B.Cn?oe(u):ee&&oe(ee))}),[W]),(0,a.useEffect)((()=>{U.current=V||N}),[V,N]);const ie=(e,t,o)=>n().createElement("p",null,n().createElement(r._H,{...o?E.Z.removeRolesModalText:E.Z.removeRoleModalText,values:{b:e=>n().createElement("b",null,e),name:e,...o?{roles:t}:{role:t}}})),ce=u!==B.Cn?u:ee,ue=()=>{q?ne().then((({value:{data:e}})=>{re({...H,offset:0})(e[0].uuid)})):re({...H,offset:0})(u)};return n().createElement(n().Fragment,null,n().createElement(x,{text:G.text,title:G.title,isOpen:T,isChanged:J,isDefault:q||X,confirmButtonLabel:G.confirmButtonLabel,onClose:()=>P(!1),onSubmit:()=>{P(!1),j(),y([]),e(q&&!J)}}),n().createElement(p.Z,{type:"content",id:"tab-roles"},n().createElement(b.M,{columns:se,isSelectable:U.current&&!X,rows:_(u,W,v),data:W,filterValue:g,fetchData:e=>{re(e)(ce)},emptyFilters:{name:"",description:""},setFilterValue:({name:e,description:t})=>{void 0!==e&&C(e),void 0!==t&&f(t)},isLoading:Y,pagination:H,checkedRows:v,setCheckedItems:e=>{y((t=>e(t).map((({uuid:e,name:t,label:o})=>({uuid:e,label:o||t})))))},titlePlural:t.formatMessage(E.Z.roles).toLowerCase(),titleSingular:t.formatMessage(E.Z.role),toolbarButtons:()=>[...U.current&&!X?[n().createElement(O.Z,{className:`rbac-m-hide-on-sm rbac-c-button__add-role${K&&"-disabled"}`,to:M.Z["group-add-roles"].link.replace(":groupId",u),key:"add-to-group"},w(K,S(name||""),X&&t.formatMessage(E.Z.defaultGroupNotManually))),{label:t.formatMessage(E.Z.addRole),props:{isDisabled:K,className:"rbac-m-hide-on-md"},onClick:()=>i(M.Z["group-add-roles"].link.replace(":groupId",u))},{label:t.formatMessage(E.Z.remove),props:{isDisabled:!v||!v.length>0,variant:"danger"},onClick:()=>{const e=v.length>1;A((()=>()=>le(ce,v.map((e=>e.uuid)),ue))),F({title:t.formatMessage(e?E.Z.removeRolesQuestion:E.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(e?E.Z.removeRoles:E.Z.removeRole),text:ie(name,e?v.length:W.find((e=>e.uuid===v[0].uuid)).name,e)}),P(!0)}}]:[]],actionResolver:()=>[...U.current&&!X?[{title:t.formatMessage(E.Z.remove),onClick:(e,o,a)=>{A((()=>()=>le(ce,[a.uuid],ue))),F({title:t.formatMessage(E.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(E.Z.removeRole),text:ie(name,a.title,!1)}),P(!0)}}]:[]],ouiaId:"roles-table",emptyProps:{title:t.formatMessage(E.Z.noGroupRoles),description:[t.formatMessage(X?E.Z.contactServiceTeamForRoles:E.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:g},{key:"description",value:d}],tableId:"group-roles"})),n().createElement(a.Suspense,null,n().createElement(c.Outlet,{context:{[M.Z["group-roles-edit-group"].path]:{group:$,cancelRoute:M.Z["group-detail-roles"].link.replace(":groupId",u),postMethod:()=>s((0,h.yi)(ce))},[M.Z["group-roles-remove-group"].path]:{postMethod:()=>s((0,h.bt)({...z,offset:0,filters:Q,usesMetaInURL:!0,chrome:o})),cancelRoute:M.Z["group-detail-roles"].link.replace(":groupId",u),submitRoute:(0,Z.zk)(M.Z.groups.link,{...z,offset:0},Q),groupsUuid:[$]},[M.Z["group-add-roles"].path]:{afterSubmit:()=>{q||X?ne().then((({value:{data:e}})=>{re(H)(e[0].uuid),ae(e[0].uuid)})):(re(H)(u),ae())},fetchUuid:ee,selectedRoles:D,setSelectedRoles:L,closeUrl:M.Z["group-detail"].link.replace(":groupId",q?B.Cn:u),addRolesToGroup:(e,t,o)=>s(te((0,h.Wj)(e,t),o)),groupName:$.name,isDefault:q||X,isChanged:J,onDefaultGroupChanged:e}}})))};D.propTypes={searchFilter:i().string,selectedRoles:i().array,pagination:i().shape({limit:i().number.isRequired,offset:i().number.isRequired,count:i().number}),onDefaultGroupChanged:i().func},D.defaultProps={pagination:g.eX,selectedRoles:[]};const L=D},70347:()=>{},25238:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1908.82a900e1c2e575c0f1dc8878ee374346.js.map