(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[6105],{85998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var a=s(65353),n=s(28416),i=s(5964),l=s(75587),r=s(73699),c=s(41435),o=s(38296),m=s(62472);const p=e=>{var{id:t="",children:s=null,className:d="",isOpen:u=!1,parentRef:g=null,getMenuRef:b=null,isDisabled:h=!1,isPlain:f=!1,isText:v=!1,toggleVariant:E="default",isActive:A=!1,onToggle:y=((e,t)=>{}),icon:_=null,toggleIndicator:k=i.default,splitButtonItems:O,splitButtonVariant:N="checkbox","aria-haspopup":T,ouiaId:I,ouiaSafe:S,ref:Z}=e,U=(0,a.__rest)(e,["id","children","className","isOpen","parentRef","getMenuRef","isDisabled","isPlain","isText","toggleVariant","isActive","onToggle","icon","toggleIndicator","splitButtonItems","splitButtonVariant","aria-haspopup","ouiaId","ouiaSafe","ref"]);const P=(0,m.useOUIAProps)(p.displayName,I,S),w=n.createElement(c.Dl.Consumer,null,(({toggleTextClass:e,toggleIndicatorClass:a,toggleIconClass:i})=>n.createElement(l.Z,Object.assign({},U,{id:t,className:d,isOpen:u,parentRef:g,getMenuRef:b,isActive:A,isDisabled:h,isPlain:f,isText:v,toggleVariant:E,onToggle:y,"aria-haspopup":T},P,O&&{isSplitButton:!0,"aria-label":U["aria-label"]||"Select"}),_&&n.createElement("span",{className:(0,o.css)(i)},_),s&&n.createElement("span",{className:k&&(0,o.css)(e)},s),k&&n.createElement("span",{className:(0,o.css)(!O&&a)},n.createElement(k,null)))));return O?n.createElement("div",{className:(0,o.css)(r.Z.dropdownToggle,r.Z.modifiers.splitButton,"action"===N&&r.Z.modifiers.action,"primary"===E&&"action"===N&&r.Z.modifiers.primary,"secondary"===E&&"action"===N&&r.Z.modifiers.secondary,h&&r.Z.modifiers.disabled)},O,w):w};p.displayName="DropdownToggle"},39173:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(85893),n=s(94184),i=s.n(n),l=s(78956);const r=function(e){var t=e.className,s=e.title,n=i()(t);return(0,a.jsx)(l.Title,{headingLevel:"h1",size:"2xl",className:n,"widget-type":"InsightsPageHeaderTitle",children:s})}},67968:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(28416),n=s.n(a),i=s(62012),l=s(79332),r=s(85998),c=s(85044),o=s(39173),m=s(55140),p=s(64380),d=s(15950),u=s(25387),g=s(45697),b=s.n(g),h=s(2550),f=s(78173),v=s(50247);const E=({isOrgAdmin:e,isUserAccessAdmin:t})=>{const s=(0,u.YB)(),a=s.formatMessage(h.Z[e?"orgAdministrator":"userAccessAdmin"]),i=n().createElement("span",null,s.formatMessage(h.Z[e?"orgAdminHint":"userAccessAdminHint"]));return e||t?n().createElement(v.Tooltip,{position:v.TooltipPosition.right,content:i},n().createElement(f.Label,{color:"purple"}," ",a," ")):n().createElement(n().Fragment,null)};E.propTypes={isOrgAdmin:b().bool,isUserAccessAdmin:b().bool};const A=E;var y=s(86601);const _=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",advisor:"/insights/advisor",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions","ocp-advisor","ocm"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",remediations:"/remediations",subscriptions:"/subscriptions",repositories:"/content",provisioning:"/provisioning",tasks:"/tasks"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","remediations","subscriptions","content-sources","provisioning","tasks"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}];var k=s(9545),O=s(23539),N=s(72232),T=s(94184),I=s.n(T),S=s(79222),Z=s(88094);const U=(...e)=>{const{search:t}=(0,i.useLocation)(),s=new URLSearchParams(t);return e.reduce(((e,t)=>({...e,[t]:s.get(t)})),{})},P=({header:e,entitlements:t,isDisabled:s})=>{const{bundle:a}=U("bundle");return n().createElement(n().Fragment,null,e&&n().createElement(N.Title,{headingLevel:"h3",size:"xl"},e),n().createElement(O.Stack,{className:I()({"pf-v5-u-mt-lg":!e}),hasGutter:!0},t&&_?.map((e=>{const l=t.find((([t])=>e.entitlement===t)),r=e.entitlement;return l?n().createElement(O.StackItem,{key:r,className:"rbac-c-mua-cardWrapper"},n().createElement(i.NavLink,{"aria-label":"card-link",className:I()("rbac-c-mua-bundles__cardlink",{"pf-v5-u-background-color-disabled-color-300":s}),to:{pathname:"",search:`bundle=${r}`}},n().createElement(Z.Card,{key:e.title,isFlat:s||r!==a,isSelectable:!s,isSelected:!s&&r===a,className:I()({"pf-v5-u-background-color-disabled-color-300":s})},n().createElement(Z.CardTitle,{className:"pf-v5-u-font-weight-light"}," ",e.title),n().createElement(Z.CardBody,null,n().createElement(S.List,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm rbac-c-mua-bundles__card--applist",isPlain:!0},Object.entries(e.apps||{}).map((([e])=>n().createElement(S.ListItem,{key:e}," ",e," ")))))))):null}))))};P.propTypes={header:b().string,entitlements:b().array,isDisabled:b().bool};const w=P;var j=s(75614);const x=()=>a.Fragment,L=()=>{const{bundle:e}=U("bundle"),t=(e=>{const{pathname:t}=(0,i.useLocation)(),s=(0,i.useNavigate)();return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?_.find((({entitlement:t})=>t===e))?.appsIds||[]:(s({to:t,search:`bundle=${e=j.Jr}`},{replace:!0}),[])})(e),[l,r]=(0,a.useState)({});(0,a.useEffect)((()=>{Object.prototype.hasOwnProperty.call(l,e)||s(19289)(`./${e}`).then((t=>r((s=>({...s,[e]:t.default}))))).catch(console.log)}),[e]);const c=l[e]||x;return n().createElement(c,{key:e,apps:t})};var C=s(65655);const M=({entitlements:e,isOrgAdmin:t,isUserAccessAdmin:s})=>{const a=(0,u.YB)(),i=Object.entries(e).filter((([e,{is_entitled:t}])=>t&&"application_services"!==e)),{bundle:l}=U("bundle"),r=t||s;return n().createElement(C.Z.Provider,{value:r},n().createElement(k.Grid,null,n().createElement(k.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},n().createElement(O.Stack,null,n().createElement(O.StackItem,{"data-testid":"entitle-section",className:"rbac-l-myUserAccess-section__cards--entitled"},n().createElement(w,{entitlements:i})))),n().createElement(k.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==l&&n().createElement(N.Title,{headingLevel:"h3",size:"xl"},a.formatMessage(r?h.Z.yourRoles:h.Z.yourPermissions,{name:_.find((({entitlement:e})=>e===l))?.title})),n().createElement(L,null))))};M.propTypes={entitlements:b().object,isOrgAdmin:b().bool,isUserAccessAdmin:b().bool};const B=M,D=()=>{const e=(0,u.YB)(),t=(0,m.Z)(),[s,g]=(0,a.useState)({}),[{bundle:b},f]=(0,i.useSearchParams)(),[v,E]=(0,a.useState)(b),{userAccessAdministrator:k}=(0,a.useContext)(y.Z);(0,a.useEffect)((()=>{t.auth.getUser().then((({identity:e,entitlements:t})=>g({entitlements:t,isOrgAdmin:e?.user?.is_org_admin}))),!b&&f({bundle:j.Jr})}),[]);const O={...s.entitlements,application_services:{is_entitled:!0,is_trial:!1}},N=Object.entries(O).filter((([,{is_entitled:e}])=>e)),[T,I]=(0,a.useState)(!1);return n().createElement(n().Fragment,null,Object.prototype.hasOwnProperty.call(s,"entitlements")&&(Object.prototype.hasOwnProperty.call(s,"isOrgAdmin")||k)?n().createElement(n().Fragment,null,n().createElement(o.Z,{className:"rbac-p-myUserAccess--title sticky",title:n().createElement(n().Fragment,null,n().createElement("span",null," ",e.formatMessage(h.Z.myUserAccess)," "),n().createElement(A,{isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:k}))}),n().createElement(p.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},e.formatMessage(h.Z.selectAppsToViewPermissions)),N&&n().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},n().createElement(l.L,{ouiaId:"mua-bundle-dropdown",toggle:n().createElement(r.Z,{onToggle:()=>I(!T),id:"mua-bundle-dropdown"},v||e.formatMessage(h.Z.chooseSubscriptionEllipsis)),dropdownItems:_.map((e=>n().createElement(i.NavLink,{key:e.entitlement,to:{pathname:"",search:`bundle=${e.entitlement}`}},n().createElement(c.h,{onClick:()=>{E(e.title),I(!1)},component:"button"},e.title)))),isOpen:T})),n().createElement("section",null,n().createElement(B,{entitlements:O,isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:k}))):n().createElement(d.Spinner,null))}},65655:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a=(0,s(28416).createContext)(!1)},19289:(e,t,s)=>{var a={"./MUABundles":[51796,1796],"./MUABundles.scss":[51796,1796],"./__mocks__/rhel":[9116,9116],"./__mocks__/rhel.js":[9116,9116],"./ansible":[47341,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,5600],"./ansible.js":[47341,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,5600],"./application_services":[60989,5376,989],"./application_services.js":[60989,5376,989],"./openshift":[93474,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,4225],"./openshift.js":[93474,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,4225],"./rhel":[93312,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,459],"./rhel.js":[93312,5182,3693,8971,9389,4444,5376,8826,7440,4229,1943,1621,459]};function n(e){if(!s.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(a),n.id=19289,e.exports=n},30187:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6105.3f3d128abe4a9f7c741ed843da22dd0b.js.map