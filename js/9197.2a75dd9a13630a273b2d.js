/*! For license information please see 9197.2a75dd9a13630a273b2d.js.LICENSE.txt */
"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[9197,7664],{91290:(e,t,r)=>{r.d(t,{ZP:()=>i,iC:()=>o,sN:()=>a});var n=r(40400);const a={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},o=(0,n.IU)(a),i=o},46441:(e,t,r)=>{r.d(t,{Z:()=>c});r(71002);var n=r(76857),a=r(92950),o=r.n(a),i=r(45697),s=r.n(i),u=(r(27361),r(48880));s().oneOfType([s().string,s().func,s().object]),s().func.isRequired,s().node.isRequired,s().bool,s().func.isRequired,s().node.isRequired,s().func.isRequired;var l=function(e){var t=e.renderNextButton,r=e.disableBack,i=e.handlePrev,s=e.buttonLabels,l=s.cancel,c=s.back,m=e.context,d=(0,u.default)(),f=(0,a.useContext)(m),p=f.success,g=f.error,h=f.submitting;return p||void 0===g||g||h?null:o().createElement(a.Fragment,null,t(),o().createElement(n.Button,{type:"button",variant:"secondary",isDisabled:r,onClick:i},c),o().createElement(n.Button,{type:"button",variant:"link",onClick:d.onCancel},l))};l.propTypes={disableBack:s().bool,handlePrev:s().func.isRequired,handleNext:s().func.isRequired,nextStep:s().oneOfType([s().string,s().shape({when:s().string.isRequired,stepMapper:s().object.isRequired}),s().func]),buttonLabels:s().shape({submit:s().node.isRequired,cancel:s().node.isRequired,back:s().node.isRequired,next:s().node.isRequired}).isRequired,context:s().object.isRequired,renderNextButton:s().func};const c=l},65731:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),o=r(76857),i=r(70363),s=r(43047),u=r(86896),l=r(45697),c=r.n(l),m=r(30893),d=function(e){var t=e.context,r=e.title,l=e.text,c=(0,u.Z)(),d=(0,n.useContext)(i.default).jumpToStep,f=(0,n.useContext)(t).setWizardError;return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.large},a().createElement(o.EmptyStateIcon,{color:"red",icon:s.ZP}),a().createElement(o.Title,{headingLevel:"h4",size:"lg"},r),a().createElement(o.EmptyStateBody,null,l),a().createElement(o.Button,{onClick:function(){f(void 0),d(0)},variant:"primary"},c.formatMessage(m.Z.returnToStepNumber,{number:1})))};d.propTypes={context:c().object.isRequired,title:c().string.isRequired,text:c().string.isRequired};const f=d},50045:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ct});var n=r(93433),a=r(29439),o=r(4942),i=r(92950),s=r.n(i),u=r(46801),l=r(1936),c=r(76857),m=r(86896),d=r(44873),f=r(45987),p=r(87462),g=r(45697),h=r.n(g),v=r(50533),b=r(71355),y=r(93025),Z=r(67850),E=r(52817),M=r(73943),O=r(64124),k=r(96354),R=r(48880),w=r(71002),S=r(15861),x=r(89168),C=r(40639),j=r(28412),P=r(82644),D=r(29558),T=r(30893),I=r(2034);function G(){G=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=Z(i,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function m(){}function d(){}function f(){}var p={};s(p,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(k([])));h&&h!==t&&r.call(h,a)&&(p=h);var v=f.prototype=m.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function n(a,o,i,s){var u=l(e[a],e,o);if("throw"!==u.type){var c=u.arg,m=c.value;return m&&"object"==(0,w.Z)(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(m).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=f,s(v,"constructor",f),s(f,"constructor",d),d.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),s(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(u(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),s(v,i,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}var L=function(){var e=(0,S.Z)(G().mark((function e(t,r,n){var a,o,i,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,P.Sn)(),s=(0,D.d)({locale:j.S,messages:I},i),t){e.next=4;break}return e.abrupt("return",void 0);case 4:if(!(t.length>150)){e.next=6;break}throw s.formatMessage(T.Z.maxCharactersWarning,{number:150});case 6:return e.next=8,(0,x.bt)({limit:10,offset:0,filters:{name:t},nameMatch:"exact"}).catch((function(e){console.error(e)}));case 8:if(u=e.sent,!(n?null==u||null===(a=u.data)||void 0===a?void 0:a.some((function(e){return e[r]!==n})):(null==u||null===(o=u.data)||void 0===o?void 0:o.length)>0)){e.next=11;break}throw s.formatMessage(T.Z.nameAlreadyTaken);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),N=(0,C.Z)((function(e,t,r){return L(e,t,r)})),_=r(65731);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e){var t,r=e.formFields,n=(0,m.Z)(),a=(0,i.useContext)(ke),o=a.submitting,u=a.error,l=a.setWizardError,d=(0,R.default)().getState;return(0,i.useEffect)((function(){l(void 0),L(d().values["group-name"]).then((function(){return l(!1)})).catch((function(){return l(!0)}))}),[]),void 0===u||o?s().createElement(c.Bullseye,null,s().createElement(c.Spinner,{size:"xl"})):!0===u?s().createElement(_.Z,{context:ke,title:n.formatMessage(T.Z.groupNameTakenTitle),text:n.formatMessage(T.Z.groupNameTakenText)}):s().createElement(s().Fragment,null,s().createElement(c.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},n.formatMessage(T.Z.reviewDetails)),[[A({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};F.propTypes={formFields:h().array};const q=F;var U=r(46441),V=r(19756),z=r(93736),W=r(41693),Q=r(92607),K=r(23393),H=r(59775),X=function(e,t){return void 0===e||t?"error":"default"},Y=function(e){return(null==e?void 0:e.length)>150?"error":"default"},J=function(e){var t=(0,m.Z)(),r=(0,W.Z)(e).input,n=(0,R.default)(),o=n.getState().values,u=o["group-name"],l=o["group-description"],d=(0,i.useState)(u||""),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=(0,i.useState)(),v=(0,a.Z)(h,2),b=v[0],y=v[1],Z=(0,i.useState)(l),E=(0,a.Z)(Z,2),M=E[0],O=E[1],k=function(e){r.onChange(void 0),N(e).then((function(){r.onChange(e),y(void 0)})).catch((function(e){y(e)})),g(e)};return(0,i.useEffect)((function(){(null==p?void 0:p.length)>0&&k(p)}),[]),s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(H.c,{label:t.formatMessage(T.Z.groupName),helperTextInvalid:p?b:t.formatMessage(T.Z.required),isRequired:!0,validated:X(p,b)},s().createElement(Q.oi,{value:p,type:"text",validated:X(p,b),onBlur:function(){return""===p&&g(void 0)},onChange:function(e){return k(e)},"aria-label":"Group name"}))),s().createElement(c.StackItem,null,s().createElement(H.c,{label:t.formatMessage(T.Z.groupDescription),helperTextInvalid:t.formatMessage(T.Z.maxCharactersWarning,{number:150}),validated:Y(M)},s().createElement(K.Kx,{value:M,validated:Y(M),onChange:function(e){O(e),n.change("group-description",e)},"aria-label":"Group description",resizeOrientation:"vertical"}))))};J.propTypes={name:h().string,description:h().string,groups:h().array};const $=J;var ee=r(97384),te=function(e){var t=(0,m.Z)(),r=(0,i.useState)([]),n=(0,a.Z)(r,2),o=n[0],u=n[1],l=(0,W.Z)(e).input,d=(0,R.default)();return(0,i.useEffect)((function(){u(d.getState().values["roles-list"]||[])}),[]),(0,i.useEffect)((function(){l.onChange(o),d.change("roles-list",o)}),[o]),s().createElement(i.Fragment,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(c.Text,null,t.formatMessage(T.Z.selectRolesForGroupText)))),s().createElement(c.StackItem,null,s().createElement(c.FormGroup,{fieldId:"select-role"},s().createElement(ee.Z,{selectedRoles:o,setSelectedRoles:u,rolesExcluded:!1})))))};te.propTypes={selectedRoles:h().array,setSelectedRoles:h().func,title:h().string,description:h().string};const re=te;var ne=r(11107),ae=r(90944),oe=r(30060),ie=r(88093),se=r(26794),ue=r(65916),le=r(92758),ce=r(58654);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=function(e){var t=e.selectedUsers,r=e.setSelectedUsers,n=e.userLinks,o=e.usesMetaInURL,c=e.displayNarrow,d=e.props,f=(0,m.Z)(),g=(0,u.useNavigate)(),h=(0,u.useLocation)(),b=(0,v.useDispatch)(),y=(0,i.useContext)(se.Z).orgAdmin,Z=(0,i.useRef)(null),E=(0,v.useSelector)((function(e){var t,r,n=e.userReducer.users;return{limit:null!==(t=o?n.pagination.limit:n.meta.limit)&&void 0!==t?t:(y?ue.HE:ue.he).limit,offset:null!==(r=o?n.pagination.offset:n.meta.offset)&&void 0!==r?r:(y?ue.HE:ue.he).offset,count:o?n.pagination.count:n.meta.count,redirected:o&&n.pagination.redirected}})),M=(0,v.useSelector)((function(e){var t,r=e.userReducer,n=r.users,a=n.data,o=n.filters,i=void 0===o?{}:o,s=r.isUserDataLoading;return{users:null==a||null===(t=a.map)||void 0===t?void 0:t.call(a,(function(e){return de(de({},e),{},{uuid:e.username})})),isLoading:s,stateFilters:h.search.length>0||Object.keys(i).length>0?i:{status:["Active"]}}})),O=M.users,k=M.isLoading,R=M.stateFilters,w=(0,i.useCallback)((function(e){return b((0,ae.u)(e))}),[b]),S=(0,i.useCallback)((function(e){return b((0,ae.a)(e))}),[b]),x=[{title:f.formatMessage(c?T.Z.orgAdmin:T.Z.orgAdministrator),key:"org-admin",transforms:[l.nowrap]},{title:f.formatMessage(T.Z.username),key:"username",transforms:[l.sortable]},{title:f.formatMessage(T.Z.email)},{title:f.formatMessage(T.Z.firstName),transforms:[l.nowrap]},{title:f.formatMessage(T.Z.lastName),transforms:[l.nowrap]},{title:f.formatMessage(T.Z.status),transforms:[l.nowrap]}],C=(0,i.useState)({index:1,direction:"asc"}),j=(0,a.Z)(C,2),P=j[0],D=j[1],I=(0,i.useState)(o?R:{username:"",email:"",status:[f.formatMessage(T.Z.active)]}),G=(0,a.Z)(I,2),L=G[0],N=G[1];return(0,i.useEffect)((function(){o&&(0,ue.oG)(h,g,E.limit,E.offset)}),[E.offset,E.limit,E.count,E.redirected]),(0,i.useEffect)((function(){var e=(0,ue.rj)(h,g,E),t=e.limit,r=e.offset,n=o?(0,le.aX)(h,g,["username","email","status"],L):{status:L.status};N(n),w(de(de({},(0,ne.jl)({limit:t,offset:r,filters:n})),{},{usesMetaInURL:o}))}),[]),(0,i.useEffect)((function(){o&&((0,ue.Zc)(h)||(0,ue.oG)(h,g,E.limit,E.offset),Object.values(L).some((function(e){return(null==e?void 0:e.length)>0}))&&!(0,le.qF)(h,Object.keys(L))&&(0,le.aX)(h,g,Object.keys(L),L))})),s().createElement(oe.M,(0,p.Z)({isCompact:!0,isSelectable:!0,borders:!1,columns:x,rows:(0,ce.H)(n,O,f,t,!0),sortBy:P,onSort:function(e,t,r){var n="".concat("desc"===r?"-":"").concat(x[t].key);D({index:t,direction:r}),w(de(de({},E),{},{filters:L,usesMetaInURL:o,orderBy:n}))},data:O,ouiaId:"users-table",fetchData:function(e){var t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:L.status,r=e.username,n=e.email,a=e.count,i=e.limit,s=e.offset,u=e.orderBy;w(de(de({},(0,ne.jl)({count:a,limit:i,offset:s,orderBy:u,filters:{username:r,email:n,status:t}})),{},{usesMetaInURL:o})).then((function(){var e;null==Z||null===(e=Z.current)||void 0===e||e.focus()})),o&&(0,le.MS)(h,g,{username:r,email:n,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:function(e){var t,r=e.username,n=e.email,a=e.status;t={username:void 0===r?L.username:r,email:void 0===n?L.email:n,status:void 0===a||a===L.status?L.status:a},o&&S(t),N(de({username:""},t))},isLoading:k,pagination:E,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid;return{uuid:t,label:e.username||t}}))}))},rowWrapper:ie.Z,titlePlural:f.formatMessage(T.Z.users).toLowerCase(),titleSingular:f.formatMessage(T.Z.user),filters:[{key:"username",value:L.username,placeholder:f.formatMessage(T.Z.filterByKey,{key:f.formatMessage(T.Z.username).toLowerCase()}),innerRef:Z},{key:"email",value:L.email,placeholder:f.formatMessage(T.Z.filterByKey,{key:f.formatMessage(T.Z.email).toLowerCase()}),innerRef:Z},{key:"status",value:L.status,label:f.formatMessage(T.Z.status),type:"checkbox",items:[{label:f.formatMessage(T.Z.active),value:"Active"},{label:f.formatMessage(T.Z.inactive),value:"Inactive"}]}],tableId:"users-list"},d))};fe.propTypes={displayNarrow:h().bool,users:h().array,searchFilter:h().string,setSelectedUsers:h().func.isRequired,selectedUsers:h().array,userLinks:h().bool,props:h().object,usesMetaInURL:h().bool},fe.defaultProps={displayNarrow:!1,users:[],selectedUsers:[],setSelectedUsers:function(){},userLinks:!1,usesMetaInURL:!1};const pe=fe;var ge=r(82916),he=function(e){var t=(0,i.useState)([]),r=(0,a.Z)(t,2),n=r[0],o=r[1],u=(0,W.Z)(e).input,l=(0,m.Z)(),d=(0,R.default)();return(0,i.useEffect)((function(){o(d.getState().values["users-list"]||[])}),[]),(0,i.useEffect)((function(){u.onChange(n),d.change("users-list",n)}),[n]),s().createElement(i.Fragment,null,s().createElement(c.Form,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(ge.Z,{linkDescription:l.formatMessage(T.Z.toManageUsersText)}))),s().createElement(c.StackItem,null,s().createElement(c.FormGroup,{fieldId:"select-user"},s().createElement(c.Card,null,s().createElement(pe,{selectedUsers:n,setSelectedUsers:o,displayNarrow:!0})))))))};he.propTypes={selectedUsers:h().array,setSelectedUsers:h().func,title:h().string,description:h().string};const ve=he;var be=function(){var e=(0,m.Z)(),t=(0,R.default)().getState().values,r=t["group-name"],n=t["group-description"],a=t["users-list"],o=t["roles-list"];return s().createElement("div",{className:"rbac"},s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(T.Z.groupName))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},r))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(T.Z.groupDescription))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},n))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(T.Z.roles))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},o.map((function(e,t){return s().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(T.Z.members))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},a.map((function(e,t){return s().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))))))))};be.propTypes={name:h().string,description:h().string,groups:h().array};const ye=be;var Ze=r(4682),Ee=["Content"];function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke=(0,i.createContext)({success:!1,submitting:!1,error:void 0}),Re=function(e){return s().createElement(Z.ZP,(0,p.Z)({},e,{showFormControls:!1}))},we=function(e){var t=e.Content,r=(0,f.Z)(e,Ee);return s().createElement(t,r)};we.propTypes={Content:h().elementType.isRequired};var Se={description:we,"set-name":$,"set-roles":re,"set-users":ve,"summary-content":ye},xe=function(e,t,r){return function(n){r(n),Object.keys(n).length>0?t(!0):e()}},Ce=function(e){var t=e.postMethod,r=e.pagination,n=e.filters,o=e.orderBy,u=(0,v.useDispatch)(),l=(0,m.Z)(),c=(0,i.useRef)(function(){var e=(0,P.Sn)(),t=(0,D.d)({locale:j.S,messages:I},e);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:t.formatMessage(T.Z.createGroup),fields:[{name:"name-and-description",nextStep:"add-roles",title:t.formatMessage(T.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:O.Z.REQUIRED}]},{component:k.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:O.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:t.formatMessage(T.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:"review",title:t.formatMessage(T.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},{name:"review",title:t.formatMessage(T.Z.reviewDetails),buttons:function(e){return s().createElement(U.Z,(0,p.Z)({},e,{context:ke}))},StepTemplate:q,fields:[{component:"summary-content",name:"summary-content"}]}]}]}}()),d=(0,z.Z)(),f=(0,i.useState)(!1),g=(0,a.Z)(f,2),h=g[0],Z=g[1],R=(0,i.useState)({}),w=(0,a.Z)(R,2),S=w[0],x=w[1],C=(0,i.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),G=(0,a.Z)(C,2),L=G[0],N=G[1],_=function(){u((0,b.addNotification)({variant:"warning",title:l.formatMessage(T.Z.addingGroupTitle),dismissDelay:8e3,description:l.formatMessage(T.Z.addingGroupCanceledDescription)})),d({pathname:Ze.Z.groups.link,search:(0,ne.GT)(Oe({page:1,per_page:r.limit},n))})};return h?s().createElement(M.R,{type:"group",isOpen:h,onModalCancel:function(){return Z(!1)},onConfirmCancel:_}):s().createElement(ke.Provider,{value:Oe(Oe({},L),{},{setWizardError:function(e){return N((function(t){return Oe(Oe({},t),{},{error:e})}))},setWizardSuccess:function(e){return N((function(t){return Oe(Oe({},t),{},{success:e})}))},setHideForm:function(e){return N((function(t){return Oe(Oe({},t),{},{hideForm:e})}))}})},s().createElement(y.Z,{schema:c.current,subscription:{values:!0},FormTemplate:Re,componentMapper:Oe(Oe({},E.ZP),Se),onSubmit:function(e){var n={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((function(e){return{username:e.label}})),roles_list:e["roles-list"].map((function(e){return e.uuid}))};d({pathname:Ze.Z.groups.link,search:(0,ne.GT)({page:1,per_page:r.limit})}),u((0,V.Rp)(n)).then((function(){return t({limit:r.limit,offset:0,orderBy:o,filters:{}})})).then((function(){u((0,b.addNotification)({variant:"success",title:l.formatMessage(T.Z.addGroupSuccessTitle),dismissDelay:8e3,description:l.formatMessage(T.Z.addGroupSuccessDescription)}))}))},initialValues:S,onCancel:xe(_,Z,x)}))};Ce.propTypes={postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,orderBy:h().string};const je=Ce;var Pe=r(40483),De=r(36457);function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ge=function(e){var t=e.postMethod,r=e.pagination,n=e.filters,o=e.cancelRoute,l=e.submitRoute,d=void 0===l?o:l,f=e.group,g=e.onClose,h=(0,m.Z)(),y=(0,i.useState)(void 0),Z=(0,a.Z)(y,2),M=Z[0],R=Z[1],w=(0,u.useNavigate)(),S=(0,u.useParams)().groupId,x=function(e){R(e)},C=(0,v.useDispatch)();(0,i.useEffect)((function(){S&&(0,V.yi)(S).payload.then((function(e){return x(e)})).catch((function(){return x(void 0)}))}),[]),(0,i.useEffect)((function(){R(f)}),[f]);var j=function(){C((0,b.addNotification)({variant:"warning",dismissDelay:8e3,title:h.formatMessage(M?T.Z.editingGroupTitle:T.Z.addingGroupTitle),description:h.formatMessage(M?T.Z.editGroupCanceledDescription:T.Z.addingGroupCanceledDescription)})),g(),w(o)},P={fields:[Ie(Ie({name:"name",label:h.formatMessage(T.Z.name),component:M?k.Z.TEXT_FIELD:"skeleton"},M?{validateOnMount:!0}:{}),{},{validate:[{type:"validate-group-name",id:null!=S?S:f.uuid,idKey:"uuid"},{type:O.Z.REQUIRED}]}),{name:"description",label:h.formatMessage(T.Z.description),component:M?k.Z.TEXTAREA:"skeleton",validate:[{type:O.Z.MAX_LENGTH,threshold:150}]}]},D={"validate-group-name":function(e){var t=e.idKey,r=e.id;return function(e){return N(e,t,r)}}};return s().createElement(De.Z,{schema:P,componentMapper:Ie(Ie({},E.ZP),{},{skeleton:c.Skeleton}),onCancel:j,onSubmit:function(e){var a={uuid:e.uuid,description:e.description||null,name:e.name};t?C((0,V.mD)(a)).then((function(){return t({limit:null==r?void 0:r.limit,filters:n})})).then(w(d)):C((0,V.mD)(a)).then((function(){w(d)}))},validatorMapper:D,initialValues:Ie({},M),FormTemplate:function(e){return s().createElement(Pe.Z,(0,p.Z)({},e,{ModalProps:{onClose:j,isOpen:!0,variant:"medium",title:h.formatMessage(T.Z.editGroupInfo)}}))}})};Ge.defaultProps={cancelRoute:Ze.Z.groups.path,onClose:function(){return null}},Ge.propTypes={postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,cancelRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),submitRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),group:h().object,onClose:h().func};const Le=Ge;var Ne=r(44012),_e=r(69957),Be=r(19571),Ae=function(e){var t=e.groupsUuid,r=e.isModalOpen,n=e.postMethod,o=e.pagination,l=e.filters,d=e.cancelRoute,f=e.submitRoute,g=void 0===f?d:f,h=(0,m.Z)(),b=(0,v.useSelector)((function(e){var t=e.groupReducer.selectedGroup;return{group:t,isLoading:!t.loaded}}),v.shallowEqual),y=b.group,Z=b.isLoading,E=(0,v.useDispatch)();(0,i.useEffect)((function(){1===t.length&&E((0,V.yi)(t[0].uuid))}),[]);var M=(0,u.useNavigate)(),O=(0,i.useState)(!1),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=t.length>1,x=function(){return M(d)};return s().createElement(c.Modal,{className:"rbac",isOpen:r,variant:c.ModalVariant.small,title:s().createElement(c.Text,null,s().createElement(_e.ZP,{className:"delete-group-warning-icon"}),"  ",h.formatMessage(S?T.Z.deleteGroupsQuestion:T.Z.deleteGroupQuestion)),onClose:x,actions:[s().createElement(c.Button,{key:"submit",isDisabled:!R,variant:"danger",type:"button",onClick:function(){var e=t.map((function(e){return e.uuid}));E((0,V.gg)(e)).then((function(){return n(e,{limit:null==o?void 0:o.limit,filters:l})})).then(M(g))}},h.formatMessage(S?T.Z.deleteGroups:T.Z.deleteGroup)),s().createElement(c.Button,{key:"cancel",variant:"link",type:"button",onClick:x},h.formatMessage(T.Z.cancel))]},s().createElement(c.TextContent,null,S?s().createElement(c.Text,null,s().createElement(Ne.Z,(0,p.Z)({},T.Z.deletingGroupsRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},count:t.length}}))):Z?s().createElement(Be.Z0,null):s().createElement(c.Text,null,s().createElement(Ne.Z,(0,p.Z)({},T.Z.deletingGroupRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},name:y.name}}))))," ",s().createElement(c.Checkbox,{isChecked:R,onChange:function(){return w(!R)},label:h.formatMessage(T.Z.understandActionIrreversible),id:"delete-group-check"}))};Ae.defaultProps={groupsUuid:[],isModalOpen:!1,cancelUrl:Ze.Z.groups.path},Ae.propTypes={groupsUuid:h().array.isRequired,isModalOpen:h().bool,postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,cancelRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),submitRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})])};const Fe=Ae;var qe=r(91290),Ue=r(94184),Ve=r.n(Ue),ze=r(62410),We=r(94496),Qe=function(e){var t=e.id,r=e.uuid,n=e.bodyContent,o=(0,i.useState)(!1),u=(0,a.Z)(o,2),l=u[0],m=u[1],d=(0,i.useRef)(null);return s().createElement("span",{ref:d,key:"".concat(r,"-popover"),id:t},s().createElement(c.Popover,{zIndex:"110",position:"right",isVisible:l,shouldClose:function(){return m(!1)},hideOnOutsideClick:!0,bodyContent:n,appendTo:d.current},s().createElement(qe.ZP,{onClick:function(){return m(!l)},className:Ve()("pf-c-question-circle-icon",{"icon-active":l})})))};Qe.propTypes={id:h().string.isRequired,uuid:h().string.isRequired,bodyContent:h().string.isRequired};var Ke=r(38376),He=r(55140),Xe=function(e){var t=e.tabItems,r=e.isHeader,n=(0,u.useLocation)().pathname,a=(0,u.useNavigate)(),o=t.find((function(e){var t=e.name;return n.includes(t)}));return s().createElement(c.Tabs,{className:r?"rbac-page-header__tabs":"",activeKey:o?o.eventKey:0,onSelect:function(e,r){return a(t[r].to)}},t.map((function(e){return s().createElement(c.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};Xe.propTypes={tabItems:h().array.isRequired,isHeader:h().bool};const Ye=Xe;var Je=function(e){var t=e.closeUrl,r=(0,m.Z)(),n=(0,z.Z)(),o=(0,u.useParams)().groupId,l=(0,v.useDispatch)(),d=(0,i.useState)([]),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=function(){l((0,b.addNotification)({variant:"warning",title:r.formatMessage(p.length>1?T.Z.addingGroupMembersTitle:T.Z.addingGroupMemberTitle),dismissDelay:8e3,description:r.formatMessage(p.length>1?T.Z.addingGroupMembersCancelled:T.Z.addingGroupMemberCancelled)})),n(t)};return s().createElement(c.Modal,{title:r.formatMessage(T.Z.addMembers),variant:c.ModalVariant.medium,isOpen:!0,actions:[s().createElement(c.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:0===p.length,variant:"primary",onClick:function(){var e=p.map((function(e){return{username:e.label}}));e.length>0&&(l((0,b.addNotification)({variant:"info",title:r.formatMessage(e.length>1?T.Z.addingGroupMembersTitle:T.Z.addingGroupMemberTitle),dismissDelay:8e3,description:r.formatMessage(e.length>1?T.Z.addingGroupMembersDescription:T.Z.addingGroupMemberDescription)})),l((0,V.dy)(o,e)).then((function(){l((0,V.nd)(o)),l((0,V.bt)({usesMetaInURL:!0}))}))),n(t)}},r.formatMessage(T.Z.addToGroup)),s().createElement(c.Button,{id:"add-groups-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:h},r.formatMessage(T.Z.cancel))],onClose:h},s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(ge.Z,{linkDescription:r.formatMessage(T.Z.toManageUsersText)}))),s().createElement(c.StackItem,null,s().createElement(pe,{selectedUsers:p,setSelectedUsers:g,displayNarrow:!0}))))};Je.defaultProps={closeUrl:Ze.Z.groups.link},Je.propTypes={closeUrl:h().string};const $e=Je;var et=r(1227);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt=function(e){var t=e.groupReducer.selectedGroup;return{members:t.members.data,pagination:t.members.meta,groupName:t.name,admin_default:t.admin_default,platform_default:t.platform_default,isLoading:t.members.isLoading}},at=function(e,t,r){return s().createElement(Ne.Z,(0,p.Z)({},r?T.Z.removeMembersText:T.Z.removeMemberText,{values:{b:function(e){return s().createElement("b",null,e)},name:e,group:t}}))};const ot=function(){var e=(0,m.Z)(),t=(0,i.useState)(""),r=(0,a.Z)(t,2),o=r[0],f=r[1],p=(0,i.useState)([]),g=(0,a.Z)(p,2),h=g[0],b=g[1],y=(0,i.useState)(!1),Z=(0,a.Z)(y,2),E=Z[0],M=Z[1],O=(0,i.useState)((function(){return null})),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=(0,i.useState)({}),x=(0,a.Z)(S,2),C=x[0],j=x[1],P=(0,u.useParams)().groupId,D=(0,v.useSelector)(nt,v.shallowEqual),I=D.members,G=D.pagination,L=D.groupName,N=D.isLoading,_=D.admin_default,B=D.platform_default,A=(0,i.useContext)(se.Z),F=A.userAccessAdministrator,q=A.orgAdmin,U=(0,i.useRef)(q||F),W=[{title:e.formatMessage(T.Z.status),transforms:[l.nowrap]},{title:e.formatMessage(T.Z.username)},{title:e.formatMessage(T.Z.email)},{title:e.formatMessage(T.Z.lastName)},{title:e.formatMessage(T.Z.firstName)}],Q=(0,v.useDispatch)(),K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;Q((0,V.nd)(P,e,t))};(0,i.useEffect)((function(){K()}),[]),(0,i.useEffect)((function(){U.current=q||F}),[q,F]);var H=function(e){return Q((0,V.tz)(P,e)).then((function(){b([]),K(void 0,rt(rt({},G),{},{offset:0})),Q((0,V.bt)({usesMetaInURL:!0}))}))},X=((0,z.Z)(),(I||[]).map((function(e){return rt(rt({},e),{},{uuid:e.username})}))),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,m.Z)();return e.reduce((function(e,a){var o=a.is_active,i=a.username,u=a.email,l=a.first_name,m=a.last_name;return[].concat((0,n.Z)(e),[{uuid:i,username:i,cells:[{title:s().createElement(c.Label,{color:o&&"green"},r.formatMessage(o?T.Z.active:T.Z.inactive)),props:{data:{isActive:o}}},i,u,m,l],selected:t.find((function(e){return e.uuid===i}))}])}),[])}(X,h);return s().createElement(i.Fragment,null,s().createElement(et.Z,{text:C.text,title:C.title,confirmButtonLabel:C.confirmButtonLabel,isOpen:E,onClose:function(){return M(!1)},onSubmit:function(){M(!1),R()}}),s().createElement(d.Z,{type:"content",id:"tab-principals"},B||_?s().createElement(c.Card,null,s().createElement(c.CardBody,null,s().createElement(c.Bullseye,null,s().createElement(c.TextContent,null,s().createElement(c.Text,{component:c.TextVariants.h1},e.formatMessage(_?T.Z.allOrgAdminsAreMembers:T.Z.allUsersAreMembers)))))):s().createElement(oe.M,{data:X,isSelectable:U.current,rows:Y,columns:W,routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ze.Z["group-add-members"].path,element:s().createElement($e,{fetchData:K,closeUrl:Ze.Z["group-detail-members"].link.replace(":groupId",P)})}))},actionResolver:function(){return U.current?[{title:e.formatMessage(T.Z.remove),onClick:function(t,r,n){w((function(){return function(){return H([n.username.title])}})),j({title:e.formatMessage(T.Z.removeMemberQuestion),text:at(n.username.title,L,!1),confirmButtonLabel:e.formatMessage(T.Z.removeMember)}),M(!0)}}]:null},filterPlaceholder:e.formatMessage(T.Z.username).toLowerCase(),titlePlural:e.formatMessage(T.Z.members).toLowerCase(),titleSingular:e.formatMessage(T.Z.member),ouiaId:"members-table",pagination:G,filterValue:o,fetchData:function(e){var t=e.limit,r=e.offset,n=e.name;return K(n,{limit:t,offset:r})},setFilterValue:function(e){var t=e.name;return f(t)},checkedRows:h,isLoading:N,rowWrapper:ie.Z,setCheckedItems:function(e){b((function(t){return e(t)}))},toolbarButtons:function(){return(0,n.Z)(U.current?[s().createElement(We.Z,{to:Ze.Z["group-add-members"].link.replace(":groupId",P),key:"remove-from-group",className:"rbac-m-hide-on-sm"},s().createElement(c.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(T.Z.addMember))),{label:e.formatMessage(T.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){}},{label:e.formatMessage(T.Z.remove),props:{isDisabled:!h||!h.length>0,variant:"danger"},onClick:function(){var t=h.length>1,r=e.formatMessage(t?T.Z.removeMembersQuestion:T.Z.removeMemberQuestion);w((function(){return function(){return H(h.map((function(e){return e.uuid})))}})),j({title:r,confirmButtonLabel:r,text:at(t?h.length:h[0].uuid,L,t)}),M(!0)}}]:[])},emptyProps:{title:e.formatMessage(T.Z.noGroupMembers),description:[e.formatMessage(T.Z.addUserToConfigure),""]},tableId:"group-members"})),s().createElement(u.Outlet,null))};var it=r(57486),st=r(25924),ut=function(e){var t=e.title,r=e.text,n=e.onClose,o=e.onSubmit,u=e.isOpen,l=e.confirmButtonLabel,c=e.isDefault,m=e.isChanged,d=(0,i.useState)(!1),f=(0,a.Z)(d,2),p=f[0],g=f[1];return c&&!m&&p?s().createElement(st.Z,{isOpen:p&&u,onClose:function(){n(),g(!1)},onSubmit:function(){o()}}):s().createElement(et.Z,{text:r,title:t,isOpen:u,confirmButtonLabel:l,onClose:function(){n()},onSubmit:function(){g(!0),(!c||m)&&o()}})};ut.propTypes={text:h().node,title:h().node,confirmButtonLabel:h().string,onSubmit:h().func,onClose:h().func,isOpen:h().bool,isDefault:h().bool,isChanged:h().bool},ut.defaultProps={isDefault:!1,isChanged:!1};const lt=ut;function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null==t?void 0:t.reduce((function(t,a){var o=a.uuid,u=a.display_name,l=a.name,c=a.description,m=a.modified;return[].concat((0,n.Z)(t),[{uuid:o,title:u||l,cells:[s().createElement(i.Fragment,{key:"".concat(o,"-name")},s().createElement(We.Z,{to:Ze.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",o)},u||l)),c,s().createElement(i.Fragment,{key:"".concat(o,"-modified")},s().createElement(ze.Z,{date:m,type:(0,ne.mh)(m)}))],selected:Boolean(r&&r.find((function(e){return e.uuid===o})))}])}),[]))||[]},ft=function(e){return e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button"},pt=function(e,t,r){var n=(0,m.Z)(),a=s().createElement(c.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},n.formatMessage(T.Z.addRole));return e?s().createElement(c.Tooltip,{content:r||n.formatMessage(T.Z.allRolesAdded)},a):a},gt=function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.systemGroup;return{roles:r.roles,pagination:r.pagination||mt(mt({},ue.he),{},{count:(null==r?void 0:r.roles)&&r.roles.length}),isLoading:!r.loaded,name:r.name,isPlatformDefault:r.platform_default,isAdminDefault:r.admin_default,isChanged:!r.system,disableAddRoles:Object.keys(r.addRoles.pagination||{}).length>0?!(r.addRoles.pagination&&r.addRoles.pagination.count>0&&!r.admin_default):!!r.admin_default,systemGroupUuid:null==n?void 0:n.uuid}},ht=function(e){var t=e.onDefaultGroupChanged,r=(0,m.Z)(),o=(0,v.useDispatch)(),l=(0,z.Z)(),c=(0,u.useParams)().groupId,f=(0,i.useState)(""),g=(0,a.Z)(f,2),h=g[0],b=g[1],y=(0,i.useState)(""),Z=(0,a.Z)(y,2),E=Z[0],M=Z[1],O=(0,i.useState)([]),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=(0,i.useState)([]),x=(0,a.Z)(S,2),C=x[0],j=x[1],P=(0,i.useState)(!1),D=(0,a.Z)(P,2),I=D[0],G=D[1],L=(0,i.useState)((function(){return null})),N=(0,a.Z)(L,2),_=N[0],B=N[1],A=(0,i.useState)({}),F=(0,a.Z)(A,2),q=F[0],U=F[1],W=(0,i.useContext)(se.Z),Q=W.userAccessAdministrator,K=W.orgAdmin,H=(0,i.useRef)(K||Q),X=(0,v.useSelector)(gt),Y=X.roles,J=X.pagination,$=X.isLoading,ee=X.name,te=X.isPlatformDefault,re=X.isAdminDefault,ne=X.isChanged,ae=X.disableAddRoles,ie=X.systemGroupUuid,ue=function(e,t){return e.payload.then(t),e},le=function(e){return o((0,V.nr)(e,{},{}))},ce=function(e){return o((0,V.yi)(null!=e?e:c))},me=function(){return o((0,V.WD)())},de=function(e,t,r){return o(ue((0,V.W3)(e,t),r))},fe=function(e){return function(t,r){return o((0,V.nV)(t,e,r))}},pe=[{title:r.formatMessage(T.Z.name),orderBy:"name"},{title:r.formatMessage(T.Z.description)},{title:r.formatMessage(T.Z.lastModified)}];(0,i.useEffect)((function(){"default-access"!==c?fe(J)(c):ie&&fe(J)(ie)}),[ie]),(0,i.useEffect)((function(){(null==Y?void 0:Y.length)>0&&("default-access"!==c?le(c):ie&&le(ie))}),[Y]),(0,i.useEffect)((function(){H.current=K||Q}),[K,Q]);var ge=function(e,t,r){return s().createElement("p",null,s().createElement(Ne.Z,(0,p.Z)({},r?T.Z.removeRolesModalText:T.Z.removeRoleModalText,{values:mt({b:function(e){return s().createElement("b",null,e)},name:e},r?{roles:t}:{role:t})})))},he="default-access"!==c?c:ie,ve=function(){te?me().then((function(e){var t=e.value.data;fe(mt(mt({},J),{},{offset:0}))(t[0].uuid)})):fe(mt(mt({},J),{},{offset:0}))(c)};return s().createElement(s().Fragment,null,s().createElement(lt,{text:q.text,title:q.title,isOpen:I,isChanged:ne,isDefault:te||re,confirmButtonLabel:q.confirmButtonLabel,onClose:function(){return G(!1)},onSubmit:function(){G(!1),_(),w([]),t(te&&!ne)}}),s().createElement(d.Z,{type:"content",id:"tab-roles"},s().createElement(oe.M,{columns:pe,isSelectable:H.current&&!re,rows:dt(c,Y,R),data:Y,filterValue:E,fetchData:function(e){fe(e)(he)},emptyFilters:{name:"",description:""},setFilterValue:function(e){var t=e.name,r=e.description;void 0!==t&&M(t),void 0!==r&&b(r)},isLoading:$,pagination:J,checkedRows:R,setCheckedItems:function(e){w((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:r.formatMessage(T.Z.roles).toLowerCase(),titleSingular:r.formatMessage(T.Z.role),toolbarButtons:function(){return(0,n.Z)(H.current&&!re?[s().createElement(We.Z,{className:"rbac-m-hide-on-sm rbac-c-button__add-role".concat(ae&&"-disabled"),to:Ze.Z["group-add-roles"].link.replace(":groupId",c),key:"add-to-group"},pt(ae,ft(ee||""),re&&r.formatMessage(T.Z.defaultGroupNotManually))),{label:r.formatMessage(T.Z.addRole),props:{isDisabled:ae,className:"rbac-m-hide-on-md"},onClick:function(){return l(Ze.Z["group-add-roles"].link.replace(":groupId",c))}},{label:r.formatMessage(T.Z.remove),props:{isDisabled:!R||!R.length>0,variant:"danger"},onClick:function(){var e=R.length>1;B((function(){return function(){return de(he,R.map((function(e){return e.uuid})),ve)}})),U({title:r.formatMessage(e?T.Z.removeRolesQuestion:T.Z.removeRoleQuestion),confirmButtonLabel:r.formatMessage(e?T.Z.removeRoles:T.Z.removeRole),text:ge(ee,e?R.length:Y.find((function(e){return e.uuid===R[0].uuid})).name,e)}),G(!0)}}]:[])},actionResolver:function(){return(0,n.Z)(H.current&&!re?[{title:r.formatMessage(T.Z.remove),onClick:function(e,t,n){B((function(){return function(){return de(he,[n.uuid],ve)}})),U({title:r.formatMessage(T.Z.removeRoleQuestion),confirmButtonLabel:r.formatMessage(T.Z.removeRole),text:ge(ee,n.title,!1)}),G(!0)}}]:[])},routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ze.Z["group-add-roles"].path,element:s().createElement(it.Z,{afterSubmit:function(){te||re?me().then((function(e){var t=e.value.data;fe(J)(t[0].uuid),ce(t[0].uuid)})):(fe(J)(c),ce())},fetchUuid:ie,selectedRoles:C,setSelectedRoles:j,closeUrl:Ze.Z["group-detail"].link.replace(":groupId",te?"default-access":c),addRolesToGroup:function(e,t,r){return o(ue((0,V.Wj)(e,t),r))},groupName:ee,isDefault:te||re,isChanged:ne,onDefaultGroupChanged:t})}))},ouiaId:"roles-table",emptyProps:{title:r.formatMessage(T.Z.noGroupRoles),description:[r.formatMessage(re?T.Z.contactServiceTeamForRoles:T.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:E},{key:"description",value:h}],tableId:"group-roles"})),s().createElement(u.Outlet,null))};ht.propTypes={searchFilter:h().string,selectedRoles:h().array,pagination:h().shape({limit:h().number.isRequired,offset:h().number.isRequired,count:h().number}),onDefaultGroupChanged:h().func},ht.defaultProps={pagination:ue.eX,selectedRoles:[]};const vt=ht;var bt=r(74368),yt=r(76137);function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=function(e){var t=e.onDelete,r=(0,m.Z)(),n=(0,v.useDispatch)(),o=(0,z.Z)(),l=(0,u.useLocation)(),d=(0,He.Z)(),f=(0,u.useParams)().groupId,g="default-access"===f,h=[{eventKey:0,title:"Roles",name:Ze.Z["group-detail-roles"].link.replace(":groupId",f),to:"roles"},{eventKey:1,title:"Members",name:Ze.Z["group-detail-members"].link.replace(":groupId",f),to:"members"}],b=(0,v.useSelector)((function(e){var t=e.groupReducer,r=t.groups,n=t.error,a=t.systemGroup;return{pagination:r.pagination||r.meta,filters:r.filters,groupExists:n!==ne.VG,systemGroupUuid:null==a?void 0:a.uuid}}),v.shallowEqual),y=b.pagination,Z=b.filters,E=b.groupExists,O=b.systemGroupUuid,k=(0,v.useSelector)((function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.isRecordLoading,a=t.isRecordRolesLoading;return{group:r,isFetching:n||a}}),v.shallowEqual),R=k.group,w=k.isFetching,S=(0,i.useState)(!1),x=(0,a.Z)(S,2),C=x[0],j=x[1],P=(0,i.useState)(!1),D=(0,a.Z)(P,2),I=D[0],G=D[1],L=(0,i.useState)(!1),N=(0,a.Z)(L,2),_=N[0],B=N[1];(0,i.useEffect)((function(){n((0,V.WD)());var e=g?O:f;return e&&(n((0,V.yi)(e)),d.appObjectId(e)),function(){return d.appObjectId(void 0)}}),[f,O]);var A,F=function(){return[{title:r.formatMessage(T.Z.groups),to:(0,ne.zk)((0,We.n)(Ze.Z.groups.link),y,Z)},E?{title:w?void 0:R.name,isActive:!0}:{title:r.formatMessage(T.Z.invalidGroup),isActive:!0}]},q=[s().createElement(c.DropdownItem,{component:s().createElement(We.Z,{onClick:function(){return G(!1)},to:(l.pathname.includes("members")?Ze.Z["group-detail-members-edit"]:Ze.Z["group-detail-roles-edit"]).link.replace(":groupId",g?"default-access":f)},r.formatMessage(T.Z.edit)),key:"edit-group"}),s().createElement(c.DropdownItem,{component:s().createElement(We.Z,{onClick:function(){return t(f)},to:(l.pathname.includes("members")?Ze.Z["group-detail-members-remove"]:Ze.Z["group-detail-roles-remove"]).link.replace(":groupId",f)},r.formatMessage(T.Z.delete)),className:"rbac-c-group__action",key:"delete-group"})],U=g?O:f;return s().createElement(i.Fragment,null,C&&s().createElement(M.R,{type:"group",isOpen:C,customTitle:s().createElement("div",null,r.formatMessage(T.Z.restoreDefaultAccessQuestion)),customDescription:s().createElement(Ne.Z,(0,p.Z)({},T.Z.restoreDefaultAccessDescription,{values:{b:function(e){return s().createElement("b",null,e)}}})),customPrimaryButtonTitle:r.formatMessage(T.Z.continue),customSecondaryButtonTitle:r.formatMessage(T.Z.cancel),onModalCancel:function(){return j(!1)},onConfirmCancel:function(){n((0,V.gg)([O])).then((function(){return n((0,V.WD)()).then((function(){B(!1)}))})),j(!1),o(Ze.Z["group-detail-roles"].link).replace(":groupId","default-access")}}),E?s().createElement(i.Fragment,null,s().createElement(Ke.Q,{breadcrumbs:F()},s().createElement(c.Split,{hasGutter:!0},s().createElement(c.SplitItem,{isFilled:!0},s().createElement(Ke.y,{title:!w&&R?s().createElement(i.Fragment,null,R.platform_default&&!R.system?(A=R.name,s().createElement("div",{style:{display:"inline-flex"}},A,s().createElement("div",{className:"pf-u-ml-sm"},s().createElement(c.Popover,{"aria-label":"default-group-icon",bodyContent:s().createElement(Ne.Z,(0,p.Z)({},T.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(qe.ZP,{className:"rbac-default-group-info-icon"}))))):R.name):void 0,description:!w&&R?R.description:void 0})),R.platform_default&&!R.system?s().createElement(c.SplitItem,null,s().createElement("div",{className:"rbac-default-group-reset-btn"},s().createElement(c.Button,{variant:"link",onClick:function(){return j(!0)}},r.formatMessage(T.Z.restoreToDefault)),s().createElement(c.Popover,{"aria-label":"default-group-icon",position:c.PopoverPosition.bottomEnd,bodyContent:s().createElement(Ne.Z,(0,p.Z)({},T.Z.restoreDefaultAccessInfo,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(qe.ZP,{className:"rbac-default-group-info-icon pf-u-mt-sm"})))):null,s().createElement(c.SplitItem,null,R.platform_default||R.admin_default?null:s().createElement(c.Dropdown,{ouiaId:"group-title-actions-dropdown",toggle:s().createElement(c.KebabToggle,{onToggle:function(e){return G(e)},id:"group-actions-dropdown"}),isOpen:I,isPlain:!0,position:"right",dropdownItems:q}))),_?s().createElement(c.Alert,{variant:"info",isInline:!0,title:r.formatMessage(T.Z.defaultAccessGroupChanged),action:s().createElement(c.AlertActionCloseButton,{onClose:function(){return B(!1)}}),className:"pf-u-mb-lg pf-u-mt-sm"},s().createElement(Ne.Z,(0,p.Z)({},T.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))):null),s().createElement(Ye,{isHeader:!0,tabItems:h}),s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ze.Z["group-detail-roles"].path,element:s().createElement(vt,{onDefaultGroupChanged:B})},s().createElement(u.Route,{path:Ze.Z["group-detail-roles-remove"].path,element:s().createElement(Fe,{postMethod:function(){return n((0,V.bt)(Et(Et({},y),{},{offset:0,filters:Z,usesMetaInURL:!0})))},cancelRoute:(0,We.n)(Ze.Z["group-detail-roles"].link.replace(":groupId",f)),submitRoute:(0,ne.zk)((0,We.n)(Ze.Z.groups.link),Et(Et({},y),{},{offset:0}),Z),isModalOpen:!0,groupsUuid:[R]})}),s().createElement(u.Route,{path:Ze.Z["group-detail-roles-edit"].path,element:s().createElement(Le,{group:R,cancelRoute:(0,We.n)(Ze.Z["group-detail-roles"].link.replace(":groupId",f)),postMethod:function(){return n((0,V.yi)(U))}})})),s().createElement(u.Route,{path:Ze.Z["group-detail-members"].path,element:s().createElement(ot,null)},s().createElement(u.Route,{path:Ze.Z["group-detail-members-remove"].path,element:s().createElement(Fe,{postMethod:function(){return n((0,V.bt)(Et(Et({},y),{},{offset:0,filters:Z,usesMetaInURL:!0})))},cancelRoute:(0,We.n)(Ze.Z["group-detail-members"].link.replace(":groupId",f)),submitRoute:(0,ne.zk)((0,We.n)(Ze.Z.groups.link),Et(Et({},y),{},{offset:0}),Z),isModalOpen:!0,groupsUuid:[R]})}),s().createElement(u.Route,{path:Ze.Z["group-detail-members-edit"].path,element:s().createElement(Le,{group:R,cancelRoute:(0,We.n)(Ze.Z["group-detail-members"].link.replace(":groupId",f)),postMethod:function(){return n((0,V.yi)(U))}})})),s().createElement(u.Route,{path:"/*",element:s().createElement(vt,{onDefaultGroupChanged:B})})),!R&&s().createElement(Be.Wi,null)):s().createElement(i.Fragment,null,s().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},s().createElement(yt.Z,F())),s().createElement(bt.Z,{title:r.formatMessage(T.Z.groupNotFound),description:[r.formatMessage(T.Z.groupDoesNotExist,{id:f})],actions:[s().createElement(c.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return o(-1)}},r.formatMessage(T.Z.backToPreviousPage))]})))};Mt.propTypes={onDelete:h().func};const Ot=Mt;var kt=r(15608),Rt=r(93351),wt=r(93327);function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ct=function(){var e=(0,m.Z)(),t=(0,v.useDispatch)(),r=(0,u.useNavigate)(),o=(0,u.useLocation)(),f=(0,He.Z)(),p=function(e){return t((0,V.bt)(xt(xt({},e),{},{usesMetaInURL:!0})))},g=(0,i.useContext)(se.Z),h=g.orgAdmin,b=g.userAccessAdministrator,y=h||b,Z=(0,i.useRef)(null),E=[{title:e.formatMessage(T.Z.name),key:"name",transforms:[l.sortable]},{title:e.formatMessage(T.Z.roles)},{title:e.formatMessage(T.Z.members)},{title:e.formatMessage(T.Z.lastModified),key:"modified",transforms:[l.sortable]}],M=(0,i.useState)({index:Number(y),direction:"asc"}),O=(0,a.Z)(M,2),k=O[0],R=O[1],w="".concat("desc"===(null==k?void 0:k.direction)?"-":"").concat(E[(null==k?void 0:k.index)-Number(y)].key),S=(0,v.useSelector)((function(e){var t,r,a,o,i=e.groupReducer,s=i.groups,u=s.data,l=s.filters,c=s.pagination,m=i.isLoading,d=i.adminGroup,f=i.systemGroup;return{groups:[].concat((0,n.Z)(null!=d&&null!==(t=d.name)&&void 0!==t&&t.match(new RegExp(l.name,"i"))?[d]:[]),(0,n.Z)(null!=f&&null!==(r=f.name)&&void 0!==r&&r.match(new RegExp(l.name,"i"))?[f]:[]),(0,n.Z)((null==u?void 0:u.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.platform_default,r=e.admin_default;return!(t||r)})))||[])),pagination:{limit:null!==(a=null==c?void 0:c.limit)&&void 0!==a?a:(h?ue.HE:ue.he).limit,offset:null!==(o=null==c?void 0:c.offset)&&void 0!==o?o:(h?ue.HE:ue.he).offset,count:null==c?void 0:c.count,redirected:null==c?void 0:c.redirected},filters:l,isLoading:m,systemGroup:f}}),v.shallowEqual),x=S.groups,C=S.pagination,j=S.filters,P=S.isLoading,D=S.systemGroup,I=(0,i.useState)((null==j?void 0:j.name)||""),G=(0,a.Z)(I,2),L=G[0],N=G[1],_=(0,i.useState)([]),B=(0,a.Z)(_,2),A=B[0],F=B[1],q=(0,i.useState)([]),U=(0,a.Z)(q,2),z=U[0],W=U[1];(0,i.useEffect)((function(){(0,ue.oG)(o,r,C.limit,C.offset)}),[C.offset,C.limit,C.count,C.redirected]),(0,i.useEffect)((function(){var e=(0,ue.rj)(o,r,C),n=e.limit,a=e.offset,i=(0,le.aX)(o,r,["name"],{name:L}).name;N(i),f.appNavClick({id:"groups",secondaryNav:!0}),p({limit:n,offset:a,orderBy:w,filters:{name:i}}),t((0,V.fB)(i)),t((0,V.WD)(i))}),[]),(0,i.useEffect)((function(){o.pathname.includes("detail")?(0,ne.Gw)(o,r):((0,ue.Zc)(o)||(0,ue.oG)(o,r,C.limit,C.offset),(null==L?void 0:L.length)>0&&!(0,le.qF)(o,["name"])&&(0,le.aX)(o,r,["name"],{name:L}))}),[o.pathname]);var Q=x.map((function(e){return e.platform_default||e.admin_default?xt(xt({},e),{},{principalCount:"All".concat(e.admin_default?" org admins":"")}):e})),K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,m.Z)();return t.reduce((function(t,o){var u=o.uuid,l=o.name,c=o.roleCount,m=o.principalCount,d=o.modified,f=o.platform_default,p=o.admin_default;return[].concat((0,n.Z)(t),[{uuid:u,isAdminDefault:p,isPlatformDefault:f,cells:[s().createElement(i.Fragment,{key:u},s().createElement("div",{className:"pf-m-inline-flex"},e?s().createElement(We.Z,{key:"".concat(u,"-link"),state:{uuid:u},to:Ze.Z["group-detail"].link.replace(":groupId",f?"default-access":u)},l):l,(f||p)&&s().createElement(Qe,{id:"default".concat(p?"-admin":"","-group-popover"),uuid:u,key:"".concat(u,"-popover"),bodyContent:a.formatMessage(p?T.Z.orgAdminInheritedRoles:T.Z.usersInheritedRoles)}))),c,m,s().createElement(i.Fragment,{key:"".concat(u,"-modified")},s().createElement(ze.Z,{date:d,type:(0,ne.mh)(d)}))],selected:Boolean(r&&r.find((function(e){return e.uuid===u})))}])}),[])}(y,Q,A);return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ze.Z["group-detail-role-detail"].path,element:s().createElement(wt.Z,{pageAction:"role-detail"},s().createElement(kt.Z,null))}),s().createElement(u.Route,{path:Ze.Z["group-detail"].path,element:s().createElement(wt.Z,{pageAction:"group-detail"},s().createElement(Ot,{defaultUuid:null==D?void 0:D.uuid,onDelete:function(e){N(""),F(A.filter((function(t){return t.uuid!=e})))}}))}),s().createElement(u.Route,{path:"/*",element:s().createElement(wt.Z,{pageAction:"group-list"},s().createElement(c.Stack,{className:"rbac-c-groups"},s().createElement(c.StackItem,null,s().createElement(Ke.Q,{paddingBottom:!0},s().createElement(Ke.y,{title:e.formatMessage(T.Z.groups)}))),s().createElement(c.StackItem,null,s().createElement(d.Z,{type:"content",id:"tab-groups"},s().createElement(oe.M,{data:x,rows:K,sortBy:k,onSort:function(e,t,n){var a="".concat("desc"===n?"-":"").concat(E[t-Number(y)].key);R({index:t,direction:n}),(0,le.MS)(o,r,{name:L}),p(xt(xt({},C),{},{orderBy:a,filters:{name:L}}))},columns:E,isSelectable:y,checkedRows:A,setCheckedItems:function(e){F((function(t){return e(t).filter((function(e){var t=e.platform_default,r=e.admin_default;return!(t||r)})).map((function(e){return{uuid:e.uuid,label:e.name}}))}))},routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ze.Z["add-group"].path,element:s().createElement(je,{pagination:C,filters:j,orderBy:w,postMethod:function(e){N(""),p(e)}})}),s().createElement(u.Route,{path:Ze.Z["edit-group"].path,element:s().createElement(Le,{pagination:C,filters:j,postMethod:function(e){N(""),p(xt(xt({},e),{},{orderBy:w}))},cancelRoute:(0,ne.zk)("../",C,j),submitRoute:(0,ne.zk)("../",xt(xt({},C),{},{offset:0}),j)})}),s().createElement(u.Route,{path:Ze.Z["remove-group"].path,element:s().createElement(Fe,{pagination:C,filters:j,postMethod:function(e,t){p(xt(xt({},t),{},{orderBy:w})),N(""),F(A.filter((function(t){return!e.includes(t.uuid)})))},cancelRoute:(0,ne.zk)("../",C,j),submitRoute:(0,ne.zk)("../",xt(xt({},C),{},{offset:0}),j),isModalOpen:!0,groupsUuid:z})}))},actionResolver:function(t){var n=t.isPlatformDefault,a=t.isAdminDefault;return n||a||!y?null:[{title:e.formatMessage(T.Z.edit),onClick:function(e,t,n){return r((0,We.n)(Ze.Z["edit-group"].link).replace(":groupId",n.uuid))}},{title:e.formatMessage(T.Z.delete),onClick:function(e,t,n){W([n]),r((0,We.n)(Ze.Z["remove-group"].link))}}]},titlePlural:e.formatMessage(T.Z.groups).toLowerCase(),titleSingular:e.formatMessage(T.Z.group).toLowerCase(),ouiaId:"groups-table",pagination:C,filterValue:L,fetchData:function(e){var t=e.name,n=e.count,a=e.limit,i=e.offset,s=e.orderBy;return(0,le.MS)(o,r,{name:t}),p({count:n,limit:a,offset:i,orderBy:s,filters:{name:t}})},setFilterValue:function(e){var t=e.name;return N(void 0===t?"":t)},toolbarButtons:function(){return(0,n.Z)(y?[s().createElement(We.Z,{to:Ze.Z["add-group"].link,key:"add-group",className:"rbac-m-hide-on-sm"},s().createElement(c.Button,{ouiaId:"create-group-button",variant:"primary","aria-label":"Create group"},e.formatMessage(T.Z.createGroup))),{label:e.formatMessage(T.Z.createGroup),props:{className:"rbac-m-hide-on-md"},onClick:function(){return r((0,We.n)(Ze.Z["add-group"].link))}},{label:e.formatMessage(T.Z.edit),props:{isDisabled:!(1===A.length)},onClick:function(){return r((0,We.n)(Ze.Z["edit-group"].link.replace(":groupId",A[0].uuid)))}},{label:e.formatMessage(T.Z.delete),props:{isDisabled:!A.length>0},onClick:function(){W(A),r((0,We.n)(Ze.Z["remove-group"].link))}}]:[])},isLoading:!P&&0===(null==x?void 0:x.length)&&0===(null==L?void 0:L.length)||P,filterPlaceholder:e.formatMessage(T.Z.name).toLowerCase(),rowWrapper:Rt.Z,tableId:"groups",textFilterRef:Z})))))}))}}}]);
//# sourceMappingURL=../sourcemaps/9197.54b1d8728ea5f5513e7c2066fd2c58f5.js.map