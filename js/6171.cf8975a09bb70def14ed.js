/*! For license information please see 6171.cf8975a09bb70def14ed.js.LICENSE.txt */
"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[6171,7664],{91290:(e,t,n)=>{n.d(t,{ZP:()=>i,iC:()=>o,sN:()=>a});var r=n(40400);const a={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},o=(0,r.IU)(a),i=o},46441:(e,t,n)=>{n.d(t,{Z:()=>c});n(71002);var r=n(76857),a=n(92950),o=n.n(a),i=n(45697),u=n.n(i),s=(n(27361),n(48880));u().oneOfType([u().string,u().func,u().object]),u().func.isRequired,u().node.isRequired,u().bool,u().func.isRequired,u().node.isRequired,u().func.isRequired;var l=function(e){var t=e.renderNextButton,n=e.disableBack,i=e.handlePrev,u=e.buttonLabels,l=u.cancel,c=u.back,m=e.context,d=(0,s.default)(),f=(0,a.useContext)(m),p=f.success,g=f.error,h=f.submitting;return p||void 0===g||g||h?null:o().createElement(a.Fragment,null,t(),o().createElement(r.Button,{type:"button",variant:"secondary",isDisabled:n,onClick:i},c),o().createElement(r.Button,{type:"button",variant:"link",onClick:d.onCancel},l))};l.propTypes={disableBack:u().bool,handlePrev:u().func.isRequired,handleNext:u().func.isRequired,nextStep:u().oneOfType([u().string,u().shape({when:u().string.isRequired,stepMapper:u().object.isRequired}),u().func]),buttonLabels:u().shape({submit:u().node.isRequired,cancel:u().node.isRequired,back:u().node.isRequired,next:u().node.isRequired}).isRequired,context:u().object.isRequired,renderNextButton:u().func};const c=l},65731:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(92950),a=n.n(r),o=n(76857),i=n(70363),u=n(43047),s=n(86896),l=n(45697),c=n.n(l),m=n(30893),d=function(e){var t=e.context,n=e.title,l=e.text,c=(0,s.Z)(),d=(0,r.useContext)(i.default).jumpToStep,f=(0,r.useContext)(t).setWizardError;return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.large},a().createElement(o.EmptyStateIcon,{color:"red",icon:u.ZP}),a().createElement(o.Title,{headingLevel:"h4",size:"lg"},n),a().createElement(o.EmptyStateBody,null,l),a().createElement(o.Button,{onClick:function(){f(void 0),d(0)},variant:"primary"},c.formatMessage(m.Z.returnToStepNumber,{number:1})))};d.propTypes={context:c().object.isRequired,title:c().string.isRequired,text:c().string.isRequired};const f=d},46929:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Mt});var r=n(87462),a=n(93433),o=n(29439),i=n(4942),u=n(92950),s=n.n(u),l=n(334),c=n(1936),m=n(76857),d=n(45987),f=n(28216),p=n(71355),g=n(93025),h=n(67850),v=n(52817),b=n(73943),y=n(64124),Z=n(96354),E=n(86896),M=n(45697),O=n.n(M),k=n(48880),R=n(71002),w=n(15861),x=n(89168),S=n(40639),C=n(28412),T=n(82644),D=n(29558),P=n(30893),j=n(2034);function G(){G=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new O(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var u=Z(i,n);if(u){if(u===c)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function m(){}function d(){}function f(){}var p={};u(p,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(k([])));h&&h!==t&&n.call(h,a)&&(p=h);var v=f.prototype=m.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,u){var s=l(e[a],e,o);if("throw"!==s.type){var c=s.arg,m=c.value;return m&&"object"==(0,R.Z)(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(m).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(s.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function Z(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=f,u(v,"constructor",f),u(f,"constructor",d),d.displayName=u(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),u(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),u(v,i,"Generator"),u(v,a,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}var L=function(){var e=(0,w.Z)(G().mark((function e(t,n,r){var a,o,i,u,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,T.Sn)(),u=(0,D.d)({locale:C.locale,messages:j},i),t){e.next=4;break}return e.abrupt("return",void 0);case 4:if(!(t.length>150)){e.next=6;break}throw u.formatMessage(P.Z.maxCharactersWarning,{number:150});case 6:return e.next=8,(0,x.bt)({limit:10,offset:0,filters:{name:t},nameMatch:"exact"}).catch((function(e){console.error(e)}));case 8:if(s=e.sent,!(r?null==s||null===(a=s.data)||void 0===a?void 0:a.some((function(e){return e[n]!==r})):(null==s||null===(o=s.data)||void 0===o?void 0:o.length)>0)){e.next=11;break}throw u.formatMessage(P.Z.nameAlreadyTaken);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=(0,S.Z)((function(e,t,n){return L(e,t,n)})),I=n(65731);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t,n=e.formFields,r=(0,E.Z)(),a=(0,u.useContext)(de),o=a.submitting,i=a.error,l=a.setWizardError,c=(0,k.default)().getState;return(0,u.useEffect)((function(){l(void 0),L(c().values["group-name"]).then((function(){return l(!1)})).catch((function(){return l(!0)}))}),[]),void 0===i||o?s().createElement(m.Bullseye,null,s().createElement(m.Spinner,{size:"xl"})):!0===i?s().createElement(I.Z,{context:de,title:r.formatMessage(P.Z.groupNameTakenTitle),text:r.formatMessage(P.Z.groupNameTakenText)}):s().createElement(s().Fragment,null,s().createElement(m.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},r.formatMessage(P.Z.reviewDetails)),[[B({},null==n||null===(t=n[0])||void 0===t?void 0:t[0])]])};A.propTypes={formFields:O().array};const q=A;var F=n(46441),U=n(19756),V=n(41693),z=n(92607),H=n(23393),W=n(59775),Q=function(e,t){return void 0===e||t?"error":"default"},K=function(e){return(null==e?void 0:e.length)>150?"error":"default"},X=function(e){var t=(0,E.Z)(),n=(0,V.Z)(e).input,r=(0,k.default)(),a=r.getState().values,i=a["group-name"],l=a["group-description"],c=(0,u.useState)(i||""),d=(0,o.Z)(c,2),f=d[0],p=d[1],g=(0,u.useState)(),h=(0,o.Z)(g,2),v=h[0],b=h[1],y=(0,u.useState)(l),Z=(0,o.Z)(y,2),M=Z[0],O=Z[1],R=function(e){n.onChange(void 0),N(e).then((function(){n.onChange(e),b(void 0)})).catch((function(e){b(e)})),p(e)};return(0,u.useEffect)((function(){(null==f?void 0:f.length)>0&&R(f)}),[]),s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(W.c,{label:t.formatMessage(P.Z.groupName),helperTextInvalid:f?v:t.formatMessage(P.Z.required),isRequired:!0,validated:Q(f,v)},s().createElement(z.oi,{value:f,type:"text",validated:Q(f,v),onBlur:function(){return""===f&&p(void 0)},onChange:function(e){return R(e)},"aria-label":"Group name"}))),s().createElement(m.StackItem,null,s().createElement(W.c,{label:t.formatMessage(P.Z.groupDescription),helperTextInvalid:t.formatMessage(P.Z.maxCharactersWarning,{number:150}),validated:K(M)},s().createElement(H.Kx,{value:M,validated:K(M),onChange:function(e){O(e),r.change("group-description",e)},"aria-label":"Group description",resizeOrientation:"vertical"}))))};X.propTypes={name:O().string,description:O().string,groups:O().array};const Y=X;var J=n(97384),$=function(e){var t=(0,E.Z)(),n=(0,u.useState)([]),r=(0,o.Z)(n,2),a=r[0],i=r[1],l=(0,V.Z)(e).input,c=(0,k.default)();return(0,u.useEffect)((function(){i(c.getState().values["roles-list"]||[])}),[]),(0,u.useEffect)((function(){l.onChange(a),c.change("roles-list",a)}),[a]),s().createElement(u.Fragment,null,s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,null,s().createElement(m.TextContent,null,s().createElement(m.Text,null,t.formatMessage(P.Z.selectRolesForGroupText)))),s().createElement(m.StackItem,null,s().createElement(m.FormGroup,{fieldId:"select-role"},s().createElement(J.Z,{selectedRoles:a,setSelectedRoles:i,rolesExcluded:!1})))))};$.propTypes={selectedRoles:O().array,setSelectedRoles:O().func,title:O().string,description:O().string};const ee=$;var te=n(98033),ne=n(82916),re=function(e){var t=(0,u.useState)([]),n=(0,o.Z)(t,2),r=n[0],a=n[1],i=(0,V.Z)(e).input,l=(0,E.Z)(),c=(0,k.default)();return(0,u.useEffect)((function(){a(c.getState().values["users-list"]||[])}),[]),(0,u.useEffect)((function(){i.onChange(r),c.change("users-list",r)}),[r]),s().createElement(u.Fragment,null,s().createElement(m.Form,null,s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,null,s().createElement(m.TextContent,null,s().createElement(ne.Z,{linkDescription:l.formatMessage(P.Z.toManageUsersText)}))),s().createElement(m.StackItem,null,s().createElement(m.FormGroup,{fieldId:"select-user"},s().createElement(m.Card,null,s().createElement(te.Z,{selectedUsers:r,setSelectedUsers:a,inModal:!0})))))))};re.propTypes={selectedUsers:O().array,setSelectedUsers:O().func,title:O().string,description:O().string};const ae=re;var oe=function(){var e=(0,E.Z)(),t=(0,k.default)().getState().values,n=t["group-name"],r=t["group-description"],a=t["users-list"],o=t["roles-list"];return s().createElement("div",{className:"rbac"},s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,null,s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(m.Grid,null,s().createElement(m.GridItem,{md:3},s().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(P.Z.groupName))),s().createElement(m.GridItem,{md:9},s().createElement(m.Text,{component:m.TextVariants.p},n))),s().createElement(m.Grid,null,s().createElement(m.GridItem,{md:3},s().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(P.Z.groupDescription))),s().createElement(m.GridItem,{md:9},s().createElement(m.Text,{component:m.TextVariants.p},r))),s().createElement(m.Grid,null,s().createElement(m.GridItem,{md:3},s().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(P.Z.roles))),s().createElement(m.GridItem,{md:9},s().createElement(m.Text,{component:m.TextVariants.p},o.map((function(e,t){return s().createElement(m.Text,{className:"pf-u-mb-0",key:t},e.label)}))))),s().createElement(m.Grid,null,s().createElement(m.GridItem,{md:3},s().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(P.Z.members))),s().createElement(m.GridItem,{md:9},s().createElement(m.Text,{component:m.TextVariants.p},a.map((function(e,t){return s().createElement(m.Text,{className:"pf-u-mb-0",key:t},e.label)}))))))))))};oe.propTypes={name:O().string,description:O().string,groups:O().array};const ie=oe;var ue=n(11107),se=n(4682),le=["Content"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=(0,u.createContext)({success:!1,submitting:!1,error:void 0}),fe=function(e){return s().createElement(h.ZP,(0,r.Z)({},e,{showFormControls:!1}))},pe=function(e){var t=e.Content,n=(0,d.Z)(e,le);return s().createElement(t,n)};pe.propTypes={Content:O().elementType.isRequired};var ge={description:pe,"set-name":Y,"set-roles":ee,"set-users":ae,"summary-content":ie},he=function(e,t,n){return function(r){n(r),Object.keys(r).length>0?t(!0):e()}},ve=function(e){var t=e.postMethod,n=e.pagination,a=e.filters,i=e.orderBy,c=(0,f.useDispatch)(),m=(0,E.Z)(),d=(0,u.useRef)(function(){var e=(0,T.Sn)(),t=(0,D.d)({locale:C.locale,messages:j},e);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:t.formatMessage(P.Z.createGroup),fields:[{name:"name-and-description",nextStep:"add-roles",title:t.formatMessage(P.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:y.Z.REQUIRED}]},{component:Z.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:y.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:t.formatMessage(P.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:"review",title:t.formatMessage(P.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},{name:"review",title:t.formatMessage(P.Z.reviewDetails),buttons:function(e){return s().createElement(F.Z,(0,r.Z)({},e,{context:de}))},StepTemplate:q,fields:[{component:"summary-content",name:"summary-content"}]}]}]}}()),h=(0,l.useHistory)().push,M=(0,u.useState)(!1),O=(0,o.Z)(M,2),k=O[0],R=O[1],w=(0,u.useState)({}),x=(0,o.Z)(w,2),S=x[0],G=x[1],L=(0,u.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),N=(0,o.Z)(L,2),I=N[0],_=N[1],B=function(){c((0,p.addNotification)({variant:"warning",title:m.formatMessage(P.Z.addingGroupTitle),dismissDelay:8e3,description:m.formatMessage(P.Z.addingGroupCanceledDescription)})),h({pathname:se.Z.groups.path,search:(0,ue.GT)(me({page:1,per_page:n.limit},a))})};return k?s().createElement(b.R,{type:"group",isOpen:k,onModalCancel:function(){return R(!1)},onConfirmCancel:B}):s().createElement(de.Provider,{value:me(me({},I),{},{setWizardError:function(e){return _((function(t){return me(me({},t),{},{error:e})}))},setWizardSuccess:function(e){return _((function(t){return me(me({},t),{},{success:e})}))},setHideForm:function(e){return _((function(t){return me(me({},t),{},{hideForm:e})}))}})},s().createElement(g.Z,{schema:d.current,subscription:{values:!0},FormTemplate:fe,componentMapper:me(me({},v.ZP),ge),onSubmit:function(e){var r={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((function(e){return{username:e.label}})),roles_list:e["roles-list"].map((function(e){return e.uuid}))};h({pathname:se.Z.groups.path,search:(0,ue.GT)({page:1,per_page:n.limit})}),c((0,U.Rp)(r)).then((function(){return t({limit:n.limit,offset:0,orderBy:i,filters:{}})})).then((function(){c((0,p.addNotification)({variant:"success",title:m.formatMessage(P.Z.addGroupSuccessTitle),dismissDelay:8e3,description:m.formatMessage(P.Z.addGroupSuccessDescription)}))}))},initialValues:S,onCancel:he(B,R,G)}))};ve.propTypes={postMethod:O().func,pagination:O().shape({limit:O().number.isRequired}).isRequired,filters:O().object.isRequired,orderBy:O().string};const be=ve;var ye=n(40483),Ze=n(36457);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){var t=e.postMethod,n=e.pagination,a=e.filters,i=e.cancelRoute,c=e.submitRoute,d=void 0===c?i:c,g=e.group,h=e.onClose,b=(0,E.Z)(),M=(0,u.useState)(void 0),O=(0,o.Z)(M,2),k=O[0],R=O[1],w=(0,l.useHistory)().push,x=(0,l.useRouteMatch)("/groups/edit/:id"),S=function(e){R(e)},C=(0,f.useDispatch)();(0,u.useEffect)((function(){x&&(0,U.yi)(x.params.id).payload.then((function(e){return S(e)})).catch((function(){return S(void 0)}))}),[]),(0,u.useEffect)((function(){R(g)}),[g]);var T=function(){C((0,p.addNotification)({variant:"warning",dismissDelay:8e3,title:b.formatMessage(k?P.Z.editingGroupTitle:P.Z.addingGroupTitle),description:b.formatMessage(k?P.Z.editGroupCanceledDescription:P.Z.addingGroupCanceledDescription)})),h(),w(i)},D={fields:[Me(Me({name:"name",label:b.formatMessage(P.Z.name),component:k?Z.Z.TEXT_FIELD:"skeleton"},k?{validateOnMount:!0}:{}),{},{validate:[{type:"validate-group-name",id:x?x.params.id:g.uuid,idKey:"uuid"},{type:y.Z.REQUIRED}]}),{name:"description",label:b.formatMessage(P.Z.description),component:k?Z.Z.TEXTAREA:"skeleton",validate:[{type:y.Z.MAX_LENGTH,threshold:150}]}]},j={"validate-group-name":function(e){var t=e.idKey,n=e.id;return function(e){return N(e,t,n)}}};return s().createElement(Ze.Z,{schema:D,componentMapper:Me(Me({},v.ZP),{},{skeleton:m.Skeleton}),onCancel:T,onSubmit:function(e){var r={uuid:e.uuid,description:e.description||null,name:e.name};t?C((0,U.mD)(r)).then((function(){return t({limit:null==n?void 0:n.limit,filters:a})})).then(w(d)):C((0,U.mD)(r)).then((function(){return w(d)}))},validatorMapper:j,initialValues:Me({},k),FormTemplate:function(e){return s().createElement(ye.Z,(0,r.Z)({},e,{ModalProps:{onClose:T,isOpen:!0,variant:"medium",title:b.formatMessage(P.Z.editGroupInfo)}}))}})};Oe.defaultProps={cancelRoute:se.Z.groups.path,onClose:function(){return null}},Oe.propTypes={postMethod:O().func,pagination:O().shape({limit:O().number.isRequired}).isRequired,filters:O().object.isRequired,cancelRoute:O().oneOfType([O().string,O().shape({pathname:O().string.isRequired,search:O().string,hash:O().string})]),submitRoute:O().oneOfType([O().string,O().shape({pathname:O().string.isRequired,search:O().string,hash:O().string})]),group:O().object,onClose:O().func};const ke=Oe;var Re=n(69957),we=n(19571),xe=n(44012),Se=function(e){var t=e.groupsUuid,n=e.isModalOpen,a=e.postMethod,i=e.pagination,c=e.filters,d=e.cancelRoute,p=e.submitRoute,g=void 0===p?d:p,h=(0,E.Z)(),v=(0,f.useSelector)((function(e){var t=e.groupReducer.selectedGroup;return{group:t,isLoading:!t.loaded}}),f.shallowEqual),b=v.group,y=v.isLoading,Z=(0,f.useDispatch)();(0,u.useEffect)((function(){1===t.length&&Z((0,U.yi)(t[0].uuid))}),[]);var M=(0,l.useHistory)().push,O=(0,u.useState)(!1),k=(0,o.Z)(O,2),R=k[0],w=k[1],x=t.length>1,S=function(){return M(d)};return s().createElement(m.Modal,{className:"rbac",isOpen:n,variant:m.ModalVariant.small,title:s().createElement(m.Text,null,s().createElement(Re.ZP,{className:"delete-group-warning-icon"}),"  ",h.formatMessage(x?P.Z.deleteGroupsQuestion:P.Z.deleteGroupQuestion)),onClose:S,actions:[s().createElement(m.Button,{key:"submit",isDisabled:!R,variant:"danger",type:"button",onClick:function(){var e=t.map((function(e){return e.uuid}));Z((0,U.gg)(e)).then((function(){return a(e,{limit:null==i?void 0:i.limit,filters:c})})).then(M(g))}},h.formatMessage(x?P.Z.deleteGroups:P.Z.deleteGroup)),s().createElement(m.Button,{key:"cancel",variant:"link",type:"button",onClick:S},h.formatMessage(P.Z.cancel))]},s().createElement(m.TextContent,null,x?s().createElement(m.Text,null,s().createElement(xe.Z,(0,r.Z)({},P.Z.deletingGroupsRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},count:t.length}}))):y?s().createElement(we.Z0,null):s().createElement(m.Text,null,s().createElement(xe.Z,(0,r.Z)({},P.Z.deletingGroupRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},name:b.name}}))))," ",s().createElement(m.Checkbox,{isChecked:R,onChange:function(){return w(!R)},label:h.formatMessage(P.Z.understandActionIrreversible),id:"delete-group-check"}))};Se.defaultProps={groupsUuid:[],isModalOpen:!1,cancelUrl:se.Z.groups.path},Se.propTypes={groupsUuid:O().array.isRequired,isModalOpen:O().bool,postMethod:O().func,pagination:O().shape({limit:O().number.isRequired}).isRequired,filters:O().object.isRequired,cancelRoute:O().oneOfType([O().string,O().shape({pathname:O().string.isRequired,search:O().string,hash:O().string})]),submitRoute:O().oneOfType([O().string,O().shape({pathname:O().string.isRequired,search:O().string,hash:O().string})])};const Ce=Se;var Te=n(41800),De=n(62410),Pe=n(91290),je=n(94184),Ge=n.n(je),Le=function(e){var t=e.id,n=e.uuid,r=e.bodyContent,a=(0,u.useState)(!1),i=(0,o.Z)(a,2),l=i[0],c=i[1],d=(0,u.useRef)(null);return s().createElement("span",{ref:d,key:"".concat(n,"-popover"),id:t},s().createElement(m.Popover,{zIndex:"110",position:"right",isVisible:l,shouldClose:function(){return c(!1)},hideOnOutsideClick:!0,bodyContent:r,appendTo:d.current},s().createElement(Pe.ZP,{onClick:function(){return c(!l)},className:Ge()("pf-c-question-circle-icon",{"icon-active":l})})))};Le.propTypes={id:O().string.isRequired,uuid:O().string.isRequired,bodyContent:O().string.isRequired};var Ne=n(55140),Ie=function(e){var t=e.history.push,n=e.location.pathname,r=e.tabItems,a=e.isHeader,o=r.find((function(e){var t=e.name;return n.includes(t)}));return s().createElement(m.Tabs,{className:a?"rbac-page-header__tabs":"",activeKey:o?o.eventKey:0,onSelect:function(e,n){return t(r[n].name)}},r.map((function(e){return s().createElement(m.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};Ie.propTypes={location:O().shape({pathname:O().string.isRequired}),history:O().shape({push:O().func.isRequired}),tabItems:O().array.isRequired,isHeader:O().bool};const _e=(0,l.withRouter)(Ie);var Be=n(38376),Ae=function(e){var t=e.closeUrl,n=(0,l.useParams)().uuid,r=(0,l.useHistory)().push,a=(0,f.useDispatch)(),i=(0,E.Z)(),c=(0,u.useState)([]),d=(0,o.Z)(c,2),g=d[0],h=d[1],v=function(){a((0,p.addNotification)({variant:"warning",title:i.formatMessage(g.length>1?P.Z.addingGroupMembersTitle:P.Z.addingGroupMemberTitle),dismissDelay:8e3,description:i.formatMessage(g.length>1?P.Z.addingGroupMembersCancelled:P.Z.addingGroupMemberCancelled)})),r(t)};return s().createElement(m.Modal,{title:i.formatMessage(P.Z.addMembers),variant:m.ModalVariant.medium,isOpen:!0,actions:[s().createElement(m.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:0===g.length,variant:"primary",onClick:function(){var e=g.map((function(e){return{username:e.label}}));e.length>0&&(a((0,p.addNotification)({variant:"info",title:i.formatMessage(e.length>1?P.Z.addingGroupMembersTitle:P.Z.addingGroupMemberTitle),dismissDelay:8e3,description:i.formatMessage(e.length>1?P.Z.addingGroupMembersDescription:P.Z.addingGroupMemberDescription)})),a((0,U.dy)(n,e)).then((function(){a((0,U.nd)(n)),a((0,U.bt)({inModal:!1}))}))),r(t)}},i.formatMessage(P.Z.addToGroup)),s().createElement(m.Button,{id:"add-groups-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:v},i.formatMessage(P.Z.cancel))],onClose:v},s().createElement(m.Stack,{hasGutter:!0},s().createElement(m.StackItem,null,s().createElement(m.TextContent,null,s().createElement(ne.Z,{linkDescription:i.formatMessage(P.Z.toManageUsersText)}))),s().createElement(m.StackItem,null,s().createElement(te.Z,{selectedUsers:g,setSelectedUsers:h,inModal:!0}))))};Ae.defaultProps={closeUrl:"/groups"},Ae.propTypes={closeUrl:O().string};const qe=Ae;var Fe=n(44873),Ue=n(1227),Ve=n(88093),ze=n(26794);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=function(e){var t=e.groupReducer.selectedGroup;return{members:t.members.data,pagination:t.members.meta,groupName:t.name,admin_default:t.admin_default,platform_default:t.platform_default,isLoading:t.members.isLoading}},Ke=function(e,t,n){return s().createElement(xe.Z,(0,r.Z)({},n?P.Z.removeMembersText:P.Z.removeMemberText,{values:{b:function(e){return s().createElement("b",null,e)},name:e,group:t}}))};const Xe=function(){var e=(0,E.Z)(),t=(0,u.useState)(""),n=(0,o.Z)(t,2),i=n[0],d=n[1],p=(0,u.useState)([]),g=(0,o.Z)(p,2),h=g[0],v=g[1],b=(0,u.useState)(!1),y=(0,o.Z)(b,2),Z=y[0],M=y[1],O=(0,u.useState)((function(){return null})),k=(0,o.Z)(O,2),R=k[0],w=k[1],x=(0,u.useState)({}),S=(0,o.Z)(x,2),C=S[0],T=S[1],D=(0,l.useParams)().uuid,j=(0,f.useSelector)(Qe,f.shallowEqual),G=j.members,L=j.pagination,N=j.groupName,I=j.isLoading,_=j.admin_default,B=j.platform_default,A=(0,u.useContext)(ze.Z),q=A.userAccessAdministrator,F=A.orgAdmin,V=(0,u.useRef)(F||q),z=[{title:e.formatMessage(P.Z.status),transforms:[c.nowrap]},{title:e.formatMessage(P.Z.username)},{title:e.formatMessage(P.Z.email)},{title:e.formatMessage(P.Z.lastName)},{title:e.formatMessage(P.Z.firstName)}],H=(0,f.useDispatch)(),W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;H((0,U.nd)(D,e,t))};(0,u.useEffect)((function(){W()}),[]),(0,u.useEffect)((function(){V.current=F||q}),[F,q]);var Q=function(e){return H((0,U.tz)(D,e)).then((function(){v([]),W(void 0,We(We({},L),{},{offset:0})),H((0,U.bt)({inModal:!1}))}))},K=(0,l.useHistory)(),X=(G||[]).map((function(e){return We(We({},e),{},{uuid:e.username})})),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,E.Z)();return e.reduce((function(e,r){var o=r.is_active,i=r.username,u=r.email,l=r.first_name,c=r.last_name;return[].concat((0,a.Z)(e),[{uuid:i,username:i,cells:[{title:s().createElement(m.Label,{color:o&&"green"},n.formatMessage(o?P.Z.active:P.Z.inactive)),props:{data:{isActive:o}}},i,u,c,l],selected:t.find((function(e){return e.uuid===i}))}])}),[])}(X,h);return s().createElement(u.Fragment,null,s().createElement(Ue.Z,{text:C.text,title:C.title,confirmButtonLabel:C.confirmButtonLabel,isOpen:Z,onClose:function(){return M(!1)},onSubmit:function(){M(!1),R()}}),s().createElement(Fe.Z,{type:"content",id:"tab-principals"},B||_?s().createElement(m.Card,null,s().createElement(m.CardBody,null,s().createElement(m.Bullseye,null,s().createElement(m.TextContent,null,s().createElement(m.Text,{component:m.TextVariants.h1},e.formatMessage(_?P.Z.allOrgAdminsAreMembers:P.Z.allUsersAreMembers)))))):s().createElement(Te.M,{data:X,isSelectable:V.current,rows:Y,columns:z,routes:function(){return s().createElement(u.Fragment,null,s().createElement(l.Route,{path:se.Z["group-add-members"].path,render:function(e){return s().createElement(qe,(0,r.Z)({fetchData:W,closeUrl:"/groups/detail/".concat(D,"/members")},e))}}))},actionResolver:function(){return V.current?[{title:e.formatMessage(P.Z.remove),onClick:function(t,n,r){w((function(){return function(){return Q([r.username.title])}})),T({title:e.formatMessage(P.Z.removeMemberQuestion),text:Ke(r.username.title,N,!1),confirmButtonLabel:e.formatMessage(P.Z.removeMember)}),M(!0)}}]:null},filterPlaceholder:e.formatMessage(P.Z.username).toLowerCase(),titlePlural:e.formatMessage(P.Z.members).toLowerCase(),titleSingular:e.formatMessage(P.Z.member),ouiaId:"members-table",pagination:L,filterValue:i,fetchData:function(e){var t=e.limit,n=e.offset,r=e.name;return W(r,{limit:t,offset:n})},setFilterValue:function(e){var t=e.name;return d(t)},checkedRows:h,isLoading:I,rowWrapper:Ve.Z,setCheckedItems:function(e){v((function(t){return e(t)}))},toolbarButtons:function(){return(0,a.Z)(V.current?[s().createElement(l.Link,{to:"/groups/detail/".concat(D,"/members/add-members"),key:"remove-from-group",className:"rbac-m-hide-on-sm"},s().createElement(m.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(P.Z.addMember))),{label:e.formatMessage(P.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){K.push("/groups/detail/".concat(D,"/members/add-members"))}},{label:e.formatMessage(P.Z.remove),props:{isDisabled:!h||!h.length>0,variant:"danger"},onClick:function(){var t=h.length>1,n=e.formatMessage(t?P.Z.removeMembersQuestion:P.Z.removeMemberQuestion);w((function(){return function(){return Q(h.map((function(e){return e.uuid})))}})),T({title:n,confirmButtonLabel:n,text:Ke(t?h.length:h[0].uuid,N,t)}),M(!0)}}]:[])},emptyProps:{title:e.formatMessage(P.Z.noGroupMembers),description:[e.formatMessage(P.Z.addUserToConfigure),""]},tableId:"group-members"})))};var Ye=n(61338),Je=n(57486),$e=n(25924),et=function(e){var t=e.title,n=e.text,r=e.onClose,a=e.onSubmit,i=e.isOpen,l=e.confirmButtonLabel,c=e.isDefault,m=e.isChanged,d=(0,u.useState)(!1),f=(0,o.Z)(d,2),p=f[0],g=f[1];return c&&!m&&p?s().createElement($e.Z,{isOpen:p&&i,onClose:function(){r(),g(!1)},onSubmit:function(){a()}}):s().createElement(Ue.Z,{text:n,title:t,isOpen:i,confirmButtonLabel:l,onClose:function(){r()},onSubmit:function(){g(!0),(!c||m)&&a()}})};et.propTypes={text:O().node,title:O().node,confirmButtonLabel:O().string,onSubmit:O().func,onClose:O().func,isOpen:O().bool,isDefault:O().bool,isChanged:O().bool},et.defaultProps={isDefault:!1,isChanged:!1};const tt=et;function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null==t?void 0:t.reduce((function(t,r){var o=r.uuid,i=r.display_name,c=r.name,m=r.description,d=r.modified;return[].concat((0,a.Z)(t),[{uuid:o,title:i||c,cells:[s().createElement(u.Fragment,{key:"".concat(o,"-name")},s().createElement(l.Link,{to:"/groups/detail/".concat(e,"/roles/detail/").concat(o)},i||c)),m,s().createElement(u.Fragment,{key:"".concat(o,"-modified")},s().createElement(De.Z,{date:d,type:(0,ue.mh)(d)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===o})))}])}),[]))||[]},ot=function(e){return e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button"},it=function(e,t,n){var r=(0,E.Z)(),a=s().createElement(m.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},r.formatMessage(P.Z.addRole));return e?s().createElement(m.Tooltip,{content:n||r.formatMessage(P.Z.allRolesAdded)},a):a},ut=function(e){var t=e.groupReducer,n=t.selectedGroup,r=t.systemGroup;return{roles:n.roles,pagination:n.pagination||rt(rt({},Ye.he),{},{count:(null==n?void 0:n.roles)&&n.roles.length}),isLoading:!n.loaded,name:n.name,isPlatformDefault:n.platform_default,isAdminDefault:n.admin_default,isChanged:!n.system,disableAddRoles:!(n.addRoles.pagination&&n.addRoles.pagination.count>0&&!n.admin_default),systemGroupUuid:null==r?void 0:r.uuid}},st=function(e){var t=e.onDefaultGroupChanged,n=(0,E.Z)(),i=(0,f.useDispatch)(),c=(0,l.useHistory)(),m=(0,l.useParams)().uuid,d=(0,u.useState)(""),p=(0,o.Z)(d,2),g=p[0],h=p[1],v=(0,u.useState)(""),b=(0,o.Z)(v,2),y=b[0],Z=b[1],M=(0,u.useState)([]),O=(0,o.Z)(M,2),k=O[0],R=O[1],w=(0,u.useState)([]),x=(0,o.Z)(w,2),S=x[0],C=x[1],T=(0,u.useState)(!1),D=(0,o.Z)(T,2),j=D[0],G=D[1],L=(0,u.useState)((function(){return null})),N=(0,o.Z)(L,2),I=N[0],_=N[1],B=(0,u.useState)({}),A=(0,o.Z)(B,2),q=A[0],F=A[1],V=(0,u.useContext)(ze.Z),z=V.userAccessAdministrator,H=V.orgAdmin,W=(0,u.useRef)(H||z),Q=(0,f.useSelector)(ut),K=Q.roles,X=Q.pagination,Y=Q.isLoading,J=Q.name,$=Q.isPlatformDefault,ee=Q.isAdminDefault,te=Q.isChanged,ne=Q.disableAddRoles,re=Q.systemGroupUuid,ae=function(e,t){return e.payload.then(t),e},oe=function(e){return i((0,U.nr)(e,{},{}))},ie=function(e){return i((0,U.yi)(null!=e?e:m))},ue=function(){return i((0,U.WD)())},le=function(e,t,n){return i(ae((0,U.W3)(e,t),n))},ce=function(e){return function(t,n){return i((0,U.nV)(t,e,n))}},me=[{title:n.formatMessage(P.Z.name),orderBy:"name"},{title:n.formatMessage(P.Z.description)},{title:n.formatMessage(P.Z.lastModified)}];(0,u.useEffect)((function(){"default-access"!==m?ce(X)(m):re&&ce(X)(re)}),[re]),(0,u.useEffect)((function(){(null==K?void 0:K.length)>0&&("default-access"!==m?oe(m):re&&oe(re))}),[K]),(0,u.useEffect)((function(){W.current=H||z}),[H,z]);var de=function(e,t,n){return s().createElement("p",null,s().createElement(xe.Z,(0,r.Z)({},n?P.Z.removeRolesModalText:P.Z.removeRoleModalText,{values:rt({b:function(e){return s().createElement("b",null,e)},name:e},n?{roles:t}:{role:t})})))},fe="default-access"!==m?m:re,pe=function(){$?ue().then((function(e){var t=e.value.data;ce(rt(rt({},X),{},{offset:0}))(t[0].uuid)})):ce(rt(rt({},X),{},{offset:0}))(m)};return s().createElement(s().Fragment,null,s().createElement(tt,{text:q.text,title:q.title,isOpen:j,isChanged:te,isDefault:$||ee,confirmButtonLabel:q.confirmButtonLabel,onClose:function(){return G(!1)},onSubmit:function(){G(!1),I(),R([]),t($&&!te)}}),s().createElement(Fe.Z,{type:"content",id:"tab-roles"},s().createElement(Te.M,{columns:me,isSelectable:W.current&&!ee,rows:at(m,K,k),data:K,filterValue:y,fetchData:function(e){ce(e)(fe)},emptyFilters:{name:"",description:""},setFilterValue:function(e){var t=e.name,n=e.description;void 0!==t&&Z(t),void 0!==n&&h(n)},isLoading:Y,pagination:X,checkedRows:k,setCheckedItems:function(e){R((function(t){return e(t).map((function(e){var t=e.uuid,n=e.name;return{uuid:t,label:e.label||n}}))}))},titlePlural:n.formatMessage(P.Z.roles).toLowerCase(),titleSingular:n.formatMessage(P.Z.role),toolbarButtons:function(){return(0,a.Z)(W.current&&!ee?[s().createElement(l.Link,{className:"rbac-m-hide-on-sm rbac-c-button__add-role".concat(ne&&"-disabled"),to:"/groups/detail/".concat(m,"/roles/add-roles"),key:"add-to-group"},it(ne,ot(J||""),ee&&n.formatMessage(P.Z.defaultGroupNotManually))),{label:n.formatMessage(P.Z.addRole),props:{isDisabled:ne,className:"rbac-m-hide-on-md"},onClick:function(){return c.push("/groups/detail/".concat(m,"/roles/add-roles"))}},{label:n.formatMessage(P.Z.remove),props:{isDisabled:!k||!k.length>0,variant:"danger"},onClick:function(){var e=k.length>1;_((function(){return function(){return le(fe,k.map((function(e){return e.uuid})),pe)}})),F({title:n.formatMessage(e?P.Z.removeRolesQuestion:P.Z.removeRoleQuestion),confirmButtonLabel:n.formatMessage(e?P.Z.removeRoles:P.Z.removeRole),text:de(J,e?k.length:K.find((function(e){return e.uuid===k[0].uuid})).name,e)}),G(!0)}}]:[])},actionResolver:function(){return(0,a.Z)(W.current&&!ee?[{title:n.formatMessage(P.Z.remove),onClick:function(e,t,r){_((function(){return function(){return le(fe,[r.uuid],pe)}})),F({title:n.formatMessage(P.Z.removeRoleQuestion),confirmButtonLabel:n.formatMessage(P.Z.removeRole),text:de(J,r.title,!1)}),G(!0)}}]:[])},routes:function(){return s().createElement(u.Fragment,null,s().createElement(l.Route,{path:se.Z["group-add-roles"].path,render:function(e){return s().createElement(Je.Z,(0,r.Z)({afterSubmit:function(){$||ee?ue().then((function(e){var t=e.value.data;ce(X)(t[0].uuid),ie(t[0].uuid)})):(ce(X)(m),ie())},fetchUuid:re,selectedRoles:S,setSelectedRoles:C,closeUrl:"/groups/detail/".concat($?"default-access":m,"/roles"),addRolesToGroup:function(e,t,n){return i(ae((0,U.Wj)(e,t),n))},groupName:J,isDefault:$||ee,isChanged:te,onDefaultGroupChanged:t},e))}}))},ouiaId:"roles-table",emptyProps:{title:n.formatMessage(P.Z.noGroupRoles),description:[n.formatMessage(ee?P.Z.contactServiceTeamForRoles:P.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:y},{key:"description",value:g}],tableId:"group-roles"})))};st.propTypes={searchFilter:O().string,selectedRoles:O().array,pagination:O().shape({limit:O().number.isRequired,offset:O().number.isRequired,count:O().number}),onDefaultGroupChanged:O().func},st.defaultProps={pagination:Ye.eX,selectedRoles:[]};const lt=st;var ct=n(67643),mt=n(76137);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=function(e){var t=e.match.params.uuid,n=e.onDelete,a=(0,E.Z)(),i=(0,f.useDispatch)(),c=(0,l.useHistory)(),d=(0,l.useLocation)(),p=(0,Ne.Z)(),g="default-access"===t,h=[{eventKey:0,title:a.formatMessage(P.Z.roles),name:"/groups/detail/".concat(t,"/roles")},{eventKey:1,title:a.formatMessage(P.Z.members),name:"/groups/detail/".concat(t,"/members")}],v=(0,f.useSelector)((function(e){var t=e.groupReducer,n=t.groups,r=t.error,a=t.systemGroup;return{pagination:n.pagination||n.meta,filters:n.filters,groupExists:r!==ue.VG,systemGroupUuid:null==a?void 0:a.uuid}}),f.shallowEqual),y=v.pagination,Z=v.filters,M=v.groupExists,O=v.systemGroupUuid,k=(0,f.useSelector)((function(e){var t=e.groupReducer,n=t.selectedGroup,r=t.isRecordLoading,a=t.isRecordRolesLoading;return{group:n,isFetching:r||a}}),f.shallowEqual),R=k.group,w=k.isFetching,x=(0,u.useState)(!1),S=(0,o.Z)(x,2),C=S[0],T=S[1],D=(0,u.useState)(!1),j=(0,o.Z)(D,2),G=j[0],L=j[1],N=(0,u.useState)(!1),I=(0,o.Z)(N,2),_=I[0],B=I[1];(0,u.useEffect)((function(){i((0,U.WD)());var e=g?O:t;return e&&(i((0,U.yi)(e)),p.appObjectId(e)),function(){return p.appObjectId(void 0)}}),[t,O]);var A,q=function(){return[{title:a.formatMessage(P.Z.groups),to:(0,ue.zk)(se.Z.groups.path,y,Z)},M?{title:w?void 0:R.name,isActive:!0}:{title:a.formatMessage(P.Z.invalidGroup),isActive:!0}]},F=[s().createElement(m.DropdownItem,{component:s().createElement(l.Link,{onClick:function(){return L(!1)},to:(d.pathname.includes("members")?se.Z["group-detail-members-edit"]:se.Z["group-detail-roles-edit"]).path.replace(":uuid",g?"default-access":t)},a.formatMessage(P.Z.edit)),key:"edit-group"}),s().createElement(m.DropdownItem,{component:s().createElement(l.Link,{onClick:function(){return n(t)},to:function(){return(d.pathname.includes("members")?se.Z["group-detail-members-remove"]:se.Z["group-detail-roles-remove"]).path.replace(":uuid",t)}},a.formatMessage(P.Z.delete)),className:"rbac-c-group__action",key:"delete-group"})],V=g?O:t;return s().createElement(u.Fragment,null,C&&s().createElement(b.R,{type:"group",isOpen:C,customTitle:s().createElement("div",null,a.formatMessage(P.Z.restoreDefaultAccessQuestion)),customDescription:s().createElement(xe.Z,(0,r.Z)({},P.Z.restoreDefaultAccessDescription,{values:{b:function(e){return s().createElement("b",null,e)}}})),customPrimaryButtonTitle:a.formatMessage(P.Z.continue),customSecondaryButtonTitle:a.formatMessage(P.Z.cancel),onModalCancel:function(){return T(!1)},onConfirmCancel:function(){i((0,U.gg)([O])).then((function(){return i((0,U.WD)()).then((function(){B(!1)}))})),T(!1),c.push("/groups/detail/default-access/roles")}}),M?s().createElement(u.Fragment,null,s().createElement(Be.Q,{breadcrumbs:q()},s().createElement(m.Split,{hasGutter:!0},s().createElement(m.SplitItem,{isFilled:!0},s().createElement(Be.y,{title:!w&&R?s().createElement(u.Fragment,null,R.platform_default&&!R.system?(A=R.name,s().createElement("div",{style:{display:"inline-flex"}},A,s().createElement("div",{className:"pf-u-ml-sm"},s().createElement(m.Popover,{"aria-label":"default-group-icon",bodyContent:s().createElement(xe.Z,(0,r.Z)({},P.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(Pe.ZP,{className:"rbac-default-group-info-icon"}))))):R.name):void 0,description:!w&&R?R.description:void 0})),R.platform_default&&!R.system?s().createElement(m.SplitItem,null,s().createElement("div",{className:"rbac-default-group-reset-btn"},s().createElement(m.Button,{variant:"link",onClick:function(){return T(!0)}},a.formatMessage(P.Z.restoreToDefault)),s().createElement(m.Popover,{"aria-label":"default-group-icon",position:m.PopoverPosition.bottomEnd,bodyContent:s().createElement(xe.Z,(0,r.Z)({},P.Z.restoreDefaultAccessInfo,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(Pe.ZP,{className:"rbac-default-group-info-icon pf-u-mt-sm"})))):null,s().createElement(m.SplitItem,null,R.platform_default||R.admin_default?null:s().createElement(m.Dropdown,{ouiaId:"group-title-actions-dropdown",toggle:s().createElement(m.KebabToggle,{onToggle:function(e){return L(e)},id:"group-actions-dropdown"}),isOpen:G,isPlain:!0,position:"right",dropdownItems:F}))),_?s().createElement(m.Alert,{variant:"info",isInline:!0,title:a.formatMessage(P.Z.defaultAccessGroupChanged),action:s().createElement(m.AlertActionCloseButton,{onClose:function(){return B(!1)}}),className:"pf-u-mb-lg pf-u-mt-sm"},s().createElement(xe.Z,(0,r.Z)({},P.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))):null),s().createElement(_e,{isHeader:!0,tabItems:h}),s().createElement(l.Route,{path:[se.Z["group-detail-roles-remove"].path,se.Z["group-detail-members-remove"].path],render:function(e){return s().createElement(Ce,(0,r.Z)({},e,{postMethod:function(){i((0,U.bt)(ft(ft({},y),{},{offset:0,filters:Z,inModal:!1})))},cancelRoute:"group/detail/".concat(t),submitRoute:(0,ue.zk)(se.Z.groups.path,ft(ft({},y),{},{offset:0}),Z),isModalOpen:!0,groupsUuid:[R]}))}}),s().createElement(l.Route,{path:[se.Z["group-detail-roles-edit"].path,se.Z["group-detail-members-edit"].path],render:function(e){return s().createElement(ke,(0,r.Z)({},e,{group:R,cancelRoute:"group/detail/".concat(t),postMethod:function(){return(0,U.yi)(V)}}))}}),s().createElement(l.Route,{path:se.Z["group-detail-roles"].path,render:function(e){return s().createElement(lt,(0,r.Z)({},e,{onDefaultGroupChanged:B}))}}),s().createElement(l.Route,{path:se.Z["group-detail-members"].path,component:Xe}),s().createElement(l.Route,{render:function(){return s().createElement(l.Redirect,{to:"/groups/detail/".concat(t,"/roles")})}}),!R&&s().createElement(we.Wi,null)):s().createElement(u.Fragment,null,s().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},s().createElement(mt.Z,q())),s().createElement(ct.Z,{title:a.formatMessage(P.Z.groupNotFound),description:[a.formatMessage(P.Z.groupDoesNotExist,{id:t})],actions:[s().createElement(m.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return c.goBack()}},a.formatMessage(P.Z.backToPreviousPage))]})))};pt.propTypes={match:O().object,onDelete:O().func};const gt=pt;var ht=n(15608),vt=n(93351),bt=n(93327),yt=n(92758);function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mt=function(){var e=(0,E.Z)(),t=(0,f.useDispatch)(),n=(0,l.useHistory)(),d=function(e){return t((0,U.bt)(Et(Et({},e),{},{inModal:!1})))},p=(0,u.useContext)(ze.Z),g=p.orgAdmin,h=p.userAccessAdministrator,v=g||h,b=(0,u.useRef)(null),y=[{title:e.formatMessage(P.Z.name),key:"name",transforms:[c.sortable]},{title:e.formatMessage(P.Z.roles)},{title:e.formatMessage(P.Z.members)},{title:e.formatMessage(P.Z.lastModified),key:"modified",transforms:[c.sortable]}],Z=(0,u.useState)({index:Number(v),direction:"asc"}),M=(0,o.Z)(Z,2),O=M[0],k=M[1],R="".concat("desc"===(null==O?void 0:O.direction)?"-":"").concat(y[(null==O?void 0:O.index)-Number(v)].key),w=(0,f.useSelector)((function(e){var t,n,r,o=e.groupReducer,i=o.groups,u=o.isLoading,s=o.adminGroup,l=o.systemGroup;return{groups:[].concat((0,a.Z)(null!=s&&null!==(t=s.name)&&void 0!==t&&t.match(new RegExp(i.filters.name,"i"))?[s]:[]),(0,a.Z)(null!=l&&null!==(n=l.name)&&void 0!==n&&n.match(new RegExp(i.filters.name,"i"))?[l]:[]),(0,a.Z)((null==i||null===(r=i.data)||void 0===r?void 0:r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.platform_default,n=e.admin_default;return!(t||n)})))||[])),meta:(null==i?void 0:i.pagination)||(null==i?void 0:i.meta),filters:null==i?void 0:i.filters,isLoading:u,systemGroup:l}}),f.shallowEqual),x=w.groups,S=w.meta,C=w.filters,T=w.isLoading,D=w.systemGroup,j=(0,u.useState)(Et(Et({},g?Ye.HE:Ye.he),S)),G=(0,o.Z)(j,2),L=G[0],N=G[1],I=(0,u.useState)(C.name||""),_=(0,o.Z)(I,2),B=_[0],A=_[1],q=(0,u.useState)([]),F=(0,o.Z)(q,2),V=F[0],z=F[1],H=(0,u.useState)([]),W=(0,o.Z)(H,2),Q=W[0],K=W[1];(0,u.useEffect)((function(){var e=(0,Ye.rj)(n,L);N(e);var r=(0,yt.aX)(n,["name"],{name:B}).name;A(r),insights.chrome.appNavClick({id:"groups",secondaryNav:!0}),d(Et(Et({},e),{},{orderBy:R,filters:{name:r}})),t((0,U.fB)(r)),t((0,U.WD)(r))}),[]),(0,u.useEffect)((function(){(0,Ye.Zc)(n)||(0,Ye.oG)(n,L.limit,L.offset),(null==B?void 0:B.length)>0&&!(0,yt.qF)(n,["name"])&&(0,yt.aX)(n,["name"],{name:B})})),(0,u.useEffect)((function(){L.redirected&&(0,Ye.oG)(n,L.limit,L.offset)}),[L.redirected]),(0,u.useEffect)((function(){A(C.name),N(Et(Et({},L),S))}),[C,S]);var X=function(e){z((function(t){return e(t).filter((function(e){var t=e.platform_default,n=e.admin_default;return!(t||n)})).map((function(e){return{uuid:e.uuid,label:e.name}}))}))},Y=function(){return s().createElement(u.Fragment,null,s().createElement(l.Route,{exact:!0,path:se.Z["add-group"].path},s().createElement(be,{pagination:L,filters:C,orderBy:R,postMethod:function(e){d(e),A("")}})),s().createElement(l.Route,{exact:!0,path:se.Z["group-edit"].path},s().createElement(ke,{pagination:L,filters:C,postMethod:function(e){d(Et(Et({},e),{},{orderBy:R}))},cancelRoute:(0,ue.zk)(se.Z.groups.path,L,C),submitRoute:(0,ue.zk)(se.Z.groups.path,Et(Et({},L),{},{offset:0}),C)})),s().createElement(l.Route,{exact:!0,path:se.Z["remove-group"].path},s().createElement(Ce,{pagination:L,filters:C,postMethod:function(e,t){d(Et(Et({},t),{},{orderBy:R})),z(V.filter((function(t){return!e.includes(t.uuid)})))},cancelRoute:(0,ue.zk)(se.Z.groups.path,L,C),submitRoute:(0,ue.zk)(se.Z.groups.path,Et(Et({},L),{},{offset:0}),C),isModalOpen:!0,groupsUuid:Q})))},J=function(t){var r=t.isPlatformDefault,a=t.isAdminDefault;return r||a||!v?null:[{title:e.formatMessage(P.Z.edit),onClick:function(e,t,r){n.push("/groups/edit/".concat(r.uuid))}},{title:e.formatMessage(P.Z.delete),onClick:function(e,t,r){K([r]),n.push(se.Z["remove-group"].path)}}]},$=function(){return(0,a.Z)(v?[s().createElement(l.Link,{to:se.Z["add-group"].path,key:"add-group",className:"rbac-m-hide-on-sm"},s().createElement(m.Button,{ouiaId:"create-group-button",variant:"primary","aria-label":"Create group"},e.formatMessage(P.Z.createGroup))),{label:e.formatMessage(P.Z.createGroup),props:{className:"rbac-m-hide-on-md"},onClick:function(){n.push(se.Z["add-group"].path)}},{label:e.formatMessage(P.Z.edit),props:{isDisabled:!(1===V.length)},onClick:function(){return n.push("/groups/edit/".concat(V[0].uuid))}},{label:e.formatMessage(P.Z.delete),props:{isDisabled:!V.length>0},onClick:function(){K(V),n.push(se.Z["remove-group"].path)}}]:[])},ee=x.map((function(e){return e.platform_default||e.admin_default?Et(Et({},e),{},{principalCount:"All".concat(e.admin_default?" org admins":"")}):e})),te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,E.Z)();return t.reduce((function(t,o){var i=o.uuid,c=o.name,m=o.roleCount,d=o.principalCount,f=o.modified,p=o.platform_default,g=o.admin_default;return[].concat((0,a.Z)(t),[{uuid:i,isAdminDefault:g,isPlatformDefault:p,cells:[s().createElement(u.Fragment,{key:i},s().createElement("div",{className:"pf-m-inline-flex"},e?s().createElement(l.Link,{key:"".concat(i,"-link"),state:{uuid:i},to:{pathname:"/groups/detail/".concat(p?"default-access":i)}},c):c,(p||g)&&s().createElement(Le,{id:"default".concat(g?"-admin":"","-group-popover"),uuid:i,key:"".concat(i,"-popover"),bodyContent:r.formatMessage(g?P.Z.orgAdminInheritedRoles:P.Z.usersInheritedRoles)}))),m,d,s().createElement(u.Fragment,{key:"".concat(i,"-modified")},s().createElement(De.Z,{date:f,type:(0,ue.mh)(f)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===i})))}])}),[])}(v,ee,V);return s().createElement(l.Switch,null,s().createElement(bt.Z,{pageAction:"role-detail",path:se.Z["group-detail-role-detail"].path,render:function(e){return s().createElement(ht.Z,e)}}),s().createElement(bt.Z,{pageAction:"group-detail",path:se.Z["group-detail"].path,render:function(e){return s().createElement(gt,(0,r.Z)({},e,{defaultUuid:null==D?void 0:D.uuid,onDelete:function(e){A(""),z(V.filter((function(t){return t.uuid!=e})))}}))}}),s().createElement(bt.Z,{pageAction:"group-list",path:se.Z.groups.path,render:function(){return s().createElement(m.Stack,{className:"rbac-c-groups"},s().createElement(m.StackItem,null,s().createElement(Be.Q,{paddingBottom:!0},s().createElement(Be.y,{title:e.formatMessage(P.Z.groups)}))),s().createElement(m.StackItem,null,s().createElement(Fe.Z,{type:"content",id:"tab-groups"},s().createElement(Te.M,{data:x,rows:te,sortBy:O,onSort:function(e,t,r){var a="".concat("desc"===r?"-":"").concat(y[t-Number(v)].key);k({index:t,direction:r}),function(e){var t=e.name,r=e.count,a=e.limit,o=e.offset,i=e.orderBy;(0,Ye.oG)(n,a,o),(0,yt.MS)(n,{name:t}),d({count:r,limit:a,offset:o,orderBy:i,filters:{name:t}})}(Et(Et({},L),{},{offset:0,orderBy:a},(null==C?void 0:C.length)>0?Et({},C.reduce((function(e,t){return Et(Et({},e),{},(0,i.Z)({},t.key,t.value))}),{})):{name:B}))},columns:y,isSelectable:v,checkedRows:V,setCheckedItems:X,routes:Y,actionResolver:J,titlePlural:e.formatMessage(P.Z.groups).toLowerCase(),titleSingular:e.formatMessage(P.Z.group).toLowerCase(),ouiaId:"groups-table",pagination:L,filterValue:B,fetchData:function(e){var t=e.name,r=e.count,a=e.limit,o=e.offset,i=e.orderBy;return(0,Ye.oG)(n,a,o),(0,yt.MS)(n,{name:t}),d({count:r,limit:a,offset:o,orderBy:i,filters:{name:t}})},setFilterValue:function(e){var t=e.name;return A(void 0===t?"":t)},toolbarButtons:$,isLoading:!T&&0===(null==x?void 0:x.length)&&0===(null==B?void 0:B.length)||T,filterPlaceholder:e.formatMessage(P.Z.name).toLowerCase(),rowWrapper:vt.Z,tableId:"groups",textFilterRef:b}))))}}))}}}]);
//# sourceMappingURL=../sourcemaps/6171.41bccc266e978c31480103bb6dba873b.js.map