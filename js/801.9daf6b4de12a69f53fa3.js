(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[801,7664],{98614:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i,de:()=>a,nQ:()=>o});var r=n(40400);const a={name:"CheckIcon",height:512,width:512,svgPath:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z",yOffset:0,xOffset:0},o=(0,r.IU)(a),i=o},36438:(e,t,n)=>{"use strict";n.d(t,{I4:()=>a,Tw:()=>o,ZP:()=>i});var r=n(40400);const a={name:"CloseIcon",height:1024,width:730,svgPath:"M725.499315,767.757345 L469.242169,511.500499 L725.499315,255.243653 C729.196254,251.545719 731.096195,247.248119 731,242.4498 C731,237.653479 728.997365,233.35588 725.299427,229.558002 L647.542773,151.701495 C643.743891,147.903617 639.446287,146 634.64996,146 C629.852635,146 625.55503,147.803673 621.857092,151.500607 L365.5,407.857398 L109.241857,151.500607 C105.544917,147.803673 101.246314,145.904733 96.4499876,146 C91.6526619,146.104622 87.3550577,148.002562 83.5571748,151.701495 L5.7005771,229.457058 C1.90269428,233.255936 0,237.553535 0,242.350855 C0,247.148175 1.80175055,251.444775 5.50068853,255.143709 L261.857779,511.500499 L5.50068853,767.757345 C1.80175055,771.454279 -0.0961914123,775.752878 0,779.750645 C0.103697157,784.547965 2.00263857,788.845564 5.7005771,792.642443 L83.4572306,871.299502 C87.2541139,875.096381 91.5527176,877 96.3500433,877 C101.147369,877 105.444973,875.197325 109.142912,871.499391 L365.400058,615.241545 L621.657203,871.499391 C625.355142,875.197325 629.652746,877.095265 634.449072,877 C639.246398,877 643.545002,874.997437 647.342885,871.299502 L725.099538,793.54294 C728.896421,789.745062 730.796362,785.446463 730.796362,780.649143 C731.096195,775.752878 729.196254,771.454279 725.499315,767.757345",yOffset:0,xOffset:0},o=(0,r.IU)(a),i=o},62410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(85893),a=n(92950),o=n.n(a),i=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},c=36e5,l=24*c,u=30*l,m=365*l,p=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},d=[{rightBound:1/0,description:function(e){return p(Math.round(e/m),"year")}},{rightBound:m,description:function(e){return p(Math.round(e/u),"month")}},{rightBound:u,description:function(e){return p(Math.round(e/l),"day")}},{rightBound:l,description:function(e){return p(Math.round(e/c),"hour")}},{rightBound:c,description:function(e){return p(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return d.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},v=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(a){return function(e,t,n,a){return void 0===a&&(a=""),(0,r.jsx)(i.Tooltip,s({},n,{content:(0,r.jsxs)("div",{children:[a,e]})},{children:t}))}(g("exact")(a),(0,r.jsx)("span",{children:g(e)(a)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const h=function(e){var t=e.date,n=e.type,a=void 0===n?"relative":n,i=e.extraTitle,s=e.tooltipProps,c=t instanceof Date?t:new Date(t),l=null==t||"Invalid Date"===c.toString()?"invalid":a;return(0,r.jsx)(o().Fragment,{children:v(l,s,i)(c)})}},39173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(85893),a=n(94184),o=n.n(a),i=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};const c=function(e){var t=e.className,n=e.title,a=o()(t);return(0,r.jsx)(i.Title,s({headingLevel:"h1",size:"2xl",className:a,"widget-type":"InsightsPageHeaderTitle"},{children:n}))}},44873:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(85893),a=n(94184),o=n.n(a),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};const s=function(e){var t,n=e.type,a=e.children,s=e.className,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["type","children","className"]),l=o()(s,((t={})["ins-l-".concat(n)]=void 0!==n,t));return(0,r.jsxs)("section",i({},c,{className:l},{children:[" ",a," "]}))}},93736:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(46801),a=n(65126);const o=function(e){var t=(0,r.useNavigate)();return function(n,r){return t((0,a.n)(n,e),r)}}},76137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),s=n(46801),c=n(25864),l=n(19571),u=function(e){return e?a().createElement(c.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?a().createElement(c.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&a().createElement(s.NavLink,{end:!0,to:e.to},e.title)||e.title):a().createElement(l.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:i().object};const m=u},51999:(e,t,n)=>{"use strict";n.d(t,{Q:()=>h,y:()=>b});var r=n(92950),a=n.n(r),o=n(45697),i=n.n(o),s=n(25864),c=n(19571),l=n(76137),u=n(85893),m=n(94184),p=n.n(m);const d=a().createContext("light");var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)};const g=function(e){var t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["className","children"]),a=p()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return(0,u.jsx)(d.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var i=p()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,u.jsx)("section",f({},r,{className:"".concat(a," ").concat(i),"widget-type":"InsightsPageHeader"},{children:n}))}})};var v=n(39173),h=function(e){var t=e.children,n=e.breadcrumbs;return a().createElement(r.Fragment,null,n&&a().createElement("section",{className:"pf-c-page__main-breadcrumb"},a().createElement(l.Z,n)),a().createElement(g,{className:"rbac-page-header"},t))};h.propTypes={children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired,breadcrumbs:i().array,paddingBottom:i().bool},h.defaultProps={paddingBottom:!1};var b=function(e){var t=e.title,n=e.renderTitleTag,o=e.description,i=e.children;return a().createElement(r.Fragment,null,a().createElement(s.Flex,null,a().createElement(s.FlexItem,{className:"pf-u-mb-sm"},a().createElement(v.Z,{title:t||a().createElement(c.h2,null),className:"rbac-page-header__title"})),a().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},n&&n())),o&&a().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof o?a().createElement(s.Text,{component:s.TextVariants.p},o):o),i)};b.propTypes={title:i().node,renderTitleTag:i().func,description:i().node,children:i().oneOfType([i().node,i().arrayOf(i().node)])}},27782:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r,a=n(93433),o=n(4942),i=n(29439),s=n(92950),c=n.n(s),l=n(50533),u=n(46801),m=n(86896),p=n(25864),d=n(1936),f=n(98614),g=n(36438),v=n(55140),h=n(23279),b=n.n(h),y=n(44873),Z=n(62410),E=n(35664),O=n(93736),x=n(65126),T=n(76137),j=n(74368),M=n(26794),w=n(30893),C=n(4682),P=n(19571),N=n(30060),k=n(51999),I=n(28090),_=n(90944),L=n(11107),S=n(19756),B=n(65916);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=function(){var e=(0,m.Z)(),t=(0,O.Z)(),n=(0,l.useDispatch)(),h=(0,u.useParams)().username,D=(0,s.useState)(""),A=(0,i.Z)(D,2),U=A[0],R=A[1],V=(0,s.useState)({}),W=(0,i.Z)(V,2),G=W[0],z=W[1],H=(0,s.useState)(!1),Q=(0,i.Z)(H,2),$=Q[0],q=Q[1],J=(0,s.useState)([]),K=(0,i.Z)(J,2),X=K[0],Y=K[1],ee=(0,v.Z)(),te=(0,l.useSelector)((function(e){var t=e.roleReducer,n=t.error,r=t.roles,a=t.isLoading,o=t.rolesWithAccess,i=e.userReducer,s=i.users.data,c=i.isUserDataLoading;return{roles:r,isLoadingRoles:a,rolesWithAccess:o,user:s&&s.filter((function(e){return e.username===h}))[0],isLoadingUsers:c,userExists:n!==L.VG}})),ne=te.roles,re=te.isLoadingRoles,ae=te.rolesWithAccess,oe=te.user,ie=te.isLoadingUsers,se=te.userExists,ce=(0,s.useContext)(M.Z),le=ce.orgAdmin,ue=ce.userAccessAdministrator,me=le||ue,pe=function(e){return n((0,I.vd)(e))};(0,s.useEffect)((function(){return ee.appObjectId(h),n((0,_.u)(F(F({},B.he),{},{limit:0,filters:{username:h}}))),pe({limit:20,offset:0,username:h}),q(!0),pe({limit:20,offset:0,addFields:["groups_in"],username:h}).then((function(){return q(!1)})),r=b()((function(e,t,n,r,a){return pe({limit:e,offset:t,displayName:n,addFields:r,username:a})}),500),function(){return ee.appObjectId(void 0)}}),[]);var de=[e.formatMessage(w.Z.roles),{title:e.formatMessage(w.Z.groups),cellTransforms:[d.compoundExpand]},{title:e.formatMessage(w.Z.permissions),cellTransforms:[d.compoundExpand]},{title:e.formatMessage(w.Z.lastModified)}],fe=[{title:e.formatMessage(w.Z.users),to:(0,x.n)(C.Z.users.link)},{title:se?h:e.formatMessage(w.Z.invalidUser),isActive:!0}];return c().createElement(s.Fragment,null,se?c().createElement(p.Stack,null,c().createElement(p.StackItem,null,c().createElement(k.Q,{breadcrumbs:fe},c().createElement(k.y,{title:h,renderTitleTag:function(){return ie?c().createElement(E.Z,{size:"xs",className:"rbac-c-user__label-skeleton"}):c().createElement(p.Label,{color:(null==oe?void 0:oe.is_active)&&"green"},e.formatMessage(null!=oe&&oe.is_active?w.Z.active:w.Z.inactive))}},!ie&&oe?c().createElement(s.Fragment,null,c().createElement(p.TextContent,null,"".concat(e.formatMessage(w.Z.orgAdministrator),": "),null!=oe&&oe.is_org_admin?c().createElement(f.ZP,{key:"yes-icon",className:"pf-u-mx-sm"}):c().createElement(g.ZP,{key:"no-icon",className:"pf-u-mx-sm"}),e.formatMessage(null!=oe&&oe.is_org_admin?w.Z.yes:w.Z.no)),(null==oe?void 0:oe.email)&&c().createElement(p.Text,{component:p.TextVariants.p},"".concat(e.formatMessage(w.Z.email),": ").concat(oe.email)),(null==oe?void 0:oe.username)&&c().createElement(p.TextContent,null,c().createElement(p.Text,{component:p.TextVariants.p},"".concat(e.formatMessage(w.Z.username),": ").concat(oe.username)))):null))),c().createElement(p.StackItem,null,c().createElement(y.Z,{type:"content",className:"rbac-c-user-roles"},c().createElement(N.M,{columns:de,isExpandable:!0,onExpand:function(e,t,r,a,i){a?z(F(F({},G),{},(0,o.Z)({},i.uuid,-1))):(z(F(F({},G),{},(0,o.Z)({},i.uuid,r))),2===r&&n((0,I.sv)(i.uuid)))},rows:function(t,n){return t?t.reduce((function(t,r,o){var i,s=r.uuid,l=r.display_name,u=r.groups_in,m=void 0===u?[]:u,f=r.modified,g=r.accessCount;return[].concat((0,a.Z)(t),[{uuid:s,cells:[{title:l,props:{component:"th",isOpen:!1}},{title:$?c().createElement(E.Z,{size:E.i.xs}):m.length,props:{isOpen:1===G[s]}},{title:g,props:{isOpen:2===G[s]}},{title:c().createElement(Z.Z,{type:(0,L.mh)(f),date:f})}]},{uuid:"".concat(s,"-groups"),parent:3*o,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:(null==m?void 0:m.length)>0?c().createElement(d.Table,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:d.TableVariant.compact,cells:[e.formatMessage(w.Z.name),e.formatMessage(w.Z.description)," "],rows:m.map((function(t){return{cells:[{title:c().createElement(x.Z,{to:C.Z["group-detail"].link.replace(":groupId",t.uuid)},t.name)},t.description,{title:c().createElement(x.Z,{to:C.Z["user-add-group-roles"].link.replace(":username",n).replace(":groupId",t.uuid),state:{name:t.name}},e.formatMessage(w.Z.addRoleToThisGroup)),props:{className:"pf-u-text-align-right"}}]}}))},c().createElement(d.TableHeader,null),c().createElement(d.TableBody,null)):c().createElement(p.Text,{className:"pf-u-mx-lg pf-u-my-sm"},$?e.formatMessage(w.Z.loading):e.formatMessage(w.Z.noGroups))}]},{uuid:"".concat(s,"-groups"),parent:3*o,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:ae&&ae[s]?(null===(i=ae[s].access)||void 0===i?void 0:i.length)>0?c().createElement(d.Table,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:d.TableVariant.compact,cells:[e.formatMessage(w.Z.application),e.formatMessage(w.Z.resourceType),e.formatMessage(w.Z.operation)],rows:ae[s].access.map((function(e){return{cells:e.permission.split(":")}}))},c().createElement(d.TableHeader,null),c().createElement(d.TableBody,null)):c().createElement(p.Text,{className:"pf-u-mx-lg pf-u-my-sm"},e.formatMessage(w.Z.noPermissions)):c().createElement(P.Wi,{items:3,isCompact:!0})}]}])}),[]):[]}(ne.data,h),data:ne.data,filterValue:U,ouiaId:"user-details-table",fetchData:function(e){var t=e.limit,n=e.offset,a=e.name;r(t,n,a,["groups_in"],h)},setFilterValue:function(e){var t=e.name;return R(t)},isLoading:re,toolbarButtons:function(){return(0,a.Z)(me?[c().createElement(x.Z,{to:C.Z["add-user-to-group"].link.replace(":username",h),key:"add-user-to-group",className:"rbac-m-hide-on-sm"},c().createElement(p.Button,{ouiaId:"add-user-to-group-button",variant:"primary","aria-label":"Add user to a group"},e.formatMessage(w.Z.addUserToGroup))),{label:e.formatMessage(w.Z.addUserToGroup),onClick:function(){t(C.Z["add-user-to-group"].link.replace(":username",h))}}]:[])},pagination:ne.meta,filterPlaceholder:e.formatMessage(w.Z.roleName).toLowerCase(),titlePlural:e.formatMessage(w.Z.roles).toLowerCase(),titleSingular:e.formatMessage(w.Z.role).toLowerCase(),tableId:"user"}),c().createElement(s.Suspense,null,c().createElement(u.Outlet,{context:{username:h,selectedRoles:X,setSelectedRoles:Y,closeUrl:C.Z["user-detail"].link.replace(":username",h),addRolesToGroup:function(e,t){return n((0,S.Wj)(e,t))}}}))))):c().createElement(s.Fragment,null,c().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},c().createElement(T.Z,fe)),c().createElement(j.Z,{title:e.formatMessage(w.Z.userNotFound),description:[e.formatMessage(w.Z.userNotFoundDescription,{username:h})],actions:[c().createElement(p.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return t(-1)}},e.formatMessage(w.Z.backToPreviousPage))]})))}},27561:(e,t,n)=>{var r=n(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:(e,t,n)=>{var r=n(13218),a=n(7771),o=n(14841),i=Math.max,s=Math.min;e.exports=function(e,t,n){var c,l,u,m,p,d,f=0,g=!1,v=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=c,r=l;return c=l=void 0,f=t,m=e.apply(r,n)}function y(e){return f=e,p=setTimeout(E,t),g?b(e):m}function Z(e){var n=e-d;return void 0===d||n>=t||n<0||v&&e-f>=u}function E(){var e=a();if(Z(e))return O(e);p=setTimeout(E,function(e){var n=t-(e-d);return v?s(n,u-(e-f)):n}(e))}function O(e){return p=void 0,h&&c?b(e):(c=l=void 0,m)}function x(){var e=a(),n=Z(e);if(c=arguments,l=this,d=e,n){if(void 0===p)return y(d);if(v)return clearTimeout(p),p=setTimeout(E,t),b(d)}return void 0===p&&(p=setTimeout(E,t)),m}return t=o(t)||0,r(n)&&(g=!!n.leading,u=(v="maxWait"in n)?i(o(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),x.cancel=function(){void 0!==p&&clearTimeout(p),f=0,c=d=l=p=void 0},x.flush=function(){return void 0===p?m:O(a())},x}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},14841:(e,t,n)=>{var r=n(27561),a=n(13218),o=n(33448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):i.test(e)?NaN:+e}}}]);
//# sourceMappingURL=../sourcemaps/801.a34ebd6344fc655519441e7b905d6496.js.map