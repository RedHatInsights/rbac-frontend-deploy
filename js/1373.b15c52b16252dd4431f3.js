"use strict";(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[1373,1789],{53926:(e,t,a)=>{a.d(t,{Lr:()=>l,cH:()=>s,nU:()=>r,rO:()=>o});var r,l,n=a(93345);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(l||(l={}));const o=n.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),s=n.createContext({keyHandler:null,sendRef:null})},66181:(e,t,a)=>{a.d(t,{Ot:()=>l});var r=a(20612);const l=()=>({className:r.A.modifiers.nowrap})},87510:(e,t)=>{t.__esModule=!0,t.global_breakpoint_2xl={name:"--pf-v5-global--breakpoint--2xl",value:"1450px",var:"var(--pf-v5-global--breakpoint--2xl)"},t.default=t.global_breakpoint_2xl},16359:(e,t)=>{t.__esModule=!0,t.global_breakpoint_lg={name:"--pf-v5-global--breakpoint--lg",value:"992px",var:"var(--pf-v5-global--breakpoint--lg)"},t.default=t.global_breakpoint_lg},51418:(e,t)=>{t.__esModule=!0,t.global_breakpoint_sm={name:"--pf-v5-global--breakpoint--sm",value:"576px",var:"var(--pf-v5-global--breakpoint--sm)"},t.default=t.global_breakpoint_sm},94342:(e,t)=>{t.__esModule=!0,t.global_breakpoint_xl={name:"--pf-v5-global--breakpoint--xl",value:"1200px",var:"var(--pf-v5-global--breakpoint--xl)"},t.default=t.global_breakpoint_xl},43615:(e,t)=>{t.SC={name:"--pf-v5-global--breakpoint--xs",value:"0",var:"var(--pf-v5-global--breakpoint--xs)"},t.Ay=t.SC},16401:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(74848),l=a(32485),n=a.n(l),o=a(63068),s=a(69),i=a(86228),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},c.apply(this,arguments)};const p=function(e){var t=e.className,a=e.title,l=e.actionsContent,p=e.ouiaId,d=e.ouiaSafe,m=void 0===d||d,u=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=n()(t),g="RHI/Header",b=(0,s.useOUIAId)(g,p,m);return(0,r.jsxs)(i.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(o.Title,c({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":b,"data-ouia-safe":m},u,{children:a}))}),l?(0,r.jsx)(i.FlexItem,{children:l}):null]})}},85655:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(74848),l=a(32485),n=a.n(l),o=function(){return o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},o.apply(this,arguments)};const s=function(e){var t,a=e.type,l=e.children,s=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["type","children","className"]),c=n()(s,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",o({},i,{className:c,children:[" ",l," "]}))}},91875:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(43615),l=a(51418),n=a(58551),o=a(16359),s=a(94342),i=a(87510);const c={xs:parseInt(r.Ay.value.replace("px","")),sm:parseInt(l.default.value.replace("px","")),md:parseInt(n.default.value.replace("px","")),lg:parseInt(o.default.value.replace("px","")),xl:parseInt(s.default.value.replace("px","")),"2xl":parseInt(i.default.value.replace("px",""))}},36984:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(91875);const l=function(e){return(null===r.A||void 0===r.A?void 0:r.A[e])<=r.A.sm}},64367:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(93345),l=a(91875);const n=function(){for(var e,t=window.innerWidth,a=0,r=Object.entries(l.A);a<r.length;a++){var n=r[a],o=n[0];if(n[1]>=t)break;e=o}return e},o=function(){var e=(0,r.useState)((function(){return n()})),t=e[0],a=e[1],l=(0,r.useRef)(t);return(0,r.useEffect)((function(){function e(){var e=n();e!==l.current&&(l.current=e,a(e))}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},49420:(e,t,a)=>{a.d(t,{D_:()=>r,G:()=>n,JI:()=>l});const r=(e,t,a,r={})=>{const l=new URLSearchParams(e.search);let n=a.reduce(((e,t)=>{const a=l.getAll(t);return{...e,[t]:a.length>1?a:a[0]}}),{});return Object.keys(r).forEach((e=>{const t=r[e];n={...n,[e]:Array.isArray(n[e])?[...new Set([...n[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||n[e]},Array.isArray(t)?t.forEach((t=>l.getAll(e).includes(t)||l.append(e,t))):l.get(e)||t&&l.set(e,t)})),t({pathname:e.pathname,search:l.toString()},{replace:!0}),n},l=(e,t)=>{const a=new URLSearchParams(e.search);return t.some((e=>a.get(e)))},n=(e,t,a)=>{const r=new URLSearchParams(e.search);Object.keys(a).forEach((e=>r.delete(e))),Object.keys(a).forEach((e=>{const t=a[e];Array.isArray(t)?t.forEach((t=>t&&r.append(e,t))):t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0})}},5314:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(93345),l=a.n(r),n=a(5556),o=a.n(n),s=a(49634),i=a(92284),c=a(21996);const p=e=>e?l().createElement(i.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?l().createElement(i.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&l().createElement(s.NavLink,{end:!0,to:e.to},e.title)||e.title):l().createElement(c.nv,{key:t})))):null;p.propTypes={breadcrumbs:o().object};const d=p},58508:(e,t,a)=>{a.d(t,{N:()=>h,p:()=>A});var r=a(93345),l=a.n(r),n=a(5556),o=a.n(n),s=a(40748),i=a(32392),c=a(21996),p=a(5314),d=a(74848),m=a(32485),u=a.n(m);const f=l().createContext("light");var g=a(69),b=function(){return b=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},b.apply(this,arguments)};const y=function(e){var t=e.className,a=e.children,r=e.ouiaId,l=e.ouiaSafe,n=void 0===l||l,o=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),s=u()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),i="RHI/Header",c=(0,g.useOUIAId)(i,r,n);return(0,d.jsx)(f.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var l=u()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,d.jsx)("section",b({"data-ouia-component-type":i,"data-ouia-component-id":c,"data-ouia-safe":n},o,{className:"".concat(s," ").concat(l),"widget-type":"InsightsPageHeader",children:a}))}})};var v=a(16401);const h=({children:e,breadcrumbs:t})=>l().createElement(r.Fragment,null,t&&l().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},l().createElement(p.A,{...t})),l().createElement(y,{className:"rbac-page-header"},e));h.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,breadcrumbs:o().array,paddingBottom:o().bool},h.defaultProps={paddingBottom:!1};const A=({title:e,renderTitleTag:t,description:a,children:n})=>l().createElement(r.Fragment,null,l().createElement(i.Flex,null,l().createElement(i.FlexItem,{className:"pf-v5-u-mb-sm"},l().createElement(v.A,{title:e||l().createElement(c.BX,null),className:"rbac-page-header__title"})),l().createElement(i.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&l().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?l().createElement(s.Text,{component:s.TextVariants.p},a):a),n);A.propTypes={title:o().node,renderTitleTag:o().func,description:o().node,children:o().oneOfType([o().node,o().arrayOf(o().node)])}},42960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(93345),l=a.n(r),n=a(8604),o=a(69733),s=a(49634),i=a(35725),c=a(73317),p=a(99608),d=a(66181),m=a(79994),u=a(79300),f=a(64367),g=a(36984),b=a(20881),y=a(85655),v=a(63767),h=a(40748),A=a(73683),x=a(68877),_=a(1104),k=a(97681),E=a(58471),O=a(42134),I=a(40335),S=a(49573),w=a(8582),C=a(58508),N=a(38694),j=a(40262),M=a(61361),P=a(49420),T=a(30133),R=a(5556),L=a.n(R),B=a(32485),F=a.n(B);const G=({className:e,row:t,...a})=>l().createElement(T.S,{className:F()(e,{"rbac-c-role-default":t.system}),row:t,...a});G.propTypes={row:L().shape({system:L().bool}),className:L().string};const D=G;var H=a(99843);const U=()=>{const{orgAdmin:e,userAccessAdministrator:t}=(0,r.useContext)(j.A),[a,T]=(0,r.useState)([]),R=(0,n.tz)(),L=(0,o.useDispatch)(),B=(0,r.useRef)(null),F=(0,s.useNavigate)(),G=(0,s.useLocation)(),U=(0,f.A)(),W=(0,b.A)(),{roles:$,filters:J,pagination:X,isLoading:z,adminGroup:V}=(0,o.useSelector)((({roleReducer:{roles:{data:t,filters:a,pagination:r},isLoading:l},groupReducer:{adminGroup:n}})=>({adminGroup:n,roles:t,filters:a,pagination:{limit:r.limit??(e?M.Ar:M.L6).limit,offset:r.offset??(e?M.Ar:M.L6).offset,count:r.count,redirected:r.redirected},isLoading:l})),o.shallowEqual),q=[{title:R.formatMessage(I.A.name),key:"display_name",transforms:[(0,i.B)(20),c.X]},{title:R.formatMessage(I.A.description)},{title:R.formatMessage(I.A.groups),cellTransforms:[p.w],transforms:[d.Ot]},{title:R.formatMessage(I.A.permissions),cellTransforms:[p.w],transforms:[d.Ot]},{title:R.formatMessage(I.A.lastModified),key:"modified",transforms:[d.Ot,c.X]}],Y=e=>L((0,w.ip)({...e,usesMetaInURL:!0,chrome:W})),Z=e||t,[K,Q]=(0,r.useState)(J.display_name||""),[ee,te]=(0,r.useState)({index:Number(Z),direction:"asc"}),[ae,re]=(0,r.useState)({}),[le,ne]=(0,r.useState)([]),[oe,se]=(0,r.useState)([]),ie=`${"desc"===ee?.direction?"-":""}${q[ee?.index-Number(Z)].key}`;(0,r.useEffect)((()=>{(0,M.NJ)(G,F,X.limit,X.offset)}),[X.offset,X.limit,X.count,X.redirected]),(0,r.useEffect)((()=>{(0,P.G)(G,F,{display_name:K})}),[K]),(0,r.useEffect)((()=>{const{limit:e,offset:t}=(0,M.sJ)(G,F,X),{display_name:a}=(0,P.D_)(G,F,["display_name"],{display_name:K});Q(a),W.appNavClick({id:"roles",secondaryNav:!0}),L((0,H.Tt)({chrome:W})),Y({limit:e,offset:t,orderBy:ie,filters:{display_name:a}})}),[]),(0,r.useEffect)((()=>{G.pathname.includes("detail")?(0,O.b7)(G,F):((0,M.Wq)(G)||(0,M.NJ)(G,F,X.limit,X.offset),K?.length>0&&!(0,P.JI)(G,["display_name"])&&(0,P.D_)(G,F,["display_name"],{display_name:K}))}),[G.pathname]);const ce=((e,t,a,n,o)=>e.reduce(((e,{uuid:s,access:i=[],display_name:c,name:p,description:d,system:m,accessCount:u,groups_in_count:f,groups_in:g,modified:b},y)=>[...e,{uuid:s,system:m,disableSelection:!!m,selected:Boolean(t?.find?.((e=>e.uuid===s))),cells:[{title:l().createElement(E.A,{to:S.A["role-detail"].link.replace(":roleId",s)},c||p)},{title:d},{title:f,props:{isOpen:3===n[s]}},{title:u,props:{isOpen:4===n[s]}},{title:l().createElement(v.A,{date:b,type:(0,O.eW)(b)})}]},{uuid:`${s}-groups`,parent:3*y,compoundParent:2,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:f>0?l().createElement(x.X,{"aria-label":"Compound groups table",ouiaId:"role-in-groups-nested-table",variant:A.a.compact,cells:[a.formatMessage(I.A.groupName),a.formatMessage(I.A.description)," "],rows:g.map((e=>({cells:[{title:l().createElement(E.A,{to:S.A["group-detail"].link.replace(":groupId",e.uuid)},e.name)},e.description,{title:o?.uuid===e.uuid?null:l().createElement(E.A,{to:S.A["roles-add-group-roles"].link.replace(":roleId",s).replace(":groupId",e.uuid),state:{name:e.name}},a.formatMessage(I.A.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},l().createElement(_.A,null),l().createElement(k.B,null)):l().createElement(h.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(I.A.noGroups))}]},{uuid:`${s}-permissions`,parent:3*y,compoundParent:3,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:i.length>0?l().createElement(x.X,{ouiaId:"permissions-in-role-nested-table","aria-label":"Compound permissions table",variant:A.a.compact,cells:[a.formatMessage(I.A.application),a.formatMessage(I.A.resourceType),a.formatMessage(I.A.operation),a.formatMessage(I.A.lastModified)],rows:i.map((e=>{const[t,a,n]=e.permission.split(":");return{cells:[t,a,n,l().createElement(r.Fragment,{key:`${t}-modified`},l().createElement(v.A,{date:b,type:(0,O.eW)(b)}))]}}))},l().createElement(_.A,null),l().createElement(k.B,null)):l().createElement(h.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(I.A.noPermissions))}]}]),[]))($,a,R,ae,V),pe=X.count===le.length;return l().createElement(u.Stack,{className:"rbac-c-roles"},l().createElement(u.StackItem,null,l().createElement(C.N,null,l().createElement(C.p,{title:R.formatMessage(I.A.roles)}))),l().createElement(u.StackItem,null,l().createElement(y.A,{type:"content",id:"tab-roles"},l().createElement(N.Z,{isSelectable:Z,isRowSelectable:e=>!(e.platform_default||e.admin_default||e.system),checkedRows:a,textFilterRef:B,setCheckedItems:e=>{T((t=>e(t).filter((({platform_default:e,admin_default:t,system:a})=>!(e||t||a))).map((({uuid:e,name:t})=>({uuid:e,label:t})))))},actionResolver:e=>e.compoundParent?[]:[{title:R.formatMessage(I.A.edit),onClick:(e,t,a)=>F((0,E.o)(S.A["edit-role"].link.replace(":roleId",a.uuid)))},{title:R.formatMessage(I.A.delete),onClick:(e,t,a)=>{ne([a]),F((0,E.o)(S.A["remove-role"].link.replace(":roleId",a.uuid)))}}],columns:q,areActionsDisabled:({system:e})=>!!e,rowWrapper:D,rows:ce,data:$,filterValue:K,fetchData:({name:e,limit:t,offset:a})=>((0,P.G)(G,F,{display_name:e}),Y((0,O.YP)({limit:t,offset:a,orderBy:ie,filters:{display_name:e}}))),setFilterValue:({name:e=""})=>Q(e),isExpandable:!0,onExpand:(e,t,a,r,l)=>re({...ae,[l.uuid]:r?-1:a+Number(!Z)}),isLoading:!z&&0===$?.length&&0===K?.length||z,pagination:X,ouiaId:"roles-table",titlePlural:R.formatMessage(I.A.roles).toLowerCase(),titleSingular:R.formatMessage(I.A.role).toLowerCase(),toolbarButtons:()=>e||t?[l().createElement(E.A,{to:S.A["add-role"].link,key:"add-role",className:"rbac-m-hide-on-sm"},l().createElement(m.Button,{ouiaId:"create-role-button",variant:"primary","aria-label":"Create role"},R.formatMessage(I.A.createRole))),...(0,g.A)(U)?[{label:R.formatMessage(I.A.createRole),onClick:()=>F((0,E.o)(S.A["add-role"].link))}]:[],{label:R.formatMessage(I.A.edit),props:{isDisabled:!(1===a.length)},onClick:()=>F((0,E.o)(S.A["edit-role"].link.replace(":roleId",a[0].uuid)))},{label:R.formatMessage(I.A.delete),props:{isDisabled:!a.length>0},onClick:()=>{ne(a),F((0,E.o)(S.A["remove-role"].link.replace(":roleId",a.map((({uuid:e})=>e)))))}}]:[],filterPlaceholder:R.formatMessage(I.A.name).toLowerCase(),tableId:"roles",sortBy:ee,onSort:(e,t,a)=>{const r=`${"desc"===a?"-":""}${q[t-Number(Z)].key}`;te({index:t,direction:a}),Y((0,O.YP)({limit:X.limit,offset:0,orderBy:r,filters:{display_name:K}}))}}),l().createElement(r.Suspense,null,l().createElement(s.Outlet,{context:{[S.A["add-role"].path]:{pagination:X,filters:{display_name:K}},[S.A["remove-role"].path]:{isLoading:z,cancelRoute:(0,O.Fm)(S.A.roles.link,X,J),submitRoute:(0,O.Fm)(S.A.roles.link,{...X,offset:0},pe?{}:J),afterSubmit:()=>{Y({...X,filters:pe?{}:{display_name:K},offset:0}),pe&&Q(""),T([])},setFilterValue:Q},[S.A["edit-role"].path]:{isLoading:z,cancelRoute:(0,O.Fm)(S.A.roles.link,X,J),afterSubmit:()=>{Y({...X,offset:0,filters:{display_name:K}}),T([])}},[S.A["roles-add-group-roles"].path]:{selectedRoles:oe,setSelectedRoles:se,closeUrl:(0,O.Fm)(S.A.roles.link,X,J),addRolesToGroup:(e,t)=>L((0,H.Lu)(e,t)),afterSubmit:()=>{Y({...X,offset:0,filters:{display_name:K}}),se([])}}}})))))}}}]);