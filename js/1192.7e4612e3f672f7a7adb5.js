(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[1192,6710],{41939:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(44914),n=o.n(a),l=o(16165),r=o(72583),s=o(83873);const i=e=>{var{isOpen:t,onConfirm:o,onClose:i,children:c,confirmButtonLabel:u="Confirm",cancelButtonLabel:d="Cancel",variant:m=l.d.small,titleIconVariant:p="warning",withCheckbox:f=!1,checkboxLabel:g="I understand that this action cannot be undone",confirmButtonVariant:b=r.Ak.primary,ouiaId:h="WarningModal"}=e,A=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["isOpen","onConfirm","onClose","children","confirmButtonLabel","cancelButtonLabel","variant","titleIconVariant","withCheckbox","checkboxLabel","confirmButtonVariant","ouiaId"]);const[v,C]=(0,a.useState)(!1);return n().createElement(l.a,Object.assign({variant:m,isOpen:t,onClose:i,onEscapePress:i,titleIconVariant:p,actions:[n().createElement(r.$n,{ouiaId:`${h}-confirm-button`,key:"confirm",variant:b,onClick:()=>{null==o||o(),C(!1)},isDisabled:f&&!v},u),n().createElement(r.$n,{ouiaId:`${h}-cancel-button`,key:"cancel",variant:r.Ak.link,onClick:i},d)],ouiaId:h},A),c,f?n().createElement(s.S,{isChecked:v,onChange:(e,t)=>C(t),label:g,id:"warning-modal-check",className:"pf-v5-u-mt-lg",ouiaId:`${h}-confirm-checkbox`}):null)}},53926:(e,t,o)=>{"use strict";o.d(t,{Lr:()=>n,cH:()=>s,nU:()=>a,rO:()=>r});var a,n,l=o(44914);!function(e){e.right="right",e.left="left"}(a||(a={})),function(e){e.up="up",e.down="down"}(n||(n={}));const r=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),s=l.createContext({keyHandler:null,sendRef:null})},61354:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(95067);const a={backdrop:"pf-v5-c-backdrop",backdropOpen:"pf-v5-c-backdrop__open"}},81539:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(26078);const a={button:"pf-v5-c-button",modalBox:"pf-v5-c-modal-box",modalBoxBody:"pf-v5-c-modal-box__body",modalBoxClose:"pf-v5-c-modal-box__close",modalBoxDescription:"pf-v5-c-modal-box__description",modalBoxFooter:"pf-v5-c-modal-box__footer",modalBoxHeader:"pf-v5-c-modal-box__header",modalBoxHeaderMain:"pf-v5-c-modal-box__header-main",modalBoxTitle:"pf-v5-c-modal-box__title",modalBoxTitleIcon:"pf-v5-c-modal-box__title-icon",modalBoxTitleText:"pf-v5-c-modal-box__title-text",modifiers:{sm:"pf-m-sm",md:"pf-m-md",lg:"pf-m-lg",alignTop:"pf-m-align-top",danger:"pf-m-danger",warning:"pf-m-warning",success:"pf-m-success",custom:"pf-m-custom",info:"pf-m-info",help:"pf-m-help",icon:"pf-m-icon"},themeDark:"pf-v5-theme-dark"}},405:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var a=o(74848),n=o(46942),l=o.n(n),r=function(){return r=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};const s=function(e){var t,o=e.type,n=e.children,s=e.className,i=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["type","children","className"]),c=l()(s,((t={})["ins-l-".concat(o)]=void 0!==o,t));return(0,a.jsxs)("section",r({},i,{className:c,children:[" ",n," "]}))}},44419:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var a=o(49634),n=o(58471);const l=e=>{const t=(0,a.useNavigate)();return(o,a)=>t((0,n.o)(o,e),a)}},61563:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var a=o(44914),n=o.n(a),l=o(5556),r=o.n(l),s=o(40748),i=o(41939),c=o(6442),u=o(58065),d=o(40335);const m=({isOpen:e,onClose:t,onSubmit:o})=>{const a=(0,c.A)();return n().createElement(i.A,{withCheckbox:!0,isOpen:e,title:a.formatMessage(d.A.warning),checkboxLabel:a.formatMessage(d.A.confirmCheckMessage),confirmButtonLabel:a.formatMessage(d.A.continue),onClose:t,onConfirm:o},n().createElement(s.TextContent,null,n().createElement(s.Text,null,n().createElement(u.A,{...d.A.defaultAccessGroupEditWarning,values:{b:e=>n().createElement("b",null,e)}}))))};m.propTypes={onSubmit:r().func,onClose:r().func,isOpen:r().bool};const p=m},13867:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>T});var a=o(44914),n=o.n(a),l=o(69733),r=o(6442),s=o(58065),i=o(5556),c=o.n(i),u=o(49634),d=o(79994),m=o(26956),p=o(20881),f=o(405),g=o(63767),b=o(61361),h=o(38694),A=o(99843),v=o(41939),C=o(61563);const y=({title:e,text:t,onClose:o,onSubmit:l,isOpen:r,confirmButtonLabel:s,isDefault:i,isChanged:c})=>{const[u,m]=(0,a.useState)(!1);return i&&!c&&u?n().createElement(C.A,{isOpen:u&&r,onClose:()=>{o(),m(!1)},onSubmit:l}):n().createElement(v.A,{title:e,isOpen:r,confirmButtonLabel:s,confirmButtonVariant:d.ButtonVariant.danger,onClose:o,onConfirm:()=>{m(!0),(!i||c)&&l()}},t)};y.propTypes={text:c().node,title:c().node,confirmButtonLabel:c().string,onSubmit:c().func,onClose:c().func,isOpen:c().bool,isDefault:c().bool,isChanged:c().bool},y.defaultProps={isDefault:!1,isChanged:!1};const x=y;var k=o(42134),O=o(40262),R=o(58471),E=o(44419),B=o(47181),M=o(40335),I=o(49573);const S=(e,t,o=[])=>t?.reduce(((t,{uuid:l,display_name:r,name:s,description:i,modified:c})=>[...t,{uuid:l,title:r||s,cells:[n().createElement(a.Fragment,{key:`${l}-name`},n().createElement(R.A,{to:I.A["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",l)},r||s)),i,n().createElement(a.Fragment,{key:`${l}-modified`},n().createElement(g.A,{date:c,type:(0,k.eW)(c)}))],selected:Boolean(o&&o.find((e=>e.uuid===l)))}]),[])||[],_=e=>e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button",L=(e,t,o)=>{const a=(0,r.A)(),l=n().createElement(d.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},a.formatMessage(M.A.addRole));return e?n().createElement(m.Tooltip,{content:o||a.formatMessage(M.A.allRolesAdded)},l):l},w=({groupReducer:{selectedGroup:e,systemGroup:t,groups:o}})=>({roles:e.roles?.data||[],pagination:{...b.L6,...e.roles?.meta||{}},groupsPagination:o.pagination||o.meta,groupsFilters:o.filters,isLoading:e.roles?.isLoading,isPlatformDefault:e.platform_default,isAdminDefault:e.admin_default,isChanged:!e.system,disableAddRoles:Object.keys(e.addRoles.pagination||{}).length>0?!(e.addRoles.pagination&&e.addRoles.pagination.count>0&&!e.admin_default):!!e.admin_default,systemGroupUuid:t?.uuid,group:e}),D=({onDefaultGroupChanged:e})=>{const t=(0,r.A)(),o=(0,p.A)(),i=(0,l.useDispatch)(),c=(0,E.A)(),{groupId:d}=(0,u.useParams)(),[m,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[C,y]=(0,a.useState)([]),[D,T]=(0,a.useState)([]),[P,j]=(0,a.useState)(!1),[F,G]=(0,a.useState)((()=>null)),[N,U]=(0,a.useState)({}),{userAccessAdministrator:V,orgAdmin:$}=(0,a.useContext)(O.A),H=(0,a.useRef)($||V),{roles:q,pagination:Q,groupsPagination:W,groupsFilters:X,isLoading:Z,group:z,isPlatformDefault:J,isAdminDefault:K,isChanged:Y,disableAddRoles:ee,systemGroupUuid:te}=(0,l.useSelector)(w),oe=(e,t)=>(e.payload.then(t),e),ae=e=>i((0,A.bf)(e,{},{})),ne=e=>i((0,A.Ui)(e??d)),le=()=>i((0,A.jL)({chrome:o})),re=(e,t,o)=>i(oe((0,A.Dd)(e,t),o)),se=e=>(t,o)=>i((0,A.yX)(t,e,o)),ie=[{title:t.formatMessage(M.A.name),orderBy:"name"},{title:t.formatMessage(M.A.description)},{title:t.formatMessage(M.A.lastModified)}];(0,a.useEffect)((()=>{d!==B.p3?se({...Q,offset:0})(d):te&&se({...Q,offset:0})(te)}),[te]),(0,a.useEffect)((()=>{q.length>0&&(d!==B.p3?ae(d):te&&ae(te))}),[q]),(0,a.useEffect)((()=>{H.current=$||V}),[$,V]);const ce=(e,t,o)=>n().createElement("p",null,n().createElement(s.A,{...o?M.A.removeRolesModalText:M.A.removeRoleModalText,values:{b:e=>n().createElement("b",null,e),name:e,...o?{roles:t}:{role:t}}})),ue=d!==B.p3?d:te,de=()=>{J?le().then((({value:{data:e}})=>{se({...Q,offset:0})(e[0].uuid)})):se({...Q,offset:0})(d)};return n().createElement(n().Fragment,null,n().createElement(x,{text:N.text,title:N.title,isOpen:P,isChanged:Y,isDefault:J||K,confirmButtonLabel:N.confirmButtonLabel,onClose:()=>j(!1),onSubmit:()=>{j(!1),F(),y([]),e(J&&!Y)}}),n().createElement(f.A,{type:"content",id:"tab-roles"},n().createElement(h.Z,{columns:ie,isSelectable:H.current&&!K,rows:S(d,q,C),data:q,filterValue:b,fetchData:e=>{se(e)(ue)},emptyFilters:{name:"",description:""},setFilterValue:({name:e,description:t})=>{void 0!==e&&v(e),void 0!==t&&g(t)},isLoading:Z,pagination:Q,checkedRows:C,setCheckedItems:e=>{y((t=>e(t).map((({uuid:e,name:t,label:o})=>({uuid:e,label:o||t})))))},titlePlural:t.formatMessage(M.A.roles).toLowerCase(),titleSingular:t.formatMessage(M.A.role),toolbarButtons:()=>[...H.current&&!K?[n().createElement(R.A,{className:`rbac-m-hide-on-sm rbac-c-button__add-role${ee&&"-disabled"}`,to:I.A["group-add-roles"].link.replace(":groupId",d),key:"add-to-group"},L(ee,_(name||""),K&&t.formatMessage(M.A.defaultGroupNotManually))),{label:t.formatMessage(M.A.addRole),props:{isDisabled:ee,className:"rbac-m-hide-on-md"},onClick:()=>c(I.A["group-add-roles"].link.replace(":groupId",d))},{label:t.formatMessage(M.A.remove),props:{isDisabled:!C||!C.length>0,variant:"danger"},onClick:()=>{const e=C.length>1;G((()=>()=>re(ue,C.map((e=>e.uuid)),de))),U({title:t.formatMessage(e?M.A.removeRolesQuestion:M.A.removeRoleQuestion),confirmButtonLabel:t.formatMessage(e?M.A.removeRoles:M.A.removeRole),text:ce(name,e?C.length:q.find((e=>e.uuid===C[0].uuid)).name,e)}),j(!0)}}]:[]],actionResolver:()=>[...H.current&&!K?[{title:t.formatMessage(M.A.remove),onClick:(e,o,a)=>{G((()=>()=>re(ue,[a.uuid],de))),U({title:t.formatMessage(M.A.removeRoleQuestion),confirmButtonLabel:t.formatMessage(M.A.removeRole),text:ce(name,a.title,!1)}),j(!0)}}]:[]],ouiaId:"roles-table",emptyProps:{title:t.formatMessage(M.A.noGroupRoles),description:[t.formatMessage(K?M.A.contactServiceTeamForRoles:M.A.addRoleToConfigureAccess),""]},filters:[{key:"name",value:b},{key:"description",value:m}],tableId:"group-roles"})),n().createElement(a.Suspense,null,n().createElement(u.Outlet,{context:{[I.A["group-roles-edit-group"].path]:{group:z,cancelRoute:I.A["group-detail-roles"].link.replace(":groupId",d),postMethod:()=>i((0,A.Ui)(ue))},[I.A["group-roles-remove-group"].path]:{postMethod:()=>i((0,A.pl)({...W,offset:0,filters:X,usesMetaInURL:!0,chrome:o})),cancelRoute:I.A["group-detail-roles"].link.replace(":groupId",d),submitRoute:(0,k.Fm)(I.A.groups.link,{...W,offset:0},X),groupsUuid:[z]},[I.A["group-add-roles"].path]:{afterSubmit:()=>{J||K?le().then((({value:{data:e}})=>{se(Q)(e[0].uuid),ne(e[0].uuid)})):(se(Q)(d),ne())},fetchUuid:te,selectedRoles:D,setSelectedRoles:T,closeUrl:I.A["group-detail"].link.replace(":groupId",J?B.p3:d),addRolesToGroup:(e,t,o)=>i(oe((0,A.Lu)(e,t),o)),groupName:z.name,isDefault:J||K,isChanged:Y,onDefaultGroupChanged:e}}})))};D.propTypes={searchFilter:c().string,selectedRoles:c().array,pagination:c().shape({limit:c().number.isRequired,offset:c().number.isRequired,count:c().number}),onDefaultGroupChanged:c().func},D.defaultProps={pagination:b.qp,selectedRoles:[]};const T=D},95067:()=>{},26078:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1192.e3debd2571fea6d86daee782e661c0eb.js.map