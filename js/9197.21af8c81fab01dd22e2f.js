/*! For license information please see 9197.21af8c81fab01dd22e2f.js.LICENSE.txt */
"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[9197,7664],{91290:(e,t,r)=>{r.d(t,{ZP:()=>i,iC:()=>o,sN:()=>a});var n=r(40400);const a={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},o=(0,n.IU)(a),i=o},46441:(e,t,r)=>{r.d(t,{Z:()=>c});r(71002);var n=r(76857),a=r(92950),o=r.n(a),i=r(45697),s=r.n(i),u=(r(27361),r(48880));s().oneOfType([s().string,s().func,s().object]),s().func.isRequired,s().node.isRequired,s().bool,s().func.isRequired,s().node.isRequired,s().func.isRequired;var l=function(e){var t=e.renderNextButton,r=e.disableBack,i=e.handlePrev,s=e.buttonLabels,l=s.cancel,c=s.back,m=e.context,d=(0,u.default)(),f=(0,a.useContext)(m),p=f.success,g=f.error,h=f.submitting;return p||void 0===g||g||h?null:o().createElement(a.Fragment,null,t(),o().createElement(n.Button,{type:"button",variant:"secondary",isDisabled:r,onClick:i},c),o().createElement(n.Button,{type:"button",variant:"link",onClick:d.onCancel},l))};l.propTypes={disableBack:s().bool,handlePrev:s().func.isRequired,handleNext:s().func.isRequired,nextStep:s().oneOfType([s().string,s().shape({when:s().string.isRequired,stepMapper:s().object.isRequired}),s().func]),buttonLabels:s().shape({submit:s().node.isRequired,cancel:s().node.isRequired,back:s().node.isRequired,next:s().node.isRequired}).isRequired,context:s().object.isRequired,renderNextButton:s().func};const c=l},65731:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),o=r(76857),i=r(70363),s=r(43047),u=r(86896),l=r(45697),c=r.n(l),m=r(30893),d=function(e){var t=e.context,r=e.title,l=e.text,c=(0,u.Z)(),d=(0,n.useContext)(i.default).jumpToStep,f=(0,n.useContext)(t).setWizardError;return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.large},a().createElement(o.EmptyStateIcon,{color:"red",icon:s.ZP}),a().createElement(o.Title,{headingLevel:"h4",size:"lg"},r),a().createElement(o.EmptyStateBody,null,l),a().createElement(o.Button,{onClick:function(){f(void 0),d(0)},variant:"primary"},c.formatMessage(m.Z.returnToStepNumber,{number:1})))};d.propTypes={context:c().object.isRequired,title:c().string.isRequired,text:c().string.isRequired};const f=d},50045:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ct});var n=r(93433),a=r(29439),o=r(4942),i=r(92950),s=r.n(i),u=r(46801),l=r(1936),c=r(76857),m=r(86896),d=r(55140),f=r(44873),p=r(45987),g=r(87462),h=r(45697),v=r.n(h),b=r(50533),y=r(71355),Z=r(93025),E=r(67850),M=r(52817),O=r(73943),k=r(64124),R=r(96354),w=r(48880),S=r(71002),x=r(15861),C=r(89168),j=r(40639),P=r(28412),D=r(82644),T=r(29558),I=r(30893),G=r(2034);function L(){L=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=Z(i,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function m(){}function d(){}function f(){}var p={};s(p,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(k([])));h&&h!==t&&r.call(h,a)&&(p=h);var v=f.prototype=m.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function n(a,o,i,s){var u=l(e[a],e,o);if("throw"!==u.type){var c=u.arg,m=c.value;return m&&"object"==(0,S.Z)(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(m).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=f,s(v,"constructor",f),s(f,"constructor",d),d.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),s(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(u(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),s(v,i,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}var N=function(){var e=(0,x.Z)(L().mark((function e(t,r,n){var a,o,i,s,u;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,D.Sn)(),s=(0,T.d)({locale:P.S,messages:G},i),t){e.next=4;break}return e.abrupt("return",void 0);case 4:if(!(t.length>150)){e.next=6;break}throw s.formatMessage(I.Z.maxCharactersWarning,{number:150});case 6:return e.next=8,(0,C.bt)({limit:10,offset:0,filters:{name:t},nameMatch:"exact"}).catch((function(e){console.error(e)}));case 8:if(u=e.sent,!(n?null==u||null===(a=u.data)||void 0===a?void 0:a.some((function(e){return e[r]!==n})):(null==u||null===(o=u.data)||void 0===o?void 0:o.length)>0)){e.next=11;break}throw s.formatMessage(I.Z.nameAlreadyTaken);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),_=(0,j.Z)((function(e,t,r){return N(e,t,r)})),B=r(65731);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e){var t,r=e.formFields,n=(0,m.Z)(),a=(0,i.useContext)(Re),o=a.submitting,u=a.error,l=a.setWizardError,d=(0,w.default)().getState;return(0,i.useEffect)((function(){l(void 0),N(d().values["group-name"]).then((function(){return l(!1)})).catch((function(){return l(!0)}))}),[]),void 0===u||o?s().createElement(c.Bullseye,null,s().createElement(c.Spinner,{size:"xl"})):!0===u?s().createElement(B.Z,{context:Re,title:n.formatMessage(I.Z.groupNameTakenTitle),text:n.formatMessage(I.Z.groupNameTakenText)}):s().createElement(s().Fragment,null,s().createElement(c.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},n.formatMessage(I.Z.reviewDetails)),[[F({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};q.propTypes={formFields:v().array};const U=q;var V=r(46441),z=r(19756),W=r(93736),Q=r(41693),K=r(92607),H=r(23393),X=r(59775),Y=function(e,t){return void 0===e||t?"error":"default"},J=function(e){return(null==e?void 0:e.length)>150?"error":"default"},$=function(e){var t=(0,m.Z)(),r=(0,Q.Z)(e).input,n=(0,w.default)(),o=n.getState().values,u=o["group-name"],l=o["group-description"],d=(0,i.useState)(u||""),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=(0,i.useState)(),v=(0,a.Z)(h,2),b=v[0],y=v[1],Z=(0,i.useState)(l),E=(0,a.Z)(Z,2),M=E[0],O=E[1],k=function(e){r.onChange(void 0),_(e).then((function(){r.onChange(e),y(void 0)})).catch((function(e){y(e)})),g(e)};return(0,i.useEffect)((function(){(null==p?void 0:p.length)>0&&k(p)}),[]),s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(X.c,{label:t.formatMessage(I.Z.groupName),helperTextInvalid:p?b:t.formatMessage(I.Z.required),isRequired:!0,validated:Y(p,b)},s().createElement(K.oi,{value:p,type:"text",validated:Y(p,b),onBlur:function(){return""===p&&g(void 0)},onChange:function(e){return k(e)},"aria-label":"Group name"}))),s().createElement(c.StackItem,null,s().createElement(X.c,{label:t.formatMessage(I.Z.groupDescription),helperTextInvalid:t.formatMessage(I.Z.maxCharactersWarning,{number:150}),validated:J(M)},s().createElement(H.Kx,{value:M,validated:J(M),onChange:function(e){O(e),n.change("group-description",e)},"aria-label":"Group description",resizeOrientation:"vertical"}))))};$.propTypes={name:v().string,description:v().string,groups:v().array};const ee=$;var te=r(97384),re=function(e){var t=(0,m.Z)(),r=(0,i.useState)([]),n=(0,a.Z)(r,2),o=n[0],u=n[1],l=(0,Q.Z)(e).input,d=(0,w.default)();return(0,i.useEffect)((function(){u(d.getState().values["roles-list"]||[])}),[]),(0,i.useEffect)((function(){l.onChange(o),d.change("roles-list",o)}),[o]),s().createElement(i.Fragment,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(c.Text,null,t.formatMessage(I.Z.selectRolesForGroupText)))),s().createElement(c.StackItem,null,s().createElement(c.FormGroup,{fieldId:"select-role"},s().createElement(te.Z,{selectedRoles:o,setSelectedRoles:u,rolesExcluded:!1})))))};re.propTypes={selectedRoles:v().array,setSelectedRoles:v().func,title:v().string,description:v().string};const ne=re;var ae=r(11107),oe=r(90944),ie=r(30060),se=r(88093),ue=r(26794),le=r(65916),ce=r(92758),me=r(58654);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=function(e){var t=e.selectedUsers,r=e.setSelectedUsers,n=e.userLinks,o=e.usesMetaInURL,c=e.displayNarrow,d=e.props,f=(0,m.Z)(),p=(0,u.useNavigate)(),h=(0,u.useLocation)(),v=(0,b.useDispatch)(),y=(0,i.useContext)(ue.Z).orgAdmin,Z=(0,i.useRef)(null),E=(0,b.useSelector)((function(e){var t,r,n=e.userReducer.users;return{limit:null!==(t=o?n.pagination.limit:n.meta.limit)&&void 0!==t?t:(y?le.HE:le.he).limit,offset:null!==(r=o?n.pagination.offset:n.meta.offset)&&void 0!==r?r:(y?le.HE:le.he).offset,count:o?n.pagination.count:n.meta.count,redirected:o&&n.pagination.redirected}})),M=(0,b.useSelector)((function(e){var t,r=e.userReducer,n=r.users,a=n.data,o=n.filters,i=void 0===o?{}:o,s=r.isUserDataLoading;return{users:null==a||null===(t=a.map)||void 0===t?void 0:t.call(a,(function(e){return fe(fe({},e),{},{uuid:e.username})})),isLoading:s,stateFilters:h.search.length>0||Object.keys(i).length>0?i:{status:["Active"]}}})),O=M.users,k=M.isLoading,R=M.stateFilters,w=(0,i.useCallback)((function(e){return v((0,oe.u)(e))}),[v]),S=(0,i.useCallback)((function(e){return v((0,oe.a)(e))}),[v]),x=[{title:f.formatMessage(c?I.Z.orgAdmin:I.Z.orgAdministrator),key:"org-admin",transforms:[l.nowrap]},{title:f.formatMessage(I.Z.username),key:"username",transforms:[l.sortable]},{title:f.formatMessage(I.Z.email)},{title:f.formatMessage(I.Z.firstName),transforms:[l.nowrap]},{title:f.formatMessage(I.Z.lastName),transforms:[l.nowrap]},{title:f.formatMessage(I.Z.status),transforms:[l.nowrap]}],C=(0,i.useState)({index:1,direction:"asc"}),j=(0,a.Z)(C,2),P=j[0],D=j[1],T=(0,i.useState)(o?R:{username:"",email:"",status:[f.formatMessage(I.Z.active)]}),G=(0,a.Z)(T,2),L=G[0],N=G[1];return(0,i.useEffect)((function(){o&&(0,le.oG)(h,p,E.limit,E.offset)}),[E.offset,E.limit,E.count,E.redirected]),(0,i.useEffect)((function(){var e=(0,le.rj)(h,p,E),t=e.limit,r=e.offset,n=o?(0,ce.aX)(h,p,["username","email","status"],L):{status:L.status};N(n),w(fe(fe({},(0,ae.jl)({limit:t,offset:r,filters:n})),{},{usesMetaInURL:o}))}),[]),(0,i.useEffect)((function(){o&&((0,le.Zc)(h)||(0,le.oG)(h,p,E.limit,E.offset),Object.values(L).some((function(e){return(null==e?void 0:e.length)>0}))&&!(0,ce.qF)(h,Object.keys(L))&&(0,ce.aX)(h,p,Object.keys(L),L))})),s().createElement(ie.M,(0,g.Z)({isCompact:!0,isSelectable:!0,borders:!1,columns:x,rows:(0,me.H)(n,O,f,t,!0),sortBy:P,onSort:function(e,t,r){var n="".concat("desc"===r?"-":"").concat(x[t].key);D({index:t,direction:r}),w(fe(fe({},E),{},{filters:L,usesMetaInURL:o,orderBy:n}))},data:O,ouiaId:"users-table",fetchData:function(e){var t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:L.status,r=e.username,n=e.email,a=e.count,i=e.limit,s=e.offset,u=e.orderBy;w(fe(fe({},(0,ae.jl)({count:a,limit:i,offset:s,orderBy:u,filters:{username:r,email:n,status:t}})),{},{usesMetaInURL:o})).then((function(){var e;null==Z||null===(e=Z.current)||void 0===e||e.focus()})),o&&(0,ce.MS)(h,p,{username:r,email:n,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:function(e){var t,r=e.username,n=e.email,a=e.status;t={username:void 0===r?L.username:r,email:void 0===n?L.email:n,status:void 0===a||a===L.status?L.status:a},o&&S(t),N(fe({username:""},t))},isLoading:k,pagination:E,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid;return{uuid:t,label:e.username||t}}))}))},rowWrapper:se.Z,titlePlural:f.formatMessage(I.Z.users).toLowerCase(),titleSingular:f.formatMessage(I.Z.user),filters:[{key:"username",value:L.username,placeholder:f.formatMessage(I.Z.filterByKey,{key:f.formatMessage(I.Z.username).toLowerCase()}),innerRef:Z},{key:"email",value:L.email,placeholder:f.formatMessage(I.Z.filterByKey,{key:f.formatMessage(I.Z.email).toLowerCase()}),innerRef:Z},{key:"status",value:L.status,label:f.formatMessage(I.Z.status),type:"checkbox",items:[{label:f.formatMessage(I.Z.active),value:"Active"},{label:f.formatMessage(I.Z.inactive),value:"Inactive"}]}],tableId:"users-list"},d))};pe.propTypes={displayNarrow:v().bool,users:v().array,searchFilter:v().string,setSelectedUsers:v().func.isRequired,selectedUsers:v().array,userLinks:v().bool,props:v().object,usesMetaInURL:v().bool},pe.defaultProps={displayNarrow:!1,users:[],selectedUsers:[],setSelectedUsers:function(){},userLinks:!1,usesMetaInURL:!1};const ge=pe;var he=r(82916),ve=function(e){var t=(0,i.useState)([]),r=(0,a.Z)(t,2),n=r[0],o=r[1],u=(0,Q.Z)(e).input,l=(0,m.Z)(),d=(0,w.default)();return(0,i.useEffect)((function(){o(d.getState().values["users-list"]||[])}),[]),(0,i.useEffect)((function(){u.onChange(n),d.change("users-list",n)}),[n]),s().createElement(i.Fragment,null,s().createElement(c.Form,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(he.Z,{linkDescription:l.formatMessage(I.Z.toManageUsersText)}))),s().createElement(c.StackItem,null,s().createElement(c.FormGroup,{fieldId:"select-user"},s().createElement(c.Card,null,s().createElement(ge,{selectedUsers:n,setSelectedUsers:o,displayNarrow:!0})))))))};ve.propTypes={selectedUsers:v().array,setSelectedUsers:v().func,title:v().string,description:v().string};const be=ve;var ye=function(){var e=(0,m.Z)(),t=(0,w.default)().getState().values,r=t["group-name"],n=t["group-description"],a=t["users-list"],o=t["roles-list"];return s().createElement("div",{className:"rbac"},s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(I.Z.groupName))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},r))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(I.Z.groupDescription))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},n))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(I.Z.roles))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},o.map((function(e,t){return s().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))),s().createElement(c.Grid,null,s().createElement(c.GridItem,{md:3},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(I.Z.members))),s().createElement(c.GridItem,{md:9},s().createElement(c.Text,{component:c.TextVariants.p},a.map((function(e,t){return s().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))))))))};ye.propTypes={name:v().string,description:v().string,groups:v().array};const Ze=ye;var Ee=r(4682),Me=["Content"];function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=(0,i.createContext)({success:!1,submitting:!1,error:void 0}),we=function(e){return s().createElement(E.ZP,(0,g.Z)({},e,{showFormControls:!1}))},Se=function(e){var t=e.Content,r=(0,p.Z)(e,Me);return s().createElement(t,r)};Se.propTypes={Content:v().elementType.isRequired};var xe={description:Se,"set-name":ee,"set-roles":ne,"set-users":be,"summary-content":Ze},Ce=function(e,t,r){return function(n){r(n),Object.keys(n).length>0?t(!0):e()}},je=function(e){var t=e.postMethod,r=e.pagination,n=e.filters,o=e.orderBy,u=(0,b.useDispatch)(),l=(0,m.Z)(),c=(0,i.useRef)(function(){var e=(0,D.Sn)(),t=(0,T.d)({locale:P.S,messages:G},e);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:t.formatMessage(I.Z.createGroup),fields:[{name:"name-and-description",nextStep:"add-roles",title:t.formatMessage(I.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:k.Z.REQUIRED}]},{component:R.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:k.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:t.formatMessage(I.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:"review",title:t.formatMessage(I.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},{name:"review",title:t.formatMessage(I.Z.reviewDetails),buttons:function(e){return s().createElement(V.Z,(0,g.Z)({},e,{context:Re}))},StepTemplate:U,fields:[{component:"summary-content",name:"summary-content"}]}]}]}}()),d=(0,W.Z)(),f=(0,i.useState)(!1),p=(0,a.Z)(f,2),h=p[0],v=p[1],E=(0,i.useState)({}),w=(0,a.Z)(E,2),S=w[0],x=w[1],C=(0,i.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),j=(0,a.Z)(C,2),L=j[0],N=j[1],_=function(){u((0,y.addNotification)({variant:"warning",title:l.formatMessage(I.Z.addingGroupTitle),dismissDelay:8e3,description:l.formatMessage(I.Z.addingGroupCanceledDescription)})),d({pathname:Ee.Z.groups.link,search:(0,ae.GT)(ke({page:1,per_page:r.limit},n))})};return h?s().createElement(O.R,{type:"group",isOpen:h,onModalCancel:function(){return v(!1)},onConfirmCancel:_}):s().createElement(Re.Provider,{value:ke(ke({},L),{},{setWizardError:function(e){return N((function(t){return ke(ke({},t),{},{error:e})}))},setWizardSuccess:function(e){return N((function(t){return ke(ke({},t),{},{success:e})}))},setHideForm:function(e){return N((function(t){return ke(ke({},t),{},{hideForm:e})}))}})},s().createElement(Z.Z,{schema:c.current,subscription:{values:!0},FormTemplate:we,componentMapper:ke(ke({},M.ZP),xe),onSubmit:function(e){var n={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((function(e){return{username:e.label}})),roles_list:e["roles-list"].map((function(e){return e.uuid}))};d({pathname:Ee.Z.groups.link,search:(0,ae.GT)({page:1,per_page:r.limit})}),u((0,z.Rp)(n)).then((function(){return t({limit:r.limit,offset:0,orderBy:o,filters:{}})})).then((function(){u((0,y.addNotification)({variant:"success",title:l.formatMessage(I.Z.addGroupSuccessTitle),dismissDelay:8e3,description:l.formatMessage(I.Z.addGroupSuccessDescription)}))}))},initialValues:S,onCancel:Ce(_,v,x)}))};je.propTypes={postMethod:v().func,pagination:v().shape({limit:v().number.isRequired}).isRequired,filters:v().object.isRequired,orderBy:v().string};const Pe=je;var De=r(40483),Te=r(36457);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le=function(e){var t=e.postMethod,r=e.pagination,n=e.filters,o=e.cancelRoute,l=e.submitRoute,d=void 0===l?o:l,f=e.group,p=e.onClose,h=(0,m.Z)(),v=(0,i.useState)(void 0),Z=(0,a.Z)(v,2),E=Z[0],O=Z[1],w=(0,u.useNavigate)(),S=(0,u.useParams)().groupId,x=function(e){O(e)},C=(0,b.useDispatch)();(0,i.useEffect)((function(){S&&(0,z.yi)(S).payload.then((function(e){return x(e)})).catch((function(){return x(void 0)}))}),[]),(0,i.useEffect)((function(){O(f)}),[f]);var j=function(){C((0,y.addNotification)({variant:"warning",dismissDelay:8e3,title:h.formatMessage(E?I.Z.editingGroupTitle:I.Z.addingGroupTitle),description:h.formatMessage(E?I.Z.editGroupCanceledDescription:I.Z.addingGroupCanceledDescription)})),p(),w(o)},P={fields:[Ge(Ge({name:"name",label:h.formatMessage(I.Z.name),component:E?R.Z.TEXT_FIELD:"skeleton"},E?{validateOnMount:!0}:{}),{},{validate:[{type:"validate-group-name",id:null!=S?S:f.uuid,idKey:"uuid"},{type:k.Z.REQUIRED}]}),{name:"description",label:h.formatMessage(I.Z.description),component:E?R.Z.TEXTAREA:"skeleton",validate:[{type:k.Z.MAX_LENGTH,threshold:150}]}]},D={"validate-group-name":function(e){var t=e.idKey,r=e.id;return function(e){return _(e,t,r)}}};return s().createElement(Te.Z,{schema:P,componentMapper:Ge(Ge({},M.ZP),{},{skeleton:c.Skeleton}),onCancel:j,onSubmit:function(e){var a={uuid:e.uuid,description:e.description||null,name:e.name};t?C((0,z.mD)(a)).then((function(){return t({limit:null==r?void 0:r.limit,filters:n})})).then(w(d)):C((0,z.mD)(a)).then((function(){w(d)}))},validatorMapper:D,initialValues:Ge({},E),FormTemplate:function(e){return s().createElement(De.Z,(0,g.Z)({},e,{ModalProps:{onClose:j,isOpen:!0,variant:"medium",title:h.formatMessage(I.Z.editGroupInfo)}}))}})};Le.defaultProps={cancelRoute:Ee.Z.groups.path,onClose:function(){return null}},Le.propTypes={postMethod:v().func,pagination:v().shape({limit:v().number.isRequired}).isRequired,filters:v().object.isRequired,cancelRoute:v().oneOfType([v().string,v().shape({pathname:v().string.isRequired,search:v().string,hash:v().string})]),submitRoute:v().oneOfType([v().string,v().shape({pathname:v().string.isRequired,search:v().string,hash:v().string})]),group:v().object,onClose:v().func};const Ne=Le;var _e=r(44012),Be=r(69957),Ae=r(19571),Fe=function(e){var t=e.groupsUuid,r=e.isModalOpen,n=e.postMethod,o=e.pagination,l=e.filters,d=e.cancelRoute,f=e.submitRoute,p=void 0===f?d:f,h=(0,m.Z)(),v=(0,b.useSelector)((function(e){var t=e.groupReducer.selectedGroup;return{group:t,isLoading:!t.loaded}}),b.shallowEqual),y=v.group,Z=v.isLoading,E=(0,b.useDispatch)();(0,i.useEffect)((function(){1===t.length&&E((0,z.yi)(t[0].uuid))}),[]);var M=(0,u.useNavigate)(),O=(0,i.useState)(!1),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=t.length>1,x=function(){return M(d)};return s().createElement(c.Modal,{className:"rbac",isOpen:r,variant:c.ModalVariant.small,title:s().createElement(c.Text,null,s().createElement(Be.ZP,{className:"delete-group-warning-icon"}),"  ",h.formatMessage(S?I.Z.deleteGroupsQuestion:I.Z.deleteGroupQuestion)),onClose:x,actions:[s().createElement(c.Button,{key:"submit",isDisabled:!R,variant:"danger",type:"button",onClick:function(){var e=t.map((function(e){return e.uuid}));E((0,z.gg)(e)).then((function(){return n(e,{limit:null==o?void 0:o.limit,filters:l})})).then(M(p))}},h.formatMessage(S?I.Z.deleteGroups:I.Z.deleteGroup)),s().createElement(c.Button,{key:"cancel",variant:"link",type:"button",onClick:x},h.formatMessage(I.Z.cancel))]},s().createElement(c.TextContent,null,S?s().createElement(c.Text,null,s().createElement(_e.Z,(0,g.Z)({},I.Z.deletingGroupsRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},count:t.length}}))):Z?s().createElement(Ae.Z0,null):s().createElement(c.Text,null,s().createElement(_e.Z,(0,g.Z)({},I.Z.deletingGroupRemovesRoles,{values:{b:function(e){return s().createElement("b",null,e)},name:y.name}}))))," ",s().createElement(c.Checkbox,{isChecked:R,onChange:function(){return w(!R)},label:h.formatMessage(I.Z.understandActionIrreversible),id:"delete-group-check"}))};Fe.defaultProps={groupsUuid:[],isModalOpen:!1,cancelUrl:Ee.Z.groups.path},Fe.propTypes={groupsUuid:v().array.isRequired,isModalOpen:v().bool,postMethod:v().func,pagination:v().shape({limit:v().number.isRequired}).isRequired,filters:v().object.isRequired,cancelRoute:v().oneOfType([v().string,v().shape({pathname:v().string.isRequired,search:v().string,hash:v().string})]),submitRoute:v().oneOfType([v().string,v().shape({pathname:v().string.isRequired,search:v().string,hash:v().string})])};const qe=Fe;var Ue=r(91290),Ve=r(94184),ze=r.n(Ve),We=r(62410),Qe=r(94496),Ke=function(e){var t=e.id,r=e.uuid,n=e.bodyContent,o=(0,i.useState)(!1),u=(0,a.Z)(o,2),l=u[0],m=u[1],d=(0,i.useRef)(null);return s().createElement("span",{ref:d,key:"".concat(r,"-popover"),id:t},s().createElement(c.Popover,{zIndex:"110",position:"right",isVisible:l,shouldClose:function(){return m(!1)},hideOnOutsideClick:!0,bodyContent:n,appendTo:d.current},s().createElement(Ue.ZP,{onClick:function(){return m(!l)},className:ze()("pf-c-question-circle-icon",{"icon-active":l})})))};Ke.propTypes={id:v().string.isRequired,uuid:v().string.isRequired,bodyContent:v().string.isRequired};var He=r(38376),Xe=function(e){var t=e.tabItems,r=e.isHeader,n=(0,u.useLocation)().pathname,a=(0,u.useNavigate)(),o=t.find((function(e){var t=e.name;return n.includes(t)}));return s().createElement(c.Tabs,{className:r?"rbac-page-header__tabs":"",activeKey:o?o.eventKey:0,onSelect:function(e,r){return a(t[r].to)}},t.map((function(e){return s().createElement(c.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};Xe.propTypes={tabItems:v().array.isRequired,isHeader:v().bool};const Ye=Xe;var Je=function(e){var t=e.closeUrl,r=(0,d.Z)(),n=(0,m.Z)(),o=(0,W.Z)(),l=(0,u.useParams)().groupId,f=(0,b.useDispatch)(),p=(0,i.useState)([]),g=(0,a.Z)(p,2),h=g[0],v=g[1],Z=function(){f((0,y.addNotification)({variant:"warning",title:n.formatMessage(h.length>1?I.Z.addingGroupMembersTitle:I.Z.addingGroupMemberTitle),dismissDelay:8e3,description:n.formatMessage(h.length>1?I.Z.addingGroupMembersCancelled:I.Z.addingGroupMemberCancelled)})),o(t)};return s().createElement(c.Modal,{title:n.formatMessage(I.Z.addMembers),variant:c.ModalVariant.medium,isOpen:!0,actions:[s().createElement(c.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:0===h.length,variant:"primary",onClick:function(){var e=h.map((function(e){return{username:e.label}}));e.length>0&&(f((0,y.addNotification)({variant:"info",title:n.formatMessage(e.length>1?I.Z.addingGroupMembersTitle:I.Z.addingGroupMemberTitle),dismissDelay:8e3,description:n.formatMessage(e.length>1?I.Z.addingGroupMembersDescription:I.Z.addingGroupMemberDescription)})),f((0,z.dy)(l,e)).then((function(){f((0,z.nd)(l)),f((0,z.bt)({usesMetaInURL:!0,chrome:r}))}))),o(t)}},n.formatMessage(I.Z.addToGroup)),s().createElement(c.Button,{id:"add-groups-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:Z},n.formatMessage(I.Z.cancel))],onClose:Z},s().createElement(c.Stack,{hasGutter:!0},s().createElement(c.StackItem,null,s().createElement(c.TextContent,null,s().createElement(he.Z,{linkDescription:n.formatMessage(I.Z.toManageUsersText)}))),s().createElement(c.StackItem,null,s().createElement(ge,{selectedUsers:h,setSelectedUsers:v,displayNarrow:!0}))))};Je.defaultProps={closeUrl:Ee.Z.groups.link},Je.propTypes={closeUrl:v().string};const $e=Je;var et=r(1227);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt=function(e){var t=e.groupReducer.selectedGroup;return{members:t.members.data,pagination:t.members.meta,groupName:t.name,admin_default:t.admin_default,platform_default:t.platform_default,isLoading:t.members.isLoading}},at=function(e,t,r){return s().createElement(_e.Z,(0,g.Z)({},r?I.Z.removeMembersText:I.Z.removeMemberText,{values:{b:function(e){return s().createElement("b",null,e)},name:e,group:t}}))};const ot=function(){var e=(0,m.Z)(),t=(0,d.Z)(),r=(0,i.useState)(""),o=(0,a.Z)(r,2),p=o[0],g=o[1],h=(0,i.useState)([]),v=(0,a.Z)(h,2),y=v[0],Z=v[1],E=(0,i.useState)(!1),M=(0,a.Z)(E,2),O=M[0],k=M[1],R=(0,i.useState)((function(){return null})),w=(0,a.Z)(R,2),S=w[0],x=w[1],C=(0,i.useState)({}),j=(0,a.Z)(C,2),P=j[0],D=j[1],T=(0,u.useParams)().groupId,G=(0,b.useSelector)(nt,b.shallowEqual),L=G.members,N=G.pagination,_=G.groupName,B=G.isLoading,A=G.admin_default,F=G.platform_default,q=(0,i.useContext)(ue.Z),U=q.userAccessAdministrator,V=q.orgAdmin,Q=(0,i.useRef)(V||U),K=[{title:e.formatMessage(I.Z.status),transforms:[l.nowrap]},{title:e.formatMessage(I.Z.username)},{title:e.formatMessage(I.Z.email)},{title:e.formatMessage(I.Z.lastName)},{title:e.formatMessage(I.Z.firstName)}],H=(0,b.useDispatch)(),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;H((0,z.nd)(T,e,t))};(0,i.useEffect)((function(){X()}),[]),(0,i.useEffect)((function(){Q.current=V||U}),[V,U]);var Y=function(e){return H((0,z.tz)(T,e)).then((function(){Z([]),X(void 0,rt(rt({},N),{},{offset:0})),H((0,z.bt)({usesMetaInURL:!0,chrome:t}))}))},J=((0,W.Z)(),(L||[]).map((function(e){return rt(rt({},e),{},{uuid:e.username})}))),$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,m.Z)();return e.reduce((function(e,a){var o=a.is_active,i=a.username,u=a.email,l=a.first_name,m=a.last_name;return[].concat((0,n.Z)(e),[{uuid:i,username:i,cells:[{title:s().createElement(c.Label,{color:o&&"green"},r.formatMessage(o?I.Z.active:I.Z.inactive)),props:{data:{isActive:o}}},i,u,m,l],selected:t.find((function(e){return e.uuid===i}))}])}),[])}(J,y);return s().createElement(i.Fragment,null,s().createElement(et.Z,{text:P.text,title:P.title,confirmButtonLabel:P.confirmButtonLabel,isOpen:O,onClose:function(){return k(!1)},onSubmit:function(){k(!1),S()}}),s().createElement(f.Z,{type:"content",id:"tab-principals"},F||A?s().createElement(c.Card,null,s().createElement(c.CardBody,null,s().createElement(c.Bullseye,null,s().createElement(c.TextContent,null,s().createElement(c.Text,{component:c.TextVariants.h1},e.formatMessage(A?I.Z.allOrgAdminsAreMembers:I.Z.allUsersAreMembers)))))):s().createElement(ie.M,{data:J,isSelectable:Q.current,rows:$,columns:K,routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ee.Z["group-add-members"].path,element:s().createElement($e,{fetchData:X,closeUrl:Ee.Z["group-detail-members"].link.replace(":groupId",T)})}))},actionResolver:function(){return Q.current?[{title:e.formatMessage(I.Z.remove),onClick:function(t,r,n){x((function(){return function(){return Y([n.username.title])}})),D({title:e.formatMessage(I.Z.removeMemberQuestion),text:at(n.username.title,_,!1),confirmButtonLabel:e.formatMessage(I.Z.removeMember)}),k(!0)}}]:null},filterPlaceholder:e.formatMessage(I.Z.username).toLowerCase(),titlePlural:e.formatMessage(I.Z.members).toLowerCase(),titleSingular:e.formatMessage(I.Z.member),ouiaId:"members-table",pagination:N,filterValue:p,fetchData:function(e){var t=e.limit,r=e.offset,n=e.name;return X(n,{limit:t,offset:r})},setFilterValue:function(e){var t=e.name;return g(t)},checkedRows:y,isLoading:B,rowWrapper:se.Z,setCheckedItems:function(e){Z((function(t){return e(t)}))},toolbarButtons:function(){return(0,n.Z)(Q.current?[s().createElement(Qe.Z,{to:Ee.Z["group-add-members"].link.replace(":groupId",T),key:"remove-from-group",className:"rbac-m-hide-on-sm"},s().createElement(c.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(I.Z.addMember))),{label:e.formatMessage(I.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){}},{label:e.formatMessage(I.Z.remove),props:{isDisabled:!y||!y.length>0,variant:"danger"},onClick:function(){var t=y.length>1,r=e.formatMessage(t?I.Z.removeMembersQuestion:I.Z.removeMemberQuestion);x((function(){return function(){return Y(y.map((function(e){return e.uuid})))}})),D({title:r,confirmButtonLabel:r,text:at(t?y.length:y[0].uuid,_,t)}),k(!0)}}]:[])},emptyProps:{title:e.formatMessage(I.Z.noGroupMembers),description:[e.formatMessage(I.Z.addUserToConfigure),""]},tableId:"group-members"})),s().createElement(u.Outlet,null))};var it=r(57486),st=r(25924),ut=function(e){var t=e.title,r=e.text,n=e.onClose,o=e.onSubmit,u=e.isOpen,l=e.confirmButtonLabel,c=e.isDefault,m=e.isChanged,d=(0,i.useState)(!1),f=(0,a.Z)(d,2),p=f[0],g=f[1];return c&&!m&&p?s().createElement(st.Z,{isOpen:p&&u,onClose:function(){n(),g(!1)},onSubmit:function(){o()}}):s().createElement(et.Z,{text:r,title:t,isOpen:u,confirmButtonLabel:l,onClose:function(){n()},onSubmit:function(){g(!0),(!c||m)&&o()}})};ut.propTypes={text:v().node,title:v().node,confirmButtonLabel:v().string,onSubmit:v().func,onClose:v().func,isOpen:v().bool,isDefault:v().bool,isChanged:v().bool},ut.defaultProps={isDefault:!1,isChanged:!1};const lt=ut;function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var dt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null==t?void 0:t.reduce((function(t,a){var o=a.uuid,u=a.display_name,l=a.name,c=a.description,m=a.modified;return[].concat((0,n.Z)(t),[{uuid:o,title:u||l,cells:[s().createElement(i.Fragment,{key:"".concat(o,"-name")},s().createElement(Qe.Z,{to:Ee.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",o)},u||l)),c,s().createElement(i.Fragment,{key:"".concat(o,"-modified")},s().createElement(We.Z,{date:m,type:(0,ae.mh)(m)}))],selected:Boolean(r&&r.find((function(e){return e.uuid===o})))}])}),[]))||[]},ft=function(e){return e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button"},pt=function(e,t,r){var n=(0,m.Z)(),a=s().createElement(c.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},n.formatMessage(I.Z.addRole));return e?s().createElement(c.Tooltip,{content:r||n.formatMessage(I.Z.allRolesAdded)},a):a},gt=function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.systemGroup;return{roles:r.roles,pagination:r.pagination||mt(mt({},le.he),{},{count:(null==r?void 0:r.roles)&&r.roles.length}),isLoading:!r.loaded,name:r.name,isPlatformDefault:r.platform_default,isAdminDefault:r.admin_default,isChanged:!r.system,disableAddRoles:Object.keys(r.addRoles.pagination||{}).length>0?!(r.addRoles.pagination&&r.addRoles.pagination.count>0&&!r.admin_default):!!r.admin_default,systemGroupUuid:null==n?void 0:n.uuid}},ht=function(e){var t=e.onDefaultGroupChanged,r=(0,m.Z)(),o=(0,d.Z)(),l=(0,b.useDispatch)(),c=(0,W.Z)(),p=(0,u.useParams)().groupId,h=(0,i.useState)(""),v=(0,a.Z)(h,2),y=v[0],Z=v[1],E=(0,i.useState)(""),M=(0,a.Z)(E,2),O=M[0],k=M[1],R=(0,i.useState)([]),w=(0,a.Z)(R,2),S=w[0],x=w[1],C=(0,i.useState)([]),j=(0,a.Z)(C,2),P=j[0],D=j[1],T=(0,i.useState)(!1),G=(0,a.Z)(T,2),L=G[0],N=G[1],_=(0,i.useState)((function(){return null})),B=(0,a.Z)(_,2),A=B[0],F=B[1],q=(0,i.useState)({}),U=(0,a.Z)(q,2),V=U[0],Q=U[1],K=(0,i.useContext)(ue.Z),H=K.userAccessAdministrator,X=K.orgAdmin,Y=(0,i.useRef)(X||H),J=(0,b.useSelector)(gt),$=J.roles,ee=J.pagination,te=J.isLoading,re=J.name,ne=J.isPlatformDefault,ae=J.isAdminDefault,oe=J.isChanged,se=J.disableAddRoles,le=J.systemGroupUuid,ce=function(e,t){return e.payload.then(t),e},me=function(e){return l((0,z.nr)(e,{},{}))},de=function(e){return l((0,z.yi)(null!=e?e:p))},fe=function(){return l((0,z.WD)({chrome:o}))},pe=function(e,t,r){return l(ce((0,z.W3)(e,t),r))},ge=function(e){return function(t,r){return l((0,z.nV)(t,e,r))}},he=[{title:r.formatMessage(I.Z.name),orderBy:"name"},{title:r.formatMessage(I.Z.description)},{title:r.formatMessage(I.Z.lastModified)}];(0,i.useEffect)((function(){"default-access"!==p?ge(ee)(p):le&&ge(ee)(le)}),[le]),(0,i.useEffect)((function(){(null==$?void 0:$.length)>0&&("default-access"!==p?me(p):le&&me(le))}),[$]),(0,i.useEffect)((function(){Y.current=X||H}),[X,H]);var ve=function(e,t,r){return s().createElement("p",null,s().createElement(_e.Z,(0,g.Z)({},r?I.Z.removeRolesModalText:I.Z.removeRoleModalText,{values:mt({b:function(e){return s().createElement("b",null,e)},name:e},r?{roles:t}:{role:t})})))},be="default-access"!==p?p:le,ye=function(){ne?fe().then((function(e){var t=e.value.data;ge(mt(mt({},ee),{},{offset:0}))(t[0].uuid)})):ge(mt(mt({},ee),{},{offset:0}))(p)};return s().createElement(s().Fragment,null,s().createElement(lt,{text:V.text,title:V.title,isOpen:L,isChanged:oe,isDefault:ne||ae,confirmButtonLabel:V.confirmButtonLabel,onClose:function(){return N(!1)},onSubmit:function(){N(!1),A(),x([]),t(ne&&!oe)}}),s().createElement(f.Z,{type:"content",id:"tab-roles"},s().createElement(ie.M,{columns:he,isSelectable:Y.current&&!ae,rows:dt(p,$,S),data:$,filterValue:O,fetchData:function(e){ge(e)(be)},emptyFilters:{name:"",description:""},setFilterValue:function(e){var t=e.name,r=e.description;void 0!==t&&k(t),void 0!==r&&Z(r)},isLoading:te,pagination:ee,checkedRows:S,setCheckedItems:function(e){x((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:r.formatMessage(I.Z.roles).toLowerCase(),titleSingular:r.formatMessage(I.Z.role),toolbarButtons:function(){return(0,n.Z)(Y.current&&!ae?[s().createElement(Qe.Z,{className:"rbac-m-hide-on-sm rbac-c-button__add-role".concat(se&&"-disabled"),to:Ee.Z["group-add-roles"].link.replace(":groupId",p),key:"add-to-group"},pt(se,ft(re||""),ae&&r.formatMessage(I.Z.defaultGroupNotManually))),{label:r.formatMessage(I.Z.addRole),props:{isDisabled:se,className:"rbac-m-hide-on-md"},onClick:function(){return c(Ee.Z["group-add-roles"].link.replace(":groupId",p))}},{label:r.formatMessage(I.Z.remove),props:{isDisabled:!S||!S.length>0,variant:"danger"},onClick:function(){var e=S.length>1;F((function(){return function(){return pe(be,S.map((function(e){return e.uuid})),ye)}})),Q({title:r.formatMessage(e?I.Z.removeRolesQuestion:I.Z.removeRoleQuestion),confirmButtonLabel:r.formatMessage(e?I.Z.removeRoles:I.Z.removeRole),text:ve(re,e?S.length:$.find((function(e){return e.uuid===S[0].uuid})).name,e)}),N(!0)}}]:[])},actionResolver:function(){return(0,n.Z)(Y.current&&!ae?[{title:r.formatMessage(I.Z.remove),onClick:function(e,t,n){F((function(){return function(){return pe(be,[n.uuid],ye)}})),Q({title:r.formatMessage(I.Z.removeRoleQuestion),confirmButtonLabel:r.formatMessage(I.Z.removeRole),text:ve(re,n.title,!1)}),N(!0)}}]:[])},routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ee.Z["group-add-roles"].path,element:s().createElement(it.Z,{afterSubmit:function(){ne||ae?fe().then((function(e){var t=e.value.data;ge(ee)(t[0].uuid),de(t[0].uuid)})):(ge(ee)(p),de())},fetchUuid:le,selectedRoles:P,setSelectedRoles:D,closeUrl:Ee.Z["group-detail"].link.replace(":groupId",ne?"default-access":p),addRolesToGroup:function(e,t,r){return l(ce((0,z.Wj)(e,t),r))},groupName:re,isDefault:ne||ae,isChanged:oe,onDefaultGroupChanged:t})}))},ouiaId:"roles-table",emptyProps:{title:r.formatMessage(I.Z.noGroupRoles),description:[r.formatMessage(ae?I.Z.contactServiceTeamForRoles:I.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:O},{key:"description",value:y}],tableId:"group-roles"})),s().createElement(u.Outlet,null))};ht.propTypes={searchFilter:v().string,selectedRoles:v().array,pagination:v().shape({limit:v().number.isRequired,offset:v().number.isRequired,count:v().number}),onDefaultGroupChanged:v().func},ht.defaultProps={pagination:le.eX,selectedRoles:[]};const vt=ht;var bt=r(74368),yt=r(76137);function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=function(e){var t=e.onDelete,r=(0,m.Z)(),n=(0,b.useDispatch)(),o=(0,W.Z)(),l=(0,u.useLocation)(),f=(0,d.Z)(),p=(0,u.useParams)().groupId,h="default-access"===p,v=[{eventKey:0,title:"Roles",name:Ee.Z["group-detail-roles"].link.replace(":groupId",p),to:"roles"},{eventKey:1,title:"Members",name:Ee.Z["group-detail-members"].link.replace(":groupId",p),to:"members"}],y=(0,b.useSelector)((function(e){var t=e.groupReducer,r=t.groups,n=t.error,a=t.systemGroup;return{pagination:r.pagination||r.meta,filters:r.filters,groupExists:n!==ae.VG,systemGroupUuid:null==a?void 0:a.uuid}}),b.shallowEqual),Z=y.pagination,E=y.filters,M=y.groupExists,k=y.systemGroupUuid,R=(0,b.useSelector)((function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.isRecordLoading,a=t.isRecordRolesLoading;return{group:r,isFetching:n||a}}),b.shallowEqual),w=R.group,S=R.isFetching,x=(0,i.useState)(!1),C=(0,a.Z)(x,2),j=C[0],P=C[1],D=(0,i.useState)(!1),T=(0,a.Z)(D,2),G=T[0],L=T[1],N=(0,i.useState)(!1),_=(0,a.Z)(N,2),B=_[0],A=_[1];(0,i.useEffect)((function(){n((0,z.WD)({chrome:f}));var e=h?k:p;return e&&(n((0,z.yi)(e)),f.appObjectId(e)),function(){return f.appObjectId(void 0)}}),[p,k]);var F,q=function(){return[{title:r.formatMessage(I.Z.groups),to:(0,ae.zk)((0,Qe.n)(Ee.Z.groups.link),Z,E)},M?{title:S?void 0:w.name,isActive:!0}:{title:r.formatMessage(I.Z.invalidGroup),isActive:!0}]},U=[s().createElement(c.DropdownItem,{component:s().createElement(Qe.Z,{onClick:function(){return L(!1)},to:(l.pathname.includes("members")?Ee.Z["group-detail-members-edit"]:Ee.Z["group-detail-roles-edit"]).link.replace(":groupId",h?"default-access":p)},r.formatMessage(I.Z.edit)),key:"edit-group"}),s().createElement(c.DropdownItem,{component:s().createElement(Qe.Z,{onClick:function(){return t(p)},to:(l.pathname.includes("members")?Ee.Z["group-detail-members-remove"]:Ee.Z["group-detail-roles-remove"]).link.replace(":groupId",p)},r.formatMessage(I.Z.delete)),className:"rbac-c-group__action",key:"delete-group"})],V=h?k:p;return s().createElement(i.Fragment,null,j&&s().createElement(O.R,{type:"group",isOpen:j,customTitle:s().createElement("div",null,r.formatMessage(I.Z.restoreDefaultAccessQuestion)),customDescription:s().createElement(_e.Z,(0,g.Z)({},I.Z.restoreDefaultAccessDescription,{values:{b:function(e){return s().createElement("b",null,e)}}})),customPrimaryButtonTitle:r.formatMessage(I.Z.continue),customSecondaryButtonTitle:r.formatMessage(I.Z.cancel),onModalCancel:function(){return P(!1)},onConfirmCancel:function(){n((0,z.gg)([k])).then((function(){return n((0,z.WD)({chrome:f})).then((function(){A(!1)}))})),P(!1),o(Ee.Z["group-detail-roles"].link).replace(":groupId","default-access")}}),M?s().createElement(i.Fragment,null,s().createElement(He.Q,{breadcrumbs:q()},s().createElement(c.Split,{hasGutter:!0},s().createElement(c.SplitItem,{isFilled:!0},s().createElement(He.y,{title:!S&&w?s().createElement(i.Fragment,null,w.platform_default&&!w.system?(F=w.name,s().createElement("div",{style:{display:"inline-flex"}},F,s().createElement("div",{className:"pf-u-ml-sm"},s().createElement(c.Popover,{"aria-label":"default-group-icon",bodyContent:s().createElement(_e.Z,(0,g.Z)({},I.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(Ue.ZP,{className:"rbac-default-group-info-icon"}))))):w.name):void 0,description:!S&&w?w.description:void 0})),w.platform_default&&!w.system?s().createElement(c.SplitItem,null,s().createElement("div",{className:"rbac-default-group-reset-btn"},s().createElement(c.Button,{variant:"link",onClick:function(){return P(!0)}},r.formatMessage(I.Z.restoreToDefault)),s().createElement(c.Popover,{"aria-label":"default-group-icon",position:c.PopoverPosition.bottomEnd,bodyContent:s().createElement(_e.Z,(0,g.Z)({},I.Z.restoreDefaultAccessInfo,{values:{b:function(e){return s().createElement("b",null,e)}}}))},s().createElement(Ue.ZP,{className:"rbac-default-group-info-icon pf-u-mt-sm"})))):null,s().createElement(c.SplitItem,null,w.platform_default||w.admin_default?null:s().createElement(c.Dropdown,{ouiaId:"group-title-actions-dropdown",toggle:s().createElement(c.KebabToggle,{onToggle:function(e){return L(e)},id:"group-actions-dropdown"}),isOpen:G,isPlain:!0,position:"right",dropdownItems:U}))),B?s().createElement(c.Alert,{variant:"info",isInline:!0,title:r.formatMessage(I.Z.defaultAccessGroupChanged),action:s().createElement(c.AlertActionCloseButton,{onClose:function(){return A(!1)}}),className:"pf-u-mb-lg pf-u-mt-sm"},s().createElement(_e.Z,(0,g.Z)({},I.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return s().createElement("b",null,e)}}}))):null),s().createElement(Ye,{isHeader:!0,tabItems:v}),s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ee.Z["group-detail-roles"].path,element:s().createElement(vt,{onDefaultGroupChanged:A})},s().createElement(u.Route,{path:Ee.Z["group-detail-roles-remove"].path,element:s().createElement(qe,{postMethod:function(){return n((0,z.bt)(Et(Et({},Z),{},{offset:0,filters:E,usesMetaInURL:!0,chrome:f})))},cancelRoute:(0,Qe.n)(Ee.Z["group-detail-roles"].link.replace(":groupId",p)),submitRoute:(0,ae.zk)((0,Qe.n)(Ee.Z.groups.link),Et(Et({},Z),{},{offset:0}),E),isModalOpen:!0,groupsUuid:[w]})}),s().createElement(u.Route,{path:Ee.Z["group-detail-roles-edit"].path,element:s().createElement(Ne,{group:w,cancelRoute:(0,Qe.n)(Ee.Z["group-detail-roles"].link.replace(":groupId",p)),postMethod:function(){return n((0,z.yi)(V))}})})),s().createElement(u.Route,{path:Ee.Z["group-detail-members"].path,element:s().createElement(ot,null)},s().createElement(u.Route,{path:Ee.Z["group-detail-members-remove"].path,element:s().createElement(qe,{postMethod:function(){return n((0,z.bt)(Et(Et({},Z),{},{offset:0,filters:E,usesMetaInURL:!0,chrome:f})))},cancelRoute:(0,Qe.n)(Ee.Z["group-detail-members"].link.replace(":groupId",p)),submitRoute:(0,ae.zk)((0,Qe.n)(Ee.Z.groups.link),Et(Et({},Z),{},{offset:0}),E),isModalOpen:!0,groupsUuid:[w]})}),s().createElement(u.Route,{path:Ee.Z["group-detail-members-edit"].path,element:s().createElement(Ne,{group:w,cancelRoute:(0,Qe.n)(Ee.Z["group-detail-members"].link.replace(":groupId",p)),postMethod:function(){return n((0,z.yi)(V))}})})),s().createElement(u.Route,{path:"/*",element:s().createElement(vt,{onDefaultGroupChanged:A})})),!w&&s().createElement(Ae.Wi,null)):s().createElement(i.Fragment,null,s().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},s().createElement(yt.Z,q())),s().createElement(bt.Z,{title:r.formatMessage(I.Z.groupNotFound),description:[r.formatMessage(I.Z.groupDoesNotExist,{id:p})],actions:[s().createElement(c.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return o(-1)}},r.formatMessage(I.Z.backToPreviousPage))]})))};Mt.propTypes={onDelete:v().func};const Ot=Mt;var kt=r(15608),Rt=r(93351),wt=r(93327);function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ct=function(){var e=(0,m.Z)(),t=(0,b.useDispatch)(),r=(0,u.useNavigate)(),o=(0,u.useLocation)(),p=(0,d.Z)(),g=function(e){return t((0,z.bt)(xt(xt({},e),{},{usesMetaInURL:!0,chrome:p})))},h=(0,i.useContext)(ue.Z),v=h.orgAdmin,y=h.userAccessAdministrator,Z=v||y,E=(0,i.useRef)(null),M=[{title:e.formatMessage(I.Z.name),key:"name",transforms:[l.sortable]},{title:e.formatMessage(I.Z.roles)},{title:e.formatMessage(I.Z.members)},{title:e.formatMessage(I.Z.lastModified),key:"modified",transforms:[l.sortable]}],O=(0,i.useState)({index:Number(Z),direction:"asc"}),k=(0,a.Z)(O,2),R=k[0],w=k[1],S="".concat("desc"===(null==R?void 0:R.direction)?"-":"").concat(M[(null==R?void 0:R.index)-Number(Z)].key),x=(0,b.useSelector)((function(e){var t,r,a,o,i=e.groupReducer,s=i.groups,u=s.data,l=s.filters,c=s.pagination,m=i.isLoading,d=i.adminGroup,f=i.systemGroup;return{groups:[].concat((0,n.Z)(null!=d&&null!==(t=d.name)&&void 0!==t&&t.match(new RegExp(l.name,"i"))?[d]:[]),(0,n.Z)(null!=f&&null!==(r=f.name)&&void 0!==r&&r.match(new RegExp(l.name,"i"))?[f]:[]),(0,n.Z)((null==u?void 0:u.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.platform_default,r=e.admin_default;return!(t||r)})))||[])),pagination:{limit:null!==(a=null==c?void 0:c.limit)&&void 0!==a?a:(v?le.HE:le.he).limit,offset:null!==(o=null==c?void 0:c.offset)&&void 0!==o?o:(v?le.HE:le.he).offset,count:null==c?void 0:c.count,redirected:null==c?void 0:c.redirected},filters:l,isLoading:m,systemGroup:f}}),b.shallowEqual),C=x.groups,j=x.pagination,P=x.filters,D=x.isLoading,T=x.systemGroup,G=(0,i.useState)((null==P?void 0:P.name)||""),L=(0,a.Z)(G,2),N=L[0],_=L[1],B=(0,i.useState)([]),A=(0,a.Z)(B,2),F=A[0],q=A[1],U=(0,i.useState)([]),V=(0,a.Z)(U,2),W=V[0],Q=V[1];(0,i.useEffect)((function(){(0,le.oG)(o,r,j.limit,j.offset)}),[j.offset,j.limit,j.count,j.redirected]),(0,i.useEffect)((function(){var e=(0,le.rj)(o,r,j),n=e.limit,a=e.offset,i=(0,ce.aX)(o,r,["name"],{name:N}).name;_(i),p.appNavClick({id:"groups",secondaryNav:!0}),g({limit:n,offset:a,orderBy:S,filters:{name:i}}),t((0,z.fB)({filterValue:i,chrome:p})),t((0,z.WD)({filterValue:i,chrome:p}))}),[]),(0,i.useEffect)((function(){o.pathname.includes("detail")?(0,ae.Gw)(o,r):((0,le.Zc)(o)||(0,le.oG)(o,r,j.limit,j.offset),(null==N?void 0:N.length)>0&&!(0,ce.qF)(o,["name"])&&(0,ce.aX)(o,r,["name"],{name:N}))}),[o.pathname]);var K=C.map((function(e){return e.platform_default||e.admin_default?xt(xt({},e),{},{principalCount:"All".concat(e.admin_default?" org admins":"")}):e})),H=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,m.Z)();return t.reduce((function(t,o){var u=o.uuid,l=o.name,c=o.roleCount,m=o.principalCount,d=o.modified,f=o.platform_default,p=o.admin_default;return[].concat((0,n.Z)(t),[{uuid:u,isAdminDefault:p,isPlatformDefault:f,cells:[s().createElement(i.Fragment,{key:u},s().createElement("div",{className:"pf-m-inline-flex"},e?s().createElement(Qe.Z,{key:"".concat(u,"-link"),state:{uuid:u},to:Ee.Z["group-detail"].link.replace(":groupId",f?"default-access":u)},l):l,(f||p)&&s().createElement(Ke,{id:"default".concat(p?"-admin":"","-group-popover"),uuid:u,key:"".concat(u,"-popover"),bodyContent:a.formatMessage(p?I.Z.orgAdminInheritedRoles:I.Z.usersInheritedRoles)}))),c,m,s().createElement(i.Fragment,{key:"".concat(u,"-modified")},s().createElement(We.Z,{date:d,type:(0,ae.mh)(d)}))],selected:Boolean(r&&r.find((function(e){return e.uuid===u})))}])}),[])}(Z,K,F);return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ee.Z["group-detail-role-detail"].path,element:s().createElement(wt.Z,{pageAction:"role-detail"},s().createElement(kt.Z,null))}),s().createElement(u.Route,{path:Ee.Z["group-detail"].path,element:s().createElement(wt.Z,{pageAction:"group-detail"},s().createElement(Ot,{defaultUuid:null==T?void 0:T.uuid,onDelete:function(e){_(""),q(F.filter((function(t){return t.uuid!=e})))}}))}),s().createElement(u.Route,{path:"/*",element:s().createElement(wt.Z,{pageAction:"group-list"},s().createElement(c.Stack,{className:"rbac-c-groups"},s().createElement(c.StackItem,null,s().createElement(He.Q,{paddingBottom:!0},s().createElement(He.y,{title:e.formatMessage(I.Z.groups)}))),s().createElement(c.StackItem,null,s().createElement(f.Z,{type:"content",id:"tab-groups"},s().createElement(ie.M,{data:C,rows:H,sortBy:R,onSort:function(e,t,n){var a="".concat("desc"===n?"-":"").concat(M[t-Number(Z)].key);w({index:t,direction:n}),(0,ce.MS)(o,r,{name:N}),g(xt(xt({},j),{},{orderBy:a,filters:{name:N}}))},columns:M,isSelectable:Z,checkedRows:F,setCheckedItems:function(e){q((function(t){return e(t).filter((function(e){var t=e.platform_default,r=e.admin_default;return!(t||r)})).map((function(e){return{uuid:e.uuid,label:e.name}}))}))},routes:function(){return s().createElement(u.Routes,null,s().createElement(u.Route,{path:Ee.Z["add-group"].path,element:s().createElement(Pe,{pagination:j,filters:P,orderBy:S,postMethod:function(e){_(""),g(e)}})}),s().createElement(u.Route,{path:Ee.Z["edit-group"].path,element:s().createElement(Ne,{pagination:j,filters:P,postMethod:function(e){_(""),g(xt(xt({},e),{},{orderBy:S}))},cancelRoute:(0,ae.zk)("../",j,P),submitRoute:(0,ae.zk)("../",xt(xt({},j),{},{offset:0}),P)})}),s().createElement(u.Route,{path:Ee.Z["remove-group"].path,element:s().createElement(qe,{pagination:j,filters:P,postMethod:function(e,t){g(xt(xt({},t),{},{orderBy:S})),_(""),q(F.filter((function(t){return!e.includes(t.uuid)})))},cancelRoute:(0,ae.zk)("../",j,P),submitRoute:(0,ae.zk)("../",xt(xt({},j),{},{offset:0}),P),isModalOpen:!0,groupsUuid:W})}))},actionResolver:function(t){var n=t.isPlatformDefault,a=t.isAdminDefault;return n||a||!Z?null:[{title:e.formatMessage(I.Z.edit),onClick:function(e,t,n){return r((0,Qe.n)(Ee.Z["edit-group"].link).replace(":groupId",n.uuid))}},{title:e.formatMessage(I.Z.delete),onClick:function(e,t,n){Q([n]),r((0,Qe.n)(Ee.Z["remove-group"].link))}}]},titlePlural:e.formatMessage(I.Z.groups).toLowerCase(),titleSingular:e.formatMessage(I.Z.group).toLowerCase(),ouiaId:"groups-table",pagination:j,filterValue:N,fetchData:function(e){var t=e.name,n=e.count,a=e.limit,i=e.offset,s=e.orderBy;return(0,ce.MS)(o,r,{name:t}),g({count:n,limit:a,offset:i,orderBy:s,filters:{name:t}})},setFilterValue:function(e){var t=e.name;return _(void 0===t?"":t)},toolbarButtons:function(){return(0,n.Z)(Z?[s().createElement(Qe.Z,{to:Ee.Z["add-group"].link,key:"add-group",className:"rbac-m-hide-on-sm"},s().createElement(c.Button,{ouiaId:"create-group-button",variant:"primary","aria-label":"Create group"},e.formatMessage(I.Z.createGroup))),{label:e.formatMessage(I.Z.createGroup),props:{className:"rbac-m-hide-on-md"},onClick:function(){return r((0,Qe.n)(Ee.Z["add-group"].link))}},{label:e.formatMessage(I.Z.edit),props:{isDisabled:!(1===F.length)},onClick:function(){return r((0,Qe.n)(Ee.Z["edit-group"].link.replace(":groupId",F[0].uuid)))}},{label:e.formatMessage(I.Z.delete),props:{isDisabled:!F.length>0},onClick:function(){Q(F),r((0,Qe.n)(Ee.Z["remove-group"].link))}}]:[])},isLoading:!D&&0===(null==C?void 0:C.length)&&0===(null==N?void 0:N.length)||D,filterPlaceholder:e.formatMessage(I.Z.name).toLowerCase(),rowWrapper:Rt.Z,tableId:"groups",textFilterRef:E})))))}))}}}]);