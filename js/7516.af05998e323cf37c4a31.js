"use strict";(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[7516,459],{35224:(e,t,a)=>{a.d(t,{u:()=>u,D:()=>m});var l=a(65353),r=a(28416),o=a(86478),n=a(38296);const i=e=>{var{className:t,children:a,isLeftAligned:i}=e,s=(0,l.__rest)(e,["className","children","isLeftAligned"]);return r.createElement("div",Object.assign({className:(0,n.css)(o.default.tooltipContent,i&&o.default.modifiers.textAlignLeft,t)},s),a)};i.displayName="TooltipContent";const s=e=>{var{className:t}=e,a=(0,l.__rest)(e,["className"]);return r.createElement("div",Object.assign({className:(0,n.css)(o.default.tooltipArrow,t)},a))};s.displayName="TooltipArrow";var c=a(1774);const p={name:"--pf-v5-c-tooltip--MaxWidth",value:"18.75rem",var:"var(--pf-v5-c-tooltip--MaxWidth)"};var m,d=a(69121);!function(e){e.auto="auto",e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.topStart="top-start",e.topEnd="top-end",e.bottomStart="bottom-start",e.bottomEnd="bottom-end",e.leftStart="left-start",e.leftEnd="left-end",e.rightStart="right-start",e.rightEnd="right-end"}(m||(m={}));let f=1;const u=e=>{var{content:t,position:a="top",trigger:m="mouseenter focus",isVisible:u=!1,isContentLeftAligned:g=!1,enableFlip:b=!0,className:h="",entryDelay:v=300,exitDelay:y=300,appendTo:E=(()=>document.body),zIndex:x=9999,minWidth:_,maxWidth:k=p.value,distance:Z=15,aria:w="describedby",flipBehavior:N=["top","right","bottom","left","top","right","bottom"],id:S="pf-tooltip-"+f++,children:C,animationDuration:M=300,triggerRef:O,"aria-live":T=(O?"polite":"off"),onTooltipHidden:I=(()=>{})}=e,L=(0,l.__rest)(e,["content","position","trigger","isVisible","isContentLeftAligned","enableFlip","className","entryDelay","exitDelay","appendTo","zIndex","minWidth","maxWidth","distance","aria","flipBehavior","id","children","animationDuration","triggerRef","aria-live","onTooltipHidden"]);const P=m.includes("mouseenter"),j=m.includes("focus"),R=m.includes("click"),A="manual"===m,[B,D]=r.useState(!1),F=r.createRef();r.useEffect((()=>{u?W():z()}),[u]);const W=()=>{D(!0)},z=()=>{D(!1)},H={top:o.default.modifiers.top,bottom:o.default.modifiers.bottom,left:o.default.modifiers.left,right:o.default.modifiers.right,"top-start":o.default.modifiers.topLeft,"top-end":o.default.modifiers.topRight,"bottom-start":o.default.modifiers.bottomLeft,"bottom-end":o.default.modifiers.bottomRight,"left-start":o.default.modifiers.leftTop,"left-end":o.default.modifiers.leftBottom,"right-start":o.default.modifiers.rightTop,"right-end":o.default.modifiers.rightBottom},V=k!==p.value,$=r.createElement("div",Object.assign({"aria-live":T,className:(0,n.css)(o.default.tooltip,h),role:"tooltip",id:S,style:{maxWidth:V?k:null},ref:F},L),r.createElement(s,null),r.createElement(i,{isLeftAligned:g},t));return r.createElement(d.Popper,{trigger:"none"!==w&&B?"describedby"===w&&C&&C.props&&!C.props["aria-describedby"]?r.cloneElement(C,{"aria-describedby":S}):"labelledby"===w&&C.props&&!C.props["aria-labelledby"]?r.cloneElement(C,{"aria-labelledby":S}):C:C,triggerRef:O,popper:$,popperRef:F,minWidth:void 0!==_?_:"revert",appendTo:E,isVisible:B,positionModifiers:H,distance:Z,placement:a,onMouseEnter:P&&W,onMouseLeave:P&&z,onPopperMouseEnter:P&&W,onPopperMouseLeave:P&&z,onFocus:j&&W,onBlur:j&&z,onDocumentClick:R&&((e,t)=>{B?z():e.target===t&&W()}),onDocumentKeyDown:A?null:e=>{A||e.key===c.yu.Escape&&B&&z()},onTriggerEnter:A?null:e=>{e.key===c.yu.Enter&&(B?z():W())},enableFlip:b,zIndex:x,flipBehavior:N,animationDuration:M,entryDelay:v,exitDelay:y,onHidden:I})};u.displayName="Tooltip"},41435:(e,t,a)=>{a.d(t,{Dl:()=>n,dw:()=>r,e4:()=>i,ir:()=>l});var l,r,o=a(28416);!function(e){e.right="right",e.left="left"}(l||(l={})),function(e){e.up="up",e.down="down"}(r||(r={}));const n=o.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),i=o.createContext({keyHandler:null,sendRef:null})},86478:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l}),a(49854);const l={modifiers:{top:"pf-m-top",topLeft:"pf-m-top-left",topRight:"pf-m-top-right",bottom:"pf-m-bottom",bottomLeft:"pf-m-bottom-left",bottomRight:"pf-m-bottom-right",left:"pf-m-left",leftTop:"pf-m-left-top",leftBottom:"pf-m-left-bottom",right:"pf-m-right",rightTop:"pf-m-right-top",rightBottom:"pf-m-right-bottom",textAlignLeft:"pf-m-text-align-left"},themeDark:"pf-v5-theme-dark",tooltip:"pf-v5-c-tooltip",tooltipArrow:"pf-v5-c-tooltip__arrow",tooltipContent:"pf-v5-c-tooltip__content"}},46818:(e,t,a)=>{a.d(t,{P8:()=>r});var l=a(78632);const r=()=>({className:l.Z.modifiers.nowrap})},40472:(e,t)=>{t.__esModule=!0,t.global_breakpoint_2xl={name:"--pf-v5-global--breakpoint--2xl",value:"1450px",var:"var(--pf-v5-global--breakpoint--2xl)"},t.default=t.global_breakpoint_2xl},92732:(e,t)=>{t.__esModule=!0,t.global_breakpoint_lg={name:"--pf-v5-global--breakpoint--lg",value:"992px",var:"var(--pf-v5-global--breakpoint--lg)"},t.default=t.global_breakpoint_lg},60144:(e,t)=>{t.__esModule=!0,t.global_breakpoint_sm={name:"--pf-v5-global--breakpoint--sm",value:"576px",var:"var(--pf-v5-global--breakpoint--sm)"},t.default=t.global_breakpoint_sm},63242:(e,t)=>{t.__esModule=!0,t.global_breakpoint_xl={name:"--pf-v5-global--breakpoint--xl",value:"1200px",var:"var(--pf-v5-global--breakpoint--xl)"},t.default=t.global_breakpoint_xl},79995:(e,t)=>{t.U6={name:"--pf-v5-global--breakpoint--xs",value:"0",var:"var(--pf-v5-global--breakpoint--xs)"},t.ZP=t.U6},39173:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(85893),r=a(94184),o=a.n(r),n=a(78956);const i=function(e){var t=e.className,a=e.title,r=o()(t);return(0,l.jsx)(n.Title,{headingLevel:"h1",size:"2xl",className:r,"widget-type":"InsightsPageHeaderTitle",children:a})}},7876:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(85893),r=a(94184),o=a.n(r),n=function(){return n=Object.assign||function(e){for(var t,a=1,l=arguments.length;a<l;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};const i=function(e){var t,a=e.type,r=e.children,i=e.className,s=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]])}return a}(e,["type","children","className"]),c=o()(i,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,l.jsxs)("section",n({},s,{className:c,children:[" ",r," "]}))}},23340:(e,t,a)=>{a.d(t,{MS:()=>o,aX:()=>l,qF:()=>r});const l=(e,t,a,l={})=>{const r=new URLSearchParams(e.search);let o=a.reduce(((e,t)=>{const a=r.getAll(t);return{...e,[t]:a.length>1?a:a[0]}}),{});return Object.keys(l).forEach((e=>{const t=l[e];o={...o,[e]:Array.isArray(o[e])?[...new Set([...o[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||o[e]},Array.isArray(t)?t.forEach((t=>r.getAll(e).includes(t)||r.append(e,t))):r.get(e)||t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0}),o},r=(e,t)=>{const a=new URLSearchParams(e.search);return t.some((e=>a.get(e)))},o=(e,t,a)=>{const l=new URLSearchParams(e.search);Object.keys(a).forEach((e=>l.delete(e))),Object.keys(a).forEach((e=>{const t=a[e];Array.isArray(t)?t.forEach((t=>t&&l.append(e,t))):t&&l.set(e,t)})),t({pathname:e.pathname,search:l.toString()},{replace:!0})}},82617:(e,t,a)=>{a.d(t,{Z:()=>m});var l=a(28416),r=a.n(l),o=a(45697),n=a.n(o),i=a(62012),s=a(75629),c=a(12849);const p=e=>e?r().createElement(s.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?r().createElement(s.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&r().createElement(i.NavLink,{end:!0,to:e.to},e.title)||e.title):r().createElement(c.Vj,{key:t})))):null;p.propTypes={breadcrumbs:n().object};const m=p},13851:(e,t,a)=>{a.d(t,{Q:()=>v,y:()=>y});var l=a(28416),r=a.n(l),o=a(45697),n=a.n(o),i=a(64380),s=a(86304),c=a(12849),p=a(82617),m=a(85893),d=a(94184),f=a.n(d);const u=r().createContext("light");var g=function(){return g=Object.assign||function(e){for(var t,a=1,l=arguments.length;a<l;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)};const b=function(e){var t=e.className,a=e.children,l=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]])}return a}(e,["className","children"]),r=f()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section");return(0,m.jsx)(u.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var n=f()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,m.jsx)("section",g({},l,{className:"".concat(r," ").concat(n),"widget-type":"InsightsPageHeader",children:a}))}})};var h=a(39173);const v=({children:e,breadcrumbs:t})=>r().createElement(l.Fragment,null,t&&r().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},r().createElement(p.Z,{...t})),r().createElement(b,{className:"rbac-page-header"},e));v.propTypes={children:n().oneOfType([n().arrayOf(n().node),n().node]).isRequired,breadcrumbs:n().array,paddingBottom:n().bool},v.defaultProps={paddingBottom:!1};const y=({title:e,renderTitleTag:t,description:a,children:o})=>r().createElement(l.Fragment,null,r().createElement(s.Flex,null,r().createElement(s.FlexItem,{className:"pf-v5-u-mb-sm"},r().createElement(h.Z,{title:e||r().createElement(c.h2,null),className:"rbac-page-header__title"})),r().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&r().createElement(i.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?r().createElement(i.Text,{component:i.TextVariants.p},a):a),o);y.propTypes={title:n().node,renderTitleTag:n().func,description:n().node,children:n().oneOfType([n().node,n().arrayOf(n().node)])}},46944:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var l=a(28416),r=a.n(l),o=a(25387),n=a(86706),i=a(62012),s=a(1082),c=a(7732),p=a(56869),m=a(46818),d=a(31055),f=a(23539),u=a(79995),g=a(60144),b=a(78236),h=a(92732),v=a(63242),y=a(40472);const E={xs:parseInt(u.ZP.value.replace("px","")),sm:parseInt(g.default.value.replace("px","")),md:parseInt(b.default.value.replace("px","")),lg:parseInt(h.default.value.replace("px","")),xl:parseInt(v.default.value.replace("px","")),"2xl":parseInt(y.default.value.replace("px",""))},x=function(){for(var e,t=window.innerWidth,a=0,l=Object.entries(E);a<l.length;a++){var r=l[a],o=r[0];if(r[1]>=t)break;e=o}return e},_=function(e){return(null==E?void 0:E[e])<=E.sm};var k=a(55140),Z=a(7876),w=a(62410),N=a(64380),S=a(75863),C=a(21081),M=a(49004),O=a(34844),T=a(64756),I=a(29301),L=a(2550),P=a(14289),j=a(13563),R=a(13851),A=a(97246),B=a(86601),D=a(74982),F=a(23340),W=a(55573),z=a(45697),H=a.n(z),V=a(94184),$=a.n(V);const U=({className:e,row:t,...a})=>r().createElement(W.e,{className:$()(e,{"rbac-c-role-default":t.system}),row:t,...a});U.propTypes={row:H().shape({system:H().bool}),className:H().string};const q=U,G=()=>{const{orgAdmin:e,userAccessAdministrator:t}=(0,l.useContext)(B.Z),[a,u]=(0,l.useState)([]),g=(0,o.YB)(),b=(0,n.useDispatch)(),h=(0,l.useRef)(null),v=(0,i.useNavigate)(),y=(0,i.useLocation)(),E=(oe=(0,l.useState)((function(){return x()})),ne=oe[0],ie=oe[1],se=(0,l.useRef)(ne),(0,l.useEffect)((function(){function e(){var e=x();e!==se.current&&(se.current=e,ie(e))}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),ne),W=(0,k.Z)(),{roles:z,filters:H,pagination:V,isLoading:$}=(0,n.useSelector)((({roleReducer:{roles:{data:t,filters:a,pagination:l},isLoading:r}})=>({roles:t,filters:a,pagination:{limit:l.limit??(e?D.HE:D.he).limit,offset:l.offset??(e?D.HE:D.he).offset,count:l.count,redirected:l.redirected},isLoading:r})),n.shallowEqual),U=[{title:g.formatMessage(L.Z.name),key:"display_name",transforms:[(0,s.d)(20),c.p]},{title:g.formatMessage(L.Z.description)},{title:g.formatMessage(L.Z.permissions),cellTransforms:[p.z],transforms:[m.P8]},{title:g.formatMessage(L.Z.groups),cellTransforms:[p.z],transforms:[m.P8]},{title:g.formatMessage(L.Z.lastModified),key:"modified",transforms:[m.P8,c.p]}],G=e=>b((0,j.Kt)({...e,usesMetaInURL:!0,chrome:W})),X=e||t,[K,Q]=(0,l.useState)(H.display_name||""),[Y,J]=(0,l.useState)({index:Number(X),direction:"asc"}),[ee,te]=(0,l.useState)({}),[ae,le]=(0,l.useState)([]),re=`${"desc"===Y?.direction?"-":""}${U[Y?.index-Number(X)].key}`;var oe,ne,ie,se;(0,l.useEffect)((()=>{(0,D.oG)(y,v,V.limit,V.offset)}),[V.offset,V.limit,V.count,V.redirected]),(0,l.useEffect)((()=>{(0,F.MS)(y,v,{display_name:K})}),[K]),(0,l.useEffect)((()=>{const{limit:e,offset:t}=(0,D.rj)(y,v,V),{display_name:a}=(0,F.aX)(y,v,["display_name"],{display_name:K});Q(a),W.appNavClick({id:"roles",secondaryNav:!0}),G({limit:e,offset:t,orderBy:re,filters:{display_name:a}})}),[]),(0,l.useEffect)((()=>{y.pathname.includes("detail")?(0,I.Gw)(y,v):((0,D.Zc)(y)||(0,D.oG)(y,v,V.limit,V.offset),K?.length>0&&!(0,F.qF)(y,["display_name"])&&(0,F.aX)(y,v,["display_name"],{display_name:K}))}),[y.pathname]);const ce=((e,t,a,o)=>e.reduce(((e,{uuid:n,access:i=[],display_name:s,name:c,description:p,system:m,accessCount:d,groups_in_count:f,groups_in:u,modified:g},b)=>[...e,{uuid:n,system:m,disableSelection:!!m,selected:Boolean(t?.find?.((e=>e.uuid===n))),cells:[{title:r().createElement(T.Z,{to:P.Z["role-detail"].link.replace(":roleId",n)},s||c)},{title:p},{title:d,props:{isOpen:3===o[n]}},{title:f,props:{isOpen:4===o[n]}},{title:r().createElement(w.Z,{date:g,type:(0,I.mh)(g)})}]},{uuid:`${n}-permissions`,parent:3*b,compoundParent:2,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:i.length>0?r().createElement(C.i,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:S.B.compact,cells:[a.formatMessage(L.Z.application),a.formatMessage(L.Z.resourceType),a.formatMessage(L.Z.operation),a.formatMessage(L.Z.lastCommit)],rows:i.map((e=>{const[t,a,o]=e.permission.split(":");return{cells:[t,a,o,r().createElement(l.Fragment,{key:`${t}-modified`},r().createElement(w.Z,{date:g,type:(0,I.mh)(g)}))]}}))},r().createElement(M.x,null),r().createElement(O.R,null)):r().createElement(N.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(L.Z.noPermissions))}]},{uuid:`${n}-groups`,parent:3*b,compoundParent:3,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:f>0?r().createElement(C.i,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:S.B.compact,cells:[a.formatMessage(L.Z.groupName),a.formatMessage(L.Z.description)],rows:u.map((e=>({cells:[e.name,e.description]})))},r().createElement(M.x,null),r().createElement(O.R,null)):r().createElement(N.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(L.Z.noGroups))}]}]),[]))(z,a,g,ee),pe=V.count===ae.length;return r().createElement(f.Stack,{className:"rbac-c-roles"},r().createElement(f.StackItem,null,r().createElement(R.Q,null,r().createElement(R.y,{title:g.formatMessage(L.Z.roles)}))),r().createElement(f.StackItem,null,r().createElement(Z.Z,{type:"content",id:"tab-roles"},r().createElement(A.M,{isSelectable:X,isRowSelectable:e=>!(e.platform_default||e.admin_default||e.system),checkedRows:a,textFilterRef:h,setCheckedItems:e=>{u((t=>e(t).filter((({platform_default:e,admin_default:t,system:a})=>!(e||t||a))).map((({uuid:e,name:t})=>({uuid:e,label:t})))))},actionResolver:e=>e.compoundParent?[]:[{title:g.formatMessage(L.Z.edit),onClick:(e,t,a)=>v((0,T.n)(P.Z["edit-role"].link.replace(":roleId",a.uuid)))},{title:g.formatMessage(L.Z.delete),onClick:(e,t,a)=>{le([a]),v((0,T.n)(P.Z["remove-role"].link.replace(":roleId",a.uuid)))}}],columns:U,areActionsDisabled:({system:e})=>!!e,rowWrapper:q,rows:ce,data:z,filterValue:K,fetchData:({name:e,limit:t,offset:a})=>((0,F.MS)(y,v,{display_name:e}),G((0,I.jl)({limit:t,offset:a,orderBy:re,filters:{display_name:e}}))),setFilterValue:({name:e=""})=>Q(e),isExpandable:!0,onExpand:(e,t,a,l,r)=>te({...ee,[r.uuid]:l?-1:a+Number(!X)}),isLoading:!$&&0===z?.length&&0===K?.length||$,pagination:V,ouiaId:"roles-table",titlePlural:g.formatMessage(L.Z.roles).toLowerCase(),titleSingular:g.formatMessage(L.Z.role).toLowerCase(),toolbarButtons:()=>e||t?[r().createElement(T.Z,{to:P.Z["add-role"].link,key:"add-role",className:"rbac-m-hide-on-sm"},r().createElement(d.Button,{ouiaId:"create-role-button",variant:"primary","aria-label":"Create role"},g.formatMessage(L.Z.createRole))),..._(E)?[{label:g.formatMessage(L.Z.createRole),onClick:()=>v((0,T.n)(P.Z["add-role"].link))}]:[],{label:g.formatMessage(L.Z.edit),props:{isDisabled:!(1===a.length)},onClick:()=>v((0,T.n)(P.Z["edit-role"].link.replace(":roleId",a[0].uuid)))},{label:g.formatMessage(L.Z.delete),props:{isDisabled:!a.length>0},onClick:()=>{le(a),v((0,T.n)(P.Z["remove-role"].link.replace(":roleId",a.map((({uuid:e})=>e)))))}}]:[],filterPlaceholder:g.formatMessage(L.Z.name).toLowerCase(),tableId:"roles",sortBy:Y,onSort:(e,t,a)=>{const l=`${"desc"===a?"-":""}${U[t-Number(X)].key}`;J({index:t,direction:a}),G((0,I.jl)({limit:V.limit,offset:0,orderBy:l,filters:{display_name:K}}))}}),r().createElement(l.Suspense,null,r().createElement(i.Outlet,{context:{[P.Z["add-role"].path]:{pagination:V,filters:{display_name:K}},[P.Z["remove-role"].path]:{isLoading:$,cancelRoute:(0,I.zk)(P.Z.roles.link,V,H),submitRoute:(0,I.zk)(P.Z.roles.link,{...V,offset:0},pe?{}:H),afterSubmit:()=>{G({...V,filters:pe?{}:{display_name:K},offset:0}),pe&&Q(""),u([])},setFilterValue:Q},[P.Z["edit-role"].path]:{isLoading:$,cancelRoute:(0,I.zk)(P.Z.roles.link,V,H),afterSubmit:()=>{G({...V,offset:0,filters:{display_name:K}}),u([])}}}})))))}}}]);
//# sourceMappingURL=../sourcemaps/7516.5564c3ddff9a0db9bab6982897f78cf0.js.map