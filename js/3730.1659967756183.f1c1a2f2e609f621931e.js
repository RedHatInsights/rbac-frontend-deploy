/*! For license information please see 3730.1659967756183.f1c1a2f2e609f621931e.js.LICENSE.txt */
(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[3730],{92758:(e,t,r)=>{"use strict";r.d(t,{MS:()=>l,aX:()=>c,qF:()=>s});var n=r(93433),o=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new URLSearchParams(e.location.search),c=t.reduce((function(e,t){var r=i.getAll(t);return a(a({},e),{},(0,o.Z)({},t,r.length>1?r:r[0]))}),{});return Object.keys(r).forEach((function(e){var t=r[e];c=a(a({},c),{},(0,o.Z)({},e,Array.isArray(c[e])?(0,n.Z)(new Set([].concat((0,n.Z)(c[e]),(0,n.Z)(Array.isArray(t)?t:[t])))):(null==t?void 0:t.length)>0&&t||c[e])),Array.isArray(t)?t.forEach((function(t){return i.getAll(e).includes(t)||i.append(e,t)})):i.get(e)||t&&i.set(e,t)})),e.replace({pathname:e.location.pathname,search:i.toString()}),c},s=function(e,t){var r=new URLSearchParams(e.location.search);return t.some((function(e){return r.get(e)}))},l=function(e,t){var r=new URLSearchParams(e.location.search);Object.keys(t).forEach((function(e){return r.delete(e)})),Object.keys(t).forEach((function(e){var n=t[e];Array.isArray(n)?n.forEach((function(t){return t&&r.append(e,t)})):n&&r.set(e,n)})),e.replace({pathname:e.location.pathname,search:r.toString()})}},67115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(92950);const o=function(){var e=(0,n.useRef)(!1);return(0,n.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},1227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(29439),o=r(92950),i=r.n(o),a=r(45697),c=r.n(a),s=r(69957),l=r(57262),u=function(e){var t=e.title,r=e.text,a=e.onClose,c=e.onSubmit,u=e.isOpen,p=e.confirmButtonLabel,d=e.withCheckbox,f=(0,o.useState)(!1),m=(0,n.Z)(f,2),h=m[0],v=m[1];return i().createElement(l.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(s.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:u,variant:l.ModalVariant.small,onClose:a,actions:[i().createElement(l.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:d&&!h,variant:"danger",onClick:c},p),i().createElement(l.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:a},"Cancel")]},i().createElement(l.Split,{hasGutter:!0},i().createElement(l.SplitItem,{isFilled:!0},i().createElement(l.Stack,{hasGutter:!0},i().createElement(l.TextContent,null,r)))),d?i().createElement(l.Checkbox,{isChecked:h,onChange:function(){return v(!h)},label:"I understand, and I want to continue.",id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};u.propTypes={text:c().any,title:c().string,confirmButtonLabel:c().string,onSubmit:c().func,onClose:c().func,isOpen:c().bool,withCheckbox:c().bool},u.defaultProps={withCheckbox:!1};const p=u},16796:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),c=r(334),s=r(57262),l=r(19571),u=function(e){return e?o().createElement(s.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?o().createElement(s.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&o().createElement(c.NavLink,{exact:!0,to:e.to},e.title)||e.title):o().createElement(l.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:a().object};const p=u},38376:(e,t,r)=>{"use strict";r.d(t,{Q:()=>d,y:()=>f});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),c=r(57262),s=r(19571),l=r(16796),u=r(80123),p=r(39173),d=function(e){var t=e.children,r=e.breadcrumbs;return o().createElement(n.Fragment,null,r&&o().createElement("section",{className:"pf-c-page__main-breadcrumb"},o().createElement(l.Z,r)),o().createElement(u.Z,{className:"rbac-page-header"},t))};d.propTypes={children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,breadcrumbs:a().array,paddingBottom:a().bool},d.defaultProps={paddingBottom:!1};var f=function(e){var t=e.title,r=e.renderTitleTag,i=e.description,a=e.children;return o().createElement(n.Fragment,null,o().createElement(c.Flex,null,o().createElement(c.FlexItem,{className:"pf-u-mb-sm"},o().createElement(p.Z,{title:t||o().createElement(s.h2,null),className:"rbac-page-header__title"})),o().createElement(c.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},r&&r())),i&&o().createElement(c.TextContent,{className:"rbac-page-header__description"},"string"==typeof i?o().createElement(c.Text,{component:c.TextVariants.p},i):i),a)};f.propTypes={title:a().node,renderTitleTag:a().func,description:a().node,children:a().oneOfType([a().node,a().arrayOf(a().node)])}},29215:(e,t,r)=>{"use strict";r.d(t,{R:()=>f,A:()=>d});var n=r(36580),o=r(71002),i=r(15861);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function m(){}function h(){}var v={};l(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==t&&r.call(g,i)&&(v=g);var b=h.prototype=f.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,c,s){var l=p(e[i],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==(0,o.Z)(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function O(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=h,l(b,"constructor",h),l(h,"constructor",m),m.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),l(b,s,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var c=(0,r(89400).i$)();function s(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=function(e){return{type:n.s6,payload:s(e)}},f=function(e){return{type:n.ZX,payload:u(e)}}},40483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(4942),o=r(45987),i=r(87462),a=r(92950),c=r.n(a),s=r(45697),l=r.n(s),u=r(76429),p=r(67850),d=r(48880),f=r(74219),m=r(57820),h=r(16396),v=r(4853),y=["ModalProps","saveLabel","cancelLabel","alert"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b="modal-form",E=function(e){return c().createElement(v.l,(0,i.Z)({},e,{id:b}))},w=function(e){var t=e.saveLabel,r=e.cancelLabel,n=(0,d.default)().onCancel;return c().createElement(u.Z,null,(function(e){var o=e.pristine,i=e.invalid,a=e.validating,s=e.submitting;return c().createElement("div",{className:"pf-c-form"},c().createElement(m.W,{className:"pf-u-mt-0"},c().createElement(h.Button,{ouiaId:"primary-save-button",variant:"primary",form:b,type:"submit",isDisabled:o||a||s||i},t),c().createElement(h.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:n,id:"cancel-modal"},r)))}))};w.propTypes={saveLabel:l().node,cancelLabel:l().node},w.defaultProps={saveLabel:"Save",cancelLabel:"Cancel"};var O=function(e){var t=e.ModalProps,r=e.saveLabel,n=e.cancelLabel,a=e.alert,s=(0,o.Z)(e,y);return c().createElement(f.Modal,(0,i.Z)({},t,{footer:c().createElement(w,{saveLabel:r,cancelLabel:n})}),null==a?void 0:a(),c().createElement(p.ZP,(0,i.Z)({},s,{showFormControls:!1,FormWrapper:E})))};O.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ModalProps:l().object},w.propTypes);const Z=O},36457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(87462),o=r(4942),i=r(45987),a=r(92950),c=r.n(a),s=r(45697),l=r.n(s),u=r(93433),p=r(57262),d=["input","options","isReadOnly","isDisabled","isRequired"],f=["label","isRequired","helperText","meta","description","hideLabel"],m=function(e){var t=e.input,r=e.options,o=e.isReadOnly,a=e.isDisabled,s=e.isRequired,l=(0,i.Z)(e,d);return c().createElement(p.FormSelect,(0,n.Z)({},t,l,{isDisabled:a||o}),function(e,t,r){if(t&&r)return e;var n=(0,u.Z)(e);return n.find((function(e){return void 0===e.value}))?(0,u.Z)(n):[{label:r?"Please choose":"None"}].concat((0,u.Z)(n))}(r,t.value,s).map((function(e){return c().createElement(p.FormSelectOption,(0,n.Z)({key:e.value||e.label},e,{label:e.label.toString()}))})))};m.propTypes={input:l().object.isRequired,options:l().arrayOf(l().shape({value:l().any,label:l().string.isRequired})).isRequired,isReadOnly:l().bool,isDisabled:l().bool,isRequired:l().bool,FieldProvider:l().any};var h=function(e){var t=e.label,r=e.isRequired,o=e.helperText,a=e.meta,s=e.description,l=e.hideLabel,u=(0,i.Z)(e,f),d=a.error,h=a.touched&&d;return c().createElement(p.FormGroup,{isRequired:r,label:!l&&t,fieldId:u.id,isValid:!h,helperText:o,helperTextInvalid:a.error},s&&c().createElement(p.TextContent,null,c().createElement(p.Text,{component:p.TextVariants.small},s)),c().createElement(m,(0,n.Z)({label:t,isValid:!h,isRequired:r},u)))};h.propTypes={componentType:l().string,label:l().string,isRequired:l().bool,helperText:l().string,meta:l().object,description:l().string,hideLabel:l().bool};const v=h;var y=r(41609),g=r.n(y),b=r(48880),E=r(76429),w=function(e){var t=e.dirtyFieldsSinceLastSubmit,r=e.submitSucceeded,n=e.pristine,o=(0,b.default)().onCancel,i=g()(t)||!r&&n;return c().createElement(p.ActionGroup,{className:"pf-u-mt-0"},c().createElement(p.Button,{ouiaId:"primary-submit-button",type:"submit",isDisabled:i,variant:"primary"},"Save"),c().createElement(p.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:function(){return o()}},"Cancel"))};w.propTypes={dirtyFieldsSinceLastSubmit:l().shape((0,o.Z)({},l().string,l().oneOfType([l().string,l().number,l().bool]))),submitSucceeded:l().bool,pristine:l().bool,onCancel:l().func};const O=function(e){return c().createElement(E.Z,{subscription:{pristine:!0,submitSucceeded:!0,dirtyFieldsSinceLastSubmit:!0}},(function(t){return c().createElement(w,(0,n.Z)({},t,e))}))};var Z=r(67850),x=r(65412),j=r(75747),S=r(93025),P=r(96354),T=["formTemplateProps"],L=function(e){var t,r=e.formTemplateProps,a=(0,i.Z)(e,T);return c().createElement(S.Z,(0,n.Z)({componentMapper:(t={},(0,o.Z)(t,P.Z.TEXT_FIELD,x.Z),(0,o.Z)(t,P.Z.TEXTAREA,j.Z),(0,o.Z)(t,P.Z.SELECT,v),t),FormTemplate:function(e){return c().createElement(Z.ZP,(0,n.Z)({},r,e,{FormButtons:O}))}},a))};L.propTypes={formTemplateProps:l().object};const k=L},93327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(45987),o=r(92950),i=r.n(o),a=r(45697),c=r.n(a),s=r(334),l=["pageAction"],u=function(e){var t=e.pageAction,r=(0,n.Z)(e,l);return(0,o.useEffect)((function(){return insights.chrome.appAction(t),function(){return insights.chrome.appAction(void 0)}}),[t]),i().createElement(s.Route,r)};u.propTypes={pageAction:c().string.isRequired};const p=u},73943:(e,t,r)=>{"use strict";r.d(t,{R:()=>l});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),c=r(57262),s=r(69957),l=function(e){var t=e.type,r=e.isOpen,n=e.onModalCancel,i=e.onConfirmCancel,a=e.customTitle,l=e.customDescription;return o().createElement(c.Modal,{title:o().createElement("span",{className:"rbac-c-wizard__cancel-warning-header"},o().createElement(s.ZP,{size:"md",className:"rbac-c-wizard__cancel-warning-header--icon"}),a||"Exit ".concat(t," creation?")),variant:c.ModalVariant.small,className:"rbac rbac-c-wizard__cancel-warning",isOpen:r,onClose:n,actions:[o().createElement(c.Button,{ouiaId:"primary-exit-button",key:"confirm",variant:"primary",onClick:i},"Exit"),o().createElement(c.Button,{ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:n},"Stay")]},o().createElement("span",null,l||"All inputs will be discarded."," "))};l.propTypes={type:a().string,customTitle:a().node,customDescription:a().node,isOpen:a().bool,onModalCancel:a().func,onConfirmCancel:a().func}},94852:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(4942),o=r(93433),i=r(29439),a=r(92950),c=r.n(a),s=r(45697),l=r.n(s),u=r(57262),p=r(48880),d=r(55795);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t,r,n,s=e.formFields,l=(0,p.default)(),f=(0,a.useState)(l.getState().values["add-permissions-table"]||[]),h=(0,i.Z)(f,2),v=h[0],y=h[1],g=(0,a.useState)(!1),b=(0,i.Z)(g,2),E=b[0],w=b[1],O=l.getState().values["not-allowed-permissions"],Z=(null===(t=l.getState().values)||void 0===t||null===(r=t["copy-base-role"])||void 0===r||null===(n=r.applications)||void 0===n?void 0:n.filter((function(e){return!(null!=v&&v.find((function(t){return t.uuid.includes(e)})))})))||[],x=s[0][0];return c().createElement("div",{className:"rbac"},v.length>0?c().createElement("div",{className:"rbac-c-selected-chips"},c().createElement(u.ChipGroup,{categoryName:"Selected permissions"},v.reduce((function(e,t){return[t].concat((0,o.Z)(e))}),[]).map((function(e){var t=e.uuid;return c().createElement(u.Chip,{key:t,color:"blue",isTruncated:!0,onClick:function(){return y(v.filter((function(e){return e.uuid!==t})))}},t)})))):null,c().createElement(u.Title,{headingLevel:"h1",size:"xl",className:"rbac-c-add-permission-title"},"Add permissions"),c().createElement(u.TextContent,null,c().createElement(u.Text,null,"Select permissions to add to your role",0!==Z.length&&c().createElement(u.Popover,{headerContent:"Custom roles only support granular permissions",bodyContent:"Wildcard permissions (for example, approval:*:*) aren’t included in this table and can’t be added to your custom role."},c().createElement(u.Button,{variant:"link"},"Why am I not seeing all of my permissions? ",c().createElement(d.ZP,null))))),(null==O?void 0:O.length)>0&&!E?c().createElement(u.Alert,{variant:"default",isInline:!0,title:"The following permissions can not be added to a custom role and were removed from the copied role: ".concat(O.join(", ")),actionClose:c().createElement(u.AlertActionCloseButton,{onClose:function(){return w(!0)}})}):null,[[m(m({},x),{},{props:m(m({},x.props),{},{selectedPermissions:v,setSelectedPermissions:y})})]])};h.propTypes={formFields:l().array};const v=h},94487:(e,t,r)=>{"use strict";r.d(t,{Z:()=>q});var n=r(87462),o=r(93433),i=r(29439),a=r(4942),c=r(45987),s=r(18446),l=r.n(s),u=r(92950),p=r.n(u),d=r(45697),f=r.n(d),m=r(28216),h=r(41693),v=r(48880),y=r(48623),g=r(41800),b=r(36580),E=r(71002),w=r(15861);function O(){O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function p(){}function d(){}function f(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(S([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=f.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,c){var s=l(e[o],e,i);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==(0,E.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=f,c(y,"constructor",f),c(f,"constructor",d),d.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),c(y,a,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Z=(0,r(89400).Y3)();function x(e,t,r,n,o,i,a,c,s,l,u){return j.apply(this,arguments)}function j(){return(j=(0,w.Z)(O().mark((function e(t,r,n,o,i,a,c,s,l,u,p){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.listPermissions(t,r,n,o,i,a,c,s,l,u,p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,r,n,o,i,a,c){return P.apply(this,arguments)}function P(){return(P=(0,w.Z)(O().mark((function e(t,r,n,o,i,a,c,s){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.listPermissionOptions(t,r,n,o,i,a,void 0,c,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={application:b.KD,resource_type:b.vf,verb:b.E2},L=r(29215),k=r(28090),R=r(57262),_=r(1936),C=["row"],D=function(e){var t=e.row,r=(0,c.Z)(e,C);return t.disableSelection?p().createElement(R.Tooltip,{content:t.disabledContent,exitDelay:1500,entryDelay:1500},p().createElement(_.RowWrapper,(0,n.Z)({className:"rbac-c-disabled-row",row:t},r))):p().createElement(_.RowWrapper,(0,n.Z)({row:t},r))};D.propTypes={props:f().object,row:f().object};var I=["selectedPermissions","setSelectedPermissions"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=["Application","Resource type","Operation"],G=function(e){var t=e.permissionReducer,r=t.permission,n=t.isLoading,o=t.options,i=o.application,a=o.operation,c=o.resource,s=t.expandSplats,l=t.isLoadingExpandSplats,u=e.roleReducer,p=u.isRecordLoading,d=u.selectedRole,f=e.costReducer.resourceTypes;return{permissions:r.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,r=e.resource_type,n=e.verb,o=e.permission,i=e.requires;return{application:t,resource:r,operation:n,uuid:o,requires:i}})),pagination:r.meta,isLoading:n||p,baseRole:d,applicationOptions:i.data.filter((function(e){return"*"!==e})),resourceOptions:c.data.filter((function(e){return"*"!==e})),operationOptions:a.data.filter((function(e){return"*"!==e})),expandedPermissions:s.data.map((function(e){return e.permission})),isLoadingExpandSplats:l,resourceTypes:f.data}},M=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,s=(0,c.Z)(e,I),d=(0,m.useDispatch)(),f=function(e){return d((r=(t=F(F(F({},e),X?{exclude_roles:X}:{}),{},{allowed_only:!0})).limit,n=t.offset,o=t.orderBy,i=t.application,a=t.resourceType,c=t.verb,s=t.permission,u=void 0===(l=t.exclude_globals)||l,p=t.exclude_roles,f=t.allowed_only,m=t.options,{type:b.wI,payload:x(r,n,o,i,a,c,s,u,p,f,m)}));var t,r,n,o,i,a,c,s,l,u,p,f,m},E=function(e){return d((r=(t=F(F({},e),{},{allowedOnly:!0})).field,n=t.limit,o=t.offset,i=t.application,a=t.resourceType,c=t.verb,s=t.allowedOnly,l=t.options,{type:T[r],payload:S(r,n,o,i,a,c,s,l)}));var t,r,n,o,i,a,c,s,l},w=(0,m.useSelector)(G,m.shallowEqual),O=w.permissions,Z=w.isLoading,j=w.pagination,P=w.baseRole,R=w.applicationOptions,_=w.resourceOptions,C=w.operationOptions,N=w.expandedPermissions,M=w.isLoadingExpandSplats,q=w.resourceTypes,B=(0,h.Z)(s).input,V=(0,v.default)(),z=(0,u.useState)({applications:[],resources:[],operations:[]}),W=(0,i.Z)(z,2),Y=W[0],H=W[1],U=V.getState().values["role-type"],X=V.getState().values["role-uuid"],K=(0,u.useState)(!1),Q=(0,i.Z)(K,2),$=Q[0],J=Q[1],ee=(0,u.useState)(""),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],oe=(0,u.useState)(),ie=(0,i.Z)(oe,2),ae=ie[0],ce=ie[1],se=function(e){return q.find((function(t){var r;return t.value===(null===(r=e.split(":"))||void 0===r?void 0:r[1])}))},le=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return E({field:"application",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),ue=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return E({field:"resource_type",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),pe=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return E({field:"verb",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]);(0,u.useEffect)((function(){var e,t=null===(e=V.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===U&&t&&d((0,k.fp)(t)),d((0,L.A)()),V.change("has-cost-resources",!1),f(j),E({field:"application",limit:50}),E({field:"resource_type",limit:50}),E({field:"verb",limit:50}),function(){return d({type:b.e0,payload:{data:[]}})}}),[]),(0,u.useEffect)((function(){ue(Y),pe(Y)}),[Y.applications]),(0,u.useEffect)((function(){le(Y),pe(Y)}),[Y.resources]),(0,u.useEffect)((function(){le(Y),ue(Y)}),[Y.operations]),(0,u.useEffect)((function(){B.onChange(t)}),[t]),(0,u.useEffect)((function(){var e;if(!(!P||"copy"!==U||V.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=V.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==P?void 0:P.uuid)||M||Z)){var n,i,a,c,s,l,u,p,f,m,h,v,y,g=[],E=(null==P?void 0:P.access.filter((function(e){var t;return!!R.includes(null==e||null===(t=e.permission)||void 0===t?void 0:t.split(":")[0])||(g.push(e),!1)})))||[];if(V.change("not-allowed-permissions",g.map((function(e){return e.permission}))),0===N.length&&void 0===M){var w=(0,o.Z)(new Set(E.map((function(e){return e.permission.split(":")[0]}))));d((a=void 0===(i=(n={application:w.join()}).limit)?1e3:i,s=void 0===(c=n.offset)?0:c,l=n.orderBy,u=n.application,p=n.resourceType,f=n.verb,m=n.permission,v=void 0===(h=n.exclude_globals)||h,y=n.options,{type:b.e,payload:x(a,s,l,u,p,f,m,v,y)}))}else{var O=E.map((function(e){return e.permission.replace("*",".*")}));r((function(){return N.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(se(e)||{count:0}).count})).filter((function(e){return O.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),V.change("base-permissions-loaded",!0)}}}),[O,P]);var de=function(e){return e.reduce((function(e,t){return{"":F(F({},null==e?void 0:e[""]),{},(0,a.Z)({},t,!0))}}),{"":{}})},fe={applications:(0,o.Z)(R).filter((function(e){return e.includes(re)})).map((function(e){return{label:e,value:e}})),resources:(0,o.Z)(_).filter((function(e){return e.includes(re)})).map((function(e){return{label:e,value:e}})),operations:(0,o.Z)(C).filter((function(e){return e.includes(re)})).map((function(e){return{label:e,value:e}}))},me={label:p().createElement("div",null," No results found"),isDisabled:!0},he=fe[Object.keys(fe)[ae||0]].length>10;return p().createElement("div",{className:"rbac-c-permissions-table"},p().createElement(g.M,(0,n.Z)({columns:A,isSelectable:!0,isCompact:!0,borders:!1,createRows:function(e){return e.map((function(e){var r=e.application,n=e.resource,o=e.operation,i=e.uuid,a=e.requires;return{uuid:"".concat(r,":").concat(n,":").concat(o),requires:a,cells:[{title:r},n,o],selected:Boolean(t&&t.find((function(e){return e.uuid===i}))),disableSelection:"cost-management"===r&&0===(se(i)||{count:0}).count,disabledContent:p().createElement("div",null,"To add this permission to your role and define specific resources for it, at least one data source must be connected."," ",p().createElement("a",{href:"./settings/sources"},"Configure sources for Cost Management"))}}))},data:O,filterValue:"",noData:0===(null==O?void 0:O.length),noDataDescription:["The permission either does not exist or has already been added to this role. Adjust your filters and try again. Note: Applications that only have wildcard permissions (for example, compliance:*:*) aren't included in this table and can't be added to your custom role."],fetchData:function(e){var t=e.limit,r=e.offset,n=e.applications,o=e.resources,i=e.operations;f({limit:t,offset:r,application:(n||Y.applications).join(),resourceType:(o||Y.resources).join(),verb:(i||Y.operations).join()})},setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;H(F(F(F(F({},Y),t?{applications:t}:Y.applications),r?{resources:r}:Y.resources),n?{operations:n}:Y.operations))},isLoading:Z||M,pagination:F(F({},j),{},{count:j.count}),checkedRows:t,setCheckedItems:function(e){var n=e(t).filter((function(e){var t,r=e.uuid;return"cost-management"!==e.application||(null===(t=se(r))||void 0===t?void 0:t.count)>0})).map((function(e){return{uuid:e.uuid,requires:e.requires}}));r(l()(n,t)?[]:n)},titlePlural:"permissions",titleSingular:"permission",showMoreTitle:$?"See less":"See more",onFilter:function(e){return ne(e)},onShowMore:he?function(){J((function(){return!$}))}:void 0,onChange:function(e,t){ne(""),ce(t)},value:ae,filters:[{key:"applications",value:Y.applications,placeholder:"Filter by application",type:"group",selected:de(Y.applications),groups:[{type:fe.applications.length>0?"checkbox":"plain",items:fe.applications.length>0?(0,o.Z)(fe.applications).slice(0,$?void 0:10):[me]}]},{key:"resources",value:Y.resources,placeholder:"Filter by resource type",type:"group",selected:de(Y.resources),groups:[{type:fe.resources.length>0?"checkbox":"plain",items:fe.resources.length>0?(0,o.Z)(fe.resources).slice(0,$?void 0:10):[me]}]},{key:"operations",value:Y.operations,placeholder:"Filter by operation",type:"group",selected:de(Y.operations),groups:[{type:fe.operations.length>0?"checkbox":"plain",items:fe.operations.length>0?(0,o.Z)(fe.operations).slice(0,$?void 0:10):[me]}]}],isFilterable:!0,rowWrapper:D,tableId:"add-role-permissions"},s)))};M.propTypes={selectedPermissions:f().array,setSelectedPermissions:f().func};const q=M},64105:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),c=r.n(a),s=r(28216),l=r(57262),u=r(41693),p=r(48880),d=r(29215);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.costReducer,r=t.resourceTypes,n=t.isLoading,o=t.loadingResources,i=t.resources;return{resourceTypes:r.data,resources:i,isLoading:n,isLoadingResources:o>0}},v=function(e,t){var r=e[t.key];switch(t.type){case"toggle":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{isOpen:!r.isOpen})));case"select":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:r.selected.includes(t.selection)?r.selected.filter((function(e){return e!==t.selection})):[].concat((0,o.Z)(r.selected),[t.selection])})));case"selectAll":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:r.options.map((function(e){return e.value}))})));case"clear":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:[]})));case"setOptions":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{filteredOptions:r.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const y=function(e){var t=(0,s.useDispatch)(),r=(0,s.useSelector)(h,s.shallowEqual),f=r.resourceTypes,y=r.isLoading,g=r.isLoadingResources,b=r.resources,E=(0,u.Z)(e).input,w=(0,p.default)(),O=w.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),Z=(0,a.useReducer)(v,O.reduce((function(e,t){return m(m({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),x=(0,n.Z)(Z,2),j=x[0],S=x[1];return(0,a.useEffect)((function(){(w.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return O.find((function(e){return(null==e?void 0:e.uuid)===t}))&&S({type:"select",selection:e,key:t})}))})),t((0,d.A)(undefined)),w.change("has-cost-resources",!0)}),[]),(0,a.useEffect)((function(){y||(0,o.Z)(new Set(O.map((function(e){var t;return null===(t=f.find((function(t){var r;return t.value===(null===(r=e.uuid.split(":"))||void 0===r?void 0:r[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return r=e,t((0,d.R)(r));var r}))}),[f]),(0,a.useEffect)((function(){g||O.map((function(e){return S({type:"setOptions",key:e.uuid,options:b[(t=e.uuid,null===(r=f.find((function(e){var r;return e.value===(null===(r=t.split(":"))||void 0===r?void 0:r[1])})))||void 0===r||null===(n=r.path.split("/"))||void 0===n?void 0:n[5])]||[]});var t,r,n}))}),[g]),(0,a.useEffect)((function(){var e=Object.entries(j).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],resources:t[1].selected}}));E.onChange(e),w.change("resource-definitions",e)}),[j]),c().createElement(l.Grid,{hasGutter:!0},c().createElement(l.GridItem,{md:4,className:"rbac-m-hide-on-sm"},c().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},"Permissions")),c().createElement(l.GridItem,{md:8,className:"rbac-m-hide-on-sm"},c().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},"Resource definitions")),O.map((function(e){var t=e.uuid,r=j[t].filteredOptions;return c().createElement(c().Fragment,null,c().createElement(l.GridItem,{md:4,sm:12},c().createElement(l.Tooltip,{content:c().createElement("div",null,t)},c().createElement(l.FormGroup,{label:t.replace(/^cost-management:/,""),isRequired:!0}))),c().createElement(l.GridItem,{md:8,sm:12},c().createElement(l.Select,{className:"rbac-m-cost-resource-select",variant:l.SelectVariant.checkbox,typeAheadAriaLabel:"Select a state",onToggle:function(e){S({type:"setFilter",key:t,filtervalue:""}),function(e,t){S({type:"toggle",key:e,isOpen:t})}(t,e)},onSelect:function(e,n){!function(e,t,r,n){S(r?{type:"selectAll",selection:t,key:n}:{type:"select",selection:t,key:n})}(0,n,n==="Select All (".concat(r.length,")"),t)},onClear:function(){return S({type:"clear",key:t})},selections:j[t].selected,isOpen:j[t].isOpen,onFilter:function(e){return e&&S({type:"setFilter",key:t,filtervalue:e.target.value})},"aria-labelledby":t,placeholderText:"Select resources",hasInlineFilter:!0},[c().createElement(l.SelectOption,{key:0,value:"Select All (".concat(r.length,")")})].concat((0,o.Z)(r.map((function(e,t){return c().createElement(l.SelectOption,{key:t+1,value:e.value})})))))))})))}},88040:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),c=r(45697),s=r.n(c),l=r(96354),u=r(64124),p=r(40483),d=r(36457),f=r(67115),m=r(334),h=r(28216),v=r(76254),y=r(71355),g=r(43115),b=r(84974),E=r(28090),w=function(e,t,r){return e.length<150?(0,g.vd)({name:e}).then((function(n){var o=n.data;if(0!==o.length&&o.some((function(n){return n[t]!==r&&n.display_name===e})))throw"Role with this name already exists."})):Promise.reject("Can have maximum of 150 characters.")},O=function(e){return{fields:[{name:"name",component:l.Z.TEXT_FIELD,label:"Name",isRequired:!0,validate:[{type:"validate-role-name",id:e,idKey:"uuid",validationPromise:w}]},{name:"description",component:l.Z.TEXTAREA,label:"Description",validate:[{type:u.Z.MAX_LENGTH,threshold:150}]}]}},Z=(0,b.Z)((function(e,t,r,n){return e&&0!==e.length?n(e,t,r):Promise.reject("Required")})),x=function(e){var t=e.routeMatch,r=e.cancelRoute,c=e.submitRoute,s=void 0===c?r:c,l=e.afterSubmit,u=(0,f.Z)(),b=(0,m.useRouteMatch)(t).params.id,w=(0,m.useHistory)(),x=w.replace,j=w.push,S=(0,h.useDispatch)(),P={"validate-role-name":function(e){var t=e.idKey,r=e.id,n=e.validationPromise;return function(e){return Z(e,t,r,n)}}},T=(0,h.useSelector)((function(e){return(0,v.z)(e,b)})),L=(0,i.useState)(T),k=(0,o.Z)(L,2),R=k[0],_=k[1],C=function(){S((0,y.wN)({variant:"warning",dismissDelay:8e3,title:"Editing role",description:"Edit role was canceled by the user."})),x(r)};return(0,i.useEffect)((function(){!R&&(0,g.fp)(b).then((function(e){u.current&&_(e)}))}),[b]),R?a().createElement(d.Z,{schema:O(b),initialValues:R,onSubmit:function(e){return S((0,E.sZ)(b,{name:e.name,display_name:e.name,description:e.description})).then((function(){l(),j(s)}))},onCancel:C,validatorMapper:P,FormTemplate:function(e){return a().createElement(p.Z,(0,n.Z)({},e,{ModalProps:{onClose:C,isOpen:!0,variant:"small",title:"Edit role information"}}))}}):null};x.propTypes={routeMatch:s().string.isRequired,cancelRoute:s().oneOfType([s().string,s().shape({pathname:s().string.isRequired,search:s().string,hash:s().string})]).isRequired,submitRoute:s().oneOfType([s().string,s().shape({pathname:s().string.isRequired,search:s().string,hash:s().string})]),afterSubmit:s().func.isRequired};const j=x},13063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(29439),o=r(92950),i=r.n(o),a=r(45697),c=r.n(a),s=r(28216),l=r(334),u=r(69957),p=r(57262),d=r(83215),f=r(28090),m=r(43115),h=r(67115),v=r(76254),y=function(e){var t=e.routeMatch,r=e.cancelRoute,a=e.submitRoute,c=void 0===a?r:a,y=e.afterSubmit,g=(0,h.Z)(),b=(0,l.useRouteMatch)(t).params.id,E=(0,s.useSelector)((function(e){return(0,v.B)(e,b)})),w=(0,o.useState)(!0),O=(0,n.Z)(w,2),Z=O[0],x=O[1],j=(0,o.useState)(E),S=(0,n.Z)(j,2),P=S[0],T=S[1],L=(0,s.useDispatch)(),k=(0,l.useHistory)(),R=k.push,_=k.replace;(0,o.useEffect)((function(){!P&&(0,m.fp)(b).then((function(e){g.current&&T(e.display_name)})).catch((function(e){var t,r;return L((0,d.wN)({variant:"danger",title:"Could not get role",description:null==e||null===(t=e.errors)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.detail}))}))}),[]);var C=function(){return _(r)};return P?i().createElement(p.Modal,{className:"rbac","aria-label":"remove-role",header:i().createElement(p.TextContent,null,i().createElement(p.Split,{hasGutter:!0},i().createElement(p.SplitItem,null,i().createElement(u.ZP,{size:"lg",style:{fill:"#f0ab00"}})),i().createElement(p.SplitItem,null,i().createElement(p.Text,{component:"h1"},"Delete role?")))),isOpen:!0,variant:"small",onClose:C,actions:[i().createElement(p.Button,{isDisabled:Z,key:"submit",variant:"danger",type:"button",id:"confirm-delete-portfolio",onClick:function(){return L((0,f.l5)(b)).then((function(){return R(c),y()}))}},"Confirm"),i().createElement(p.Button,{key:"cancel",variant:"link",type:"button",onClick:C},"Cancel")]},i().createElement(p.TextContent,null,i().createElement(p.Text,{component:p.TextVariants.p},"The ",i().createElement("strong",null,P)," role will be removed from any group it’s in, and members in the groups will no longer be granted the permissions in the role."),i().createElement(p.Checkbox,{id:"remove-role-checkbox",label:"I understand that this action cannot be undone.",isChecked:!Z,onChange:function(){return x((function(e){return!e}))}}))):null};y.propTypes={routeMatch:c().string.isRequired,cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const g=y},76254:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,z:()=>n});var n=function(e,t){var r=e.roleReducer,n=r.roles,o=void 0===n?{data:[]}:n,i=r.selectedRole;return(null==i?void 0:i.uuid)===t?i:o.data.find((function(e){return e.uuid===t}))},o=function(e,t){var r;return null===(r=n(e,t))||void 0===r?void 0:r.display_name}},15608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Te});var n,o=r(93433),i=r(4942),a=r(29439),c=r(92950),s=r.n(c),l=r(45697),u=r.n(l),p=r(334),d=r(28216),f=r(57262),m=r(39173),h=r(4682),v=r(28090),y=r(38376),g=r(19571),b=r(41800),E=r(45987),w=r(64107),O=r(11107),Z=r(61338),x=r(85564),j=r.n(x),S=["count"],P=["type"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={pagination:Z.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},R="SET_PAGINATION",_="SELECT_PERMISSIONS",C="SHOW_REMOVE_MODAL",D="SUBMIT_REMOVE_MODAL",I="INITIATE_REMOVE_PERMISSION",N="SET_FILTERS",F="SET_TOGGLED",A="INITIALIZE_ROLE",G=(n={},(0,i.Z)(n,R,(function(e,t){return L(L({},e),{},{pagination:L(L({},e.pagination),t)})})),(0,i.Z)(n,_,(function(e,t){var r=t.selection;return L(L({},e),{},{selectedPermissions:r})})),(0,i.Z)(n,C,(function(e,t){var r=t.showRemoveModal;return L(L({},e),{},{showRemoveModal:r})})),(0,i.Z)(n,D,(function(e){return L(L({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(n,I,(function(e,t){var r=t.confirmDelete,n=t.deleteInfo;return L(L({},e),{},{confirmDelete:r,showRemoveModal:!0,deleteInfo:n})})),(0,i.Z)(n,N,(function(e,t){return L(L({},e),{},{filters:L(L({},e.filters),t)})})),(0,i.Z)(n,F,(function(e){return L(L({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(n,A,(function(e,t){var r=t.count,n=(0,E.Z)(t,S);return L(L(L({},e),n),{},{pagination:L(L({},e.pagination),{},{count:r})})})),n),M=function(e,t){var r=t.type,n=(0,E.Z)(t,P);return G[r]?G[r](e,n):e},q=r(1936),B=r(71002),V=r(15861),z=r(87462),W=r(48880);var Y=r(68778),H=function(e){var t=e.currentRoleID,r=(0,d.useDispatch)();return s().createElement(s().Fragment,null,s().createElement(f.EmptyState,null,s().createElement(f.EmptyStateIcon,{color:"green",icon:Y.ZP}),s().createElement(f.Title,{headingLevel:"h4",size:"lg"},"You have successfully added permissions to the role"),s().createElement(f.EmptyStateBody,null),s().createElement(p.Link,{to:"/roles/detail/".concat(t)},s().createElement(f.Button,{onClick:function(){return r((0,v.fp)(t))}},"Exit"))))};const U=H;H.propTypes={currentRoleID:u().string.isRequired};var X=r(73943),K=r(93025),Q=r(67850),$=r(46966),J=r(94487),ee=r(64105),te=r(94852);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=function(e){var t,r=e.formFields;return(0,c.useContext)(pe).submitting?s().createElement(f.Bullseye,null,s().createElement(f.Spinner,{size:"xl"})):s().createElement("div",{className:"rbac"},[[ne({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};oe.propTypes={formFields:u().array};const ie=oe;function ae(){ae=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new Z(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function p(){}function d(){}function f(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=f.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,c){var s=l(e[o],e,i);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==(0,B.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=f,c(y,"constructor",f),c(f,"constructor",d),d.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),c(y,a,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,Z.prototype={constructor:Z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=function(e){return s().createElement(Q.ZP,(0,z.Z)({},e,{showFormControls:!1}))},ue={"add-permissions-table":J.Z,"cost-resources":ee.Z,review:function(){var e=(0,W.default)().getState().values,t=e["role-name"],r=e["role-description"],n=e["add-permissions-table"],o=e["resource-definitions"],i=e["has-cost-resources"];return s().createElement(f.Stack,{hasGutter:!0},s().createElement(f.StackItem,null,s().createElement(f.TextContent,null,s().createElement(f.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-sm"},"Review details"))),s().createElement(f.StackItem,{className:"rbac-l-stack__item-summary"},s().createElement(f.Grid,{hasGutter:!0},s().createElement(f.GridItem,{span:3},s().createElement(f.Text,{className:"pf-c-title",component:f.TextVariants.h6},"Role name")),s().createElement(f.GridItem,{span:9},s().createElement(f.Text,{component:f.TextVariants.p},t)),s().createElement(f.GridItem,{span:3},s().createElement(f.Text,{className:"pf-c-title",component:f.TextVariants.h6},"Role description")),s().createElement(f.GridItem,{span:9},s().createElement(f.Text,{component:f.TextVariants.p},r)),s().createElement(f.GridItem,{span:3},s().createElement(f.Text,{className:"pf-c-title",component:f.TextVariants.h6},"Added permissions")),s().createElement(f.GridItem,{span:9},s().createElement(f.TextContent,{component:f.TextVariants.p},n.map((function(e,t){return s().createElement(f.Text,{key:t}," ",e.uuid," ")})))),i&&s().createElement(s().Fragment,null,s().createElement(f.GridItem,{span:3},s().createElement(f.Text,{className:"pf-c-title",component:f.TextVariants.h6},"Resource definitions")),s().createElement(f.GridItem,{span:9},s().createElement(f.TextContent,{component:f.TextVariants.p},o.map((function(e){return e.resources.map((function(e,t){return s().createElement(f.Text,{key:t}," ",e," ")}))}))))))))}},pe=(0,c.createContext)({success:!1,submitting:!1,error:void 0}),de=function(e){var t=e.role,r=(0,c.useState)(!1),n=(0,a.Z)(r,2),i=n[0],l=n[1],u=(0,c.useState)(""),m=(0,a.Z)(u,2),h=m[0],y=m[1],g=(0,c.useState)({}),b=(0,a.Z)(g,2),E=b[0],w=b[1],O=(0,p.useHistory)(),Z=(0,d.useDispatch)(),x=(0,c.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),j=(0,a.Z)(x,2),S=j[0],P=j[1],T=(0,c.useRef)(document.createElement("div"));(0,c.useEffect)((function(){w(function(e){return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,crossroads:["role-type"],title:"Add permissions",container:e,fields:[{name:"add-permissions",title:"Add permissions",StepTemplate:te.Z,nextStep:function(e){var t=e.values;return t&&t["add-permissions-table"]&&t["add-permissions-table"].some((function(e){return e.uuid.split(":")[0].includes("cost-management")}))?"cost-resources-definition":"review"},fields:[{component:"add-permissions-table",name:"add-permissions-table"}]},{name:"cost-resources-definition",title:"Define Cost Management resources",nextStep:"review",fields:[{component:"plain-text",name:"text-description",label:s().createElement("p",null,"Specify where you would like to apply each cost permission selected in the previous step, using the dropdown below.")},{component:"cost-resources",name:"cost-resources",validate:[function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){return e.resources.length>0}))?void 0:"You need to assign at least one resource to each permission."}]}]},{name:"review",title:"Review details",StepTemplate:ie,fields:[{component:"review",name:"review"}]}]}]}}(T.current))}),[]),(0,c.useEffect)((function(){y(t.uuid)})),(0,c.useEffect)((function(){T.current.hidden=i}),[i]);var L=function(){O.push("/roles/detail/".concat(t.uuid))},k=function(){var e=(0,V.Z)(ae().mark((function e(r){var n,i,a,c;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r["add-permissions-table"],i=r["cost-resources"],a=[].concat((0,o.Z)(t.access.map((function(e){return e.permission}))),(0,o.Z)(n.map((function(e){return e.uuid})))),c=se(se({},t),{},{access:(0,o.Z)(n.reduce((function(e,t){var r=t.uuid,n=t.requires;return[].concat((0,o.Z)(e),(0,o.Z)([r].concat((0,o.Z)(n.filter((function(e){return!a.includes(e)})))).map((function(e){return{permission:e,resourceDefinitions:null!=i&&i.find((function(t){return t.permission===e}))?[{attributeFilter:{key:"cost-management.".concat(e.split(":")[1]),operation:"in",value:null==i?void 0:i.find((function(t){return t.permission===e})).resources}}]:[]}}))))}),t.access)),accessCount:t.accessCount+n.length}),P((function(e){return se(se({},e),{},{submitting:!0})})),Z((0,v.ul)(h,c)).then((function(){return P((function(e){return se(se({},e),{},{submitting:!1,success:!0,hideForm:!0})}))})).catch((function(){P((function(e){return se(se({},e),{},{submitting:!1,success:!1,hideForm:!0})})),O.push("/roles/detail/".concat(t.uuid))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s().createElement(pe.Provider,{value:se(se({},S),{},{setWizardError:function(e){return P((function(t){return se(se({},t),{},{error:e})}))},setWizardSuccess:function(e){return P((function(t){return se(se({},t),{},{success:e})}))},setHideForm:function(e){return P((function(t){return se(se({},t),{},{hideForm:e})}))},rolePermissions:t.access})},s().createElement(X.R,{type:"Permission",isOpen:i,onModalCancel:function(){return l(!1)},onConfirmCancel:L}),S.hideForm?S.success?s().createElement(f.Wizard,{title:"Add permissions",isOpen:!0,steps:[{name:"success",component:new U({currentRoleID:h}),isFinishedStep:!0}]}):null:s().createElement(K.Z,{container:T,schema:E,subscription:{values:!0},FormTemplate:le,initialValues:{"role-uuid":t.uuid,"role-type":"create","role-name":t.display_name,"role-description":t.description},componentMapper:se(se({},$.ZP),ue),onSubmit:k,onCancel:function(e){var t;e&&(null===(t=e["add-permissions-table"])||void 0===t?void 0:t.length)>0?l(!0):L()}}))};de.defaultProps={role:{}},de.propTypes={role:u().object};const fe=de;var me=r(1227);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=[{title:"Application"},{title:"Resource type"},{title:"Operation"},{title:"Resource definitions",transforms:[(0,q.info)({popover:"Resource definitions only apply to Cost Management permissions",ariaLabel:"Resource definitions only apply to Cost Management permissions"})]},{title:"Last commit",transforms:[(0,q.cellWidth)(15)]}],ge=function(e,t,r){return r?s().createElement("p",null,"The ",s().createElement("b",null," ","".concat(e))," selected permissions will no longer be granted through the ",s().createElement("b",null,"".concat(t.name))," role."):s().createElement("p",null,"The ",s().createElement("b",null,"".concat(e))," permission will no longer be granted through the ",s().createElement("b",null," ","".concat(t.name))," role.")};const be=function(e){var t=(0,d.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),d.shallowEqual),r=t.role,n=t.isRecordLoading,l=(0,p.useHistory)(),u=(0,c.useReducer)(M,k),m=(0,a.Z)(u,2),y=m[0],g=y.pagination,E=y.selectedPermissions,Z=y.showRemoveModal,x=y.confirmDelete,S=y.deleteInfo,P=y.filters,T=y.isToggled,L=y.resources,G=y.operations,q=m[1],B=(0,c.useState)(!0),V=(0,a.Z)(B,2),z=V[0],W=V[1],Y=(0,d.useDispatch)(),H=e?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,c.useEffect)((function(){var e;if(Object.keys(r).length>0){var t=Object.entries(r.access.reduce((function(e,t){var r=e.resources,n=e.operations,i=t.permission.split(":"),c=(0,a.Z)(i,3),s=c[1],l=c[2];return{resources:r.includes(s)?r:[].concat((0,o.Z)(r),[s]),operations:n.includes(l)?n:[].concat((0,o.Z)(n),[l])}}),{resources:[],operations:[]})).reduce((function(e,t){var r=(0,a.Z)(t,2),n=r[0],o=r[1];return ve(ve({},e),{},(0,i.Z)({},n,o.map((function(e){return{label:e,value:e}}))))}),{}),n=t.resources,c=t.operations;q({type:A,resources:n,operations:c,count:r.access?r.access.length:0})}W(null==r||null===(e=r.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")})))}),[r]);var U,X,K=r&&r.access?(r.access||[]).filter((function(e){var t=e.permission.split(":"),r=(0,a.Z)(t,3),n=r[0],o=r[1],i=r[2],c=P.applications,s=P.resources,l=P.operations;return(!(c.length>0)||c.includes(n))&&(!(s.length>0)||s.includes(o))&&(!(l.length>0)||l.includes(i))})).map((function(e){return ve(ve({uuid:e.permission},e),{},{modified:r.modified})})):[],Q=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return Y((0,v.lq)(r,t)).then((function(){Y((0,v.fp)(r.uuid)),q({type:_,selection:[]})}))},$=function(e){return e.reduce((function(e,t){return{"":ve(ve({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},J={label:s().createElement("div",null," No results found"),isDisabled:!0},ee=ve({access:[],applications:[]},r),te=Object.values({applications:ee.applications,operations:G,resources:L}).find((function(e){return e.length>10}));return s().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},Z&&s().createElement(me.Z,{text:S.text,title:S.title,isOpen:Z,confirmButtonLabel:S.confirmButtonLabel,onClose:function(){return q({type:C,showRemoveModal:!1})},onSubmit:function(){x(),q({type:D})}}),s().createElement(b.M,{columns:z?ye:ye.filter((function(e){return"Resource definitions"!==e.title})),createRows:(U=z,X=null==r?void 0:r.uuid,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reduce((function(e,t){var n=t.resourceDefinitions,i=t.permission,l=t.modified,u=i.split(":"),d=(0,a.Z)(u,3),f=d[0],m=d[1],h=d[2];return[].concat((0,o.Z)(e),[{uuid:i,cells:[f,m,h].concat((0,o.Z)(U?[i.includes("cost-management")&&n.length>0?s().createElement(c.Fragment,{key:"resource-definitions"},s().createElement(p.Link,{to:"/roles/detail/".concat(X,"/permission/").concat(i)},j()(n.map((function(e){return e.attributeFilter.value}))).length)):s().createElement("span",{className:"rbac-c-text__disabled"},"N/A")]:[]),[s().createElement(c.Fragment,{key:"".concat(f,"-modified")},s().createElement(w.Z,{date:l,type:(0,O.mh)(l)}))]),selected:Boolean(null==r?void 0:r.find((function(e){return e.uuid===i})))}])}),[])}),actionResolver:r.system?void 0:function(){return[{title:"Remove",onClick:function(e,t,n){return q({type:I,confirmDelete:function(){return Q([n])},deleteInfo:{title:"Remove permission?",text:ge(n.uuid,r,!1),confirmButtonLabel:"Remove permission"}})}}]},data:K.slice(g.offset,g.offset+g.limit),filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,r=e.offset;return q({type:R,limit:t,offset:r})},isSelectable:!r.system,setCheckedItems:function(e){q({type:_,selection:e(E).map((function(e){return{uuid:e.uuid}}))})},checkedRows:E,onShowMore:te?function(){q({type:F})}:void 0,setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;q(ve(ve(ve({type:N},t?{applications:t}:P.applications),r?{resources:r}:P.resources),n?{operations:n}:P.operations))},toolbarButtons:function(){return e?[]:[s().createElement(p.Link,{to:"/roles/detail/".concat(r.uuid,"/role-add-permission"),key:"role-add-permission",className:"rbac-m-hide-on-sm"},s().createElement(f.Button,{variant:"primary","aria-label":"Add Permission"},"Add permissions")),{label:"Add Permission",props:{className:"rbac-m-hide-on-md"},onClick:function(){l.push("/roles/detail/".concat(r.uuid,"/role-add-permission"))}},{label:"Remove",props:{isDisabled:!E.length>0},onClick:function(){var e=E.length>1;q({type:I,confirmDelete:function(){return Q((0,o.Z)(E))},deleteInfo:{title:e?"Remove permissions?":"Remove permission?",text:ge(e?E.length:E[0].uuid,r,E.length>1),confirmButtonLabel:e?"Remove permissions":"Remove permission"}})}}]},isLoading:n,pagination:ve(ve({},g),{},{count:K.length}),titlePlural:"permissions",titleSingular:"permission",routes:function(){return s().createElement(p.Route,{exact:!0,path:h.Z["role-add-permission"].path},s().createElement(fe,{isOpen:!0,role:r}))},emptyProps:{title:"There are no permissions in this role",description:H},filters:[{key:"applications",value:0===P.applications.length?"":P.applications,placeholder:"Filter by application",type:"group",selected:$(P.applications),groups:[{type:ee.applications.length>0?"checkbox":"plain",items:ee.applications.length>0?ee.applications.slice(0,T?void 0:10).map((function(e){return{label:e,value:e}})):[J]}]},{key:"resources",value:0===P.resources.length?"":P.resources,placeholder:"Filter by resource type",type:"group",selected:$(P.resources),groups:[{type:L.length>0?"checkbox":"plain",items:L.length>0?L.slice(0,T?void 0:10):[J]}]},{key:"operations",value:0===P.operations.length?"":P.operations,placeholder:"Filter by operation",type:"group",selected:$(P.operations),groups:[{type:G.length>0?"checkbox":"plain",items:G.length>0?G.slice(0,T?void 0:10):[J]}]}],tableId:"role-permissions"}))};var Ee=r(19756),we=r(13063),Oe=r(88040),Ze=r(67643),xe=r(16796);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=function(e){var t=e.onDelete,r=(0,p.useHistory)(),n=(0,c.useState)(!1),i=(0,a.Z)(n,2),l=i[0],u=i[1],b=(0,c.useState)(!1),E=(0,a.Z)(b,2),w=E[0],x=E[1],j=(0,p.useParams)(),S=j.uuid,P=j.groupUuid,T=(0,d.useSelector)((function(e){var t,r,n,o,i,a,c,s,l;return Se(Se({role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading},P&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(r=e.roleReducer)||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.pagination)||Z.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(c=a.groups)||void 0===c?void 0:c.pagination)||Z.he,groupsFilters:(null===(s=e.groupReducer)||void 0===s||null===(l=s.groups)||void 0===l?void 0:l.filters)||{}})}),d.shallowEqual),L=T.role,k=T.group,R=T.isRecordLoading,_=T.rolesPagination,C=T.rolesFilters,D=T.groupsPagination,I=T.groupsFilters,N=T.systemGroupUuid,F=(0,d.useSelector)((function(e){return e.roleReducer.error!==O.VG})),A=(0,d.useSelector)((function(e){return e.groupReducer.error!==O.VG})),G=(0,d.useDispatch)(),M=function e(){if(G((0,v.fp)(S)),P)if("default-access"!==P)G((0,Ee.yi)(P));else{if(N)return e(),insights.chrome.appObjectId(N),function(){return insights.chrome.appObjectId(void 0)};G((0,Ee.WD)())}};(0,c.useEffect)((function(){return M(),insights.chrome.appObjectId(S),function(){return insights.chrome.appObjectId(void 0)}}),[S,P,N]),(0,c.useEffect)((function(){0===(null==L?void 0:L.accessCount)&&""!==(null==L?void 0:L.external_tenant)&&""!==(null==L?void 0:L.external_role_id)&&null!=L&&L.system&&x(!0)}),[L]);var q=function(){return[P?{title:"Groups",to:(0,O.zk)(h.Z.groups.path,D,I)}:{title:"Roles",to:(0,O.zk)(h.Z.roles.path,_,C)}].concat((0,o.Z)(A&&P&&("default-access"===P?N:A)?k?[{title:k&&k.name,to:"/groups/detail/".concat(P,"/roles"),isLoading:k&&k.loaded}]:[void 0]:A||!P?[]:[{title:"Invalid group",isActive:!0}]),(0,o.Z)(A||!P?[{title:R?void 0:F?(null==L?void 0:L.display_name)||(null==L?void 0:L.name):"Invalid role",isActive:!0}]:[]))},B=!R&&L?L.display_name||L.name:void 0,V=!R&&L?L.description:void 0,z=[s().createElement(f.DropdownItem,{component:s().createElement(p.Link,{onClick:function(){return u(!1)},to:h.Z["role-detail-edit"].path.replace(":id",S)},"Edit"),key:"edit-role"}),s().createElement(f.DropdownItem,{component:s().createElement(p.Link,{onClick:t,to:h.Z["role-detail-remove"].path.replace(":id",S)},"Delete"),className:"rbac-c-role__action",key:"delete-role"})];return s().createElement(c.Fragment,null,!A&&P||!F?s().createElement(c.Fragment,null,s().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},s().createElement(xe.Z,q())),s().createElement(Ze.Z,{title:"".concat(A?"Role":"Group"," not found"),description:["".concat(A?"Role":"Group"," with ID ").concat(A?S:P," does not exist.")],actions:[s().createElement(f.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return r.goBack()}},"Back to previous page")]})):s().createElement(c.Fragment,null,s().createElement(y.Q,{breadcrumbs:q()},s().createElement(f.Level,null,s().createElement(f.LevelItem,null,s().createElement(m.Z,{title:B||s().createElement(g.h2,null),className:"rbac-page-header__title"})),!R&&L&&!L.system&&s().createElement(f.LevelItem,null,s().createElement(f.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:s().createElement(f.KebabToggle,{onToggle:function(e){return u(e)},id:"role-actions-dropdown"}),isOpen:l,isPlain:!0,position:"right",dropdownItems:z}))),V&&s().createElement(f.TextContent,{className:"rbac-page-header__description"},s().createElement(f.Text,{component:"p"},V))),R||!L?s().createElement(g.Wi,null):s().createElement(be,{cantAddPermissions:w}),s().createElement(p.Route,{path:h.Z["role-detail-remove"].path},!R&&s().createElement(we.Z,{afterSubmit:function(){G((0,v.Kt)(Se(Se({},_),{},{offset:0,filters:C,inModal:!1})))},cancelRoute:h.Z["role-detail"].path.replace(":uuid",S),submitRoute:(0,O.zk)(h.Z.roles.path,Se(Se({},_),{},{offset:0}),C),routeMatch:h.Z["role-detail-remove"].path})),s().createElement(p.Route,{path:h.Z["role-detail-edit"].path},!R&&s().createElement(Oe.Z,{afterSubmit:M,cancelRoute:h.Z["role-detail"].path.replace(":uuid",S),routeMatch:h.Z["role-detail-edit"].path}))))};Pe.propTypes={onDelete:u().func};const Te=Pe},84974:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(99166);const o=(e,t=250,r={onlyResolvesLast:!1})=>(0,n.Z)(e,t,r)},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},65088:()=>{},70347:()=>{},11452:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},54476:()=>{},28992:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},314:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../sourcemaps/3730.603fc6320412c2cfa4b94e1260485b01.js.map