(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[791],{11791:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var n=r(92950),a=r.n(n),c=r(334),s=r(97066),o=r(38376),i=r(27244),l=r(98033),u=r(82916),p=r(85061),m=r(96156),d=r(28481),f=r(45697),b=r.n(f),g=r(45237),E=r(23279),h=r.n(E),v=r(41800),y=r(54213),O=r(64107),k=r(56455),j=r(28090),S=r(90944),T=r(19571),_=r(61338),w=r(6877),Z=r(67643),P=r(16796),R=r(11107);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,m.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U,A=["Roles",{title:"Groups",cellTransforms:[w.compoundExpand]},{title:"Permissions",cellTransforms:[w.compoundExpand]},{title:"Last commit"}],L=function(e){var t=e.match.params.username,r=e.fetchRoles,i=e.fetchRoleForUser,l=e.fetchUsers,u=e.roles,f=e.isLoading,b=e.rolesWithAccess,E=e.user,j=(0,n.useState)(""),S=(0,d.Z)(j,2),I=S[0],L=S[1],N=(0,n.useState)({}),B=(0,d.Z)(N,2),C=B[0],F=B[1],D=(0,g.useSelector)((function(e){return e.roleReducer.error!==R.VG}));(0,n.useEffect)((function(){return l(x(x({},_.he),{},{limit:0,filters:{username:t},inModal:!0})),insights.chrome.appObjectId(t),function(){return insights.chrome.appObjectId(void 0)}}),[]);var V=(0,c.useHistory)();(0,n.useEffect)((function(){r({limit:20,offset:0,addFields:["groups_in"],username:t}),U=h()((function(e,t,n,a,c){return r({limit:e,offset:t,displayName:n,addFields:a,username:c})}),500)}),[]);var W=function(){return[{title:"Users",to:"/users"},{title:D?t:"Invalid user",isActive:!0}]};return a().createElement(n.Fragment,null,D?a().createElement(s.Stack,null,a().createElement(s.StackItem,null,a().createElement(o.Q,{paddingBottm:!1,breadcrumbs:W()},a().createElement(o.y,{title:t,renderTitleTag:function(){return E&&!f?a().createElement(s.Label,{color:(null==E?void 0:E.is_active)&&"green"},null!=E&&E.is_active?"Active":"Inactive"):a().createElement(k.Z,{size:"xs",className:"rbac__user-label-skeleton"})},description:"".concat(t,"'s roles, groups and permissions.")}))),a().createElement(s.StackItem,null,a().createElement(y.Z,{type:"content",id:"user-detail"},a().createElement(v.M,{columns:A,isCompact:!1,isExpandable:!0,onExpand:function(e,t,r,n,a){n?F(x(x({},C),{},(0,m.Z)({},a.uuid,-1))):(F(x(x({},C),{},(0,m.Z)({},a.uuid,r))),2===r&&i(a.uuid))},createRows:function(e){return e?e.reduce((function(e,t,r){var n=t.uuid,s=t.display_name,o=t.groups_in,i=void 0===o?[]:o,l=t.modified,u=t.accessCount;return[].concat((0,p.Z)(e),[{uuid:n,cells:[{title:s,props:{component:"th",isOpen:!1}},{title:"".concat(i.length),props:{isOpen:1===C[n]}},{title:u,props:{isOpen:2===C[n]}},{title:a().createElement(O.Z,{type:"exact",date:l})}]},{uuid:"".concat(n,"-groups"),parent:3*r,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:a().createElement(w.Table,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:w.TableVariant.compact,cells:["Name","Description"],rows:i.map((function(e){return{cells:[{title:a().createElement(c.Link,{to:"/groups/detail/".concat(e.uuid)},e.name)},e.description]}}))},a().createElement(w.TableHeader,null),a().createElement(w.TableBody,null))}]},{uuid:"".concat(n,"-groups"),parent:3*r,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:b&&b[n]?a().createElement(w.Table,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:w.TableVariant.compact,cells:["Application","Resource type","Operation"],rows:b[n].access.map((function(e){return{cells:e.permission.split(":")}}))},a().createElement(w.TableHeader,null),a().createElement(w.TableBody,null)):a().createElement(T.Wi,null)}]}])}),[]):[]},data:u.data,filterValue:I,ouiaId:"user-details-table",fetchData:function(e){var r=e.limit,n=e.offset,a=e.name;U(r,n,a,["groups_in"],t)},setFilterValue:function(e){var t=e.name;return L(t)},isLoading:f,pagination:u.meta,filterPlaceholder:"role name",titlePlural:"roles",titleSingular:"role",tableId:"user"})))):a().createElement(n.Fragment,null,a().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},a().createElement(P.Z,W())),a().createElement(Z.Z,{title:"User not found",description:["User with username ".concat(t," does not exist.")],actions:[a().createElement(s.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return V.goBack()}},"Back to previous page")]})))};L.propTypes={match:b().object,fetchRoles:b().func,fetchRoleForUser:b().func,fetchUsers:b().func,roles:b().object,isLoading:b().bool,rolesWithAccess:b().object,user:b().object};const N=(0,c.withRouter)((0,g.connect)((function(e,t){var r=e.roleReducer,n=r.roles,a=r.isLoading,c=r.rolesWithAccess,s=e.userReducer.users.data,o=t.match.params.username;return{roles:n,isLoading:a,rolesWithAccess:c,user:s&&s.filter((function(e){return e.username===o}))[0]}}),(function(e){return{fetchRoles:function(t){return e((0,j.vd)(t))},fetchRoleForUser:function(t){return e((0,j.sv)(t))},fetchUsers:function(t){return e((0,S.u)(t))}}}))(L));var B=r(60306),C=r(93327),F=function(){var e=a().createElement(u.Z,{description:"These are all of the users in your Red Hat organization. To add new users or manage existing users, go to your"});return(0,n.useEffect)((function(){insights.chrome.appNavClick({id:"users",secondaryNav:!0})}),[]),a().createElement(c.Switch,null,a().createElement(C.Z,{pageAction:"user-detail",exact:!0,path:B._j.tG,render:function(e){return a().createElement(N,e)}}),a().createElement(C.Z,{pageAction:"users-list",path:[B._j.rC,B._j.Sy],render:function(){return a().createElement(s.Stack,null,a().createElement(s.StackItem,null,a().createElement(o.Q,{paddingBottm:!1},a().createElement(o.y,{title:"Users",description:e}))),a().createElement(s.StackItem,null,a().createElement(i.Section,{type:"content",id:"users"},a().createElement(l.Z,{userLinks:!0,props:{isSelectable:!1,isCompact:!1}}))))}}))};F.propTypes={},F.defaultProps={};const D=F}}]);
//# sourceMappingURL=../sourcemaps/791.01b7696e9df9fc0246fb2cb0d6816863.js.map