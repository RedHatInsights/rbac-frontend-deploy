(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[9822],{39173:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(92950),s=n.n(r),a=n(94184),c=n.n(a),i=n(57262);const l=function(e){var t=e.className,n=e.title,r=c()(t);return s().createElement(i.Title,{headingLevel:"h1",size:"2xl",className:r,"widget-type":"InsightsPageHeaderTitle"},n)}},39822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(4942),s=n(29439),a=n(92950),c=n.n(a),i=n(334),l=n(57262),o=n(39173),u=n(45697),m=n.n(u),p=function(e){var t=e.isOrgAdmin,n=e.isUserAccessAdmin,r=t?"Org. Administrator":"User Access Admin",s=t?c().createElement("span",null," You can manage other users' permissions with 'User access' "):c().createElement("span",null,"You were granted the User Access Administrator role by your Org. administrator and can now manage other User's permissions with 'User Access'");return t||n?c().createElement(l.Tooltip,{position:l.TooltipPosition.right,content:s},c().createElement(l.Label,{color:"purple"}," ",r," ")):c().createElement(c().Fragment,null)};p.propTypes={isOrgAdmin:m().bool,isUserAccessAdmin:m().bool};const d=p;var b=n(26794),f=n(4682),h=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",advisor:"/insights/advisor",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions","ocp-advisor"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",subscriptions:"/subscriptions"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","subscriptions"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}],g=n(94184),O=n.n(g);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=function(){for(var e=(0,i.useLocation)(),t=e.search,n=new URLSearchParams(t),s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.reduce((function(e,t){return v(v({},e),{},(0,r.Z)({},t,n.get(t)))}),{})};var _=function(e){var t=e.header,n=e.entitlements,r=e.isDisabled,a=E("bundle").bundle;return c().createElement(c().Fragment,null,t&&c().createElement(l.Title,{headingLevel:"h3",size:"xl"},t),c().createElement(l.Stack,{className:O()({"pf-u-mt-lg":!t}),hasGutter:!0},n&&(null==h?void 0:h.map((function(e){var t=n.find((function(t){var n=(0,s.Z)(t,1)[0];return e.entitlement===n})),o=e.entitlement;return t?c().createElement(l.StackItem,{key:o,className:"rbac-c-mua-cardWrapper"},c().createElement(i.NavLink,{className:O()("rbac-c-mua-bundles__cardlink",{"rbac-c-mua-bundles__cardlink--disabled":r}),to:{pathname:f.Z["my-user-access"],search:"bundle=".concat(o)}},c().createElement(l.Card,{key:e.title,isFlat:r||o!==a,isSelectable:!r,isSelected:!r&&o===a,className:O()("rbac-c-mua-bundles__card","rbac-c-mua-bundles__card--".concat(e.entitlement),{"rbac-c-mua-bundles__card--disabled":r})},c().createElement(l.CardTitle,{className:"rbac-c-mua-bundles__card--header"}," ",e.title),c().createElement(l.CardBody,null,c().createElement(l.Stack,{hasGutter:!0},c().createElement(l.StackItem,{className:"rbac-c-mua-bundles__card--applist"},Object.entries(e.apps||{}).map((function(e){var t=(0,s.Z)(e,1)[0];return c().createElement("span",{key:t}," ",t," ")})))))))):null})))))};_.propTypes={header:m().string,entitlements:m().array,isDisabled:m().bool};const j=_;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){return a.Fragment};const k=function(){var e=E("bundle").bundle,t=function(e){var t,n=(0,i.useHistory)(),r=n.replace,s=n.location.pathname;return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?(null===(t=h.find((function(t){return t.entitlement===e})))||void 0===t?void 0:t.appsIds)||[]:(r({to:s,search:"bundle=".concat(e="rhel")}),[])}(e),l=(0,a.useState)({}),o=(0,s.Z)(l,2),u=o[0],m=o[1];(0,a.useEffect)((function(){Object.prototype.hasOwnProperty.call(u,e)||n(19289)("./".concat(e)).then((function(t){return m((function(n){return w(w({},n),{},(0,r.Z)({},e,t.default))}))})).catch(console.log)}),[e]);var p=u[e]||P;return c().createElement(p,{key:e,apps:t})};var S=n(63053),U=function(e){var t,n=e.entitlements,r=e.isOrgAdmin,a=e.isUserAccessAdmin,i=Object.entries(n).filter((function(e){return(0,s.Z)(e,2)[1].is_entitled})),o=Object.entries(n).filter((function(e){return!(0,s.Z)(e,2)[1].is_entitled})),u=E("bundle").bundle,m=r||a;return c().createElement(S.Z.Provider,{value:m},c().createElement(l.Grid,null,c().createElement(l.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},c().createElement(l.Stack,null,c().createElement(l.StackItem,{className:"rbac-l-myUserAccess-section__cards--entitled"},c().createElement(j,{entitlements:i})),o.length>0&&c().createElement(l.StackItem,{className:"rbac-l-myUserAccess-section__cards--unentitled"},c().createElement(j,{header:"Not subscribed",entitlements:o,isDisabled:!0})))),c().createElement(l.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==u&&c().createElement(l.Title,{headingLevel:"h3",size:"xl"},"Your ".concat(null===(t=h.find((function(e){return e.entitlement===u})))||void 0===t?void 0:t.title," ").concat(m?"roles":"permissions")),c().createElement(k,null))))};U.propTypes={entitlements:m().object,isOrgAdmin:m().bool,isUserAccessAdmin:m().bool};const D=U;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=function(){var e=(0,a.useState)({}),t=(0,s.Z)(e,2),n=t[0],r=t[1],u=E("bundle").bundle,m=(0,a.useState)(u),p=(0,s.Z)(m,2),g=p[0],O=p[1],y=(0,a.useContext)(b.Z);(0,a.useEffect)((function(){insights.chrome.auth.getUser().then((function(e){var t,n=e.identity,s=e.entitlements;return r({entitlements:s,isOrgAdmin:null==n||null===(t=n.user)||void 0===t?void 0:t.is_org_admin})}))}),[]);var v=N(N({},n.entitlements),{},{application_services:{is_entitled:!0,is_trial:!1}}),_=Object.entries(v).filter((function(e){return(0,s.Z)(e,2)[1].is_entitled})),j=(0,a.useState)(!1),A=(0,s.Z)(j,2),w=A[0],P=A[1];return c().createElement(c().Fragment,null,Object.prototype.hasOwnProperty.call(n,"entitlements")&&(Object.prototype.hasOwnProperty.call(n,"isOrgAdmin")||y)?c().createElement(c().Fragment,null,c().createElement(o.Z,{className:"rbac-p-myUserAccess--title sticky",title:c().createElement(c().Fragment,null,c().createElement("span",null," My User Access "),c().createElement(d,{isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:y}))}),c().createElement(l.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},"Select applications to view your personal permissions."),_&&c().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},c().createElement(l.Dropdown,{ouiaId:"mua-bundle-dropdown",toggle:c().createElement(l.DropdownToggle,{onToggle:function(){return P(!w)},id:"mua-bundle-dropdown"},g||"Choose a subscription..."),dropdownItems:h.map((function(e){return c().createElement(i.NavLink,{key:e.entitlement,to:{pathname:f.Z["my-user-access"],search:"bundle=".concat(e.entitlement)}},c().createElement(l.DropdownItem,{onClick:function(){O(e.title),P(!1)},component:"button"},e.title))})),isOpen:w})),c().createElement("section",null,c().createElement(D,{entitlements:v,isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:y}))):c().createElement(l.Spinner,null))}},63053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(92950).createContext)(!1)},19289:(e,t,n)=>{var r={"./MUABundles":[35337,5337],"./MUABundles.scss":[35337,5337],"./__mocks__/rhel":[18348,8348],"./__mocks__/rhel.js":[18348,8348],"./ansible":[85039,6819,5638,1936,2657,4250,2632],"./ansible.js":[85039,6819,5638,1936,2657,4250,2632],"./application_services":[62997,2997],"./application_services.js":[62997,2997],"./openshift":[57416,6819,5638,1936,2657,4250,7247],"./openshift.js":[57416,6819,5638,1936,2657,4250,7247],"./rhel":[54250,6819,5638,1936,2657,4250,7664],"./rhel.js":[54250,6819,5638,1936,2657,4250,7664]};function s(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],s=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(s)))}s.keys=()=>Object.keys(r),s.id=19289,e.exports=s}}]);
//# sourceMappingURL=../sourcemaps/9822.d31cfa3365b3c5bee10b794805e1d5ea.js.map