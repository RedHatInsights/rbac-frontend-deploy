(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[4563,1789],{41939:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(93345),n=o.n(a),l=o(16165),r=o(72583),s=o(83873);const i=e=>{var{isOpen:t,onConfirm:o,onClose:i,children:c,confirmButtonLabel:u="Confirm",cancelButtonLabel:d="Cancel",variant:m=l.d.small,titleIconVariant:p="warning",withCheckbox:f=!1,checkboxLabel:g="I understand that this action cannot be undone",confirmButtonVariant:b=r.Ak.primary,ouiaId:h="WarningModal"}=e,A=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["isOpen","onConfirm","onClose","children","confirmButtonLabel","cancelButtonLabel","variant","titleIconVariant","withCheckbox","checkboxLabel","confirmButtonVariant","ouiaId"]);const[v,C]=(0,a.useState)(!1);return n().createElement(l.a,Object.assign({variant:m,isOpen:t,onClose:i,onEscapePress:i,titleIconVariant:p,actions:[n().createElement(r.$n,{ouiaId:`${h}-confirm-button`,key:"confirm",variant:b,onClick:()=>{null==o||o(),C(!1)},isDisabled:f&&!v},u),n().createElement(r.$n,{ouiaId:`${h}-cancel-button`,key:"cancel",variant:r.Ak.link,onClick:i},d)],ouiaId:h},A),c,f?n().createElement(s.S,{isChecked:v,onChange:(e,t)=>C(t),label:g,id:"warning-modal-check",className:"pf-v5-u-mt-lg",ouiaId:`${h}-confirm-checkbox`}):null)}},53926:(e,t,o)=>{"use strict";o.d(t,{Lr:()=>n,cH:()=>s,nU:()=>a,rO:()=>r});var a,n,l=o(93345);!function(e){e.right="right",e.left="left"}(a||(a={})),function(e){e.up="up",e.down="down"}(n||(n={}));const r=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),s=l.createContext({keyHandler:null,sendRef:null})},61354:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(95067);const a={backdrop:"pf-v5-c-backdrop",backdropOpen:"pf-v5-c-backdrop__open"}},81539:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(26078);const a={button:"pf-v5-c-button",modalBox:"pf-v5-c-modal-box",modalBoxBody:"pf-v5-c-modal-box__body",modalBoxClose:"pf-v5-c-modal-box__close",modalBoxDescription:"pf-v5-c-modal-box__description",modalBoxFooter:"pf-v5-c-modal-box__footer",modalBoxHeader:"pf-v5-c-modal-box__header",modalBoxHeaderMain:"pf-v5-c-modal-box__header-main",modalBoxTitle:"pf-v5-c-modal-box__title",modalBoxTitleIcon:"pf-v5-c-modal-box__title-icon",modalBoxTitleText:"pf-v5-c-modal-box__title-text",modifiers:{sm:"pf-m-sm",md:"pf-m-md",lg:"pf-m-lg",alignTop:"pf-m-align-top",danger:"pf-m-danger",warning:"pf-m-warning",success:"pf-m-success",custom:"pf-m-custom",info:"pf-m-info",help:"pf-m-help",icon:"pf-m-icon"},themeDark:"pf-v5-theme-dark"}},85655:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var a=o(74848),n=o(32485),l=o.n(n),r=function(){return r=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};const s=function(e){var t,o=e.type,n=e.children,s=e.className,i=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["type","children","className"]),c=l()(s,((t={})["ins-l-".concat(o)]=void 0!==o,t));return(0,a.jsxs)("section",r({},i,{className:c,children:[" ",n," "]}))}},44419:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var a=o(49634),n=o(58471);const l=e=>{const t=(0,a.useNavigate)();return(o,a)=>t((0,n.o)(o,e),a)}},61563:(e,t,o)=>{"use strict";o.d(t,{A:()=>m});var a=o(93345),n=o.n(a),l=o(5556),r=o.n(l),s=o(40748),i=o(41939),c=o(8604),u=o(40335);const d=({isOpen:e,onClose:t,onSubmit:o})=>{const a=(0,c.tz)();return n().createElement(i.A,{withCheckbox:!0,isOpen:e,title:a.formatMessage(u.A.warning),checkboxLabel:a.formatMessage(u.A.confirmCheckMessage),confirmButtonLabel:a.formatMessage(u.A.continue),onClose:t,onConfirm:o},n().createElement(s.TextContent,null,n().createElement(s.Text,null,n().createElement(c.sA,{...u.A.defaultAccessGroupEditWarning,values:{b:e=>n().createElement("b",null,e)}}))))};d.propTypes={onSubmit:r().func,onClose:r().func,isOpen:r().bool};const m=d},13867:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>D});var a=o(93345),n=o.n(a),l=o(69733),r=o(8604),s=o(5556),i=o.n(s),c=o(49634),u=o(79994),d=o(26956),m=o(20881),p=o(85655),f=o(63767),g=o(61361),b=o(38694),h=o(99843),A=o(41939),v=o(61563);const C=({title:e,text:t,onClose:o,onSubmit:l,isOpen:r,confirmButtonLabel:s,isDefault:i,isChanged:c})=>{const[d,m]=(0,a.useState)(!1);return i&&!c&&d?n().createElement(v.A,{isOpen:d&&r,onClose:()=>{o(),m(!1)},onSubmit:l}):n().createElement(A.A,{title:e,isOpen:r,confirmButtonLabel:s,confirmButtonVariant:u.ButtonVariant.danger,onClose:o,onConfirm:()=>{m(!0),(!i||c)&&l()}},t)};C.propTypes={text:i().node,title:i().node,confirmButtonLabel:i().string,onSubmit:i().func,onClose:i().func,isOpen:i().bool,isDefault:i().bool,isChanged:i().bool},C.defaultProps={isDefault:!1,isChanged:!1};const y=C;var x=o(42134),k=o(40262),O=o(58471),R=o(44419),E=o(47181),B=o(40335),M=o(49573);const I=(e,t,o=[])=>t?.reduce(((t,{uuid:l,display_name:r,name:s,description:i,modified:c})=>[...t,{uuid:l,title:r||s,cells:[n().createElement(a.Fragment,{key:`${l}-name`},n().createElement(O.A,{to:M.A["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",l)},r||s)),i,n().createElement(a.Fragment,{key:`${l}-modified`},n().createElement(f.A,{date:c,type:(0,x.eW)(c)}))],selected:Boolean(o&&o.find((e=>e.uuid===l)))}]),[])||[],S=e=>e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button",_=(e,t,o)=>{const a=(0,r.tz)(),l=n().createElement(u.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},a.formatMessage(B.A.addRole));return e?n().createElement(d.Tooltip,{content:o||a.formatMessage(B.A.allRolesAdded)},l):l},L=({groupReducer:{selectedGroup:e,systemGroup:t,groups:o}})=>({roles:e.roles?.data||[],pagination:{...g.L6,...e.roles?.meta||{}},groupsPagination:o.pagination||o.meta,groupsFilters:o.filters,isLoading:e.roles?.isLoading,isPlatformDefault:e.platform_default,isAdminDefault:e.admin_default,isChanged:!e.system,disableAddRoles:Object.keys(e.addRoles.pagination||{}).length>0?!(e.addRoles.pagination&&e.addRoles.pagination.count>0&&!e.admin_default):!!e.admin_default,systemGroupUuid:t?.uuid,group:e}),w=({onDefaultGroupChanged:e})=>{const t=(0,r.tz)(),o=(0,m.A)(),s=(0,l.useDispatch)(),i=(0,R.A)(),{groupId:u}=(0,c.useParams)(),[d,f]=(0,a.useState)(""),[g,A]=(0,a.useState)(""),[v,C]=(0,a.useState)([]),[w,D]=(0,a.useState)([]),[T,P]=(0,a.useState)(!1),[j,F]=(0,a.useState)((()=>null)),[G,N]=(0,a.useState)({}),{userAccessAdministrator:U,orgAdmin:V}=(0,a.useContext)(k.A),$=(0,a.useRef)(V||U),{roles:H,pagination:q,groupsPagination:z,groupsFilters:Q,isLoading:W,group:X,isPlatformDefault:Z,isAdminDefault:J,isChanged:K,disableAddRoles:Y,systemGroupUuid:ee}=(0,l.useSelector)(L),te=(e,t)=>(e.payload.then(t),e),oe=e=>s((0,h.bf)(e,{},{})),ae=e=>s((0,h.Ui)(e??u)),ne=()=>s((0,h.jL)({chrome:o})),le=(e,t,o)=>s(te((0,h.Dd)(e,t),o)),re=e=>(t,o)=>s((0,h.yX)(t,e,o)),se=[{title:t.formatMessage(B.A.name),orderBy:"name"},{title:t.formatMessage(B.A.description)},{title:t.formatMessage(B.A.lastModified)}];(0,a.useEffect)((()=>{u!==E.p3?re({...q,offset:0})(u):ee&&re({...q,offset:0})(ee)}),[ee]),(0,a.useEffect)((()=>{H.length>0&&(u!==E.p3?oe(u):ee&&oe(ee))}),[H]),(0,a.useEffect)((()=>{$.current=V||U}),[V,U]);const ie=(e,t,o)=>n().createElement("p",null,n().createElement(r.sA,{...o?B.A.removeRolesModalText:B.A.removeRoleModalText,values:{b:e=>n().createElement("b",null,e),name:e,...o?{roles:t}:{role:t}}})),ce=u!==E.p3?u:ee,ue=()=>{Z?ne().then((({value:{data:e}})=>{re({...q,offset:0})(e[0].uuid)})):re({...q,offset:0})(u)};return n().createElement(n().Fragment,null,n().createElement(y,{text:G.text,title:G.title,isOpen:T,isChanged:K,isDefault:Z||J,confirmButtonLabel:G.confirmButtonLabel,onClose:()=>P(!1),onSubmit:()=>{P(!1),j(),C([]),e(Z&&!K)}}),n().createElement(p.A,{type:"content",id:"tab-roles"},n().createElement(b.Z,{columns:se,isSelectable:$.current&&!J,rows:I(u,H,v),data:H,filterValue:g,fetchData:e=>{re(e)(ce)},emptyFilters:{name:"",description:""},setFilterValue:({name:e,description:t})=>{void 0!==e&&A(e),void 0!==t&&f(t)},isLoading:W,pagination:q,checkedRows:v,setCheckedItems:e=>{C((t=>e(t).map((({uuid:e,name:t,label:o})=>({uuid:e,label:o||t})))))},titlePlural:t.formatMessage(B.A.roles).toLowerCase(),titleSingular:t.formatMessage(B.A.role),toolbarButtons:()=>[...$.current&&!J?[n().createElement(O.A,{className:`rbac-m-hide-on-sm rbac-c-button__add-role${Y&&"-disabled"}`,to:M.A["group-add-roles"].link.replace(":groupId",u),key:"add-to-group"},_(Y,S(name||""),J&&t.formatMessage(B.A.defaultGroupNotManually))),{label:t.formatMessage(B.A.addRole),props:{isDisabled:Y,className:"rbac-m-hide-on-md"},onClick:()=>i(M.A["group-add-roles"].link.replace(":groupId",u))},{label:t.formatMessage(B.A.remove),props:{isDisabled:!v||!v.length>0,variant:"danger"},onClick:()=>{const e=v.length>1;F((()=>()=>le(ce,v.map((e=>e.uuid)),ue))),N({title:t.formatMessage(e?B.A.removeRolesQuestion:B.A.removeRoleQuestion),confirmButtonLabel:t.formatMessage(e?B.A.removeRoles:B.A.removeRole),text:ie(name,e?v.length:H.find((e=>e.uuid===v[0].uuid)).name,e)}),P(!0)}}]:[]],actionResolver:()=>[...$.current&&!J?[{title:t.formatMessage(B.A.remove),onClick:(e,o,a)=>{F((()=>()=>le(ce,[a.uuid],ue))),N({title:t.formatMessage(B.A.removeRoleQuestion),confirmButtonLabel:t.formatMessage(B.A.removeRole),text:ie(name,a.title,!1)}),P(!0)}}]:[]],ouiaId:"roles-table",emptyProps:{title:t.formatMessage(B.A.noGroupRoles),description:[t.formatMessage(J?B.A.contactServiceTeamForRoles:B.A.addRoleToConfigureAccess),""]},filters:[{key:"name",value:g},{key:"description",value:d}],tableId:"group-roles"})),n().createElement(a.Suspense,null,n().createElement(c.Outlet,{context:{[M.A["group-roles-edit-group"].path]:{group:X,cancelRoute:M.A["group-detail-roles"].link.replace(":groupId",u),postMethod:()=>s((0,h.Ui)(ce))},[M.A["group-roles-remove-group"].path]:{postMethod:()=>s((0,h.pl)({...z,offset:0,filters:Q,usesMetaInURL:!0,chrome:o})),cancelRoute:M.A["group-detail-roles"].link.replace(":groupId",u),submitRoute:(0,x.Fm)(M.A.groups.link,{...z,offset:0},Q),groupsUuid:[X]},[M.A["group-add-roles"].path]:{afterSubmit:()=>{Z||J?ne().then((({value:{data:e}})=>{re(q)(e[0].uuid),ae(e[0].uuid)})):(re(q)(u),ae())},fetchUuid:ee,selectedRoles:w,setSelectedRoles:D,closeUrl:M.A["group-detail"].link.replace(":groupId",Z?E.p3:u),addRolesToGroup:(e,t,o)=>s(te((0,h.Lu)(e,t),o)),groupName:X.name,isDefault:Z||J,isChanged:K,onDefaultGroupChanged:e}}})))};w.propTypes={searchFilter:i().string,selectedRoles:i().array,pagination:i().shape({limit:i().number.isRequired,offset:i().number.isRequired,count:i().number}),onDefaultGroupChanged:i().func},w.defaultProps={pagination:g.qp,selectedRoles:[]};const D=w},95067:()=>{},26078:()=>{}}]);