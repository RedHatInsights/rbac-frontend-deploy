(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[6316,5467,945],{5964:(e,t,s)=>{"use strict";s.r(t),s.d(t,{CaretDownIcon:()=>i,CaretDownIconConfig:()=>n,default:()=>r});var a=s(40400);const n={name:"CaretDownIcon",height:512,width:320,svgPath:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z",yOffset:0,xOffset:0},i=(0,a.I)(n),r=i},15493:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var a=s(28416),n=s.n(a),i=s(62012),r=s(79332),l=s(65353),c=s(5964),o=s(75587),m=s(73699),d=s(41435),p=s(38296),u=s(62472);const b=e=>{var{id:t="",children:s=null,className:n="",isOpen:i=!1,parentRef:r=null,getMenuRef:g=null,isDisabled:h=!1,isPlain:f=!1,isText:E=!1,toggleVariant:A="default",isActive:v=!1,onToggle:_=((e,t)=>{}),icon:y=null,toggleIndicator:O=c.default,splitButtonItems:k,splitButtonVariant:N="checkbox","aria-haspopup":I,ouiaId:S,ouiaSafe:T,ref:U}=e,Z=(0,l.__rest)(e,["id","children","className","isOpen","parentRef","getMenuRef","isDisabled","isPlain","isText","toggleVariant","isActive","onToggle","icon","toggleIndicator","splitButtonItems","splitButtonVariant","aria-haspopup","ouiaId","ouiaSafe","ref"]);const w=(0,u.useOUIAProps)(b.displayName,S,T),C=a.createElement(d.Dl.Consumer,null,(({toggleTextClass:e,toggleIndicatorClass:l,toggleIconClass:c})=>a.createElement(o.Z,Object.assign({},Z,{id:t,className:n,isOpen:i,parentRef:r,getMenuRef:g,isActive:v,isDisabled:h,isPlain:f,isText:E,toggleVariant:A,onToggle:_,"aria-haspopup":I},w,k&&{isSplitButton:!0,"aria-label":Z["aria-label"]||"Select"}),y&&a.createElement("span",{className:(0,p.css)(c)},y),s&&a.createElement("span",{className:O&&(0,p.css)(e)},s),O&&a.createElement("span",{className:(0,p.css)(!k&&l)},a.createElement(O,null)))));return k?a.createElement("div",{className:(0,p.css)(m.Z.dropdownToggle,m.Z.modifiers.splitButton,"action"===N&&m.Z.modifiers.action,"primary"===A&&"action"===N&&m.Z.modifiers.primary,"secondary"===A&&"action"===N&&m.Z.modifiers.secondary,h&&m.Z.modifiers.disabled)},k,C):C};b.displayName="DropdownToggle";var g=s(85044),h=s(39173),f=s(55140),E=s(64380),A=s(15950),v=s(25387),_=s(45697),y=s.n(_),O=s(2550),k=s(78173),N=s(50247);const I=({isOrgAdmin:e,isUserAccessAdmin:t})=>{const s=(0,v.YB)(),a=s.formatMessage(O.Z[e?"orgAdministrator":"userAccessAdmin"]),i=n().createElement("span",null,s.formatMessage(O.Z[e?"orgAdminHint":"userAccessAdminHint"]));return e||t?n().createElement(N.Tooltip,{position:N.TooltipPosition.right,content:i},n().createElement(k.Label,{color:"purple"}," ",a," ")):n().createElement(n().Fragment,null)};I.propTypes={isOrgAdmin:y().bool,isUserAccessAdmin:y().bool};const S=I;var T=s(86601);const U=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",advisor:"/insights/advisor",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions","ocp-advisor","ocm"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",subscriptions:"/subscriptions",repositories:"/content",provisioning:"/provisioning"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","subscriptions","content-sources","provisioning"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}];var Z=s(9545),w=s(23539),C=s(72232),P=s(94184),j=s.n(P),M=s(88094);const D=(...e)=>{const{search:t}=(0,i.useLocation)(),s=new URLSearchParams(t);return e.reduce(((e,t)=>({...e,[t]:s.get(t)})),{})},x=({header:e,entitlements:t,isDisabled:s})=>{const{bundle:a}=D("bundle");return n().createElement(n().Fragment,null,e&&n().createElement(C.Title,{headingLevel:"h3",size:"xl"},e),n().createElement(w.Stack,{className:j()({"pf-v5-u-mt-lg":!e}),hasGutter:!0},t&&U?.map((e=>{const r=t.find((([t])=>e.entitlement===t)),l=e.entitlement;return r?n().createElement(w.StackItem,{key:l,className:"rbac-c-mua-cardWrapper"},n().createElement(i.NavLink,{"aria-label":"card-link",className:j()("rbac-c-mua-bundles__cardlink",{"rbac-c-mua-bundles__cardlink--disabled":s}),to:{pathname:"",search:`bundle=${l}`}},n().createElement(M.Card,{key:e.title,isFlat:s||l!==a,isSelectable:!s,isSelected:!s&&l===a,className:j()("rbac-c-mua-bundles__card",`rbac-c-mua-bundles__card--${e.entitlement}`,{"rbac-c-mua-bundles__card--disabled":s})},n().createElement(M.CardTitle,{className:"rbac-c-mua-bundles__card--header"}," ",e.title),n().createElement(M.CardBody,null,n().createElement(w.Stack,{hasGutter:!0},n().createElement(w.StackItem,{className:"rbac-c-mua-bundles__card--applist"},Object.entries(e.apps||{}).map((([e])=>n().createElement("span",{key:e}," ",e," "))))))))):null}))))};x.propTypes={header:y().string,entitlements:y().array,isDisabled:y().bool};const L=x;var B=s(75614);const R=()=>a.Fragment,F=()=>{const{bundle:e}=D("bundle"),t=(e=>{const{pathname:t}=(0,i.useLocation)(),s=(0,i.useNavigate)();return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?U.find((({entitlement:t})=>t===e))?.appsIds||[]:(s({to:t,search:`bundle=${e=B.Jr}`},{replace:!0}),[])})(e),[r,l]=(0,a.useState)({});(0,a.useEffect)((()=>{Object.prototype.hasOwnProperty.call(r,e)||s(19289)(`./${e}`).then((t=>l((s=>({...s,[e]:t.default}))))).catch(console.log)}),[e]);const c=r[e]||R;return n().createElement(c,{key:e,apps:t})};var V=s(65655);const G=({entitlements:e,isOrgAdmin:t,isUserAccessAdmin:s})=>{const a=(0,v.YB)(),i=Object.entries(e).filter((([,{is_entitled:e}])=>e)),r=Object.entries(e).filter((([,{is_entitled:e}])=>!e)),{bundle:l}=D("bundle"),c=t||s;return n().createElement(V.Z.Provider,{value:c},n().createElement(Z.Grid,null,n().createElement(Z.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},n().createElement(w.Stack,null,n().createElement(w.StackItem,{"data-testid":"entitle-section",className:"rbac-l-myUserAccess-section__cards--entitled"},n().createElement(L,{entitlements:i})),r.length>0&&n().createElement(w.StackItem,{className:"rbac-l-myUserAccess-section__cards--unentitled"},n().createElement(L,{header:a.formatMessage(O.Z.notSubscribed),entitlements:r,isDisabled:!0})))),n().createElement(Z.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==l&&n().createElement(C.Title,{headingLevel:"h3",size:"xl"},a.formatMessage(c?O.Z.yourRoles:O.Z.yourPermissions,{name:U.find((({entitlement:e})=>e===l))?.title})),n().createElement(F,null))))};G.propTypes={entitlements:y().object,isOrgAdmin:y().bool,isUserAccessAdmin:y().bool};const $=G,z=()=>{const e=(0,v.YB)(),t=(0,f.Z)(),[s,l]=(0,a.useState)({}),[{bundle:c},o]=(0,i.useSearchParams)(),[m,d]=(0,a.useState)(c),{userAccessAdministrator:p}=(0,a.useContext)(T.Z);(0,a.useEffect)((()=>{t.auth.getUser().then((({identity:e,entitlements:t})=>l({entitlements:t,isOrgAdmin:e?.user?.is_org_admin}))),!c&&o({bundle:B.Jr})}),[]);const u={...s.entitlements,application_services:{is_entitled:!0,is_trial:!1}},_=Object.entries(u).filter((([,{is_entitled:e}])=>e)),[y,k]=(0,a.useState)(!1);return n().createElement(n().Fragment,null,Object.prototype.hasOwnProperty.call(s,"entitlements")&&(Object.prototype.hasOwnProperty.call(s,"isOrgAdmin")||p)?n().createElement(n().Fragment,null,n().createElement(h.Z,{className:"rbac-p-myUserAccess--title sticky",title:n().createElement(n().Fragment,null,n().createElement("span",null," ",e.formatMessage(O.Z.myUserAccess)," "),n().createElement(S,{isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:p}))}),n().createElement(E.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},e.formatMessage(O.Z.selectAppsToViewPermissions)),_&&n().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},n().createElement(r.L,{ouiaId:"mua-bundle-dropdown",toggle:n().createElement(b,{onToggle:()=>k(!y),id:"mua-bundle-dropdown"},m||e.formatMessage(O.Z.chooseSubscriptionEllipsis)),dropdownItems:U.map((e=>n().createElement(i.NavLink,{key:e.entitlement,to:{pathname:"",search:`bundle=${e.entitlement}`}},n().createElement(g.h,{onClick:()=>{d(e.title),k(!1)},component:"button"},e.title)))),isOpen:y})),n().createElement("section",null,n().createElement($,{entitlements:u,isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:p}))):n().createElement(A.Spinner,null))}},65655:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a=(0,s(28416).createContext)(!1)},19289:(e,t,s)=>{var a={"./MUABundles":[51796,1796],"./MUABundles.scss":[51796,1796],"./__mocks__/rhel":[9116,9116],"./__mocks__/rhel.js":[9116,9116],"./ansible":[47341,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,5600],"./ansible.js":[47341,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,5600],"./application_services":[60989,5376,989],"./application_services.js":[60989,5376,989],"./openshift":[93474,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,4225],"./openshift.js":[93474,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,4225],"./rhel":[93312,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,459],"./rhel.js":[93312,1088,4291,6043,2372,3096,5453,8718,8971,9389,4444,5376,8826,7440,4229,9366,1706,459]};function n(e){if(!s.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(a),n.id=19289,e.exports=n},45467:()=>{},30187:()=>{},49854:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6316.eae9dbe54afd22ccdd2e5d65896b8abb.js.map