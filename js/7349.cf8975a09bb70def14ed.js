/*! For license information please see 7349.cf8975a09bb70def14ed.js.LICENSE.txt */
(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[7349],{92758:(e,t,r)=>{"use strict";r.d(t,{MS:()=>l,aX:()=>s,qF:()=>c});var n=r(93433),o=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new URLSearchParams(e.location.search),s=t.reduce((function(e,t){var r=i.getAll(t);return a(a({},e),{},(0,o.Z)({},t,r.length>1?r:r[0]))}),{});return Object.keys(r).forEach((function(e){var t=r[e];s=a(a({},s),{},(0,o.Z)({},e,Array.isArray(s[e])?(0,n.Z)(new Set([].concat((0,n.Z)(s[e]),(0,n.Z)(Array.isArray(t)?t:[t])))):(null==t?void 0:t.length)>0&&t||s[e])),Array.isArray(t)?t.forEach((function(t){return i.getAll(e).includes(t)||i.append(e,t)})):i.get(e)||t&&i.set(e,t)})),e.replace({pathname:e.location.pathname,search:i.toString()}),s},c=function(e,t){var r=new URLSearchParams(e.location.search);return t.some((function(e){return r.get(e)}))},l=function(e,t){var r=new URLSearchParams(e.location.search);Object.keys(t).forEach((function(e){return r.delete(e)})),Object.keys(t).forEach((function(e){var n=t[e];Array.isArray(n)?n.forEach((function(t){return t&&r.append(e,t)})):n&&r.set(e,n)})),e.replace({pathname:e.location.pathname,search:r.toString()})}},1227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(29439),o=r(92950),i=r.n(o),a=r(86896),s=r(45697),c=r.n(s),l=r(30893),u=r(69957),p=r(76857),f=function(e){var t=e.title,r=e.text,s=e.onClose,c=e.onSubmit,f=e.isOpen,d=e.confirmButtonLabel,m=e.withCheckbox,h=(0,a.Z)(),v=(0,o.useState)(!1),y=(0,n.Z)(v,2),g=y[0],b=y[1];return i().createElement(p.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(u.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:f,variant:p.ModalVariant.small,onClose:s,actions:[i().createElement(p.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:m&&!g,variant:"danger",onClick:c},d),i().createElement(p.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:s},h.formatMessage(l.Z.cancel))]},i().createElement(p.Split,{hasGutter:!0},i().createElement(p.SplitItem,{isFilled:!0},i().createElement(p.Stack,{hasGutter:!0},i().createElement(p.TextContent,null,r)))),m?i().createElement(p.Checkbox,{isChecked:g,onChange:function(){return b(!g)},label:h.formatMessage(l.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};f.propTypes={text:c().any,title:c().string,confirmButtonLabel:c().string,onSubmit:c().func,onClose:c().func,isOpen:c().bool,withCheckbox:c().bool},f.defaultProps={withCheckbox:!1};const d=f},76137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(334),c=r(76857),l=r(19571),u=function(e){return e?o().createElement(c.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?o().createElement(c.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&o().createElement(s.NavLink,{exact:!0,to:e.to},e.title)||e.title):o().createElement(l.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:a().object};const p=u},38376:(e,t,r)=>{"use strict";r.d(t,{Q:()=>f,y:()=>d});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(19571),l=r(76137),u=r(89376),p=r(39173),f=function(e){var t=e.children,r=e.breadcrumbs;return o().createElement(n.Fragment,null,r&&o().createElement("section",{className:"pf-c-page__main-breadcrumb"},o().createElement(l.Z,r)),o().createElement(u.Z,{className:"rbac-page-header"},t))};f.propTypes={children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,breadcrumbs:a().array,paddingBottom:a().bool},f.defaultProps={paddingBottom:!1};var d=function(e){var t=e.title,r=e.renderTitleTag,i=e.description,a=e.children;return o().createElement(n.Fragment,null,o().createElement(s.Flex,null,o().createElement(s.FlexItem,{className:"pf-u-mb-sm"},o().createElement(p.Z,{title:t||o().createElement(c.h2,null),className:"rbac-page-header__title"})),o().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},r&&r())),i&&o().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof i?o().createElement(s.Text,{component:s.TextVariants.p},i):i),a)};d.propTypes={title:a().node,renderTitleTag:a().func,description:a().node,children:a().oneOfType([a().node,a().arrayOf(a().node)])}},29215:(e,t,r)=>{"use strict";r.d(t,{R:()=>d,A:()=>f});var n=r(36580),o=r(71002),i=r(15861);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=Z(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function m(){}function h(){}var v={};l(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==t&&r.call(g,i)&&(v=g);var b=h.prototype=d.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,s,c){var l=p(e[i],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==(0,o.Z)(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(b,"constructor",h),l(h,"constructor",m),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(w.prototype),l(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var s=(0,r(96692).i$)();function c(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){return{type:n.s6,payload:c(e)}},d=function(e){return{type:n.ZX,payload:u(e)}}},40483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(4942),o=r(45987),i=r(87462),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76429),p=r(67850),f=r(48880),d=r(74219),m=r(57820),h=r(16396),v=r(4853),y=["ModalProps","saveLabel","cancelLabel","alert"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b="modal-form",E=function(e){return s().createElement(v.l,(0,i.Z)({},e,{id:b}))},w=function(e){var t=e.saveLabel,r=e.cancelLabel,n=(0,f.default)().onCancel;return s().createElement(u.Z,null,(function(e){var o=e.pristine,i=e.invalid,a=e.validating,c=e.submitting;return s().createElement("div",{className:"pf-c-form"},s().createElement(m.W,{className:"pf-u-mt-0"},s().createElement(h.Button,{ouiaId:"primary-save-button",variant:"primary",form:b,type:"submit",isDisabled:o||a||c||i},t),s().createElement(h.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:n,id:"cancel-modal"},r)))}))};w.propTypes={saveLabel:l().node,cancelLabel:l().node},w.defaultProps={saveLabel:"Save",cancelLabel:"Cancel"};var Z=function(e){var t=e.ModalProps,r=e.saveLabel,n=e.cancelLabel,a=e.alert,c=(0,o.Z)(e,y);return s().createElement(d.Modal,(0,i.Z)({},t,{footer:s().createElement(w,{saveLabel:r,cancelLabel:n})}),null==a?void 0:a(),s().createElement(p.ZP,(0,i.Z)({},c,{showFormControls:!1,FormWrapper:E})))};Z.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ModalProps:l().object},w.propTypes);const O=Z},36457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(87462),o=r(4942),i=r(45987),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(93433),p=r(86896),f=r(30893),d=r(76857),m=["input","options","isReadOnly","isDisabled","isRequired"],h=["label","isRequired","helperText","meta","description","hideLabel"],v=function(e){var t=e.input,r=e.options,o=e.isReadOnly,a=e.isDisabled,c=e.isRequired,l=(0,i.Z)(e,m);return s().createElement(d.FormSelect,(0,n.Z)({},t,l,{isDisabled:a||o}),function(e,t,r){var n=(0,p.Z)();if(t&&r)return e;var o=(0,u.Z)(e);return o.find((function(e){return void 0===e.value}))?(0,u.Z)(o):[{label:n.formatMessage(f.Z[r?"pleaseChoose":"none"])}].concat((0,u.Z)(o))}(r,t.value,c).map((function(e){return s().createElement(d.FormSelectOption,(0,n.Z)({key:e.value||e.label},e,{label:e.label.toString()}))})))};v.propTypes={input:l().object.isRequired,options:l().arrayOf(l().shape({value:l().any,label:l().string.isRequired})).isRequired,isReadOnly:l().bool,isDisabled:l().bool,isRequired:l().bool,FieldProvider:l().any};var y=function(e){var t=e.label,r=e.isRequired,o=e.helperText,a=e.meta,c=e.description,l=e.hideLabel,u=(0,i.Z)(e,h),p=a.error,f=a.touched&&p;return s().createElement(d.FormGroup,{isRequired:r,label:!l&&t,fieldId:u.id,isValid:!f,helperText:o,helperTextInvalid:a.error},c&&s().createElement(d.TextContent,null,s().createElement(d.Text,{component:d.TextVariants.small},c)),s().createElement(v,(0,n.Z)({label:t,isValid:!f,isRequired:r},u)))};y.propTypes={componentType:l().string,label:l().string,isRequired:l().bool,helperText:l().string,meta:l().object,description:l().string,hideLabel:l().bool};const g=y;var b=r(41609),E=r.n(b),w=r(48880),Z=r(76429),O=function(e){var t=e.dirtyFieldsSinceLastSubmit,r=e.submitSucceeded,n=e.pristine,o=(0,w.default)().onCancel,i=E()(t)||!r&&n,a=(0,p.Z)();return s().createElement(d.ActionGroup,{className:"pf-u-mt-0"},s().createElement(d.Button,{ouiaId:"primary-submit-button",type:"submit",isDisabled:i,variant:"primary"},a.formatMessage(f.Z.save)),s().createElement(d.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:function(){return o()}},a.formatMessage(f.Z.cancel)))};O.propTypes={dirtyFieldsSinceLastSubmit:l().shape((0,o.Z)({},l().string,l().oneOfType([l().string,l().number,l().bool]))),submitSucceeded:l().bool,pristine:l().bool,onCancel:l().func};const x=function(e){return s().createElement(Z.Z,{subscription:{pristine:!0,submitSucceeded:!0,dirtyFieldsSinceLastSubmit:!0}},(function(t){return s().createElement(O,(0,n.Z)({},t,e))}))};var j=r(67850),P=r(65412),S=r(75747),L=r(93025),T=r(96354),k=["formTemplateProps"],M=function(e){var t,r=e.formTemplateProps,a=(0,i.Z)(e,k);return s().createElement(L.Z,(0,n.Z)({componentMapper:(t={},(0,o.Z)(t,T.Z.TEXT_FIELD,P.Z),(0,o.Z)(t,T.Z.TEXTAREA,S.Z),(0,o.Z)(t,T.Z.SELECT,g),t),FormTemplate:function(e){return s().createElement(j.ZP,(0,n.Z)({},r,e,{FormButtons:x}))}},a))};M.propTypes={formTemplateProps:l().object};const R=M},93327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(45987),o=r(92950),i=r.n(o),a=r(45697),s=r.n(a),c=r(334),l=["pageAction"],u=function(e){var t=e.pageAction,r=(0,n.Z)(e,l);return(0,o.useEffect)((function(){return insights.chrome.appAction(t),function(){return insights.chrome.appAction(void 0)}}),[t]),i().createElement(c.Route,r)};u.propTypes={pageAction:s().string.isRequired};const p=u},73943:(e,t,r)=>{"use strict";r.d(t,{R:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(69957),l=r(86896),u=r(30893),p=function(e){var t=e.type,r=e.isOpen,n=e.onModalCancel,i=e.onConfirmCancel,a=e.customTitle,p=e.customDescription,f=e.customPrimaryButtonTitle,d=e.customSecondaryButtonTitle,m=(0,l.Z)();return o().createElement(s.Modal,{title:o().createElement("span",{className:"rbac-c-wizard__cancel-warning-header"},o().createElement(c.ZP,{size:"md",className:"rbac-c-wizard__cancel-warning-header--icon"}),a||m.formatMessage(u.Z.exitItemCreation,{item:t})),variant:s.ModalVariant.small,className:"rbac rbac-c-wizard__cancel-warning",isOpen:r,onClose:n,actions:[o().createElement(s.Button,{ouiaId:"primary-exit-button",key:"confirm",variant:"primary",onClick:i},null!=f?f:m.formatMessage(u.Z.exit)),o().createElement(s.Button,{ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:n},null!=d?d:m.formatMessage(u.Z.stay))]},o().createElement("span",null,p||m.formatMessage(u.Z.discardedInputsWarning)," "))};p.propTypes={type:a().string,customTitle:a().node,customDescription:a().node,customPrimaryButtonTitle:a().string,customSecondaryButtonTitle:a().string,isOpen:a().bool,onModalCancel:a().func,onConfirmCancel:a().func}},27979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(4942),o=r(93433),i=r(29439),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76857),p=r(48880),f=r(55795),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t,r,n,c=e.formFields,l=(0,p.default)(),h=(0,a.useState)(l.getState().values["add-permissions-table"]||[]),y=(0,i.Z)(h,2),g=y[0],b=y[1],E=(0,a.useState)(!1),w=(0,i.Z)(E,2),Z=w[0],O=w[1],x=l.getState().values["not-allowed-permissions"],j=(0,d.Z)(),P=(null===(t=l.getState().values)||void 0===t||null===(r=t["copy-base-role"])||void 0===r||null===(n=r.applications)||void 0===n?void 0:n.filter((function(e){return!(null!=g&&g.find((function(t){return t.uuid.includes(e)})))})))||[],S=c[0][0];return s().createElement("div",{className:"rbac"},g.length>0?s().createElement("div",{className:"rbac-c-selected-chips"},s().createElement(u.ChipGroup,{categoryName:j.formatMessage(m.Z.selectedPermissions)},g.reduce((function(e,t){return[t].concat((0,o.Z)(e))}),[]).map((function(e){var t=e.uuid;return s().createElement(u.Chip,{key:t,color:"blue",isTruncated:!0,onClick:function(){return b(g.filter((function(e){return e.uuid!==t})))}},t)})))):null,s().createElement(u.Title,{headingLevel:"h1",size:"xl",className:"rbac-c-add-permission-title"},j.formatMessage(m.Z.addPermissions)),s().createElement(u.TextContent,null,s().createElement(u.Text,null,j.formatMessage(m.Z.selectPermissionsForRole),0!==P.length&&s().createElement(u.Popover,{headerContent:j.formatMessage(m.Z.onlyGranularPermissions),bodyContent:j.formatMessage(m.Z.noWildcardPermissions)},s().createElement(u.Button,{variant:"link"},j.formatMessage(m.Z.whyNotSeeingAllPermissions)," ",s().createElement(f.ZP,null))))),(null==x?void 0:x.length)>0&&!Z?s().createElement(u.Alert,{variant:"default",isInline:!0,title:"".concat(j.formatMessage(m.Z.followingPermissionsCannotBeAdded)," ").concat(x.join(", ")),actionClose:s().createElement(u.AlertActionCloseButton,{onClose:function(){return O(!0)}})}):null,[[v(v({},S),{},{props:v(v({},S.props),{},{selectedPermissions:g,setSelectedPermissions:b})})]])};y.propTypes={formFields:l().array};const g=y},11514:(e,t,r)=>{"use strict";r.d(t,{Z:()=>V});var n=r(87462),o=r(93433),i=r(29439),a=r(4942),s=r(45987),c=r(18446),l=r.n(c),u=r(92950),p=r.n(u),f=r(45697),d=r.n(f),m=r(28216),h=r(41693),v=r(48880),y=r(48623),g=r(41800),b=r(36580),E=r(71002),w=r(15861);function Z(){Z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(P([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=d.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,E.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var O=(0,r(96692).Y3)();function x(e,t,r,n,o,i,a,s,c,l,u){return j.apply(this,arguments)}function j(){return(j=(0,w.Z)(Z().mark((function e(t,r,n,o,i,a,s,c,l,u,p){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissions(t,r,n,o,i,a,s,c,l,u,p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,r,n,o,i,a,s){return S.apply(this,arguments)}function S(){return(S=(0,w.Z)(Z().mark((function e(t,r,n,o,i,a,s,c){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissionOptions(t,r,n,o,i,a,void 0,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L={application:b.KD,resource_type:b.vf,verb:b.E2},T=r(29215),k=r(28090),M=r(76857),R=r(1936),_=["row"],D=function(e){var t=e.row,r=(0,s.Z)(e,_);return t.disableSelection?p().createElement(M.Tooltip,{content:t.disabledContent,exitDelay:1500,entryDelay:1500},p().createElement(R.RowWrapper,(0,n.Z)({className:"rbac-c-disabled-row",row:t},r))):p().createElement(R.RowWrapper,(0,n.Z)({row:t},r))};D.propTypes={props:d().object,row:d().object};var C=r(86896),I=r(30893),N=r(43707),F=["selectedPermissions","setSelectedPermissions"];function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){var t=e.permissionReducer,r=t.permission,n=t.isLoading,o=t.options,i=o.application,a=o.operation,s=o.resource,c=t.expandSplats,l=t.isLoadingExpandSplats,u=e.roleReducer,p=u.isRecordLoading,f=u.selectedRole,d=e.costReducer.resourceTypes;return{permissions:r.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,r=e.resource_type,n=e.verb,o=e.permission,i=e.requires;return{application:t,resource:r,operation:n,uuid:o,requires:i}})),pagination:r.meta,isLoading:n||p,baseRole:f,applicationOptions:i.data.filter((function(e){return"*"!==e})),resourceOptions:s.data.filter((function(e){return"*"!==e})),operationOptions:a.data.filter((function(e){return"*"!==e})),expandedPermissions:c.data.map((function(e){return e.permission})),isLoadingExpandSplats:l,resourceTypes:d.data}},q=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,c=(0,s.Z)(e,F),f=(0,m.useDispatch)(),d=(0,C.Z)(),E=(0,N.ZP)("cost-management",["cost-management:*:*"]).hasAccess,w=[d.formatMessage(I.Z.application),d.formatMessage(I.Z.resourceType),d.formatMessage(I.Z.operation)],Z=function(e){return f((r=(t=A(A(A({},e),ee?{exclude_roles:ee}:{}),{},{allowed_only:!0})).limit,n=t.offset,o=t.orderBy,i=t.application,a=t.resourceType,s=t.verb,c=t.permission,u=void 0===(l=t.exclude_globals)||l,p=t.exclude_roles,d=t.allowed_only,m=t.options,{type:b.wI,payload:x(r,n,o,i,a,s,c,u,p,d,m)}));var t,r,n,o,i,a,s,c,l,u,p,d,m},O=function(e){return f((r=(t=A(A({},e),{},{allowedOnly:!0})).field,n=t.limit,o=t.offset,i=t.application,a=t.resourceType,s=t.verb,c=t.allowedOnly,l=t.options,{type:L[r],payload:P(r,n,o,i,a,s,c,l)}));var t,r,n,o,i,a,s,c,l},j=(0,m.useSelector)(B,m.shallowEqual),S=j.permissions,M=j.isLoading,R=j.pagination,_=j.baseRole,G=j.applicationOptions,q=j.resourceOptions,V=j.operationOptions,z=j.expandedPermissions,W=j.isLoadingExpandSplats,K=j.resourceTypes,Y=(0,h.Z)(c).input,H=(0,v.default)(),U=(0,u.useState)({applications:[],resources:[],operations:[]}),X=(0,i.Z)(U,2),Q=X[0],$=X[1],J=H.getState().values["role-type"],ee=H.getState().values["role-uuid"],te=(0,u.useState)(!1),re=(0,i.Z)(te,2),ne=re[0],oe=re[1],ie=(0,u.useState)(""),ae=(0,i.Z)(ie,2),se=ae[0],ce=ae[1],le=(0,u.useState)(),ue=(0,i.Z)(le,2),pe=ue[0],fe=ue[1],de=function(e){return K.find((function(t){var r;return t.value===(null===(r=e.split(":"))||void 0===r?void 0:r[1])}))},me=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"application",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),he=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"resource_type",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),ve=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"verb",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]);(0,u.useEffect)((function(){var e,t=null===(e=H.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===J&&t&&f((0,k.fp)(t)),H.change("has-cost-resources",!1),Z(R),O({field:"application",limit:50}),O({field:"resource_type",limit:50}),O({field:"verb",limit:50}),function(){return f({type:b.e0,payload:{data:[]}})}}),[]),(0,u.useEffect)((function(){E&&f((0,T.A)())}),[E]),(0,u.useEffect)((function(){he(Q),ve(Q)}),[Q.applications]),(0,u.useEffect)((function(){me(Q),ve(Q)}),[Q.resources]),(0,u.useEffect)((function(){me(Q),he(Q)}),[Q.operations]),(0,u.useEffect)((function(){Y.onChange(t)}),[t]),(0,u.useEffect)((function(){var e;if(!(!_||"copy"!==J||H.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=H.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==_?void 0:_.uuid)||W||M)){var n,i,a,s,c,l,u,p,d,m,h,v,y,g=[],E=(null==_?void 0:_.access.filter((function(e){var t;return!!G.includes(null==e||null===(t=e.permission)||void 0===t?void 0:t.split(":")[0])||(g.push(e),!1)})))||[];if(H.change("not-allowed-permissions",g.map((function(e){return e.permission}))),0===z.length&&void 0===W){var w=(0,o.Z)(new Set(E.map((function(e){return e.permission.split(":")[0]}))));f((a=void 0===(i=(n={application:w.join()}).limit)?1e3:i,c=void 0===(s=n.offset)?0:s,l=n.orderBy,u=n.application,p=n.resourceType,d=n.verb,m=n.permission,v=void 0===(h=n.exclude_globals)||h,y=n.options,{type:b.e,payload:x(a,c,l,u,p,d,m,v,y)}))}else{var Z=E.map((function(e){return e.permission.replace("*",".*")}));r((function(){return z.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(de(e)||{count:0}).count})).filter((function(e){return Z.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),H.change("base-permissions-loaded",!0)}}}),[S,_]);var ye=function(e){return e.reduce((function(e,t){return{"":A(A({},null==e?void 0:e[""]),{},(0,a.Z)({},t,!0))}}),{"":{}})},ge={applications:(0,o.Z)(G).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),resources:(0,o.Z)(q).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),operations:(0,o.Z)(V).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}}))},be={label:p().createElement("div",null,d.formatMessage(I.Z.noResultsFound)),isDisabled:!0},Ee=ge[Object.keys(ge)[pe||0]].length>10;return p().createElement("div",{className:"rbac-c-permissions-table"},p().createElement(g.M,(0,n.Z)({columns:w,isSelectable:!0,isCompact:!0,borders:!1,rows:function(e){return e.map((function(e){var r=e.application,n=e.resource,o=e.operation,i=e.uuid,a=e.requires;return{uuid:"".concat(r,":").concat(n,":").concat(o),requires:a,cells:[{title:r},n,o],selected:Boolean(t&&t.find((function(e){return e.uuid===i}))),disableSelection:"cost-management"===r&&(0===(de(i)||{count:0}).count||!E),disabledContent:p().createElement("div",null,d.formatMessage(E?I.Z.configureResourcesForPermission:I.Z.noCostManagementPermissions)," ",E?p().createElement("a",{href:"./settings/sources"},d.formatMessage(I.Z.configureCostSources)):null)}}))}(S),data:S,filterValue:"",noData:0===(null==S?void 0:S.length),noDataDescription:[d.formatMessage(I.Z.permissionNotDisplayedDescription)],fetchData:function(e){var t=e.limit,r=e.offset,n=e.applications,o=e.resources,i=e.operations;Z({limit:t,offset:r,application:(n||Q.applications).join(),resourceType:(o||Q.resources).join(),verb:(i||Q.operations).join()})},setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;$(A(A(A(A({},Q),t?{applications:t}:Q.applications),r?{resources:r}:Q.resources),n?{operations:n}:Q.operations))},isLoading:M||W,pagination:A(A({},R),{},{count:R.count}),checkedRows:t,setCheckedItems:function(e){var n=e(t).filter((function(e){var t,r=e.uuid;return"cost-management"!==e.application||(null===(t=de(r))||void 0===t?void 0:t.count)>0})).map((function(e){return{uuid:e.uuid,requires:e.requires}}));r(l()(n,t)?[]:n)},titlePlural:d.formatMessage(I.Z.permissions).toLowerCase(),titleSingular:d.formatMessage(I.Z.permission).toLowerCase(),showMoreTitle:d.formatMessage(ne?I.Z.seeLess:I.Z.seeMore),onFilter:function(e){return ce(e)},onShowMore:Ee?function(){oe((function(){return!ne}))}:void 0,onChange:function(e,t){ce(""),fe(t)},value:pe,filters:[{key:"applications",value:Q.applications,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.application).toLowerCase()}),type:"group",selected:ye(Q.applications),groups:[{type:ge.applications.length>0?"checkbox":"plain",items:ge.applications.length>0?(0,o.Z)(ge.applications).slice(0,ne?void 0:10):[be]}]},{key:"resources",value:Q.resources,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.resourceType).toLowerCase()}),type:"group",selected:ye(Q.resources),groups:[{type:ge.resources.length>0?"checkbox":"plain",items:ge.resources.length>0?(0,o.Z)(ge.resources).slice(0,ne?void 0:10):[be]}]},{key:"operations",value:Q.operations,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.operation).toLowerCase()}),type:"group",selected:ye(Q.operations),groups:[{type:ge.operations.length>0?"checkbox":"plain",items:ge.operations.length>0?(0,o.Z)(ge.operations).slice(0,ne?void 0:10):[be]}]}],isFilterable:!0,rowWrapper:D,tableId:"add-role-permissions"},c)))};q.propTypes={selectedPermissions:d().array,setSelectedPermissions:d().func};const V=q},91710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),s=r.n(a),c=r(28216),l=r(76857),u=r(41693),p=r(48880),f=r(29215),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t=e.costReducer,r=t.resourceTypes,n=t.isLoading,o=t.loadingResources,i=t.resources;return{resourceTypes:r.data,resources:i,isLoading:n,isLoadingResources:o>0}},g=function(e,t){var r=e[t.key];switch(t.type){case"toggle":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{isOpen:!r.isOpen})));case"select":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.selected.includes(t.selection)?r.selected.filter((function(e){return e!==t.selection})):[].concat((0,o.Z)(r.selected),[t.selection])})));case"selectAll":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.options.map((function(e){return e.value}))})));case"clear":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:[]})));case"setOptions":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{filteredOptions:r.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const b=function(e){var t=(0,d.Z)(),r=(0,c.useDispatch)(),h=(0,c.useSelector)(y,c.shallowEqual),b=h.resourceTypes,E=h.isLoading,w=h.isLoadingResources,Z=h.resources,O=(0,u.Z)(e).input,x=(0,p.default)(),j=x.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),P=(0,a.useReducer)(g,j.reduce((function(e,t){return v(v({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),S=(0,n.Z)(P,2),L=S[0],T=S[1];return(0,a.useEffect)((function(){(x.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return j.find((function(e){return(null==e?void 0:e.uuid)===t}))&&T({type:"select",selection:e,key:t})}))})),r((0,f.A)(undefined)),x.change("has-cost-resources",!0)}),[]),(0,a.useEffect)((function(){E||(0,o.Z)(new Set(j.map((function(e){var t;return null===(t=b.find((function(t){var r;return t.value===(null===(r=e.uuid.split(":"))||void 0===r?void 0:r[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return t=e,r((0,f.R)(t));var t}))}),[b]),(0,a.useEffect)((function(){w||j.map((function(e){return T({type:"setOptions",key:e.uuid,options:Z[(t=e.uuid,null===(r=b.find((function(e){var r;return e.value===(null===(r=t.split(":"))||void 0===r?void 0:r[1])})))||void 0===r||null===(n=r.path.split("/"))||void 0===n?void 0:n[5])]||[]});var t,r,n}))}),[w]),(0,a.useEffect)((function(){var e=Object.entries(L).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],resources:t[1].selected}}));O.onChange(e),x.change("resource-definitions",e)}),[L]),s().createElement(l.Grid,{hasGutter:!0},s().createElement(l.GridItem,{md:4,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.permissions))),s().createElement(l.GridItem,{md:8,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.resourceDefinitions))),j.map((function(e){var r=e.uuid,n=L[r].filteredOptions;return s().createElement(s().Fragment,null,s().createElement(l.GridItem,{md:4,sm:12},s().createElement(l.Tooltip,{content:s().createElement("div",null,r)},s().createElement(l.FormGroup,{label:r.replace(/^cost-management:/,""),isRequired:!0}))),s().createElement(l.GridItem,{md:8,sm:12},s().createElement(l.Select,{className:"rbac-m-cost-resource-select",variant:l.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(m.Z.selectState),onToggle:function(e){T({type:"setFilter",key:r,filtervalue:""}),function(e,t){T({type:"toggle",key:e,isOpen:t})}(r,e)},onSelect:function(e,o){!function(e,t,r,n){T(r?{type:"selectAll",selection:t,key:n}:{type:"select",selection:t,key:n})}(0,o,o===t.formatMessage(m.Z.selectAll,{length:n.length}),r)},onClear:function(){return T({type:"clear",key:r})},selections:L[r].selected,isOpen:L[r].isOpen,onFilter:function(e){return e&&T({type:"setFilter",key:r,filtervalue:e.target.value})},"aria-labelledby":r,placeholderText:t.formatMessage(m.Z.selectResources),hasInlineFilter:!0},[s().createElement(l.SelectOption,{key:0,value:t.formatMessage(m.Z.selectAll,{length:n.length})})].concat((0,o.Z)(n.map((function(e,t){return s().createElement(l.SelectOption,{key:t+1,value:e.value})})))))))})))}},58854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(86896),l=r(30893),u=function(e){var t=e.formFields,r=(0,c.Z)();return o().createElement("div",{className:"rbac"},o().createElement(s.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},r.formatMessage(l.Z.reviewDetails)),t)};u.propTypes={formFields:a().array};const p=u},80709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),s=r.n(a),c=r(76857),l=r(28216),u=r(41693),p=r(48880),f=r(86896),d=r(36580),m=r(71002),h=r(15861);function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=Z(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==t&&r.call(g,o)&&(h=g);var b=d.prototype=p.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,m.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(b,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(w.prototype),s(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var y=(0,r(96692).bD)(),g=function(){var e=(0,h.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getInventoryGroups(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(30893);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){return{resourceTypes:e.inventoryReducer.resourceTypes.data}},x=function(e,t){var r,n,a=e[t.key];switch(t.type){case"toggle":return Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{isOpen:!a.isOpen})));case"select":return a.selected.some((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))?Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{selected:a.selected.filter((function(e){var r;return e.id!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))}))):void 0!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)&&void 0!==(null===(n=t.processedSelection)||void 0===n?void 0:n.name)?Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{selected:[].concat((0,o.Z)(a.selected),[t.processedSelection])}))):e;case"selectAll":return Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{selected:(0,o.Z)(a.options)})));case"setFilter":return Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{filteredOptions:a.options.filter((function(e){return e.value.includes(t.filterValue)}))})));case"clear":return Z(Z({},e),{},(0,i.Z)({},t.key,Z(Z({},a),{},{selected:[]})));default:return e}};const j=function(e){var t=(0,f.Z)(),r=(0,l.useDispatch)(),m=(0,u.Z)(e).input,h=(0,p.default)(),v=(0,a.useState)({}),y=(0,n.Z)(v,2),w=y[0],j=y[1],P=(0,l.useSelector)(O,l.shallowEqual).resourceTypes,S=h.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("inventory")})),L=(0,a.useReducer)(x,S.reduce((function(e,t){return Z(Z({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),T=(0,n.Z)(L,2),k=T[0],M=T[1];return(0,a.useEffect)((function(){r({type:d.rF,payload:g()}),h.change("inventory-group-permissions",[])}),[]),(0,a.useEffect)((function(){var e=(P&&P.length?P:[]).reduce((function(e,t){return e[t.name]=t.id,e}),{});j(e)}),[P]),(0,a.useEffect)((function(){var e=Object.entries(k).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],groups:t[1].selected}}));m.onChange(e),h.change("inventory-group-permissions",e)}),[k]),s().createElement(c.Grid,{hasGutter:!0},s().createElement(c.GridItem,{md:4,className:"rbac-m-hide-on-sm"},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.permissions))),s().createElement(c.GridItem,{md:8,className:"rbac-m-hide-on-sm"},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.groupDefinition))),S.map((function(e){var r=e.uuid,n=P&&P.length?P:[];return s().createElement(s().Fragment,{key:"".concat(r)},s().createElement(c.GridItem,{md:4,sm:12},s().createElement(c.FormGroup,{label:r,isRequired:!0})),s().createElement(c.GridItem,{md:8,sm:12},s().createElement(c.Tooltip,{content:s().createElement("div",null,t.formatMessage(b.Z.inventoryGroupsTooltip))},s().createElement(c.Select,{className:"rbac-m-cost-resource-select",variant:c.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(b.Z.inventoryGroupsTypeAheadLabel),"aria-labelledby":r,selections:k[r].selected.map((function(e){return e.name})),placeholderText:"Select groups",onSelect:function(e,o){var i;!function(e,t,r,n){var o={name:t,id:w[t]};if(r){var i,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(P);try{for(a.s();!(i=a.n()).done;){var s=i.value,c={name:s.name,id:s.id};M({type:"select",processedSelection:c,key:n})}}catch(e){a.e(e)}finally{a.f()}}else M({type:"select",processedSelection:o,key:n})}(0,o,o===t.formatMessage(b.Z.selectAll,{length:null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0}),r)},onToggle:function(e){M({type:"setFilter",key:r,filterValue:""}),function(e,t){M({type:"toggle",key:e,isOpen:t})}(r,e)},onClear:function(){return M({type:"clear",key:r})},onFilter:function(e){return e&&M({type:"setFilter",key:r,filtervalue:e.target.value})},isOpen:k[r].isOpen,hasInlineFilter:!0},[s().createElement(c.SelectOption,{key:"".concat(r,"-all"),value:t.formatMessage(b.Z.selectAll,{length:null==n?void 0:n.length})})].concat((0,o.Z)((n||[]).map((function(e,t){return s().createElement(c.SelectOption,{key:"".concat(r,"-").concat(t+1),value:null==e?void 0:e.name})}))))))))})))}},93436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(96354),u=r(64124),p=r(71355),f=r(40483),d=r(36457);var m=r(334),h=r(28216),v=r(76254),y=r(43115),g=r(40639),b=r(28090),E=r(86896),w=r(30893),Z=function(e){var t=e.routeMatch,r=e.cancelRoute,s=e.submitRoute,c=void 0===s?r:s,Z=e.afterSubmit,O=(0,E.Z)(),x=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),j=(0,m.useHistory)(),P=j.replace,S=j.push,L=(0,h.useDispatch)(),T=(0,m.useRouteMatch)(t).params.id,k=(0,h.useSelector)((function(e){return(0,v.z)(e,T)})),M=(0,i.useState)(k),R=(0,o.Z)(M,2),_=R[0],D=R[1];(0,i.useEffect)((function(){!_&&(0,y.fp)(T).then((function(e){x.current&&D(e)}))}),[T]);var C=function(e,t,r){return e.length<150?(0,y.vd)({name:e}).then((function(n){var o=n.data;if(0!==o.length&&o.some((function(n){return n[t]!==r&&n.display_name===e})))throw O.formatMessage(w.Z.roleWithNameExists)})):Promise.reject(O.formatMessage(w.Z.maxCharactersWarning,{number:150}))},I=(0,g.Z)((function(e,t,r,n){return e&&0!==e.length?n(e,t,r):Promise.reject(O.formatMessage(w.Z.required))})),N={"validate-role-name":function(e){var t=e.idKey,r=e.id,n=e.validationPromise;return function(e){return I(e,t,r,n)}}},F=function(){L((0,p.addNotification)({variant:"warning",dismissDelay:8e3,title:O.formatMessage(w.Z.editingRoleTitle),description:O.formatMessage(w.Z.editingRoleCanceledDescription)})),P(r)};return _?a().createElement(d.Z,{schema:function(e){return{fields:[{name:"name",component:l.Z.TEXT_FIELD,label:O.formatMessage(w.Z.name),isRequired:!0,validate:[{type:"validate-role-name",id:e,idKey:"uuid",validationPromise:C}]},{name:"description",component:l.Z.TEXTAREA,label:O.formatMessage(w.Z.description),validate:[{type:u.Z.MAX_LENGTH,threshold:150}]}]}}(T),initialValues:_,onSubmit:function(e){return L((0,b.sZ)(T,{name:e.name,display_name:e.name,description:e.description})).then((function(){Z(),S(c)}))},onCancel:F,validatorMapper:N,FormTemplate:function(e){return a().createElement(f.Z,(0,n.Z)({},e,{ModalProps:{onClose:F,isOpen:!0,variant:"small",title:"Edit role information"}}))}}):null};Z.propTypes={routeMatch:c().string.isRequired,cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const O=Z},9599:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var n=function(e,t){var r=t&&t["add-permissions-table"]||[],n=r.some((function(e){return e.uuid.split(":")[0].includes("cost-management")})),o=r.some((function(e){return e.uuid.split(":")[0].includes("inventory")}));return"inventory-groups-role"===e&&n?"cost-resources-definition":"add-permissions"===e&&o?"inventory-groups-role":"add-permissions"===e&&n?"cost-resources-definition":"review"}},13063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(28216),u=r(334),p=r(69957),f=r(76857),d=r(83215),m=r(28090),h=r(43115),v=r(76254),y=r(86896),g=r(44012),b=r(30893),E=function(e){var t=e.routeMatch,r=e.cancelRoute,s=e.submitRoute,c=void 0===s?r:s,E=e.afterSubmit,w=(0,y.Z)(),Z=(0,u.useRouteMatch)(t).params.id.split(","),O=(0,l.useSelector)((function(e){return 1===Z.length?(0,v.B)(e,Z[0]):Z.length})),x=(0,i.useState)(!0),j=(0,o.Z)(x,2),P=j[0],S=j[1],L=(0,i.useState)(O),T=(0,o.Z)(L,2),k=T[0],M=T[1],R=(0,l.useDispatch)(),_=(0,u.useHistory)(),D=_.push,C=_.replace;(0,i.useEffect)((function(){Z&&O?M(O):Z&&1===Z.length&&(0,h.fp)(Z[0]).then((function(e){return M(e.display_name)})).catch((function(e){var t,r;return R((0,d.wN)({variant:"danger",title:"Could not get role",description:null==e||null===(t=e.errors)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.detail}))}))}),[O,Z]);var I=function(){return C(r)};return k?a().createElement(f.Modal,{className:"rbac","aria-label":"remove-role",header:a().createElement(f.TextContent,null,a().createElement(f.Split,{hasGutter:!0},a().createElement(f.SplitItem,null,a().createElement(p.ZP,{size:"lg",style:{fill:"#f0ab00"}})),a().createElement(f.SplitItem,null,a().createElement(f.Text,{component:"h1"},w.formatMessage(b.Z.deleteRoleQuestion))))),isOpen:!0,variant:"small",onClose:I,actions:[a().createElement(f.Button,{isDisabled:P,key:"submit",variant:"danger",type:"button",id:"confirm-delete-portfolio",onClick:function(){Promise.all(Z.map((function(e){return R((0,m.l5)(e))}))).then((function(){return E()})),D(c)}},w.formatMessage(b.Z.confirm)),a().createElement(f.Button,{key:"cancel",variant:"link",type:"button",onClick:I},w.formatMessage(b.Z.cancel))]},a().createElement(f.TextContent,null,a().createElement(f.Text,{component:f.TextVariants.p},a().createElement(g.Z,(0,n.Z)({},b.Z.roleWilBeRemovedWithPermissions,{values:{strong:function(e){return a().createElement("strong",null,e)},name:k,count:Z.length}}))),a().createElement(f.Checkbox,{id:"remove-role-checkbox",label:w.formatMessage(b.Z.understandActionIrreversible),isChecked:!P,onChange:function(){return S((function(e){return!e}))}}))):null};E.propTypes={routeMatch:c().string.isRequired,cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const w=E},76254:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,z:()=>n});var n=function(e,t){var r=e.roleReducer,n=r.roles,o=void 0===n?{data:[]}:n,i=r.selectedRole;return(null==i?void 0:i.uuid)===t?i:o.data.find((function(e){return e.uuid===t}))},o=function(e,t){var r;return null===(r=n(e,t))||void 0===r?void 0:r.display_name}},15608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ge});var n,o=r(93433),i=r(4942),a=r(29439),s=r(92950),c=r.n(s),l=r(45697),u=r.n(l),p=r(334),f=r(28216),d=r(76857),m=r(39173),h=r(4682),v=r(28090),y=r(38376),g=r(19571),b=r(87462),E=r(41800),w=r(45987),Z=r(62410),O=r(11107),x=r(61338),j=r(85564),P=r.n(j),S=r(30893),L=["count"],T=["type"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return r.reduce((function(r,l){var u=l.resourceDefinitions,f=l.permission,d=l.modified,m=f.split(":"),h=(0,a.Z)(m,3),v=h[0],y=h[1],g=h[2];return[].concat((0,o.Z)(r),[{uuid:f,cells:[v,y,g].concat((0,o.Z)(e?[f.includes("cost-management")&&u.length>0?c().createElement(s.Fragment,{key:"resource-definitions"},c().createElement(p.Link,{to:"/roles/detail/".concat(t,"/permission/").concat(f)},P()(u.map((function(e){return e.attributeFilter.value}))).length)):c().createElement("span",{className:"rbac-c-text__disabled"},n.formatMessage(S.Z.notApplicable))]:[]),[c().createElement(s.Fragment,{key:"".concat(v,"-modified")},c().createElement(Z.Z,{date:d,type:(0,O.mh)(d)}))]),selected:Boolean(null==i?void 0:i.find((function(e){return e.uuid===f})))}])}),[])},_={pagination:x.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},D="SET_PAGINATION",C="SELECT_PERMISSIONS",I="SHOW_REMOVE_MODAL",N="SUBMIT_REMOVE_MODAL",F="INITIATE_REMOVE_PERMISSION",G="SET_FILTERS",A="SET_TOGGLED",B="INITIALIZE_ROLE",q=(n={},(0,i.Z)(n,D,(function(e,t){return M(M({},e),{},{pagination:M(M({},e.pagination),t)})})),(0,i.Z)(n,C,(function(e,t){var r=t.selection;return M(M({},e),{},{selectedPermissions:r})})),(0,i.Z)(n,I,(function(e,t){var r=t.showRemoveModal;return M(M({},e),{},{showRemoveModal:r})})),(0,i.Z)(n,N,(function(e){return M(M({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(n,F,(function(e,t){var r=t.confirmDelete,n=t.deleteInfo;return M(M({},e),{},{confirmDelete:r,showRemoveModal:!0,deleteInfo:n})})),(0,i.Z)(n,G,(function(e,t){return M(M({},e),{},{filters:M(M({},e.filters),t)})})),(0,i.Z)(n,A,(function(e){return M(M({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(n,B,(function(e,t){var r=t.count,n=(0,w.Z)(t,L);return M(M(M({},e),n),{},{pagination:M(M({},e.pagination),{},{count:r})})})),n),V=function(e,t){var r=t.type,n=(0,w.Z)(t,T);return q[r]?q[r](e,n):e},z=r(1936),W=r(71002),K=r(15861),Y=r(48880),H=r(86896);var U=r(68778),X=function(e){var t=e.currentRoleID,r=(0,H.Z)(),n=(0,f.useDispatch)();return c().createElement(c().Fragment,null,c().createElement(d.EmptyState,null,c().createElement(d.EmptyStateIcon,{color:"green",icon:U.ZP}),c().createElement(d.Title,{headingLevel:"h4",size:"lg"},r.formatMessage(S.Z.permissionsAddedSuccessfully)),c().createElement(d.EmptyStateBody,null),c().createElement(p.Link,{to:"/roles/detail/".concat(t)},c().createElement(d.Button,{onClick:function(){return n((0,v.fp)(t))}},r.formatMessage(S.Z.exit)))))};const Q=X;X.propTypes={currentRoleID:u().string.isRequired};var $=r(73943),J=r(93025),ee=r(67850),te=r(52817),re=r(11514),ne=r(91710),oe=r(80709),ie=r(27979);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=function(e){var t,r=e.formFields;return(0,s.useContext)(we).submitting?c().createElement(d.Bullseye,null,c().createElement(d.Spinner,{size:"xl"})):c().createElement("div",{className:"rbac"},[[se({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};ce.propTypes={formFields:u().array};const le=ce;var ue=r(28412),pe=r(82644),fe=r(29558),de=r(2034),me=r(9599),he=r(58854);function ve(){ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=d.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,W.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function Z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),Z(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;Z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=function(e){return c().createElement(ee.ZP,(0,b.Z)({},e,{showFormControls:!1}))},Ee={"add-permissions-table":re.Z,"inventory-groups-role":oe.Z,"cost-resources":ne.Z,review:function(){var e=(0,H.Z)(),t=(0,Y.default)().getState().values,r=t["role-name"],n=t["role-description"],o=t["add-permissions-table"],i=t["resource-definitions"],a=t["has-cost-resources"];return c().createElement(d.Stack,{hasGutter:!0},c().createElement(d.StackItem,null,c().createElement(d.TextContent,null,c().createElement(d.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-sm"},e.formatMessage(S.Z.reviewDetails)))),c().createElement(d.StackItem,{className:"rbac-l-stack__item-summary"},c().createElement(d.Grid,{hasGutter:!0},c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.roleName))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},r)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.roleDescription))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},n)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.addedPermissions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},o.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e.uuid," ")})))),a&&c().createElement(c().Fragment,null,c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.resourceDefinitions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},i.map((function(e){return e.resources.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e," ")}))}))))))))}},we=(0,s.createContext)({success:!1,submitting:!1,error:void 0}),Ze=function(e){var t=e.role,r=(0,H.Z)(),n=(0,s.useState)(!1),i=(0,a.Z)(n,2),l=i[0],u=i[1],m=(0,s.useState)(""),h=(0,a.Z)(m,2),y=h[0],g=h[1],b=(0,p.useHistory)(),E=(0,f.useDispatch)(),w=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),Z=(0,a.Z)(w,2),O=Z[0],x=Z[1],j=(0,s.useRef)(document.createElement("div")),P=(0,s.useMemo)((function(){return function(e){var t=(0,pe.Sn)(),r=(0,fe.d)({locale:ue.locale,messages:de},t);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,crossroads:["role-type"],title:r.formatMessage(S.Z.addPermissions),container:e,fields:[{name:"add-permissions",title:r.formatMessage(S.Z.addPermissions),StepTemplate:ie.Z,nextStep:function(e){var t=e.values;return(0,me.j)("add-permissions",t)},fields:[{component:"add-permissions-table",name:"add-permissions-table"}]},{name:"inventory-groups-role",title:r.formatMessage(S.Z.inventoryGroupsAccessTitle),StepTemplate:he.Z,nextStep:function(e){var t=e.values;return(0,me.j)("inventory-groups-role",t)},fields:[{component:"plain-text",name:"text-description",label:c().createElement("p",null,r.formatMessage(S.Z.inventoryGroupsAccessDescription))},{component:"inventory-groups-role",name:"inventory-groups-role"}]},{name:"cost-resources-definition",title:r.formatMessage(S.Z.defineCostResources),nextStep:"review",fields:[{component:"plain-text",name:"text-description",label:c().createElement("p",null,r.formatMessage(S.Z.applyCostPermissionText))},{component:"cost-resources",name:"cost-resources",validate:[function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){var t=e.resources;return t&&t.length>0}))?void 0:r.formatMessage(S.Z.assignAtLeastOneResource)}]}]},{name:"review",title:r.formatMessage(S.Z.reviewDetails),StepTemplate:le,fields:[{component:"review",name:"review"}]}]}]}}(j.current)}),[]);(0,s.useEffect)((function(){g(t.uuid)})),(0,s.useEffect)((function(){j.current.hidden=l}),[l]);var L=function(){b.push("/roles/detail/".concat(t.uuid))},T=function(){var e=(0,K.Z)(ve().mark((function e(r){var n,i,a,s;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r["add-permissions-table"],i=r["cost-resources"],a=[].concat((0,o.Z)(t.access.map((function(e){return e.permission}))),(0,o.Z)(n.map((function(e){return e.uuid})))),s=ge(ge({},t),{},{access:(0,o.Z)(n.reduce((function(e,t){var r=t.uuid,n=t.requires;return[].concat((0,o.Z)(e),(0,o.Z)([r].concat((0,o.Z)(n.filter((function(e){return!a.includes(e)})))).map((function(e){return{permission:e,resourceDefinitions:null!=i&&i.find((function(t){return t.permission===e}))?[{attributeFilter:{key:"cost-management.".concat(e.split(":")[1]),operation:"in",value:null==i?void 0:i.find((function(t){return t.permission===e})).resources}}]:[]}}))))}),t.access)),accessCount:t.accessCount+n.length}),x((function(e){return ge(ge({},e),{},{submitting:!0})})),E((0,v.ul)(y,s)).then((function(){return x((function(e){return ge(ge({},e),{},{submitting:!1,success:!0,hideForm:!0})}))})).catch((function(){x((function(e){return ge(ge({},e),{},{submitting:!1,success:!1,hideForm:!0})})),b.push("/roles/detail/".concat(t.uuid))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c().createElement(we.Provider,{value:ge(ge({},O),{},{setWizardError:function(e){return x((function(t){return ge(ge({},t),{},{error:e})}))},setWizardSuccess:function(e){return x((function(t){return ge(ge({},t),{},{success:e})}))},setHideForm:function(e){return x((function(t){return ge(ge({},t),{},{hideForm:e})}))},rolePermissions:t.access})},c().createElement($.R,{type:r.formatMessage(S.Z.permission),isOpen:l,onModalCancel:function(){return u(!1)},onConfirmCancel:L}),O.hideForm?O.success?c().createElement(d.Wizard,{title:r.formatMessage(S.Z.addPermissions),isOpen:!0,steps:[{name:"success",component:new Q({currentRoleID:y}),isFinishedStep:!0}]}):null:c().createElement(J.Z,{container:j,schema:P,subscription:{values:!0},FormTemplate:be,initialValues:{"role-uuid":t.uuid,"role-type":"create","role-name":t.display_name,"role-description":t.description},componentMapper:ge(ge({},te.ZP),Ee),onSubmit:T,onCancel:function(e){var t;e&&(null===(t=e["add-permissions-table"])||void 0===t?void 0:t.length)>0?u(!0):L()}}))};Ze.defaultProps={role:{}},Ze.propTypes={role:u().object};const Oe=Ze;var xe=r(1227),je=r(44012);function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le=function(e,t,r){return c().createElement(je.Z,(0,b.Z)({},r?S.Z.permissionsWillNotBeGrantedThroughRole:S.Z.permissionWillNotBeGrantedThroughRole,{values:Se(Se({b:function(e){return c().createElement("b",null,e)}},r?{permissions:e}:{permission:e}),{},{role:t.name})}))},Te=function(e){var t=e.cantAddPermissions,r=(0,H.Z)(),n=(0,f.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),f.shallowEqual),l=n.role,u=n.isRecordLoading,m=(0,p.useHistory)(),y=(0,s.useReducer)(V,_),g=(0,a.Z)(y,2),b=g[0],w=b.pagination,Z=b.selectedPermissions,O=b.showRemoveModal,x=b.confirmDelete,j=b.deleteInfo,P=b.filters,L=b.isToggled,T=b.resources,k=b.operations,M=g[1],q=(0,s.useState)(!0),W=(0,a.Z)(q,2),K=W[0],Y=W[1],U=(0,f.useDispatch)(),X=[{title:r.formatMessage(S.Z.application)},{title:r.formatMessage(S.Z.resourceType)},{title:r.formatMessage(S.Z.operation)},{title:r.formatMessage(S.Z.resourceDefinitions),transforms:[(0,z.info)({popover:r.formatMessage(S.Z.resourceDefinitionsApplyToCost),ariaLabel:r.formatMessage(S.Z.resourceDefinitionsApplyToCost)})]},{title:r.formatMessage(S.Z.lastCommit),transforms:[(0,z.cellWidth)(15)]}],Q=t?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,s.useEffect)((function(){var e;if(Object.keys(l).length>0){var t=Object.entries(l.access.reduce((function(e,t){var r=e.resources,n=e.operations,i=t.permission.split(":"),s=(0,a.Z)(i,3),c=s[1],l=s[2];return{resources:r.includes(c)?r:[].concat((0,o.Z)(r),[c]),operations:n.includes(l)?n:[].concat((0,o.Z)(n),[l])}}),{resources:[],operations:[]})).reduce((function(e,t){var r=(0,a.Z)(t,2),n=r[0],o=r[1];return Se(Se({},e),{},(0,i.Z)({},n,o.map((function(e){return{label:e,value:e}}))))}),{}),r=t.resources,n=t.operations;M({type:B,resources:r,operations:n,count:l.access?l.access.length:0})}Y(null==l||null===(e=l.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")})))}),[l]);var $=l&&l.access?(l.access||[]).filter((function(e){var t=e.permission.split(":"),r=(0,a.Z)(t,3),n=r[0],o=r[1],i=r[2],s=P.applications,c=P.resources,l=P.operations;return(!(s.length>0)||s.includes(n))&&(!(c.length>0)||c.includes(o))&&(!(l.length>0)||l.includes(i))})).map((function(e){return Se(Se({uuid:e.permission},e),{},{modified:l.modified})})):[],J=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return U((0,v.lq)(l,t)).then((function(){U((0,v.fp)(l.uuid)),M({type:C,selection:[]})}))},ee=function(e){return e.reduce((function(e,t){return{"":Se(Se({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},te={label:c().createElement("div",null," ",r.formatMessage(S.Z.noResultsFound)),isDisabled:!0},re=Se({access:[],applications:[]},l),ne=Object.values({applications:re.applications,operations:k,resources:T}).find((function(e){return e.length>10})),oe=$.slice(w.offset,w.offset+w.limit);return c().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},O&&c().createElement(xe.Z,{text:j.text,title:j.title,isOpen:O,confirmButtonLabel:j.confirmButtonLabel,onClose:function(){return M({type:I,showRemoveModal:!1})},onSubmit:function(){x(),M({type:N})}}),c().createElement(E.M,{columns:K?X:X.filter((function(e){return e.title!==r.formatMessage(S.Z.resourceDefinitions)})),rows:R(K,null==l?void 0:l.uuid,oe,r),actionResolver:l.system?void 0:function(){return[{title:r.formatMessage(S.Z.remove),onClick:function(e,t,n){return M({type:F,confirmDelete:function(){return J([n])},deleteInfo:{title:r.formatMessage(S.Z.removePermissionQuestion),text:Le(n.uuid,l,!1),confirmButtonLabel:r.formatMessage(S.Z.removePermission)}})}}]},data:oe,filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,r=e.offset;return M({type:D,limit:t,offset:r})},isSelectable:!l.system,setCheckedItems:function(e){M({type:C,selection:e(Z).map((function(e){return{uuid:e.uuid}}))})},checkedRows:Z,onShowMore:ne?function(){M({type:A})}:void 0,setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;M(Se(Se(Se({type:G},t?{applications:t}:P.applications),r?{resources:r}:P.resources),n?{operations:n}:P.operations))},toolbarButtons:function(){return t?[]:[c().createElement(p.Link,{to:"/roles/detail/".concat(l.uuid,"/role-add-permission"),key:"role-add-permission",className:"rbac-m-hide-on-sm"},c().createElement(d.Button,{variant:"primary","aria-label":"Add Permission"},r.formatMessage(S.Z.addPermissions))),{label:r.formatMessage(S.Z.addPermission),props:{className:"rbac-m-hide-on-md"},onClick:function(){m.push("/roles/detail/".concat(l.uuid,"/role-add-permission"))}},{label:r.formatMessage(S.Z.remove),props:{isDisabled:!Z.length>0},onClick:function(){var e=Z.length>1;M({type:F,confirmDelete:function(){return J((0,o.Z)(Z))},deleteInfo:{title:r.formatMessage(e?S.Z.removePermissionsQuestion:S.Z.removePermissionQuestion),text:Le(e?Z.length:Z[0].uuid,l,Z.length>1),confirmButtonLabel:r.formatMessage(e?S.Z.removePermissions:S.Z.removePermission)}})}}]},isLoading:u,pagination:Se(Se({},w),{},{count:$.length}),titlePlural:r.formatMessage(S.Z.permissions),titleSingular:r.formatMessage(S.Z.permission),routes:function(){return c().createElement(p.Route,{exact:!0,path:h.Z["role-add-permission"].path},c().createElement(Oe,{isOpen:!0,role:l}))},emptyProps:{title:r.formatMessage(S.Z.noRolePermissions),description:Q},filters:[{key:"applications",value:0===P.applications.length?"":P.applications,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.application).toLowerCase()}),type:"group",selected:ee(P.applications),groups:[{type:re.applications.length>0?"checkbox":"plain",items:re.applications.length>0?re.applications.slice(0,L?void 0:10).map((function(e){return{label:e,value:e}})):[te]}]},{key:"resources",value:0===P.resources.length?"":P.resources,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.resourceType).toLowerCase()}),type:"group",selected:ee(P.resources),groups:[{type:T.length>0?"checkbox":"plain",items:T.length>0?T.slice(0,L?void 0:10):[te]}]},{key:"operations",value:0===P.operations.length?"":P.operations,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.operation).toLowerCase()}),type:"group",selected:ee(P.operations),groups:[{type:k.length>0?"checkbox":"plain",items:k.length>0?k.slice(0,L?void 0:10):[te]}]}],tableId:"role-permissions"}))};Te.propTypes={cantAddPermissions:u().bool};const ke=Te;var Me=r(19756),Re=r(13063),_e=r(93436),De=r(67643),Ce=r(76137);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fe=function(e){var t=e.onDelete,r=(0,H.Z)(),n=(0,p.useHistory)(),i=(0,s.useState)(!1),l=(0,a.Z)(i,2),u=l[0],b=l[1],E=(0,s.useState)(!1),w=(0,a.Z)(E,2),Z=w[0],j=w[1],P=(0,p.useParams)(),L=P.uuid,T=P.groupUuid,k=(0,f.useSelector)((function(e){var t,r,n,o,i,a,s,c,l;return Ne(Ne({role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading},T&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(r=e.roleReducer)||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.pagination)||x.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(s=a.groups)||void 0===s?void 0:s.pagination)||x.he,groupsFilters:(null===(c=e.groupReducer)||void 0===c||null===(l=c.groups)||void 0===l?void 0:l.filters)||{}})}),f.shallowEqual),M=k.role,R=k.group,_=k.isRecordLoading,D=k.rolesPagination,C=k.rolesFilters,I=k.groupsPagination,N=k.groupsFilters,F=k.systemGroupUuid,G=(0,f.useSelector)((function(e){return e.roleReducer.error!==O.VG})),A=(0,f.useSelector)((function(e){return e.groupReducer.error!==O.VG})),B=(0,f.useDispatch)(),q=function(){if(B((0,v.fp)(L)),T)if("default-access"!==T)B((0,Me.yi)(T));else{if(F)return B((0,Me.nV)(F,{})),insights.chrome.appObjectId(F),function(){return insights.chrome.appObjectId(void 0)};B((0,Me.WD)())}};(0,s.useEffect)((function(){return q(),insights.chrome.appObjectId(L),function(){return insights.chrome.appObjectId(void 0)}}),[L,T,F]),(0,s.useEffect)((function(){0===(null==M?void 0:M.accessCount)&&""!==(null==M?void 0:M.external_tenant)&&""!==(null==M?void 0:M.external_role_id)&&null!=M&&M.system&&j(!0)}),[M]);var V=function(){return[T?{title:r.formatMessage(S.Z.groups),to:(0,O.zk)(h.Z.groups.path,I,N)}:{title:r.formatMessage(S.Z.roles),to:(0,O.zk)(h.Z.roles.path,D,C)}].concat((0,o.Z)(A&&T&&("default-access"===T?F:A)?R?[{title:R&&R.name,to:"/groups/detail/".concat(T,"/roles"),isLoading:R&&R.loaded}]:[void 0]:A||!T?[]:[{title:r.formatMessage(S.Z.invalidGroup),isActive:!0}]),(0,o.Z)(A||!T?[{title:_?void 0:G?(null==M?void 0:M.display_name)||(null==M?void 0:M.name):r.formatMessage(S.Z.invalidRole),isActive:!0}]:[]))},z=!_&&M?M.display_name||M.name:void 0,W=!_&&M?M.description:void 0,K=[c().createElement(d.DropdownItem,{component:c().createElement(p.Link,{onClick:function(){return b(!1)},to:h.Z["role-detail-edit"].path.replace(":id",L)},r.formatMessage(S.Z.edit)),key:"edit-role"}),c().createElement(d.DropdownItem,{component:c().createElement(p.Link,{onClick:t,to:h.Z["role-detail-remove"].path.replace(":id",L)},r.formatMessage(S.Z.delete)),className:"rbac-c-role__action",key:"delete-role"})];return c().createElement(s.Fragment,null,!A&&T||!G?c().createElement(s.Fragment,null,c().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},c().createElement(Ce.Z,V())),c().createElement(De.Z,{title:"".concat(A?"Role":"Group"," not found"),description:["".concat(A?"Role":"Group"," with ID ").concat(A?L:T," does not exist.")],actions:[c().createElement(d.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return n.goBack()}},r.formatMessage(S.Z.backToPreviousPage))]})):c().createElement(s.Fragment,null,c().createElement(y.Q,{breadcrumbs:V()},c().createElement(d.Level,null,c().createElement(d.LevelItem,null,c().createElement(m.Z,{title:z||c().createElement(g.h2,null),className:"rbac-page-header__title"})),!_&&M&&!M.system&&c().createElement(d.LevelItem,null,c().createElement(d.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:c().createElement(d.KebabToggle,{onToggle:function(e){return b(e)},id:"role-actions-dropdown"}),isOpen:u,isPlain:!0,position:"right",dropdownItems:K}))),W&&c().createElement(d.TextContent,{className:"rbac-page-header__description"},c().createElement(d.Text,{component:"p"},W))),_||!M?c().createElement(g.Wi,null):c().createElement(ke,{cantAddPermissions:Z}),c().createElement(p.Route,{path:h.Z["role-detail-remove"].path},!_&&c().createElement(Re.Z,{afterSubmit:function(){B((0,v.Kt)(Ne(Ne({},D),{},{offset:0,filters:C,inModal:!1})))},cancelRoute:h.Z["role-detail"].path.replace(":uuid",L),submitRoute:(0,O.zk)(h.Z.roles.path,Ne(Ne({},D),{},{offset:0}),C),routeMatch:h.Z["role-detail-remove"].path})),c().createElement(p.Route,{path:h.Z["role-detail-edit"].path},!_&&c().createElement(_e.Z,{afterSubmit:q,cancelRoute:h.Z["role-detail"].path.replace(":uuid",L),routeMatch:h.Z["role-detail-edit"].path}))))};Fe.propTypes={onDelete:u().func};const Ge=Fe},40639:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(99166);const o=(e,t=250,r={onlyResolvesLast:!1})=>(0,n.Z)(e,t,r)},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},45467:()=>{},65088:()=>{},81754:()=>{},70347:()=>{},11452:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},10108:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{},11177:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7349.09d4c056284b0d0e44172070bfcd7b62.js.map