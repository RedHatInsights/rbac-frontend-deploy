(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[822],{39822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(4942),s=n(29439),c=n(92950),a=n.n(c),i=n(334),l=n(58788),o=n(39173),u=n(45697),m=n.n(u),p=function(e){var t=e.isOrgAdmin,n=e.isUserAccessAdmin,r=t?"Org. Administrator":"User Access Admin",s=t?a().createElement("span",null," You can manage other users' permissions with 'User access' "):a().createElement("span",null,"You were granted the User Access Administrator role by your Org. administrator and can now manage other User's permissions with 'User Access'");return t||n?a().createElement(l.Tooltip,{position:l.TooltipPosition.right,content:s},a().createElement(l.Label,{color:"purple"}," ",r," ")):a().createElement(a().Fragment,null)};p.propTypes={isOrgAdmin:m().bool,isUserAccessAdmin:m().bool};const d=p;var b=n(26794),f=n(4682),h=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",subscriptions:"/subscriptions"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","subscriptions"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}],O=n(94184),y=n.n(O);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=function(){for(var e=(0,i.useLocation)(),t=e.search,n=new URLSearchParams(t),s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return c.reduce((function(e,t){return v(v({},e),{},(0,r.Z)({},t,n.get(t)))}),{})};var _=function(e){var t=e.header,n=e.entitlements,r=e.isDisabled,c=E("bundle").bundle;return a().createElement(a().Fragment,null,t&&a().createElement(l.Title,{headingLevel:"h3",size:"xl"},t),a().createElement(l.Stack,{className:y()({"pf-u-mt-lg":!t}),hasGutter:!0},n&&(null==h?void 0:h.map((function(e){var t=n.find((function(t){var n=(0,s.Z)(t,1)[0];return e.entitlement===n})),o=e.entitlement;return t?a().createElement(l.StackItem,{key:o,className:"rbac-c-mua-cardWrapper"},a().createElement(i.NavLink,{className:y()("rbac-c-mua-bundles__cardlink",{"rbac-c-mua-bundles__cardlink--disabled":r}),to:{pathname:f.Z["my-user-access"],search:"bundle=".concat(o)}},a().createElement(l.Card,{key:e.title,isFlat:r||o!==c,isSelectable:!r,isSelected:!r&&o===c,className:y()("rbac-c-mua-bundles__card","rbac-c-mua-bundles__card--".concat(e.entitlement),{"rbac-c-mua-bundles__card--disabled":r})},a().createElement(l.CardTitle,{className:"rbac-c-mua-bundles__card--header"}," ",e.title),a().createElement(l.CardBody,null,a().createElement(l.Stack,{hasGutter:!0},a().createElement(l.StackItem,{className:"rbac-c-mua-bundles__card--applist"},Object.entries(e.apps||{}).map((function(e){var t=(0,s.Z)(e,1)[0];return a().createElement("span",{key:t}," ",t," ")})))))))):null})))))};_.propTypes={header:m().string,entitlements:m().array,isDisabled:m().bool};const j=_;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){return c.Fragment};const k=function(){var e=E("bundle").bundle,t=function(e){var t,n=(0,i.useHistory)(),r=n.replace,s=n.location.pathname;return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?(null===(t=h.find((function(t){return t.entitlement===e})))||void 0===t?void 0:t.appsIds)||[]:(r({to:s,search:"bundle=".concat(e="rhel")}),[])}(e),l=(0,c.useState)({}),o=(0,s.Z)(l,2),u=o[0],m=o[1];(0,c.useEffect)((function(){Object.prototype.hasOwnProperty.call(u,e)||n(19289)("./".concat(e)).then((function(t){return m((function(n){return w(w({},n),{},(0,r.Z)({},e,t.default))}))})).catch(console.log)}),[e]);var p=u[e]||P;return a().createElement(p,{key:e,apps:t})};var S=n(63053),U=function(e){var t,n=e.entitlements,r=e.isOrgAdmin,c=e.isUserAccessAdmin,i=Object.entries(n).filter((function(e){return(0,s.Z)(e,2)[1].is_entitled})),o=Object.entries(n).filter((function(e){return!(0,s.Z)(e,2)[1].is_entitled})),u=E("bundle").bundle,m=r||c;return a().createElement(S.Z.Provider,{value:m},a().createElement(l.Grid,null,a().createElement(l.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},a().createElement(l.Stack,null,a().createElement(l.StackItem,{className:"rbac-l-myUserAccess-section__cards--entitled"},a().createElement(j,{entitlements:i})),o.length>0&&a().createElement(l.StackItem,{className:"rbac-l-myUserAccess-section__cards--unentitled"},a().createElement(j,{header:"Not subscribed",entitlements:o,isDisabled:!0})))),a().createElement(l.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==u&&a().createElement(l.Title,{headingLevel:"h3",size:"xl"},"Your ".concat(null===(t=h.find((function(e){return e.entitlement===u})))||void 0===t?void 0:t.title," ").concat(m?"roles":"permissions")),a().createElement(k,null))))};U.propTypes={entitlements:m().object,isOrgAdmin:m().bool,isUserAccessAdmin:m().bool};const D=U;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=function(){var e=(0,c.useState)({}),t=(0,s.Z)(e,2),n=t[0],r=t[1],u=E("bundle").bundle,m=(0,c.useState)(u),p=(0,s.Z)(m,2),O=p[0],y=p[1],g=(0,c.useContext)(b.Z);(0,c.useEffect)((function(){insights.chrome.auth.getUser().then((function(e){var t,n=e.identity,s=e.entitlements;return r({entitlements:s,isOrgAdmin:null==n||null===(t=n.user)||void 0===t?void 0:t.is_org_admin})}))}),[]);var v=N(N({},n.entitlements),{},{application_services:{is_entitled:!0,is_trial:!1}}),_=Object.entries(v).filter((function(e){return(0,s.Z)(e,2)[1].is_entitled})),j=(0,c.useState)(!1),A=(0,s.Z)(j,2),w=A[0],P=A[1];return a().createElement(a().Fragment,null,Object.prototype.hasOwnProperty.call(n,"entitlements")&&(Object.prototype.hasOwnProperty.call(n,"isOrgAdmin")||g)?a().createElement(a().Fragment,null,a().createElement(o.Z,{className:"rbac-p-myUserAccess--title sticky",title:a().createElement(a().Fragment,null,a().createElement("span",null," My User Access "),a().createElement(d,{isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:g}))}),a().createElement(l.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},"Select applications to view your personal permissions."),_&&a().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},a().createElement(l.Dropdown,{ouiaId:"mua-bundle-dropdown",toggle:a().createElement(l.DropdownToggle,{onToggle:function(){return P(!w)},id:"mua-bundle-dropdown"},O||"Choose a subscription..."),dropdownItems:h.map((function(e){return a().createElement(i.NavLink,{key:e.entitlement,to:{pathname:f.Z["my-user-access"],search:"bundle=".concat(e.entitlement)}},a().createElement(l.DropdownItem,{onClick:function(){y(e.title),P(!1)},component:"button"},e.title))})),isOpen:w})),a().createElement("section",null,a().createElement(D,{entitlements:v,isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:g}))):a().createElement(l.Spinner,null))}},63053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(92950).createContext)(!1)},19289:(e,t,n)=>{var r={"./MUABundles":[35337,436,337],"./MUABundles.scss":[35337,436,337],"./__mocks__/rhel":[18348,348],"./__mocks__/rhel.js":[18348,348],"./ansible":[85039,410,252,736,28,180,877,657,250,39],"./ansible.js":[85039,410,252,736,28,180,877,657,250,39],"./application_services":[62997,410,436,997],"./application_services.js":[62997,410,436,997],"./openshift":[57416,410,252,736,28,180,877,657,250,436,416],"./openshift.js":[57416,410,252,736,28,180,877,657,250,436,416],"./rhel":[54250,410,252,736,28,180,877,657,250],"./rhel.js":[54250,410,252,736,28,180,877,657,250]};function s(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],s=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(s)))}s.keys=()=>Object.keys(r),s.id=19289,e.exports=s}}]);
//# sourceMappingURL=../sourcemaps/822.e6e94caafbfe4a38e39bdfaf5646aa3a.js.map