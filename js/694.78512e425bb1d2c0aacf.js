"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[694],{82916:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(92950),n=r.n(a),s=r(86896),o=r(45697),i=r.n(o),l=r(76857),u=r(15265),c=r(26794),m=r(30893),f=function(e){var t=e.linkDescription,r=e.linkTitle,o=(0,s.Z)(),i=insights.chrome.getEnvironment(),f=insights.chrome.isProd()?"":"".concat(i,".");return(0,a.useContext)(c.Z).orgAdmin?n().createElement(l.Text,{className:"pf-u-mt-0",component:l.TextVariants.h7},"".concat(o.formatMessage(m.Z.usersDescription)," "),t,n().createElement(l.Text,{component:l.TextVariants.a,href:"https://www.".concat(f,"redhat.com/wapps/ugc/protected/usermgt/userList.html"),target:"_blank",rel:"noopener noreferrer"},r,n().createElement(u.ZP,null)),"."):n().createElement(l.Text,{className:"pf-u-mt-0",component:l.TextVariants.h7},"".concat(o.formatMessage(m.Z.usersDescription)," "))};f.propTypes={linkDescription:i().node,linkTitle:i().node},f.defaultProps={linkDescription:"",linkTitle:" user management list "};const d=f},88093:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(87462),n=r(45987),s=r(92950),o=r.n(s),i=r(1936),l=r(45697),u=r.n(l),c=r(94184),m=r.n(c),f=["row"],d=function(e){var t,r=e.row,s=(0,n.Z)(e,f),l=r.status,u=null==l||null===(t=l.props)||void 0===t?void 0:t["data-is-active"];return o().createElement(i.RowWrapper,(0,a.Z)({className:m()("rbac__user-row",{"ins-m-inactive":!u}),row:r},s))};d.propTypes={row:u().shape({status:u().shape({props:u().shape({"data-is-active":u().bool,data:u().shape({isActive:u().bool})})})})};const p=d},97384:(e,t,r)=>{r.d(t,{Z:()=>E});var a=r(29439),n=r(4942),s=r(93433),o=r(92950),i=r.n(o),l=r(50533),u=r(45697),c=r.n(u),m=r(61338),f=r(1936),d=r(11107),p=r(41800),g=r(28090),v=r(19756),b=r(86896),y=r(30893);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){var t=e.selectedRoles,r=e.setSelectedRoles,u=e.rolesExcluded,c=e.groupId,Z=(0,b.Z)(),k=(0,l.useDispatch)(),E=(0,o.useRef)(null),w=(0,l.useSelector)(u?function(e){var t=e.groupReducer.selectedGroup,r=t.addRoles,a=r.roles,n=r.pagination,s=r.loaded,o=t.uuid;return{roles:a,pagination:n||h(h({},m.eX),{},{count:null==a?void 0:a.length}),isLoading:!s,groupId:c||o}}:function(e){var t=e.roleReducer,r=t.roles,a=t.isLoading;return{roles:r.data,pagination:r.meta,isLoading:a,filters:r.filters}},l.shallowEqual),M=w.roles,O=w.pagination,R=w.isLoading,S=w.groupId,j=w.filters,L=(0,o.useRef)([h({title:Z.formatMessage(y.Z.name),key:"display_name"},u?{orderBy:"name"}:{transforms:[f.sortable]}),{title:Z.formatMessage(y.Z.description)}]).current,C=(0,o.useState)(""),P=(0,a.Z)(C,2),D=P[0],I=P[1],x=(0,o.useState)({index:1,direction:"asc"}),T=(0,a.Z)(x,2),N=T[0],_=T[1],B=(0,o.useCallback)((function(e,t){return k(u?(0,v.nr)(e,t):(0,g.Kt)((0,d.jl)(t)))}),[u]),U="".concat("desc"===(null==N?void 0:N.direction)?"-":"").concat(L[null==N?void 0:N.index].key),G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.reduce((function(e,r){var a=r.uuid,n=r.display_name,o=r.name,i=r.description;return[].concat((0,s.Z)(e),[{uuid:a,cells:[n||o,i],selected:Boolean(t&&t.find((function(e){return e.uuid===a})))}])}),[]):[]}(M,t);return(0,o.useEffect)((function(){B(S,h(h({},O),{},{orderBy:U}))}),[]),i().createElement(p.M,{isSelectable:!0,isCompact:!0,borders:!1,columns:L,rows:G,sortBy:N,onSort:function(e,t,r,a){var s="".concat("desc"===r?"-":"").concat(L[a?t-1:t].key);_({index:t,direction:r}),function(e,t){var r=t.name,a=t.count,n=t.limit,s=t.offset,o=t.orderBy;B(e,(0,d.jl)({count:a,limit:n,offset:s,orderBy:o,filters:{display_name:r}}))}(S,h(h({},O),{},{offset:0,orderBy:s},(null==j?void 0:j.length)>0?h({},j.reduce((function(e,t){return h(h({},e),{},(0,n.Z)({},t.key,t.value))}),{})):{name:D}))},data:M,filterValue:D,filterPlaceholder:Z.formatMessage(y.Z.roleName).toLowerCase(),fetchData:function(e){return B(S,h(h({},e),{},{filters:{display_name:e.name}}))},setFilterValue:function(e){var t=e.name;return I(t)},isLoading:R,ouiaId:"roles-table",pagination:O,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:Z.formatMessage(y.Z.roles).toLowerCase(),titleSingular:Z.formatMessage(y.Z.role),tableId:"roles-list",textFilterRef:E})};k.propTypes={canSort:c().bool,setSelectedRoles:c().func.isRequired,selectedRoles:c().array,rolesExcluded:c().bool.isRequired,groupId:c().string},k.defaultProps={roles:[],pagination:m.eX,canSort:!0};const E=k},98033:(e,t,r)=>{r.d(t,{Z:()=>P});var a=r(87462),n=r(29439),s=r(4942),o=r(93433),i=r(92950),l=r.n(i),u=r(50533),c=r(45697),m=r.n(c),f=r(46801),d=r(86896),p=r(76857),g=r(1936),v=r(98614),b=r(36438),y=r(11107),Z=r(90944),h=r(41800),k=r(94496),E=r(88093),w=r(26794),M=r(61338),O=r(92758),R=r(4682),S=r(30893);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(e){var t=e.selectedUsers,r=e.setSelectedUsers,s=e.userLinks,c=e.usesMetaInURL,m=e.props,j=(0,d.Z)(),C=(0,f.useNavigate)(),P=(0,f.useLocation)(),D=(0,u.useDispatch)(),I=(0,i.useContext)(w.Z).orgAdmin,x=(0,i.useRef)(null),T=(0,u.useSelector)((function(e){var t,r,a=e.userReducer.users;return{limit:null!==(t=c?a.pagination.limit:a.meta.limit)&&void 0!==t?t:(I?M.HE:M.he).limit,offset:null!==(r=c?a.pagination.offset:a.meta.offset)&&void 0!==r?r:(I?M.HE:M.he).offset,count:c?a.pagination.count:a.meta.count,redirected:c&&a.pagination.redirected}})),N=(0,u.useSelector)((function(e){var t,r=e.userReducer,a=r.users,n=a.data,s=a.filters,o=void 0===s?{}:s,i=r.isUserDataLoading;return{users:null==n||null===(t=n.map)||void 0===t?void 0:t.call(n,(function(e){return L(L({},e),{},{uuid:e.username})})),isLoading:i,stateFilters:P.search.length>0||Object.keys(o).length>0?o:{status:["Active"]}}})),_=N.users,B=N.isLoading,U=N.stateFilters,G=(0,i.useCallback)((function(e){return D((0,Z.u)(e))}),[D]),A=(0,i.useCallback)((function(e){return D((0,Z.a)(e))}),[D]),F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;return t?t.reduce((function(t,n){var s,u=n.username,c=n.is_active,m=n.email,f=n.first_name,d=n.last_name,g=n.is_org_admin;return[].concat((0,o.Z)(t),[{uuid:u,cells:[g?l().createElement(i.Fragment,null,l().createElement(v.ZP,{key:"yes-icon",className:"pf-u-mr-sm"}),l().createElement("span",{key:"yes"},a.formatMessage(S.Z.yes))):l().createElement(i.Fragment,null,l().createElement(b.ZP,{key:"no-icon",className:"pf-u-mr-sm"}),l().createElement("span",{key:"no"},a.formatMessage(S.Z.no))),{title:e?l().createElement(k.Z,{to:R.Z["user-detail"].link.replace(":username",u)},u.toString()):u.toString()},m,f,d,{title:l().createElement(p.Label,{key:"status",color:c?"green":"grey"},a.formatMessage(c?S.Z.active:S.Z.inactive)),props:{"data-is-active":c}}],selected:Boolean(null==r||null===(s=r.find)||void 0===s?void 0:s.call(r,(function(e){return e.uuid===u})))}])}),[]):[]}(s,_,t,j),V=[{title:j.formatMessage(S.Z.orgAdministrator),key:"org-admin",transforms:[g.nowrap]},{title:j.formatMessage(S.Z.username),key:"username",transforms:[g.sortable]},{title:j.formatMessage(S.Z.email)},{title:j.formatMessage(S.Z.firstName),transforms:[g.nowrap]},{title:j.formatMessage(S.Z.lastName),transforms:[g.nowrap]},{title:j.formatMessage(S.Z.status),transforms:[g.nowrap]}],q=(0,i.useState)({index:1,direction:"asc"}),W=(0,n.Z)(q,2),X=W[0],K=W[1],z=(0,i.useState)(c?U:{username:"",email:"",status:[j.formatMessage(S.Z.active)]}),H=(0,n.Z)(z,2),J=H[0],Q=H[1];return(0,i.useEffect)((function(){c&&(0,M.oG)(P,C,T.limit,T.offset)}),[T.offset,T.limit,T.count,T.redirected]),(0,i.useEffect)((function(){var e=(0,M.rj)(P,C,T),t=e.limit,r=e.offset,a=c?(0,O.aX)(P,C,["username","email","status"],J):{status:J.status};Q(a),G(L(L({},(0,y.jl)({limit:t,offset:r,filters:a})),{},{usesMetaInURL:c}))}),[]),(0,i.useEffect)((function(){c&&((0,M.Zc)(P)||(0,M.oG)(P,C,T.limit,T.offset),Object.values(J).some((function(e){return(null==e?void 0:e.length)>0}))&&!(0,O.qF)(P,Object.keys(J))&&(0,O.aX)(P,C,Object.keys(J),J))})),l().createElement(h.M,(0,a.Z)({isCompact:!0,isSelectable:!0,borders:!1,columns:V,rows:F,sortBy:X,onSort:function(e,t,r){var a="".concat("desc"===r?"-":"").concat(V[t].key);K({index:t,direction:r}),G(L(L({},T),{},{filters:J,usesMetaInURL:c,orderBy:a}))},data:_,ouiaId:"users-table",fetchData:function(e){var t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:J.status,r=e.username,a=e.email,n=e.count,s=e.limit,o=e.offset,i=e.orderBy;G(L(L({},(0,y.jl)({count:n,limit:s,offset:o,orderBy:i,filters:{username:r,email:a,status:t}})),{},{usesMetaInURL:c})).then((function(){var e;null==x||null===(e=x.current)||void 0===e||e.focus()})),c&&(0,O.MS)(P,C,{username:r,email:a,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:function(e){var t,r=e.username,a=e.email,n=e.status;t={username:void 0===r?J.username:r,email:void 0===a?J.email:a,status:void 0===n||n===J.status?J.status:n},c&&A(t),Q(L({username:""},t))},isLoading:B,pagination:T,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid;return{uuid:t,label:e.username||t}}))}))},rowWrapper:E.Z,titlePlural:j.formatMessage(S.Z.users).toLowerCase(),titleSingular:j.formatMessage(S.Z.user),filters:[{key:"username",value:J.username,placeholder:j.formatMessage(S.Z.filterByKey,{key:j.formatMessage(S.Z.username).toLowerCase()}),innerRef:x},{key:"email",value:J.email,placeholder:j.formatMessage(S.Z.filterByKey,{key:j.formatMessage(S.Z.email).toLowerCase()}),innerRef:x},{key:"status",value:J.status,label:j.formatMessage(S.Z.status),type:"checkbox",items:[{label:j.formatMessage(S.Z.active),value:"Active"},{label:j.formatMessage(S.Z.inactive),value:"Inactive"}]}],tableId:"users-list"},m))};C.propTypes={users:m().array,searchFilter:m().string,setSelectedUsers:m().func.isRequired,selectedUsers:m().array,userLinks:m().bool,props:m().object,usesMetaInURL:m().bool},C.defaultProps={users:[],selectedUsers:[],setSelectedUsers:function(){},userLinks:!1,usesMetaInURL:!1};const P=C},93351:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(87462),n=r(45987),s=r(92950),o=r.n(s),i=r(1936),l=r(45697),u=r.n(l),c=r(94184),m=r.n(c),f=["className","row"],d=function(e){var t=e.className,r=e.row,s=(0,n.Z)(e,f);return o().createElement(i.RowWrapper,(0,a.Z)({className:m()(t,{"rbac-c-group-default":r.isPlatformDefault||r.isAdminDefault}),row:r},s))};d.propTypes={row:u().shape({isAdminDefault:u().bool,isPlatformDefault:u().bool}),className:u().string};const p=d},57486:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(29439),n=r(92950),s=r.n(n),o=r(45697),i=r.n(o),l=r(86896),u=r(76857),c=r(46801),m=r(50533),f=r(35664),d=r(71355),p=r(19756),g=r(93736),v=r(97384),b=r(25924),y=r(30893),Z=function(e){var t=e.afterSubmit,r=e.fetchUuid,o=e.selectedRoles,i=e.setSelectedRoles,Z=e.title,h=e.closeUrl,k=e.addRolesToGroup,E=e.groupName,w=e.isDefault,M=e.isChanged,O=e.onDefaultGroupChanged,R=(0,l.Z)(),S=(0,m.useDispatch)(),j=(0,c.useLocation)().state,L=(0,c.useParams)().groupId,C=w&&r?r:L,P=(0,g.Z)(),D=(0,n.useState)(!1),I=(0,a.Z)(D,2),x=I[0],T=I[1],N=(0,m.useSelector)((function(e){var t=e.groupReducer,r=t.selectedGroup,a=t.isRecordLoading;return{groupName:E||(null==j?void 0:j.name)||r.name,isRecordLoading:a}})),_=N.groupName,B=N.isRecordLoading;(0,n.useEffect)((function(){_||S((0,p.yi)(C))}),[]);var U=function(){i&&i([]),S((0,d.addNotification)({variant:"warning",title:R.formatMessage(y.Z.addingGroupRolesTitle),dismissDelay:8e3,description:R.formatMessage(y.Z.addingGroupRolesCancelled)})),P(h)},G=function(){var e=o.map((function(e){return e.uuid}));return k(C,e).then(t),i([]),w&&!M&&O(!0),P(h)};return w&&!M&&x?s().createElement(b.Z,{isOpen:x,onClose:U,onSubmit:G}):s().createElement(u.Modal,{className:"rbac",title:R.formatMessage(y.Z.addRolesToGroup,{name:B?s().createElement(f.Z,{size:f.i.xs,className:"rbac-c-skeleton__add-role-to-group"}):_}),variant:u.ModalVariant.medium,isOpen:!0,onClose:function(){U(),T(!0)},actions:[s().createElement(u.Button,{"aria-label":"Save",ouiaId:"primary-save-button",variant:"primary",key:"confirm",isDisabled:0===o.length,onClick:function(){T(!0),(!w||M)&&G()}},R.formatMessage(y.Z.addToGroup)),s().createElement(u.Button,{"aria-label":"Cancel",ouiaId:"secondary-cancel-button",variant:"link",key:"cancel",onClick:U},R.formatMessage(y.Z.cancel))]},s().createElement(u.Stack,{hasGutter:!0},Z&&s().createElement(u.StackItem,null,s().createElement(u.Title,{headingLevel:"h4",size:"xl"},Z)),s().createElement(u.StackItem,null,s().createElement(u.Alert,{variant:"info",isInline:!0,isPlain:!0,title:R.formatMessage(y.Z.onlyGroupRolesVisible)})),s().createElement(u.StackItem,null,s().createElement(v.Z,{selectedRoles:o,setSelectedRoles:i,rolesExcluded:!0,groupId:C}))))};Z.propTypes={afterSubmit:i().func,selectedRoles:i().array,setSelectedRoles:i().func,addRolesToGroup:i().func,closeUrl:i().string,title:i().string,groupName:i().string,fetchUuid:i().string,isDefault:i().bool,isChanged:i().bool,onDefaultGroupChanged:i().func};const h=Z},25924:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(87462),n=r(92950),s=r.n(n),o=r(45697),i=r.n(o),l=r(76857),u=r(1227),c=r(86896),m=r(44012),f=r(30893),d=function(e){var t=e.isOpen,r=e.onClose,n=e.onSubmit,o=(0,c.Z)();return s().createElement(u.Z,{text:s().createElement(l.TextContent,null,s().createElement(l.Text,null,s().createElement(m.Z,(0,a.Z)({},f.Z.defaultAccessGroupEditWarning,{values:{b:function(e){return s().createElement("b",null,e)}}})))),title:o.formatMessage(f.Z.warning),withCheckbox:!0,isOpen:t,confirmButtonLabel:o.formatMessage(f.Z.continue),onClose:r,onSubmit:n})};d.propTypes={onSubmit:i().func,onClose:i().func,isOpen:i().bool};const p=d}}]);
//# sourceMappingURL=../sourcemaps/694.c9904b557dda4f5bd48ccd3e809e8d94.js.map