(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[10],{37504:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .ins-c-rbac__delete-icon,.my-user-access .ins-c-rbac__delete-icon{color:var(--pf-global--warning-color--100);margin-right:var(--pf-global--spacer--xs)}\n",""]),e.exports=t},46777:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .ins-c-wizard__cancel-warning-header,.my-user-access .ins-c-wizard__cancel-warning-header{display:flex;align-items:center}.rbac .ins-c-wizard__cancel-warning-header--icon,.my-user-access .ins-c-wizard__cancel-warning-header--icon{fill:var(--pf-global--warning-color--100);margin-right:var(--pf-global--spacer--md)}\n",""]),e.exports=t},66369:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .pf-c-form .pf-c-form__group .pf-c-radio,.my-user-access .pf-c-form .pf-c-form__group .pf-c-radio{padding-bottom:8px}.rbac .pf-c-form .pf-c-form__group .pf-c-radio:last-child,.my-user-access .pf-c-form .pf-c-form__group .pf-c-radio:last-child{padding-bottom:0px}.rbac .pf-c-select__menu .ins-c-select__scrollable-section,.my-user-access .pf-c-select__menu .ins-c-select__scrollable-section{max-height:365px;overflow:auto}.rbac .ins-c-rbac-add-permission-title,.my-user-access .ins-c-rbac-add-permission-title{display:block}.rbac .pf-c-wizard__main-body .ins-c-rbac-seleted-chips,.my-user-access .pf-c-wizard__main-body .ins-c-rbac-seleted-chips{padding-bottom:var(--pf-global--spacer--md)}.rbac .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group,.my-user-access .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group{background-color:var(--pf-global--BackgroundColor--100)}.rbac .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip,.my-user-access .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip{background-color:var(--pf-global--palette--blue-50);border-radius:var(--pf-global--BorderRadius--lg)}.rbac .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip .pf-c-chip__text,.my-user-access .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip .pf-c-chip__text{font-size:var(--pf-global--FontSize--sm)}.rbac .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip::before,.my-user-access .pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip::before{border-style:none}@media only screen and (max-width: 815px){.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content{padding:0px}.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:30em}}@media only screen and (max-width: 895px){.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:32em}}@media only screen and (min-width: 992px){.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content{padding:0px}.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:25em}}@media only screen and (min-width: 1055px){.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:32em}}@media only screen and (min-width: 1150px){.rbac .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group,.my-user-access .ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:35em}}.rbac .ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__input,.my-user-access .ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__input{display:none}.rbac .ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__label,.my-user-access .ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__label{color:var(--pf-global--link--Color)}.rbac .ins-c-rbac-disabled-row,.my-user-access .ins-c-rbac-disabled-row{background-color:var(--pf-global--disabled-color--300)}\n",""]),e.exports=t},20387:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .ins-c-rbac__sticky .ins-c-rbac__sticky--title,.my-user-access .ins-c-rbac__sticky .ins-c-rbac__sticky--title{margin-bottom:var(--pf-global--spacer--sm);border-bottom:1px solid var(--pf-global--palette--black-300)}.rbac .ins-c-rbac__sticky .ins-c-rbac__sticky--title .pf-l-grid__item,.my-user-access .ins-c-rbac__sticky .ins-c-rbac__sticky--title .pf-l-grid__item{font-weight:var(--pf-global--FontWeight--bold);margin-bottom:var(--pf-global--spacer--sm) !important}.rbac .ins-c-rbac__sticky .ins-c-rbac__sticky--data,.my-user-access .ins-c-rbac__sticky .ins-c-rbac__sticky--data{max-height:240px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.rbac .ins-c-rbac__sticky .data::-webkit-scrollbar,.my-user-access .ins-c-rbac__sticky .data::-webkit-scrollbar{display:none}.rbac .ins-c-rbac__gutter-sm,.my-user-access .ins-c-rbac__gutter-sm{margin-bottom:var(--pf-global--spacer--sm)}.rbac .ins-c-rbac__gutter-md,.my-user-access .ins-c-rbac__gutter-md{margin-bottom:var(--pf-global--spacer--md)}\n",""]),e.exports=t},78152:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .ins-c-role__permissions .pf-c-content,.my-user-access .ins-c-role__permissions .pf-c-content{padding-bottom:var(--pf-global--spacer--sm)}.rbac .ins-c-role__permissions .pf-c-content h1,.my-user-access .ins-c-role__permissions .pf-c-content h1{font-weight:lighter}.rbac .ins-c-role__permissions .ins-c-text__disabled,.my-user-access .ins-c-role__permissions .ins-c-text__disabled{color:var(--pf-global--Color--200)}.rbac .ins-m-resource-definitions .pf-c-modal-box__body,.my-user-access .ins-m-resource-definitions .pf-c-modal-box__body{text-align:center;padding-top:var(--pf-global--spacer--4xl);padding-bottom:7rem}.rbac .ins-m-resource-definitions .pf-c-modal__alert,.my-user-access .ins-m-resource-definitions .pf-c-modal__alert{margin-bottom:var(--pf-global--spacer--sm)}\n",""]),e.exports=t},41162:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".rbac .ins-c-role__action a,.my-user-access .ins-c-role__action a{color:inherit;text-decoration:none}\n",""]),e.exports=t},54526:(e,t,n)=>{"use strict";n.d(t,{bt:()=>m,yi:()=>y,mD:()=>h,Rp:()=>_,gg:()=>O,m:()=>P,C$:()=>x,nV:()=>R,HA:()=>D,Wj:()=>C,V8:()=>Z});var r=n(87757),i=n.n(r),o=n(59713),s=n.n(o),c=n(63038),a=n.n(c),l=n(48926),u=n.n(l);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,n(63717).tP)();function m(e){return b.apply(this,arguments)}function b(){return(b=u()(i().mark((function e(t){var n,r,o,s,c,l,u,p,m,b,y,v,h,g,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,r=t.offset,o=t.name,s=t.nameMatch,c=t.scope,l=t.username,u=t.uuid,p=t.roleNames,m=t.roleDiscriminator,b=t.orderBy,y=t.options,e.next=3,Promise.all([f.listGroups(n,r,o,s,c,l,u,p,m,b,y),insights.chrome.auth.getUser()]);case 3:return v=e.sent,h=a()(v,2),g=h[0],_=h[1],e.abrupt("return",d(d({},g),_));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=u()(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getGroup(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return(g=u()(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.updateGroup(t.uuid,t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return E.apply(this,arguments)}function E(){return(E=u()(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.createGroup(t);case 2:return n=e.sent,r=n,t.user_list&&t.user_list.length>0&&(r=f.addPrincipalToGroup(n.uuid,{principals:t.user_list})),t.roles_list&&t.roles_list.length>0&&(r=f.addRoleToGroup(n.uuid,{roles:t.roles_list})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=u()(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return f.deleteGroup(e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return j.apply(this,arguments)}function j(){return(j=u()(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.deletePrincipalFromGroup(t,n.join(","));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return(k=u()(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.addPrincipalToGroup(t,{principals:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return S.apply(this,arguments)}function S(){return(S=u()(i().mark((function e(t,n,r){var o,s,c,a,l,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.limit,s=r.offset,c=r.name,a=r.description,l=u.length>3&&void 0!==u[3]?u[3]:{},e.next=4,f.listRolesForGroup(t,n,void 0,c,a,o,s,"display_name",l);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=u()(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.deleteRoleFromGroup(t,n.join(","));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return L.apply(this,arguments)}function L(){return(L=u()(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.addRoleToGroup(t,{roles:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return F.apply(this,arguments)}function F(){return(F=u()(i().mark((function e(t,n){var r,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,f.getPrincipalsFromGroup(t,n,void 0,{query:d({},r)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27435:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(80150);const i=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},83341:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(63038),i=n.n(r),o=n(80150),s=n.n(o),c=n(45697),a=n.n(c),l=n(69957),u=n(47173),p=n(93149),d=n(80236),f=n(79851),m=n(34512),b=n(49739),y=n(68774),v=(n(98487),function(e){var t=e.title,n=e.text,r=e.onClose,c=e.onSubmit,a=e.isOpen,v=e.confirmButtonLabel,h=e.withCheckbox,g=(0,o.useState)(!1),_=i()(g,2),E=_[0],O=_[1];return s().createElement(d.u,{className:"rbac",title:s().createElement("div",null,s().createElement(l.ZP,{className:"ins-m-alert ins-c-rbac__delete-icon"})," ",t),isOpen:a,variant:d.v.small,onClose:r,actions:[s().createElement(u.zx,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:h&&!E,variant:"danger",onClick:c},v),s().createElement(u.zx,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:r},"Cancel")]},s().createElement(f.P,{hasGutter:!0},s().createElement(m.J,{isFilled:!0},s().createElement(b.K,{hasGutter:!0},s().createElement(y.D,null,n)))),h?s().createElement(p.X,{isChecked:E,onChange:function(){return O(!E)},label:"I understand, and I want to continue.",id:"remove-modal-check",className:"pf-u-mt-lg"}):null)});v.propTypes={text:a().any,title:a().string,confirmButtonLabel:a().string,onSubmit:a().func,onClose:a().func,isOpen:a().bool,withCheckbox:a().bool},v.defaultProps={withCheckbox:!1};const h=v},26701:(e,t,n)=>{"use strict";n.d(t,{R:()=>m,A:()=>f});var r=n(84887),i=n(87757),o=n.n(i),s=n(48926),c=n.n(s),a=(0,n(63717).i$)();function l(e){return u.apply(this,arguments)}function u(){return(u=c()(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=c()(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){return{type:r.s6,payload:l(e)}},m=function(e){return{type:r.ZX,payload:p(e)}}},14726:(e,t,n)=>{"use strict";n.d(t,{bt:()=>c,WD:()=>a,yi:()=>l,Rp:()=>u,mD:()=>p,gg:()=>d,dy:()=>f,tz:()=>m,nV:()=>b,nd:()=>y,nr:()=>v,Wj:()=>h,W3:()=>g});var r=n(84887),i=n(54526),o=n(12830),s=function(e){var t,n=(null==e||null===(t=e.errors)||void 0===t?void 0:t[0])||{};if("400"===n.status&&"group uuid validation"===n.source)return{error:o.VG};throw e},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.eb,payload:i.bt(e)}},a=function(e){return{type:r.kL,payload:i.bt({limit:1,name:e||"default",nameMatch:"partial"})}},l=function(e){return{type:r._h,payload:i.yi(e).catch(s)}},u=function(e){return{type:r.Po,payload:i.Rp(e).catch((function(e){var t,n=(null==e||null===(t=e.errors)||void 0===t?void 0:t[0])||{};if("400"===n.status&&"name"===n.source)return{error:!0};throw{message:n.detail,description:n.source}}))}},p=function(e){return{type:r.t3,payload:i.mD(e),meta:{notifications:{fulfilled:{variant:"success",title:"Success updating group",dismissDelay:8e3,dismissable:!1,description:"The group was updated successfully."},rejected:{variant:"danger",title:"Failed updating group",dismissDelay:8e3,dismissable:!1,description:"The group was not updated successfuly."}}}}},d=function(e){return{type:r.v9,payload:i.gg(e),meta:{notifications:{fulfilled:{variant:"success",dismissDelay:8e3,dismissable:!1,title:e.length>1?"Groups deleted successfully":"Group deleted successfully"},rejected:{variant:"danger",dismissDelay:8e3,dismissable:!1,title:e.length>1?"There was an error deleting the groups. Please try again.":"There was an error deleting the group. Please try again."}}}}},f=function(e,t){return{type:r.Nr,payload:i.C$(e,t),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding members to group",dismissDelay:8e3,dismissable:!1,description:"The members were successfully added to the group."},rejected:{variant:"danger",title:"Failed adding members to group",dismissDelay:8e3,dismissable:!1,description:"The members were not added successfully."}}}}},m=function(e,t){return{type:r.b9,payload:i.m(e,t),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing members from group",dismissDelay:8e3,dismissable:!1,description:"The members were successfully removed from the group."},rejected:{variant:"danger",title:"Failed removing members from group",dismissDelay:8e3,dismissable:!1,description:"The members were not removed successfully."}}}}},b=function(e,t,n){return{type:r.XS,payload:i.nV(e,!1,t,n).catch(s)}},y=function(e,t,n){return{type:r.Vh,payload:i.V8(e,t,n).catch(s)}},v=function(e,t,n){return{type:r.as,payload:i.nV(e,!0,t,n).catch(s)}},h=function(e,t){return{type:r.fG,payload:i.Wj(e,t),meta:{notifications:{fulfilled:{variant:"success",title:"Success adding roles to group",dismissDelay:8e3,dismissable:!1,description:"The roles were successfully added to the group."},rejected:{variant:"danger",title:"Failed adding roles to group",dismissDelay:8e3,dismissable:!1,description:"The roles were not added successfully."}}}}},g=function(e,t){return{type:r.Yc,payload:i.HA(e,t),meta:{notifications:{fulfilled:{variant:"success",title:"Success removing roles from group",dismissDelay:8e3,dismissable:!1,description:"The roles were successfully removed from the group."},rejected:{variant:"danger",title:"Failed removing roles from group",dismissDelay:8e3,dismissable:!1,description:"The roles were not removed successfully."}}}}}},44241:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(59713),i=n.n(r),o=n(6479),s=n.n(o),c=n(67154),a=n.n(c),l=n(80150),u=n.n(l),p=n(45697),d=n.n(p),f=n(25607),m=n(81554),b=n(58860),y=n(74219),v=n(57820),h=n(16396),g=n(4853);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E="modal-form",O=function(e){return u().createElement(g.l,a()({},e,{id:E}))},w=function(e){var t=e.saveLabel,n=e.cancelLabel,r=(0,b.Z)().onCancel;return u().createElement(f.Z,null,(function(e){var i=e.pristine,o=e.invalid,s=e.validating,c=e.submitting;return u().createElement("div",{className:"pf-c-form"},u().createElement(v.W,{className:"pf-u-mt-0"},u().createElement(h.Button,{ouiaId:"primary-save-button",variant:"primary",form:E,type:"submit",isDisabled:i||s||c||o},t),u().createElement(h.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:r,id:"cancel-modal"},n)))}))};w.propTypes={saveLabel:d().node,cancelLabel:d().node},w.defaultProps={saveLabel:"Save",cancelLabel:"Cancel"};var P=function(e){var t=e.ModalProps,n=e.saveLabel,r=e.cancelLabel,i=e.alert,o=s()(e,["ModalProps","saveLabel","cancelLabel","alert"]);return u().createElement(y.Modal,a()({},t,{footer:u().createElement(w,{saveLabel:n,cancelLabel:r})}),null==i?void 0:i(),u().createElement(m.ZP,a()({},o,{showFormControls:!1,FormWrapper:O})))};P.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ModalProps:d().object},w.propTypes);const j=P},72389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(67154),i=n.n(r),o=n(59713),s=n.n(o),c=n(6479),a=n.n(c),l=n(80150),u=n.n(l),p=n(45697),d=n.n(p),f=n(319),m=n.n(f),b=n(90784),y=n(22608),v=n(59775),h=n(68774),g=n(68340),_=function(e){var t=e.input,n=e.options,r=e.isReadOnly,o=e.isDisabled,s=e.isRequired,c=a()(e,["input","options","isReadOnly","isDisabled","isRequired"]);return u().createElement(b.i,i()({},t,c,{isDisabled:o||r}),function(e,t,n){if(t&&n)return e;var r=m()(e);return r.find((function(e){return void 0===e.value}))?m()(r):[{label:n?"Please choose":"None"}].concat(m()(r))}(n,t.value,s).map((function(e){return u().createElement(y.j,i()({key:e.value||e.label},e,{label:e.label.toString()}))})))};_.propTypes={input:d().object.isRequired,options:d().arrayOf(d().shape({value:d().any,label:d().string.isRequired})).isRequired,isReadOnly:d().bool,isDisabled:d().bool,isRequired:d().bool,FieldProvider:d().any};var E=function(e){var t=e.label,n=e.isRequired,r=e.helperText,o=e.meta,s=e.description,c=e.hideLabel,l=a()(e,["label","isRequired","helperText","meta","description","hideLabel"]),p=o.error,d=o.touched&&p;return u().createElement(v.c,{isRequired:n,label:!c&&t,fieldId:l.id,isValid:!d,helperText:r,helperTextInvalid:o.error},s&&u().createElement(h.D,null,u().createElement(g.x,{component:g.q.small},s)),u().createElement(_,i()({label:t,isValid:!d,isRequired:n},l)))};E.propTypes={componentType:d().string,label:d().string,isRequired:d().bool,helperText:d().string,meta:d().object,description:d().string,hideLabel:d().bool};const O=E;var w=n(41609),P=n.n(w),j=n(68809),x=n(47173),k=n(58860),R=n(25607),S=function(e){var t=e.dirtyFieldsSinceLastSubmit,n=e.submitSucceeded,r=e.pristine,i=(0,k.Z)().onCancel,o=P()(t)||!n&&r;return u().createElement(j.W,{className:"pf-u-mt-0"},u().createElement(x.zx,{ouiaId:"primary-submit-button",type:"submit",isDisabled:o,variant:"primary"},"Save"),u().createElement(x.zx,{ouiaId:"secondary-cancel-button",variant:"link",onClick:function(){return i()}},"Cancel"))};S.propTypes={dirtyFieldsSinceLastSubmit:d().shape(s()({},d().string,d().oneOfType([d().string,d().number,d().bool]))),submitSucceeded:d().bool,pristine:d().bool,onCancel:d().func};const D=function(e){return u().createElement(R.Z,{subscription:{pristine:!0,submitSucceeded:!0,dirtyFieldsSinceLastSubmit:!0}},(function(t){return u().createElement(S,i()({},t,e))}))};var T=n(81554),C=n(28517),L=n(11831),Z=n(98917),F=n(87242),M=function(e){var t,n=e.formTemplateProps,r=a()(e,["formTemplateProps"]);return u().createElement(Z.Z,i()({componentMapper:(t={},s()(t,F.Z.TEXT_FIELD,C.Z),s()(t,F.Z.TEXTAREA,L.Z),s()(t,F.Z.SELECT,O),t),FormTemplate:function(e){return u().createElement(T.ZP,i()({},n,e,{FormButtons:D}))}},r))};M.propTypes={formTemplateProps:d().object};const I=M},2485:(e,t,n)=>{"use strict";n.d(t,{R:()=>u});var r=n(80150),i=n.n(r),o=n(45697),s=n.n(o),c=n(80236),a=n(47173),l=n(69957),u=(n(27999),function(e){var t=e.type,n=e.isOpen,r=e.onModalCancel,o=e.onConfirmCancel,s=e.customTitle,u=e.customDescription;return i().createElement(c.u,{title:i().createElement("span",{className:"ins-c-wizard__cancel-warning-header"},i().createElement(l.ZP,{size:"md",className:"ins-c-wizard__cancel-warning-header--icon"}),s||"Exit ".concat(t," creation?")),variant:c.v.small,className:"rbac ins-c-wizard__cancel-warning",isOpen:n,onClose:r,actions:[i().createElement(a.zx,{ouiaId:"primary-exit-button",key:"confirm",variant:"primary",onClick:o},"Exit"),i().createElement(a.zx,{ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:r},"Stay")]},i().createElement("span",null,u||"All inputs will be discarded."," "))});u.propTypes={type:s().string,customTitle:s().node,customDescription:s().node,isOpen:s().bool,onModalCancel:s().func,onConfirmCancel:s().func}},74124:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(59713),i=n.n(r),o=n(319),s=n.n(o),c=n(63038),a=n.n(c),l=n(80150),u=n.n(l),p=n(45697),d=n.n(p),f=n(21899),m=n(26391),b=n(68340),y=n(68774),v=n(60485),h=n(47173),g=n(22210),_=n(58860),E=n(55795);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(12236);var P=function(e){var t,n,r,i=e.formFields,o=(0,_.Z)(),c=(0,l.useState)(o.getState().values["add-permissions-table"]||[]),p=a()(c,2),d=p[0],O=p[1],P=(null===(t=o.getState().values)||void 0===t||null===(n=t["copy-base-role"])||void 0===n||null===(r=n.applications)||void 0===r?void 0:r.filter((function(e){return!(null==d?void 0:d.find((function(t){return t.uuid.includes(e)})))})))||[],j=i[0][0];return u().createElement("div",{className:"rbac"},d.length>0?u().createElement("div",{className:"ins-c-rbac-seleted-chips"},u().createElement(m.Z,{categoryName:"Selected permissions"},d.reduce((function(e,t){return[t].concat(s()(e))}),[]).map((function(e){var t=e.uuid;return u().createElement(f.A,{key:t,color:"blue",isTruncated:!0,onClick:function(){return O(d.filter((function(e){return e.uuid!==t})))}},t)})))):null,u().createElement(v.D,{headingLevel:"h1",size:"xl",className:"ins-c-rbac-add-permission-title"},"Add permissions"),u().createElement(y.D,null,u().createElement(b.x,null,"Select permissions to add to your role",0!==P.length&&u().createElement(g.J,{headerContent:"Custom roles only support granular permissions",bodyContent:"Wildcard permissions (for example, approval:*:*) aren’t included in this table and can’t be added to your custom role."},u().createElement(h.zx,{variant:"link"},"Why am I not seeing all of my permissions? ",u().createElement(E.ZP,null))))),[[w(w({},j),{},{props:w(w({},j.props),{},{selectedPermissions:d,setSelectedPermissions:O})})]])};P.propTypes={formFields:d().array};const j=P},57286:(e,t,n)=>{"use strict";n.d(t,{Z:()=>B});var r=n(67154),i=n.n(r),o=n(59713),s=n.n(o),c=n(319),a=n.n(c),l=n(63038),u=n.n(l),p=n(6479),d=n.n(p),f=n(80150),m=n.n(f),b=n(45697),y=n.n(b),v=n(70983),h=n(8785),g=n(58860),_=n(48623),E=n(5755),O=n(84887),w=n(87757),P=n.n(w),j=n(48926),x=n.n(j),k=(0,n(63717).Y3)();function R(e,t,n,r,i,o,s,c){return S.apply(this,arguments)}function S(){return(S=x()(P().mark((function e(t,n,r,i,o,s,c,a){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.listPermissions(t,n,r,i,o,s,c,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n,r,i,o,s){return T.apply(this,arguments)}function T(){return(T=x()(P().mark((function e(t,n,r,i,o,s,c){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.listPermissionOptions(t,n,r,i,o,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C={application:O.KD,resource_type:O.vf,verb:O.E2},L=n(26701),Z=n(89531),F=n(44479),M=n(12460),I=function(e){var t=e.row,n=d()(e,["row"]);return t.disableSelection?m().createElement(F.u,{content:m().createElement("div",null,"To add this permission to your role and define specific resources for it, at least one data source must be connected."," ",m().createElement("a",{href:"./settings/sources"},"Configure sources for Cost Management")),exitDelay:1500,entryDelay:1500},m().createElement(M.RowWrapper,i()({className:"ins-c-rbac-disabled-row",row:t},n))):m().createElement(M.RowWrapper,i()({row:t},n))};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}I.propTypes={props:y().object,row:y().object};var q=["Application","Resource type","Operation"],A=function(e){var t=e.permissionReducer,n=t.permission,r=t.isLoading,i=t.options,o=i.application,s=i.operation,c=i.resource,a=t.expandSplats,l=t.isLoadingExpandSplats,u=e.roleReducer,p=u.isRecordLoading,d=u.selectedRole,f=e.costReducer.resourceTypes;return{permissions:n.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,n=e.resource_type,r=e.verb,i=e.permission;return{application:t,resource:n,operation:r,uuid:i}})),pagination:n.meta,isLoading:r||p,baseRole:d,applicationOptions:o.data.filter((function(e){return"*"!==e})),resourceOptions:c.data.filter((function(e){return"*"!==e})),operationOptions:s.data.filter((function(e){return"*"!==e})),expandedPermissions:a.data.map((function(e){return e.permission})),isLoadingExpandSplats:l,resourceTypes:f.data}},G=function(e){var t=e.selectedPermissions,n=e.setSelectedPermissions,r=d()(e,["selectedPermissions","setSelectedPermissions"]),o=(0,v.useDispatch)(),c=function(e){return o((n=(t=e).limit,r=t.offset,i=t.orderBy,s=t.application,c=t.resourceType,a=t.verb,l=t.permission,p=void 0===(u=t.exclude_globals)||u,d=t.options,{type:O.wI,payload:R(n,r,i,s,c,a,l,p,d)}));var t,n,r,i,s,c,a,l,u,p,d},l=function(e){return o((n=(t=e).field,r=t.limit,i=t.offset,s=t.application,c=t.resourceType,a=t.verb,l=t.options,{type:C[n],payload:D(n,r,i,s,c,a,l)}));var t,n,r,i,s,c,a,l},p=(0,v.useSelector)(A,v.shallowEqual),b=p.permissions,y=p.isLoading,w=p.pagination,P=p.baseRole,j=p.applicationOptions,x=p.resourceOptions,k=p.operationOptions,S=p.expandedPermissions,T=p.isLoadingExpandSplats,F=p.resourceTypes,M=(0,h.Z)(r).input,N=(0,g.Z)(),G=(0,f.useState)({applications:[],resources:[],operations:[]}),B=u()(G,2),W=B[0],V=B[1],H=N.getState().values["role-type"],X=(0,f.useState)(!1),K=u()(X,2),$=K[0],J=K[1],Y=(0,f.useState)(""),U=u()(Y,2),Q=U[0],ee=U[1],te=(0,f.useState)(),ne=u()(te,2),re=ne[0],ie=ne[1],oe=function(e){return F.find((function(t){var n;return t.value===(null===(n=e.split(":"))||void 0===n?void 0:n[1])}))},se=(0,f.useCallback)((0,_.Z)((function(e){var t=e.applications,n=e.resources,r=e.operations;return l({field:"application",limit:50,application:t.join(),resourceType:n.join(),verb:r.join()})}),3e3),[]),ce=(0,f.useCallback)((0,_.Z)((function(e){var t=e.applications,n=e.resources,r=e.operations;return l({field:"resource_type",limit:50,application:t.join(),resourceType:n.join(),verb:r.join()})}),3e3),[]),ae=(0,f.useCallback)((0,_.Z)((function(e){var t=e.applications,n=e.resources,r=e.operations;return l({field:"verb",limit:50,application:t.join(),resourceType:n.join(),verb:r.join()})}),3e3),[]);(0,f.useEffect)((function(){var e,t=null===(e=N.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===H&&t&&o((0,Z.fp)(t)),o((0,L.A)()),N.change("has-cost-resources",!1),c(w),l({field:"application",limit:50}),l({field:"resource_type",limit:50}),l({field:"verb",limit:50}),function(){return o({type:O.e0,payload:{data:[]}})}}),[]),(0,f.useEffect)((function(){ce(W),ae(W)}),[W.applications]),(0,f.useEffect)((function(){se(W),ae(W)}),[W.resources]),(0,f.useEffect)((function(){se(W),ce(W)}),[W.operations]),(0,f.useEffect)((function(){M.onChange(t)}),[t]),(0,f.useEffect)((function(){var e;if(!(!P||"copy"!==H||N.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=N.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==P?void 0:P.uuid)||T||y)){var r,i,s,c,l,u,p,d,f,m,b,v,h,g=(null==P?void 0:P.access)||[];if(0===S.length&&void 0===T){var _=a()(new Set(g.map((function(e){return e.permission.split(":")[0]}))));o((s=void 0===(i=(r={application:_.join()}).limit)?1e3:i,l=void 0===(c=r.offset)?0:c,u=r.orderBy,p=r.application,d=r.resourceType,f=r.verb,m=r.permission,v=void 0===(b=r.exclude_globals)||b,h=r.options,{type:O.e,payload:R(s,l,u,p,d,f,m,v,h)}))}else{var E=g.map((function(e){return e.permission.replace("*",".*")}));n((function(){return S.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(oe(e)||{count:0}).count})).filter((function(e){return E.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),N.change("base-permissions-loaded",!0)}}}),[b,P]);var le=function(e){return e.reduce((function(e,t){return{0:z(z({},null==e?void 0:e[0]),{},s()({},t,!0))}}),{0:{}})},ue={applications:a()(j).filter((function(e){return e.includes(Q)})).map((function(e){return{label:e,value:e}})),resources:a()(x).filter((function(e){return e.includes(Q)})).map((function(e){return{label:e,value:e}})),operations:a()(k).filter((function(e){return e.includes(Q)})).map((function(e){return{label:e,value:e}}))},pe={label:m().createElement("div",null," No results found"),isDisabled:!0},de=ue[Object.keys(ue)[re||0]].length>10;return m().createElement("div",{className:"ins-c-rbac-permissions-table"},m().createElement(E.M,i()({columns:q,isSelectable:!0,isCompact:!0,borders:!1,createRows:function(e){return e.map((function(e){var n=e.application,r=e.resource,i=e.operation,o=e.uuid;return{uuid:"".concat(n,":").concat(r,":").concat(i),cells:[{title:n},r,i],selected:Boolean(t&&t.find((function(e){return e.uuid===o}))),disableSelection:"cost-management"===n&&0===(oe(o)||{count:0}).count}}))},data:b,filterValue:"",noData:0===(null==b?void 0:b.length),noDataDescription:["Adjust your filters and try again. Note: Applications that only have wildcard           permissions (for example, patch:*:*) aren’t included in this table and can’t be           added to your custom role."],fetchData:function(e){var t=e.limit,n=e.offset,r=e.applications,i=e.resources,o=e.operations;c({limit:t,offset:n,application:(r||W.applications).join(),resourceType:(i||W.resources).join(),verb:(o||W.operations).join()})},setFilterValue:function(e){var t=e.applications,n=e.resources,r=e.operations;V(z(z(z(z({},W),t?{applications:t}:W.applications),n?{resources:n}:W.resources),r?{operations:r}:W.operations))},isLoading:y||T,pagination:z(z({},w),{},{count:w.count}),checkedRows:t,setCheckedItems:function(e){n(e(t).map((function(e){return{uuid:e.uuid}})))},titlePlural:"permissions",titleSingular:"permission",showMoreTitle:$?"See less":"See more",onFilter:function(e){return ee(e)},onShowMore:de?function(){J((function(){return!$}))}:void 0,onChange:function(e,t){ee(""),ie(t)},value:re,filters:[{key:"applications",value:W.applications,placeholder:"Filter by application",type:"group",selected:le(W.applications),groups:[{type:ue.applications.length>0?"checkbox":"plain",items:ue.applications.length>0?a()(ue.applications).slice(0,$?void 0:10):[pe]}]},{key:"resources",value:W.resources,placeholder:"Filter by resource type",type:"group",selected:le(W.resources),groups:[{type:ue.resources.length>0?"checkbox":"plain",items:ue.resources.length>0?a()(ue.resources).slice(0,$?void 0:10):[pe]}]},{key:"operations",value:W.operations,placeholder:"Filter by operation",type:"group",selected:le(W.operations),groups:[{type:ue.operations.length>0?"checkbox":"plain",items:ue.operations.length>0?a()(ue.operations).slice(0,$?void 0:10):[pe]}]}],isFilterable:!0,rowWrapper:I,tableId:"add-role-permissions"},r)))};G.propTypes={selectedPermissions:y().array,setSelectedPermissions:y().func};const B=G},70297:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(63038),i=n.n(r),o=n(319),s=n.n(o),c=n(59713),a=n.n(c),l=n(80150),u=n.n(l),p=n(70983),d=n(54680),f=n(92694),m=n(64403),b=n(50693),y=n(16475),v=n(68340),h=n(59775),g=n(8785),_=n(58860),E=n(26701);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.costReducer,n=t.resourceTypes,r=t.isLoading,i=t.loadingResources,o=t.resources;return{resourceTypes:n.data,resources:o,isLoading:r,isLoadingResources:i>0}},j=function(e,t){var n=e[t.key];switch(t.type){case"toggle":return w(w({},e),{},a()({},t.key,w(w({},n),{},{isOpen:!n.isOpen})));case"select":return w(w({},e),{},a()({},t.key,w(w({},n),{},{selected:n.selected.includes(t.selection)?n.selected.filter((function(e){return e!==t.selection})):[].concat(s()(n.selected),[t.selection])})));case"selectAll":return w(w({},e),{},a()({},t.key,w(w({},n),{},{selected:n.options.map((function(e){return e.value}))})));case"clear":return w(w({},e),{},a()({},t.key,w(w({},n),{},{selected:[]})));case"setOptions":return w(w({},e),{},a()({},t.key,w(w({},n),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return w(w({},e),{},a()({},t.key,w(w({},n),{},{filteredOptions:n.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const x=function(e){var t=(0,p.useDispatch)(),n=(0,p.useSelector)(P,p.shallowEqual),r=n.resourceTypes,o=n.isLoading,c=n.isLoadingResources,O=n.resources,x=(0,g.Z)(e).input,k=(0,_.Z)(),R=k.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),S=(0,l.useReducer)(j,R.reduce((function(e,t){return w(w({},e),{},a()({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),D=i()(S,2),T=D[0],C=D[1];return(0,l.useEffect)((function(){(k.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return R.includes(t)&&C({type:"select",selection:e,key:t})}))})),t((0,E.A)(undefined)),k.change("has-cost-resources",!0)}),[]),(0,l.useEffect)((function(){o||s()(new Set(R.map((function(e){var t;return null===(t=r.find((function(t){var n;return t.value===(null===(n=e.uuid.split(":"))||void 0===n?void 0:n[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return n=e,t((0,E.R)(n));var n}))}),[r]),(0,l.useEffect)((function(){c||R.map((function(e){return C({type:"setOptions",key:e.uuid,options:O[(t=e.uuid,null===(n=r.find((function(e){var n;return e.value===(null===(n=t.split(":"))||void 0===n?void 0:n[1])})))||void 0===n||null===(i=n.path.split("/"))||void 0===i?void 0:i[5])]||[]});var t,n,i}))}),[c]),(0,l.useEffect)((function(){var e=Object.entries(T).map((function(e){var t=i()(e,2);return{permission:t[0],resources:t[1].selected}}));x.onChange(e),k.change("resource-definitions",e)}),[T]),u().createElement(b.r,{hasGutter:!0},u().createElement(y.P,{md:4,className:"ins-m-hide-on-sm"},u().createElement(v.x,{component:v.q.h4,className:"ins-c-rbac__bold-text"},"Cost management permissions")),u().createElement(y.P,{md:8,className:"ins-m-hide-on-sm"},u().createElement(v.x,{component:v.q.h4,className:"ins-c-rbac__bold-text"},"Resource definitions")),R.map((function(e){var t=e.uuid,n=T[t].filteredOptions;return u().createElement(u().Fragment,null,u().createElement(y.P,{md:4,sm:12},u().createElement(h.c,{label:t,isRequired:!0})),u().createElement(y.P,{md:8,sm:12},u().createElement(d.P,{className:"ins-c-rbac-cost-resource-select",variant:m.TM.checkbox,typeAheadAriaLabel:"Select a state",onToggle:function(e){C({type:"setFilter",key:t,filtervalue:""}),function(e,t){C({type:"toggle",key:e,isOpen:t})}(t,e)},onSelect:function(e,r){!function(e,t,n,r){C(n?{type:"selectAll",selection:t,key:r}:{type:"select",selection:t,key:r})}(0,r,r==="Select All (".concat(n.length,")"),t)},onClear:function(){return C({type:"clear",key:t})},selections:T[t].selected,isOpen:T[t].isOpen,onFilter:function(e){return e&&C({type:"setFilter",key:t,filtervalue:e.target.value})},"aria-labelledby":t,placeholderText:"Select resources",hasInlineFilter:!0},[u().createElement(f.$,{key:0,value:"Select All (".concat(n.length,")")})].concat(s()(n.map((function(e,t){return u().createElement(f.$,{key:t+1,value:e.value})})))))))})))}},95155:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(67154),i=n.n(r),o=n(63038),s=n.n(o),c=n(80150),a=n.n(c),l=n(45697),u=n.n(l),p=n(87242),d=n(24154),f=n(44241),m=n(72389),b=n(27435),y=n(47194),v=n(70983),h=n(80266),g=n(71355),_=n(45139),E=n(39379),O=n(89531),w=function(e,t,n){return e.length<150?(0,_.vd)({name:e}).then((function(r){var i=r.data;if(0!==i.length&&i.some((function(r){return r[t]!==n&&r.display_name===e})))throw"Role with this name already exists."})):Promise.reject("Can have maximum of 150 characters.")},P=function(e){return{fields:[{name:"name",component:p.Z.TEXT_FIELD,label:"Name",isRequired:!0,validate:[{type:"validate-role-name",id:e,idKey:"uuid",validationPromise:w}]},{name:"description",component:p.Z.TEXTAREA,label:"Description",validate:[{type:d.Z.MAX_LENGTH,threshold:150}]}]}},j=(0,E.Z)((function(e,t,n,r){return e&&0!==e.length?r(e,t,n):Promise.reject("Required")})),x=function(e){var t=e.routeMatch,n=e.cancelRoute,r=e.afterSubmit,o=(0,b.Z)(),l=(0,y.useRouteMatch)(t).params.id,u=(0,y.useHistory)(),p=u.replace,d=u.push,E=(0,v.useDispatch)(),w={"validate-role-name":function(e){var t=e.idKey,n=e.id,r=e.validationPromise;return function(e){return j(e,t,n,r)}}},x=(0,v.useSelector)((function(e){return(0,h.z)(e,l)})),k=(0,c.useState)(x),R=s()(k,2),S=R[0],D=R[1],T=function(){E((0,g.wN)({variant:"warning",dismissDelay:8e3,dismissable:!1,title:"Editing role",description:"Edit role was canceled by the user."})),p(n)};return(0,c.useEffect)((function(){!S&&(0,_.fp)(l).then((function(e){o.current&&D(e)}))}),[l]),S?a().createElement(m.Z,{schema:P(l),initialValues:S,onSubmit:function(e){return E((0,O.sZ)(l,{name:e.name,display_name:e.name,description:e.description})).then((function(){r(),d(n)}))},onCancel:T,validatorMapper:w,FormTemplate:function(e){return a().createElement(f.Z,i()({},e,{ModalProps:{onClose:T,isOpen:!0,variant:"small",title:"Edit role information"}}))}}):null};x.propTypes={routeMatch:u().string.isRequired,cancelRoute:u().string.isRequired,afterSubmit:u().func.isRequired};const k=x},60843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(63038),i=n.n(r),o=n(80150),s=n.n(o),c=n(45697),a=n.n(c),l=n(70983),u=n(47194),p=n(69957),d=n(47173),f=n(93149),m=n(80236),b=n(68340),y=n(68774),v=n(79851),h=n(34512),g=n(83215),_=n(89531),E=n(45139),O=n(27435),w=n(80266),P=function(e){var t=e.routeMatch,n=e.cancelRoute,r=e.afterSubmit,c=(0,O.Z)(),a=(0,u.useRouteMatch)(t).params.id,P=(0,l.useSelector)((function(e){return(0,w.B)(e,a)})),j=(0,o.useState)(!0),x=i()(j,2),k=x[0],R=x[1],S=(0,o.useState)(P),D=i()(S,2),T=D[0],C=D[1],L=(0,l.useDispatch)(),Z=(0,u.useHistory)(),F=Z.push,M=Z.replace;(0,o.useEffect)((function(){!T&&(0,E.fp)(a).then((function(e){c.current&&C(e.display_name)})).catch((function(e){var t,n;return L((0,g.wN)({variant:"danger",title:"Could not get role",description:null==e||null===(t=e.errors)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.detail}))}))}),[]);var I=function(){return M(n)};return T?s().createElement(m.u,{className:"rbac","aria-label":"remove-role",header:s().createElement(y.D,null,s().createElement(v.P,{hasGutter:!0},s().createElement(h.J,null,s().createElement(p.ZP,{size:"lg",style:{fill:"#f0ab00"}})),s().createElement(h.J,null,s().createElement(b.x,{component:"h1"},"Delete role?")))),isOpen:!0,variant:"small",onClose:I,actions:[s().createElement(d.zx,{isDisabled:k,key:"submit",variant:"danger",type:"button",id:"confirm-delete-portfolio",onClick:function(){return L((0,_.l5)(a)).then((function(){return F("/roles"),r()}))}},"Confirm"),s().createElement(d.zx,{key:"cancel",variant:"link",type:"button",onClick:I},"Cancel")]},s().createElement(y.D,null,s().createElement(b.x,{component:b.q.p},"The ",s().createElement("strong",null,T)," role will be removed from any group it’s in, and members in the groups will no longer be granted the permissions in the role."),s().createElement(f.X,{id:"remove-role-checkbox",label:"I understand that this action cannot be undone.",isChecked:!k,onChange:function(){return R((function(e){return!e}))}}))):null};P.propTypes={routeMatch:a().string.isRequired,cancelRoute:a().string.isRequired,afterSubmit:a().func.isRequired};const j=P},80266:(e,t,n)=>{"use strict";n.d(t,{z:()=>r,B:()=>i});var r=function(e,t){var n=e.roleReducer,r=n.roles,i=void 0===r?{data:[]}:r,o=n.selectedRole;return(null==o?void 0:o.uuid)===t?o:i.data.find((function(e){return e.uuid===t}))},i=function(e,t){var n;return null===(n=r(e,t))||void 0===n?void 0:n.display_name}},20010:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$e});var r,i=n(319),o=n.n(i),s=n(59713),c=n.n(s),a=n(63038),l=n.n(a),u=n(80150),p=n.n(u),d=n(45697),f=n.n(d),m=n(47194),b=n(70983),y=n(47173),v=n(56787),h=n(84457),g=n(91845),_=n(48140),E=n(86050),O=n(68340),w=n(68774),P=n(39173),j=n(60306),x=n(89531),k=n(11234),R=n(55917),S=n(5755),D=n(6479),T=n.n(D),C=n(62410),L=n(71410),Z=n(85564),F=n.n(Z);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={pagination:L.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},z="SET_PAGINATION",q="SELECT_PERMISSIONS",A="SHOW_REMOVE_MODAL",G="SUBMIT_REMOVE_MODAL",B="INITIATE_REMOVE_PERMISSION",W="SET_FILTERS",V="SET_TOGGLED",H="INITIALIZE_ROLE",X=(r={},c()(r,z,(function(e,t){return I(I({},e),{},{pagination:I(I({},e.pagination),t)})})),c()(r,q,(function(e,t){var n=t.selection;return I(I({},e),{},{selectedPermissions:n})})),c()(r,A,(function(e,t){var n=t.showRemoveModal;return I(I({},e),{},{showRemoveModal:n})})),c()(r,G,(function(e){return I(I({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),c()(r,B,(function(e,t){var n=t.confirmDelete,r=t.deleteInfo;return I(I({},e),{},{confirmDelete:n,showRemoveModal:!0,deleteInfo:r})})),c()(r,W,(function(e,t){return I(I({},e),{},{filters:I(I({},e.filters),t)})})),c()(r,V,(function(e){return I(I({},e),{},{isToggled:!e.isToggled})})),c()(r,H,(function(e,t){var n=t.count,r=T()(t,["count"]);return I(I(I({},e),r),{},{pagination:I(I({},e.pagination),{},{count:n})})})),r),K=function(e,t){var n=t.type,r=T()(t,["type"]);return X[n]?X[n](e,r):e},$=n(12460),J=(n(36337),n(87757)),Y=n.n(J),U=n(48926),Q=n.n(U),ee=n(67154),te=n.n(ee),ne=n(50693),re=n(16475),ie=n(49739),oe=n(83826),se=n(60485),ce=n(58860);var ae=n(9947),le=n(38424),ue=n(75106),pe=n(68778),de=function(e){var t=e.currentRoleID,n=(0,b.useDispatch)();return p().createElement(p().Fragment,null,p().createElement(ae.u,null,p().createElement(le.k,{color:"green",icon:pe.ZP}),p().createElement(se.D,{headingLevel:"h4",size:"lg"},"You have successfully added permissions to the role"),p().createElement(ue.B,null),p().createElement(m.Link,{to:"/roles/detail/".concat(t)},p().createElement(y.zx,{onClick:function(){return n((0,x.fp)(t))}},"Exit"))))};const fe=de;de.propTypes={currentRoleID:f().string.isRequired};var me=n(2485),be=n(77583),ye=n(98917),ve=n(81554),he=n(86106),ge=n(57286),_e=n(70297),Ee=n(74124),Oe=n(52643),we=n(2372);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(50486);var xe=function(e){var t,n=e.formFields;return(0,u.useContext)(Ce).submitting?p().createElement(Oe.b,null,p().createElement(we.$,{size:"xl"})):p().createElement("div",{className:"rbac"},[[je({},null==n||null===(t=n[0])||void 0===t?void 0:t[0])]])};xe.propTypes={formFields:f().array};const ke=xe;function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){return p().createElement(ve.ZP,te()({},e,{showFormControls:!1}))},Te={"add-permissions-table":ge.Z,"cost-resources":_e.Z,review:function(){var e=(0,ce.Z)().getState().values,t=e["role-name"],n=e["role-description"],r=e["add-permissions-table"],i=e["resource-definitions"],o=e["has-cost-resources"];return p().createElement(ie.K,{hasGutter:!0},p().createElement(oe.v,null,p().createElement(w.D,null,p().createElement(se.D,{headingLevel:"h1",size:"xl",className:"ins-c-rbac__gutter-sm"},"Review details"))),p().createElement(oe.v,{classnem:"ins-c-rbac__summary"},p().createElement(ne.r,{hasGutter:!0},p().createElement(re.P,{span:3},p().createElement(O.x,{className:"pf-c-title",component:O.q.h6},"Role name:")),p().createElement(re.P,{span:9},p().createElement(O.x,{component:O.q.p},t)),p().createElement(re.P,{span:3},p().createElement(O.x,{className:"pf-c-title",component:O.q.h6},"Role description:")),p().createElement(re.P,{span:9},p().createElement(O.x,{component:O.q.p},n)),p().createElement(re.P,{span:3},p().createElement(O.x,{className:"pf-c-title",component:O.q.h6},"Adding permissions:")),p().createElement(re.P,{span:9},p().createElement(w.D,{component:O.q.p},r.map((function(e,t){return p().createElement(O.x,{key:t}," ",e.uuid," ")})))),o&&p().createElement(p().Fragment,null,p().createElement(re.P,{span:3},p().createElement(O.x,{className:"pf-c-title",component:O.q.h6},"Resource definitions:")),p().createElement(re.P,{span:9},p().createElement(w.D,{component:O.q.p},i.map((function(e){return e.resources.map((function(e,t){return p().createElement(O.x,{key:t}," ",e," ")}))}))))))))}},Ce=(0,u.createContext)({success:!1,submitting:!1,error:void 0}),Le=function(e){var t=e.role,n=(0,u.useState)(!1),r=l()(n,2),i=r[0],s=r[1],c=(0,u.useState)(""),a=l()(c,2),d=a[0],f=a[1],y=(0,u.useState)({}),v=l()(y,2),h=v[0],g=v[1],_=(0,m.useHistory)(),E=(0,b.useDispatch)(),O=(0,u.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),w=l()(O,2),P=w[0],j=w[1],k=(0,u.useRef)(document.createElement("div"));(0,u.useEffect)((function(){g(function(e){return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,crossroads:["role-type"],title:"Create role",container:e,fields:[{name:"add-permissions",title:"Add permissions",StepTemplate:Ee.Z,nextStep:function(e){var t=e.values;return t&&t["add-permissions-table"]&&t["add-permissions-table"].some((function(e){return e.uuid.split(":")[0].includes("cost-management")}))?"cost-resources-definition":"review"},fields:[{component:"add-permissions-table",name:"add-permissions-table"}]},{name:"cost-resources-definition",title:"Define Cost Management resources",nextStep:"review",fields:[{component:"plain-text",name:"text-description",label:p().createElement("p",null,"Specify where you would like to apply each cost permission selected in the previous step, using the dropdown below.")},{component:"cost-resources",name:"cost-resources",validate:[function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){return e.resources.length>0}))?void 0:"You need to assign at least one resource to each permission."}]}]},{name:"review",title:"Review details",StepTemplate:ke,fields:[{component:"review",name:"review"}]}]}]}}(k.current))}),[]),(0,u.useEffect)((function(){f(t.uuid)})),(0,u.useEffect)((function(){k.current.hidden=i}),[i]);var R=function(){_.push("/roles/detail/".concat(t.uuid))},S=function(){var e=Q()(Y().mark((function e(n){var r,i,s;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n["add-permissions-table"],i=n["cost-resources"],s=Se(Se({},t),{},{access:[].concat(o()(t.access),o()(r.map((function(e){var t=e.uuid;return{permission:t,resourceDefinitions:(null==i?void 0:i.find((function(e){return e.permission===t})))?[{attributeFilter:{key:"cost-management.".concat(t.split(":")[1]),operation:"in",value:null==i?void 0:i.find((function(e){return e.permission===t})).resources}}]:[]}})))),accessCount:t.accessCount+r.length}),j((function(e){return Se(Se({},e),{},{submitting:!0})})),E((0,x.ul)(d,s)).then((function(){return j((function(e){return Se(Se({},e),{},{submitting:!1,success:!0,hideForm:!0})}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p().createElement(Ce.Provider,{value:Se(Se({},P),{},{setWizardError:function(e){return j((function(t){return Se(Se({},t),{},{error:e})}))},setWizardSuccess:function(e){return j((function(t){return Se(Se({},t),{},{success:e})}))},setHideForm:function(e){return j((function(t){return Se(Se({},t),{},{hideForm:e})}))}})},p().createElement(me.R,{type:"Permission",isOpen:i,onModalCancel:function(){return s(!1)},onConfirmCancel:R}),P.hideForm?p().createElement(be.e,{title:"Add permissions",isOpen:!0,steps:[{name:"success",component:new fe({currentRoleID:d}),isFinishedStep:!0}]}):p().createElement(ye.Z,{container:k,schema:h,subscription:{values:!0},FormTemplate:De,initialValues:{"role-type":"create","role-name":t.display_name,"role-description":t.description},componentMapper:Se(Se({},he.ZP),Te),onSubmit:S,onCancel:function(e){var t;e&&(null===(t=e["add-permissions-table"])||void 0===t?void 0:t.length)>0?s(!0):R()}}))};Le.defaultProps={role:{}},Le.propTypes={role:f().object};const Ze=Le;var Fe=n(83341);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=[{title:"Application"},{title:"Resource type"},{title:"Operation"},{title:"Resource definitions",header:{info:{popover:"Resource definitions only apply to Cost Management permissions",ariaLabel:"Resource definitions only apply to Cost Management permissions",popoverProps:{maxWidth:"19rem",minWidth:"19rem"}}},transforms:[(0,$.cellWidth)(20)]},{title:"Last commit",transforms:[(0,$.cellWidth)(15)]}],ze=function(e,t,n){return n?p().createElement("p",null,"The ",p().createElement("b",null," ","".concat(e))," selected permissions will no longer be granted through the ",p().createElement("b",null,"".concat(t.name))," role."):p().createElement("p",null,"The ",p().createElement("b",null,"".concat(e))," permission will no longer be granted through the ",p().createElement("b",null," ","".concat(t.name))," role.")};const qe=function(){var e=(0,b.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),b.shallowEqual),t=e.role,n=e.isRecordLoading,r=(0,m.useHistory)(),i=(0,u.useReducer)(K,N),s=l()(i,2),a=s[0],d=a.pagination,f=a.selectedPermissions,v=a.showRemoveModal,h=a.confirmDelete,g=a.deleteInfo,_=a.filters,E=a.isToggled,O=a.resources,w=a.operations,P=s[1],k=(0,u.useState)(!0),R=l()(k,2),D=R[0],T=R[1],L=(0,b.useDispatch)();(0,u.useEffect)((function(){var e;if(Object.keys(t).length>0){var n=Object.entries(t.access.reduce((function(e,t){var n=e.resources,r=e.operations,i=t.permission.split(":"),s=l()(i,3),c=s[1],a=s[2];return{resources:n.includes(c)?n:[].concat(o()(n),[c]),operations:r.includes(a)?r:[].concat(o()(r),[a])}}),{resources:[],operations:[]})).reduce((function(e,t){var n=l()(t,2),r=n[0],i=n[1];return Ie(Ie({},e),{},c()({},r,i.map((function(e){return{label:e,value:e}}))))}),{}),r=n.resources,i=n.operations;P({type:H,resources:r,operations:i,count:t.access?t.access.length:0})}T(null==t||null===(e=t.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")})))}),[t]),(0,u.useEffect)((function(){console.log("Testing out what I have in Role: ",t),console.log("This is me testing permissions directly: ",t.accessCount)}),[t]);var Z,M,I=t&&t.access?(t.access||[]).filter((function(e){var t=e.permission.split(":"),n=l()(t,3),r=n[0],i=n[1],o=n[2],s=_.applications,c=_.resources,a=_.operations;return(!(s.length>0)||s.includes(r))&&(!(c.length>0)||c.includes(i))&&(!(a.length>0)||a.includes(o))})).map((function(e){return Ie(Ie({uuid:e.permission},e),{},{modified:t.modified})})):[],X=function(e){var n=e.reduce((function(e,t){return[].concat(o()(e),[t.uuid])}),[]);return L((0,x.lq)(t,n)).then((function(){L((0,x.fp)(t.uuid)),P({type:q,selection:[]})}))},$=function(e){return e.reduce((function(e,t){return{0:Ie(Ie({},null==e?void 0:e[0]),{},c()({},t,!0))}}),{0:{}})},J={label:p().createElement("div",null," No results found"),isDisabled:!0},Y=Ie({access:[],applications:[]},t),U=Object.values({applications:Y.applications,operations:w,resources:O}).find((function(e){return e.length>10}));return p().createElement("section",{className:"pf-c-page__main-section ins-c-role__permissions"},v&&p().createElement(Fe.Z,{text:g.text,title:g.title,isOpen:v,confirmButtonLabel:g.confirmButtonLabel,onClose:function(){return P({type:A,showRemoveModal:!1})},onSubmit:function(){h(),P({type:G})}}),p().createElement(S.M,{columns:D?Ne:Ne.filter((function(e){return"Resource definitions"!==e.title})),createRows:(Z=D,M=null==t?void 0:t.uuid,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reduce((function(e,t){var r=t.resourceDefinitions,i=t.permission,s=t.modified,c=i.split(":"),a=l()(c,3),d=a[0],f=a[1],b=a[2];return[].concat(o()(e),[{uuid:i,cells:[d,f,b].concat(o()(Z?[i.includes("cost-management")&&r.length>0?p().createElement(u.Fragment,{key:"resource-definitions"},p().createElement(m.Link,{to:"/roles/detail/".concat(M,"/permission/").concat(i)},F()(r.map((function(e){return e.attributeFilter.value}))).length)):p().createElement("span",{className:"ins-c-text__disabled"},"N/A")]:[]),[p().createElement(u.Fragment,{key:"".concat(d,"-modified")},p().createElement(C.Z,{date:s,type:"relative"}))]),selected:Boolean(null==n?void 0:n.find((function(e){return e.uuid===i})))}])}),[])}),actionResolver:t.system?void 0:function(){return[{title:"Remove",onClick:function(e,n,r){return P({type:B,confirmDelete:function(){return X([r])},deleteInfo:{title:"Remove permission?",text:ze(r.uuid,t,!1),confirmButtonLabel:"Remove permission"}})}}]},data:I.slice(d.offset,d.offset+d.limit),filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,n=e.offset;return P({type:z,limit:t,offset:n})},isSelectable:!t.system,setCheckedItems:function(e){P({type:q,selection:e(f).map((function(e){return{uuid:e.uuid}}))})},checkedRows:f,onShowMore:U?function(){P({type:V})}:void 0,setFilterValue:function(e){var t=e.applications,n=e.resources,r=e.operations;P(Ie(Ie(Ie({type:W},t?{applications:t}:_.applications),n?{resources:n}:_.resources),r?{operations:r}:_.operations))},toolbarButtons:function(){return window.insights.chrome.isBeta()?[p().createElement(m.Link,{to:"/roles/detail/".concat(t.uuid,"/role-add-permission"),key:"role-add-permission",className:"ins-m-hide-on-sm"},p().createElement(y.zx,{variant:"primary","aria-label":"Add Permission"},"Add permissions")),{label:"Add Permission",props:{className:"pf-m-hidden-on-md"},onClick:function(){r.push("/roles/detail/".concat(t.uuid,"/role-add-permission"))}},{label:"Remove",props:{isDisabled:!f.length>0},onClick:function(){var e=f.length>1;P({type:B,confirmDelete:function(){return X(o()(f))},deleteInfo:{title:e?"Remove permissions?":"Remove permission?",text:ze(e?f.length:f[0].uuid,t,f.length>1),confirmButtonLabel:e?"Remove permissions":"Remove permission"}})}}]:[]},isLoading:n,pagination:Ie(Ie({},d),{},{count:I.length}),titlePlural:"permissions",titleSingular:"permission",routes:function(){return p().createElement(m.Route,{exact:!0,path:j._j.W3},p().createElement(Ze,{isOpen:!0,role:t}))},emptyProps:{title:"There are no permissions in this role",description:["To configure user access to applications,","add at least on permission to this role.",""]},filters:[{key:"applications",value:0===_.applications.length?"":_.applications,placeholder:"Filter by application",type:"group",selected:$(_.applications),groups:[{type:Y.applications.length>0?"checkbox":"plain",items:Y.applications.length>0?Y.applications.slice(0,E?void 0:10).map((function(e){return{label:e,value:e}})):[J]}]},{key:"resources",value:0===_.resources.length?"":_.resources,placeholder:"Filter by resource type",type:"group",selected:$(_.resources),groups:[{type:O.length>0?"checkbox":"plain",items:O.length>0?O.slice(0,E?void 0:10):[J]}]},{key:"operations",value:0===_.operations.length?"":_.operations,placeholder:"Filter by operation",type:"group",selected:$(_.operations),groups:[{type:w.length>0?"checkbox":"plain",items:w.length>0?w.slice(0,E?void 0:10):[J]}]}]}))};var Ae=n(14726),Ge=n(60843),Be=n(95155),We=n(50144),Ve=n(41393),He=n(12830);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n(57250);var Ke=function(e){var t=e.onDelete,n=(0,m.useHistory)(),r=(0,u.useState)(!1),i=l()(r,2),s=i[0],a=i[1],d=(0,m.useParams)(),f=d.uuid,S=d.groupUuid,D=(0,b.useSelector)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading},S&&{group:e.groupReducer.selectedGroup})}),b.shallowEqual),T=D.role,C=D.group,L=D.isRecordLoading,Z=(0,b.useSelector)((function(e){return e.roleReducer.error!==He.VG})),F=(0,b.useSelector)((function(e){return e.groupReducer.error!==He.VG})),M=(0,b.useDispatch)(),I=function(){M((0,x.fp)(f)),S&&M((0,Ae.yi)(S))};(0,u.useEffect)((function(){return I(),insights.chrome.appObjectId(f),function(){return insights.chrome.appObjectId(void 0)}}),[f,S]);var N=function(){return[S?{title:"Groups",to:"/groups"}:{title:"Roles",to:"/roles"}].concat(o()(S&&F?C?[{title:C&&C.name,to:"/groups/detail/".concat(S,"/roles"),isLoading:C&&C.loaded}]:[void 0]:F?[]:[{title:"Invalid group",isActive:!0}]),o()(F?[{title:L?void 0:Z?(null==T?void 0:T.display_name)||(null==T?void 0:T.name):"Invalid role",isActive:!0}]:[]))},z=!L&&T?T.display_name||T.name:void 0,q=!L&&T?T.description:void 0,A=[p().createElement(h.h,{component:p().createElement(m.Link,{to:j._j.Pu.replace(":id",f)},"Edit"),key:"edit-role"}),p().createElement(h.h,{component:p().createElement(m.Link,{onClick:t,to:j._j.GL.replace(":id",f)},"Delete"),className:"ins-c-role__action",key:"delete-role"})];return p().createElement(u.Fragment,null,F&&Z?p().createElement(u.Fragment,null,p().createElement(k.Q,{breadcrumbs:N()},p().createElement(_.a,null,p().createElement(E.Z,null,p().createElement(P.Z,{title:z||p().createElement(R.h2,null),className:"ins-rbac-page-header__title"})),!L&&T&&!T.system&&p().createElement(E.Z,null,p().createElement(v.L,{ouiaId:"role-title-actions-dropdown",toggle:p().createElement(g.a,{onToggle:function(e){return a(e)},id:"role-actions-dropdown"}),isOpen:s,isPlain:!0,position:"right",dropdownItems:A}))),q&&p().createElement(w.D,{className:"ins-rbac-page-header__description"},p().createElement(O.x,{component:"p"},q))),L||!T?p().createElement(R.Wi,null):p().createElement(qe,null),p().createElement(m.Route,{path:j._j.GL},!L&&p().createElement(Ge.Z,{afterSubmit:function(){return M((0,x.Kt)())},cancelRoute:j._j.Fh.replace(":uuid",f),routeMatch:j._j.GL})),p().createElement(m.Route,{path:j._j.Pu},!L&&p().createElement(Be.Z,{afterSubmit:I,cancelRoute:j._j.Fh.replace(":uuid",f),routeMatch:j._j.Pu}))):p().createElement(u.Fragment,null,p().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},p().createElement(Ve.Z,N())),p().createElement(We.Z,{title:"".concat(F?"Role":"Group"," not found"),description:["".concat(F?"Role":"Group"," with ID ").concat(F?f:S," does not exist.")],actions:[p().createElement(y.zx,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return n.goBack()}},"Back to previous page")]})))};Ke.propTypes={onDelete:f().func};const $e=Ke},39379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(99166);const i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return(0,r.Z)(e,t,n)}},98487:(e,t,n)=>{var r=n(93379),i=n(37504);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(37504,(function(){"string"==typeof(i=(i=n(37504)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},27999:(e,t,n)=>{var r=n(93379),i=n(46777);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(46777,(function(){"string"==typeof(i=(i=n(46777)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},12236:(e,t,n)=>{var r=n(93379),i=n(66369);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(66369,(function(){"string"==typeof(i=(i=n(66369)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},50486:(e,t,n)=>{var r=n(93379),i=n(20387);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(20387,(function(){"string"==typeof(i=(i=n(20387)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},36337:(e,t,n)=>{var r=n(93379),i=n(78152);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(78152,(function(){"string"==typeof(i=(i=n(78152)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},57250:(e,t,n)=>{var r=n(93379),i=n(41162);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o=r(i,{insert:"head",singleton:!1});if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(41162,(function(){"string"==typeof(i=(i=n(41162)).__esModule?i.default:i)&&(i=[[e.id,i,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}}}]);
//# sourceMappingURL=10.51de8458bc475b4440ac.js.map