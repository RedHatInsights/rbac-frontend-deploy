"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[694],{82916:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),s=r(86896),o=r(45697),i=r.n(o),l=r(76857),u=r(15265),c=r(26794),d=r(30893),m=function(e){var t=e.linkDescription,r=e.linkTitle,o=(0,s.Z)(),i=insights.chrome.getEnvironment(),m=insights.chrome.isProd()?"":"".concat(i,".");return(0,n.useContext)(c.Z).orgAdmin?a().createElement(l.Text,{className:"pf-u-mt-0",component:l.TextVariants.h7},"".concat(o.formatMessage(d.Z.usersDescription)," "),t,a().createElement(l.Text,{component:l.TextVariants.a,href:"https://www.".concat(m,"redhat.com/wapps/ugc/protected/usermgt/userList.html"),target:"_blank",rel:"noopener noreferrer"},r,a().createElement(u.ZP,null)),"."):a().createElement(l.Text,{className:"pf-u-mt-0",component:l.TextVariants.h7},"".concat(o.formatMessage(d.Z.usersDescription)," "))};m.propTypes={linkDescription:i().node,linkTitle:i().node},m.defaultProps={linkDescription:"",linkTitle:" user management list "};const f=m},88093:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(87462),a=r(45987),s=r(92950),o=r.n(s),i=r(1936),l=r(45697),u=r.n(l),c=r(94184),d=r.n(c),m=["row"],f=function(e){var t,r=e.row,s=(0,a.Z)(e,m),l=r.status,u=null==l||null===(t=l.props)||void 0===t?void 0:t["data-is-active"];return o().createElement(i.RowWrapper,(0,n.Z)({className:d()("rbac__user-row",{"ins-m-inactive":!u}),row:r},s))};f.propTypes={row:u().shape({status:u().shape({props:u().shape({"data-is-active":u().bool,data:u().shape({isActive:u().bool})})})})};const p=f},97384:(e,t,r)=>{r.d(t,{Z:()=>E});var n=r(29439),a=r(4942),s=r(93433),o=r(92950),i=r.n(o),l=r(28216),u=r(45697),c=r.n(u),d=r(61338),m=r(1936),f=r(11107),p=r(30060),g=r(28090),v=r(19756),b=r(86896),y=r(30893);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){var t=e.selectedRoles,r=e.setSelectedRoles,u=e.rolesExcluded,c=e.groupId,Z=(0,b.Z)(),k=(0,l.useDispatch)(),E=(0,o.useRef)(null),w=(0,l.useSelector)(u?function(e){var t=e.groupReducer.selectedGroup,r=t.addRoles,n=r.roles,a=r.pagination,s=r.loaded,o=t.uuid;return{roles:n,pagination:a||h(h({},d.eX),{},{count:null==n?void 0:n.length}),isLoading:!s,groupId:c||o}}:function(e){var t=e.roleReducer,r=t.roles,n=t.isLoading;return{roles:r.data,pagination:r.meta,isLoading:n,filters:r.filters}},l.shallowEqual),S=w.roles,M=w.pagination,O=w.isLoading,R=w.groupId,j=w.filters,C=(0,o.useRef)([h({title:Z.formatMessage(y.Z.name),key:"display_name"},u?{orderBy:"name"}:{transforms:[m.sortable]}),{title:Z.formatMessage(y.Z.description)}]).current,P=(0,o.useState)(""),D=(0,n.Z)(P,2),x=D[0],L=D[1],T=(0,o.useState)({index:1,direction:"asc"}),N=(0,n.Z)(T,2),B=N[0],I=N[1],_=(0,o.useCallback)((function(e,t){return k(u?(0,v.nr)(e,t):(0,g.Kt)((0,f.jl)(t)))}),[u]),G="".concat("desc"===(null==B?void 0:B.direction)?"-":"").concat(C[null==B?void 0:B.index].key),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.reduce((function(e,r){var n=r.uuid,a=r.display_name,o=r.name,i=r.description;return[].concat((0,s.Z)(e),[{uuid:n,cells:[a||o,i],selected:Boolean(t&&t.find((function(e){return e.uuid===n})))}])}),[]):[]}(S,t);return(0,o.useEffect)((function(){_(R,h(h({},M),{},{orderBy:G}))}),[]),i().createElement(p.M,{isSelectable:!0,isCompact:!0,borders:!1,columns:C,rows:A,sortBy:B,onSort:function(e,t,r,n){var s="".concat("desc"===r?"-":"").concat(C[n?t-1:t].key);I({index:t,direction:r}),function(e,t){var r=t.name,n=t.count,a=t.limit,s=t.offset,o=t.orderBy;_(e,(0,f.jl)({count:n,limit:a,offset:s,orderBy:o,filters:{display_name:r}}))}(R,h(h({},M),{},{offset:0,orderBy:s},(null==j?void 0:j.length)>0?h({},j.reduce((function(e,t){return h(h({},e),{},(0,a.Z)({},t.key,t.value))}),{})):{name:x}))},data:S,filterValue:x,filterPlaceholder:Z.formatMessage(y.Z.roleName).toLowerCase(),fetchData:function(e){return _(R,h(h({},e),{},{filters:{display_name:e.name}}))},setFilterValue:function(e){var t=e.name;return L(t)},isLoading:O,ouiaId:"roles-table",pagination:M,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:Z.formatMessage(y.Z.roles).toLowerCase(),titleSingular:Z.formatMessage(y.Z.role),tableId:"roles-list",textFilterRef:E})};k.propTypes={canSort:c().bool,setSelectedRoles:c().func.isRequired,selectedRoles:c().array,rolesExcluded:c().bool.isRequired,groupId:c().string},k.defaultProps={roles:[],pagination:d.eX,canSort:!0};const E=k},98033:(e,t,r)=>{r.d(t,{Z:()=>C});var n=r(87462),a=r(29439),s=r(4942),o=r(93433),i=r(92950),l=r.n(i),u=r(28216),c=r(45697),d=r.n(c),m=r(334),f=r(11107),p=r(30060),g=r(90944),v=r(76857),b=r(1936),y=r(88093),Z=r(61338),h=r(92758),k=r(98614),E=r(36438),w=r(86896),S=r(30893),M=r(26794);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){var t=e.selectedUsers,r=e.setSelectedUsers,s=e.userLinks,c=e.inModal,d=e.props,O=(0,w.Z)(),j=(0,m.useHistory)(),C=(0,u.useDispatch)(),P=(0,i.useContext)(M.Z).orgAdmin,D=(0,i.useRef)(null),x=(0,u.useSelector)((function(e){var t=e.userReducer.users;return{limit:c?t.meta.limit:t.pagination.limit||(P?Z.HE:Z.he).limit,offset:c?t.meta.offset:t.pagination.offset||(P?Z.HE:Z.he).offset,count:c?t.meta.count:t.pagination.count,redirected:!c&&t.pagination.redirected}})),L=(0,u.useSelector)((function(e){var t,r,n=e.userReducer.users;return null==n||null===(t=n.data)||void 0===t||null===(r=t.map)||void 0===r?void 0:r.call(t,(function(e){return R(R({},e),{},{uuid:e.username})}))})),T=(0,u.useSelector)((function(e){return e.userReducer.users.meta})),N=(0,u.useSelector)((function(e){return e.userReducer.isUserDataLoading})),B=(0,u.useSelector)((function(e){var t=e.userReducer.users.filters;return j.location.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}})),I=(0,i.useCallback)((function(e){return C((0,g.u)(e))}),[C]),_=(0,i.useCallback)((function(e){return C((0,g.a)(e))}),[C]),G=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;return null==t||null===(r=t.reduce)||void 0===r?void 0:r.call(t,(function(t,r){var s,u=r.username,c=r.is_active,d=r.email,f=r.first_name,p=r.last_name,g=r.is_org_admin;return[].concat((0,o.Z)(t),[{uuid:u,cells:[g?l().createElement(i.Fragment,null,l().createElement(k.ZP,{key:"yes-icon",className:"pf-u-mr-sm"}),l().createElement("span",{key:"yes"},a.formatMessage(S.Z.yes))):l().createElement(i.Fragment,null,l().createElement(E.ZP,{key:"no-icon",className:"pf-u-mr-sm"}),l().createElement("span",{key:"no"},a.formatMessage(S.Z.no))),{title:e?l().createElement(m.Link,{to:"/users/detail/".concat(u)},u.toString()):u.toString()},d,f,p,{title:l().createElement(v.Label,{key:"status",color:c?"green":"grey"},a.formatMessage(c?S.Z.active:S.Z.inactive)),props:{"data-is-active":c}}],selected:Boolean(null==n||null===(s=n.find)||void 0===s?void 0:s.call(n,(function(e){return e.uuid===u})))}])}),[])}(s,L,t,O),A=[{title:O.formatMessage(S.Z.orgAdministrator),key:"org-admin",transforms:[b.nowrap]},{title:O.formatMessage(S.Z.username),key:"username",transforms:[b.sortable]},{title:O.formatMessage(S.Z.email)},{title:O.formatMessage(S.Z.firstName),transforms:[b.nowrap]},{title:O.formatMessage(S.Z.lastName),transforms:[b.nowrap]},{title:O.formatMessage(S.Z.status),transforms:[b.nowrap]}],U=(0,i.useState)({index:1,direction:"asc"}),F=(0,a.Z)(U,2),V=F[0],q=F[1],H=(0,i.useState)(c?{username:"",email:"",status:[O.formatMessage(S.Z.active)]}:B),W=(0,a.Z)(H,2),X=W[0],K=W[1];return(0,i.useEffect)((function(){c||x.redirected&&(0,Z.oG)(j,x.limit,x.offset)}),[x.redirected]),(0,i.useEffect)((function(){var e=c?Z.he:(0,Z.rj)(j,x),t=c?{status:X.status}:(0,h.aX)(j,["username","email","status"],X);K(t),I(R(R({},(0,f.jl)(R(R({},e),{},{filters:t}))),{},{inModal:c}))}),[]),(0,i.useEffect)((function(){c||((0,Z.Zc)(j)||(0,Z.oG)(j,T.limit,T.offset),Object.values(X).some((function(e){return(null==e?void 0:e.length)>0}))&&!(0,h.qF)(j,Object.keys(X))&&(0,h.aX)(j,Object.keys(X),X))})),l().createElement(p.M,(0,n.Z)({isCompact:!0,isSelectable:!0,borders:!1,columns:A,rows:G,sortBy:V,onSort:function(e,t,r){var n="".concat("desc"===r?"-":"").concat(A[t].key);q({index:t,direction:r}),I(R(R({},T),{},{filters:X,inModal:c,orderBy:n}))},data:L,ouiaId:"users-table",fetchData:function(e){var t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:X.status,r=e.username,n=e.email,a=e.count,s=e.limit,o=e.offset,i=e.orderBy;I(R(R({},(0,f.jl)({count:a,limit:s,offset:o,orderBy:i,filters:{username:r,email:n,status:t}})),{},{inModal:c})).then((function(){var e;null==D||null===(e=D.current)||void 0===e||e.focus()})),c||(0,Z.oG)(j,s,o),c||(0,h.MS)(j,{username:r,email:n,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:function(e){var t,r=e.username,n=e.email,a=e.status;t={username:void 0===r?X.username:r,email:void 0===n?X.email:n,status:void 0===a||a===X.status?X.status:a},c||_(t),K(R({username:""},t))},isLoading:N,pagination:T,checkedRows:t,setCheckedItems:function(e){r((function(t){return e(t).map((function(e){var t=e.uuid;return{uuid:t,label:e.username||t}}))}))},rowWrapper:y.Z,titlePlural:O.formatMessage(S.Z.users).toLowerCase(),titleSingular:O.formatMessage(S.Z.user),filters:[{key:"username",value:X.username,placeholder:O.formatMessage(S.Z.filterByKey,{key:O.formatMessage(S.Z.username).toLowerCase()}),innerRef:D},{key:"email",value:X.email,placeholder:O.formatMessage(S.Z.filterByKey,{key:O.formatMessage(S.Z.email).toLowerCase()}),innerRef:D},{key:"status",value:X.status,label:O.formatMessage(S.Z.status),type:"checkbox",items:[{label:O.formatMessage(S.Z.active),value:"Active"},{label:O.formatMessage(S.Z.inactive),value:"Inactive"}]}],tableId:"users-list"},d))};j.propTypes={history:d().shape({goBack:d().func.isRequired,push:d().func.isRequired}),users:d().array,searchFilter:d().string,setSelectedUsers:d().func.isRequired,selectedUsers:d().array,userLinks:d().bool,props:d().object,inModal:d().bool},j.defaultProps={users:[],selectedUsers:[],setSelectedUsers:function(){},userLinks:!1,inModal:!1};const C=j},93351:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(87462),a=r(45987),s=r(92950),o=r.n(s),i=r(1936),l=r(45697),u=r.n(l),c=r(94184),d=r.n(c),m=["className","row"],f=function(e){var t=e.className,r=e.row,s=(0,a.Z)(e,m);return o().createElement(i.RowWrapper,(0,n.Z)({className:d()(t,{"rbac-c-group-default":r.isPlatformDefault||r.isAdminDefault}),row:r},s))};f.propTypes={row:u().shape({isAdminDefault:u().bool,isPlatformDefault:u().bool}),className:u().string};const p=f},57486:(e,t,r)=>{r.d(t,{Z:()=>Z});var n=r(29439),a=r(92950),s=r.n(a),o=r(45697),i=r.n(o),l=r(86896),u=r(76857),c=r(334),d=r(28216),m=r(35664),f=r(71355),p=r(19756),g=r(97384),v=r(25924),b=r(30893),y=function(e){var t=e.afterSubmit,r=e.selectedRoles,o=e.setSelectedRoles,i=e.title,y=e.closeUrl,Z=e.addRolesToGroup,h=e.groupName,k=e.isDefault,E=e.isChanged,w=e.onDefaultGroupChanged,S=(0,l.Z)(),M=(0,d.useDispatch)(),O=(0,c.useLocation)().state,R=(0,c.useParams)().uuid,j=(0,c.useHistory)().push,C=(0,a.useState)(!1),P=(0,n.Z)(C,2),D=P[0],x=P[1],L=(0,d.useSelector)((function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.isRecordLoading;return{groupName:h||(null==O?void 0:O.name)||r.name,isRecordLoading:n}})),T=L.groupName,N=L.isRecordLoading;(0,a.useEffect)((function(){T||M((0,p.yi)(R))}),[]);var B=function(){o&&o([]),M((0,f.addNotification)({variant:"warning",title:S.formatMessage(b.Z.addingGroupRolesTitle),dismissDelay:8e3,description:S.formatMessage(b.Z.addingGroupRolesCancelled)})),j(y)},I=function(){var e=r.map((function(e){return e.uuid}));return Z(R,e).then(t),o([]),k&&!E&&w(!0),j(y)};return k&&!E&&D?s().createElement(v.Z,{isOpen:D,onClose:B,onSubmit:I}):s().createElement(u.Modal,{className:"rbac",title:S.formatMessage(b.Z.addRolesToGroup,{name:N?s().createElement(m.Z,{size:m.i.xs,className:"rbac-c-skeleton__add-role-to-group"}):T}),variant:u.ModalVariant.medium,isOpen:!0,onClose:function(){B(),x(!0)},actions:[s().createElement(u.Button,{"aria-label":"Save",ouiaId:"primary-save-button",variant:"primary",key:"confirm",isDisabled:0===r.length,onClick:function(){x(!0),(!k||E)&&I()}},S.formatMessage(b.Z.addToGroup)),s().createElement(u.Button,{"aria-label":"Cancel",ouiaId:"secondary-cancel-button",variant:"link",key:"cancel",onClick:B},S.formatMessage(b.Z.cancel))]},s().createElement(u.Stack,{hasGutter:!0},i&&s().createElement(u.StackItem,null,s().createElement(u.Title,{headingLevel:"h4",size:"xl"},i)),s().createElement(u.StackItem,null,s().createElement(u.Alert,{variant:"info",isInline:!0,isPlain:!0,title:S.formatMessage(b.Z.onlyGroupRolesVisible)})),s().createElement(u.StackItem,null,s().createElement(g.Z,{selectedRoles:r,setSelectedRoles:o,rolesExcluded:!0,groupId:R}))))};y.propTypes={afterSubmit:i().func,selectedRoles:i().array,setSelectedRoles:i().func,addRolesToGroup:i().func,closeUrl:i().string,title:i().string,groupName:i().string,isDefault:i().bool,isChanged:i().bool,onDefaultGroupChanged:i().func};const Z=y},25924:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(87462),a=r(92950),s=r.n(a),o=r(45697),i=r.n(o),l=r(76857),u=r(1227),c=r(86896),d=r(44012),m=r(30893),f=function(e){var t=e.isOpen,r=e.onClose,a=e.onSubmit,o=(0,c.Z)();return s().createElement(u.Z,{text:s().createElement(l.TextContent,null,s().createElement(l.Text,null,s().createElement(d.Z,(0,n.Z)({},m.Z.defaultAccessGroupEditWarning,{values:{b:function(e){return s().createElement("b",null,e)}}})))),title:o.formatMessage(m.Z.warning),withCheckbox:!0,isOpen:t,confirmButtonLabel:o.formatMessage(m.Z.continue),onClose:r,onSubmit:a})};f.propTypes={onSubmit:i().func,onClose:i().func,isOpen:i().bool};const p=f}}]);
//# sourceMappingURL=../sourcemaps/694.1cc3848c28fbb481afe89a66cf25fcc2.js.map