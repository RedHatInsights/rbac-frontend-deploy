/*! For license information please see 3094.54b1278a1ff29a80e772.js.LICENSE.txt */
(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[3094],{55795:(e,t,r)=>{"use strict";t.sN={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},t.iC=r(35183).IU(t.sN),t.ZP=t.iC},93736:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(46801),o=r(65126);const i=function(e){var t=(0,n.useNavigate)();return function(r,n){return t((0,o.n)(r,e),n)}}},29215:(e,t,r)=>{"use strict";r.d(t,{R:()=>d,A:()=>p});var n=r(36580),o=r(71002),i=r(15861);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function d(){}function h(){}function v(){}var m={};u(m,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(j([])));g&&g!==t&&r.call(g,i)&&(m=g);var b=v.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,a,c,s){var u=f(e[i],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==(0,o.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(p).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function Z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=v,u(b,"constructor",v),u(v,"constructor",h),h.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),Z(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;Z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}var c=(0,r(96692).i$)();function s(e){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(e){return{type:n.s6,payload:s(e)}},d=function(e){return{type:n.ZX,payload:l(e)}}},73943:(e,t,r)=>{"use strict";r.d(t,{R:()=>f});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),c=r(76857),s=r(69957),u=r(86896),l=r(30893),f=function(e){var t=e.type,r=e.isOpen,n=e.onModalCancel,i=e.onConfirmCancel,a=e.customTitle,f=e.customDescription,p=e.customPrimaryButtonTitle,d=e.customSecondaryButtonTitle,h=(0,u.Z)();return o().createElement(c.Modal,{title:o().createElement("span",{className:"rbac-c-wizard__cancel-warning-header"},o().createElement(s.ZP,{size:"md",className:"rbac-c-wizard__cancel-warning-header--icon"}),a||h.formatMessage(l.Z.exitItemCreation,{item:t})),variant:c.ModalVariant.small,className:"rbac rbac-c-wizard__cancel-warning",isOpen:r,onClose:n,actions:[o().createElement(c.Button,{ouiaId:"primary-exit-button",key:"confirm",variant:"primary",onClick:i},null!=p?p:h.formatMessage(l.Z.exit)),o().createElement(c.Button,{ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:n},null!=d?d:h.formatMessage(l.Z.stay))]},o().createElement("span",null,f||h.formatMessage(l.Z.discardedInputsWarning)," "))};f.propTypes={type:a().string,customTitle:a().node,customDescription:a().node,customPrimaryButtonTitle:a().string,customSecondaryButtonTitle:a().string,isOpen:a().bool,onModalCancel:a().func,onConfirmCancel:a().func}},27979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(4942),o=r(93433),i=r(29439),a=r(92950),c=r.n(a),s=r(45697),u=r.n(s),l=r(76857),f=r(48880),p=r(55795),d=r(86896),h=r(30893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t,r,n,s=e.formFields,u=(0,f.default)(),v=(0,a.useState)(u.getState().values["add-permissions-table"]||[]),y=(0,i.Z)(v,2),g=y[0],b=y[1],w=(0,a.useState)(!1),O=(0,i.Z)(w,2),E=O[0],x=O[1],Z=u.getState().values["not-allowed-permissions"],L=(0,d.Z)(),j=(null===(t=u.getState().values)||void 0===t||null===(r=t["copy-base-role"])||void 0===r||null===(n=r.applications)||void 0===n?void 0:n.filter((function(e){return!(null!=g&&g.find((function(t){return t.uuid.includes(e)})))})))||[],k=s[0][0];return c().createElement("div",{className:"rbac"},g.length>0?c().createElement("div",{className:"rbac-c-selected-chips"},c().createElement(l.ChipGroup,{categoryName:L.formatMessage(h.Z.selectedPermissions)},g.reduce((function(e,t){return[t].concat((0,o.Z)(e))}),[]).map((function(e){var t=e.uuid;return c().createElement(l.Chip,{key:t,color:"blue",isTruncated:!0,onClick:function(){return b(g.filter((function(e){return e.uuid!==t})))}},t)})))):null,c().createElement(l.Title,{headingLevel:"h1",size:"xl",className:"rbac-c-add-permission-title"},L.formatMessage(h.Z.addPermissions)),c().createElement(l.TextContent,null,c().createElement(l.Text,null,L.formatMessage(h.Z.selectPermissionsForRole),0!==j.length&&c().createElement(l.Popover,{headerContent:L.formatMessage(h.Z.onlyGranularPermissions),bodyContent:L.formatMessage(h.Z.noWildcardPermissions)},c().createElement(l.Button,{variant:"link"},L.formatMessage(h.Z.whyNotSeeingAllPermissions)," ",c().createElement(p.ZP,null))))),(null==Z?void 0:Z.length)>0&&!E?c().createElement(l.Alert,{variant:"default",isInline:!0,title:"".concat(L.formatMessage(h.Z.followingPermissionsCannotBeAdded)," ").concat(Z.join(", ")),actionClose:c().createElement(l.AlertActionCloseButton,{onClose:function(){return x(!0)}})}):null,[[m(m({},k),{},{props:m(m({},k.props),{},{selectedPermissions:g,setSelectedPermissions:b})})]])};y.propTypes={formFields:u().array};const g=y},77106:(e,t,r)=>{"use strict";r.d(t,{Z:()=>U});var n=r(87462),o=r(93433),i=r(29439),a=r(4942),c=r(45987),s=r(18446),u=r.n(s),l=r(92950),f=r.n(l),p=r(45697),d=r.n(p),h=r(50533),v=r(41693),m=r(48880),y=r(48623);function g(e,t){var r,n,o,i,a,c,s,u,l;return void 0===e&&(e=""),void 0===t&&(t=!1),c=this,s=void 0,l=function(){var c,s,u;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:return c=window.insights,[4,null===(n=null===(r=null==c?void 0:c.chrome)||void 0===r?void 0:r.auth)||void 0===n?void 0:n.getUser()];case 1:return s=l.sent(),u={isOrgAdmin:(null===(i=null===(o=null==s?void 0:s.identity)||void 0===o?void 0:o.user)||void 0===i?void 0:i.is_org_admin)||!1},[4,null===(a=null==c?void 0:c.chrome)||void 0===a?void 0:a.getUserPermissions(e,t)];case 2:return[2,(u.permissions=l.sent()||null,u)]}}))},new((u=void 0)||(u=Promise))((function(e,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof u?o:new u((function(e){e(o)}))).then(r,n)}o((l=l.apply(c,s||[])).next())}))}function b(e){return"object"==typeof e}function w(e,t){return!!e&&e.some((function(e){return t.includes(b(e)?null==e?void 0:e.permission:e)}))}function O(e,t){return!!e&&t.every((function(t){return e.some((function(e){var r,n=(null===(r=b(e)?null==e?void 0:e.permission:e)||void 0===r?void 0:r.split(":"))||[],o=t.split(":");return n.slice(0).reduce((function(e,t,r,n){return!1===e?(n.splice(r),e):"*"===t||t===(null==o?void 0:o[r])}),!0)||n.join(":")===t}))}))}(0,l.createContext)({isLoading:!0,isOrgAdmin:!1,permissions:[]});var E=function(){return E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E.apply(this,arguments)};const x=function(e,t,r,n){var o=this,i=(0,l.useState)({isLoading:!0,hasAccess:!1,isOrgAdmin:!1,permissions:[]}),a=i[0],c=i[1];return(0,l.useEffect)((function(){var i,a,s,u,l=!1;return c((function(e){return E(E({},e),{isLoading:!0})})),i=o,a=void 0,u=function(){var o,i,a;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(s){switch(s.label){case 0:return[4,g(e,r)];case 1:return o=s.sent(),i=o.isOrgAdmin,a=o.permissions,!l&&c({isLoading:!1,isOrgAdmin:i,permissions:a,hasAccess:n?O(a,t):w(a,t)}),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(r,n)}o((u=u.apply(i,a||[])).next())})),function(){l=!0}}),[e,r]),a};var Z=r(30060),L=r(36580),j=r(71002),k=r(15861);function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function d(){}var h={};c(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(Z([])));m&&m!==t&&r.call(m,o)&&(h=m);var y=d.prototype=f.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==(0,j.Z)(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function Z(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=d,c(y,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),c(y,a,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=Z,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:Z(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}var P=(0,r(96692).Y3)();function T(e,t,r,n,o,i,a,c,s,u,l){return _.apply(this,arguments)}function _(){return(_=(0,k.Z)(S().mark((function e(t,r,n,o,i,a,c,s,u,l,f){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.listPermissions(t,r,n,o,i,a,c,s,u,l,f);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r,n,o,i,a,c){return C.apply(this,arguments)}function C(){return(C=(0,k.Z)(S().mark((function e(t,r,n,o,i,a,c,s){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.listPermissionOptions(t,r,n,o,i,a,void 0,c,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={application:L.KD,resource_type:L.vf,verb:L.E2},G=r(29215),A=r(28090),F=r(76857),D=r(1936),I=["row"],R=function(e){var t=e.row,r=(0,c.Z)(e,I);return t.disableSelection?f().createElement(F.Tooltip,{content:t.disabledContent,exitDelay:1500,entryDelay:1500},f().createElement(D.RowWrapper,(0,n.Z)({className:"rbac-c-disabled-row",row:t},r))):f().createElement(D.RowWrapper,(0,n.Z)({row:t},r))};R.propTypes={props:d().object,row:d().object};var B=r(86896),V=r(30893),q=["selectedPermissions","setSelectedPermissions"];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(e){var t=e.permissionReducer,r=t.permission,n=t.isLoading,o=t.options,i=o.application,a=o.operation,c=o.resource,s=t.expandSplats,u=t.isLoadingExpandSplats,l=e.roleReducer,f=l.isRecordLoading,p=l.selectedRole,d=e.costReducer.resourceTypes;return{permissions:r.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,r=e.resource_type,n=e.verb,o=e.permission,i=e.requires;return{application:t,resource:r,operation:n,uuid:o,requires:i}})),pagination:r.meta,isLoading:n||f,baseRole:p,applicationOptions:i.data.filter((function(e){return"*"!==e})),resourceOptions:c.data.filter((function(e){return"*"!==e})),operationOptions:a.data.filter((function(e){return"*"!==e})),expandedPermissions:s.data.map((function(e){return e.permission})),isLoadingExpandSplats:u,resourceTypes:d.data}},K=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,s=(0,c.Z)(e,q),p=(0,h.useDispatch)(),d=(0,B.Z)(),g=x("cost-management",["cost-management:*:*"]).hasAccess,b=[d.formatMessage(V.Z.application),d.formatMessage(V.Z.resourceType),d.formatMessage(V.Z.operation)],w=function(e){return p((r=(t=Y(Y(Y({},e),ee?{exclude_roles:ee}:{}),{},{allowed_only:!0})).limit,n=t.offset,o=t.orderBy,i=t.application,a=t.resourceType,c=t.verb,s=t.permission,l=void 0===(u=t.exclude_globals)||u,f=t.exclude_roles,d=t.allowed_only,h=t.options,{type:L.wI,payload:T(r,n,o,i,a,c,s,l,f,d,h)}));var t,r,n,o,i,a,c,s,u,l,f,d,h},O=function(e){return p((r=(t=Y(Y({},e),{},{allowedOnly:!0})).field,n=t.limit,o=t.offset,i=t.application,a=t.resourceType,c=t.verb,s=t.allowedOnly,u=t.options,{type:N[r],payload:M(r,n,o,i,a,c,s,u)}));var t,r,n,o,i,a,c,s,u},E=(0,h.useSelector)(W,h.shallowEqual),j=E.permissions,k=E.isLoading,S=E.pagination,P=E.baseRole,_=E.applicationOptions,C=E.resourceOptions,F=E.operationOptions,D=E.expandedPermissions,I=E.isLoadingExpandSplats,z=E.resourceTypes,K=(0,v.Z)(s).input,U=(0,m.default)(),$=(0,l.useState)({applications:[],resources:[],operations:[]}),Q=(0,i.Z)($,2),X=Q[0],H=Q[1],J=U.getState().values["role-type"],ee=U.getState().values["role-uuid"],te=(0,l.useState)(!1),re=(0,i.Z)(te,2),ne=re[0],oe=re[1],ie=(0,l.useState)(""),ae=(0,i.Z)(ie,2),ce=ae[0],se=ae[1],ue=(0,l.useState)(),le=(0,i.Z)(ue,2),fe=le[0],pe=le[1],de=function(e){return z.find((function(t){var r;return t.value===(null===(r=e.split(":"))||void 0===r?void 0:r[1])}))},he=(0,l.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"application",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),ve=(0,l.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"resource_type",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),me=(0,l.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"verb",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]);(0,l.useEffect)((function(){var e,t=null===(e=U.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===J&&t&&p((0,A.fp)(t)),U.change("has-cost-resources",!1),w(S),O({field:"application",limit:50}),O({field:"resource_type",limit:50}),O({field:"verb",limit:50}),function(){return p({type:L.e0,payload:{data:[]}})}}),[]),(0,l.useEffect)((function(){g&&p((0,G.A)())}),[g]),(0,l.useEffect)((function(){ve(X),me(X)}),[X.applications]),(0,l.useEffect)((function(){he(X),me(X)}),[X.resources]),(0,l.useEffect)((function(){he(X),ve(X)}),[X.operations]),(0,l.useEffect)((function(){K.onChange(t)}),[t]),(0,l.useEffect)((function(){var e;if(!(!P||"copy"!==J||U.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=U.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==P?void 0:P.uuid)||I||k)){var n,i,a,c,s,u,l,f,d,h,v,m,y,g=[],b=(null==P?void 0:P.access.filter((function(e){var t;return!!_.includes(null==e||null===(t=e.permission)||void 0===t?void 0:t.split(":")[0])||(g.push(e),!1)})))||[];if(U.change("not-allowed-permissions",g.map((function(e){return e.permission}))),0===D.length&&void 0===I){var w=(0,o.Z)(new Set(b.map((function(e){return e.permission.split(":")[0]}))));p((a=void 0===(i=(n={application:w.join()}).limit)?1e3:i,s=void 0===(c=n.offset)?0:c,u=n.orderBy,l=n.application,f=n.resourceType,d=n.verb,h=n.permission,m=void 0===(v=n.exclude_globals)||v,y=n.options,{type:L.e,payload:T(a,s,u,l,f,d,h,m,y)}))}else{var O=b.map((function(e){return e.permission.replace("*",".*")}));r((function(){return D.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(de(e)||{count:0}).count})).filter((function(e){return O.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),U.change("base-permissions-loaded",!0)}}}),[j,P]);var ye=function(e){return e.reduce((function(e,t){return{"":Y(Y({},null==e?void 0:e[""]),{},(0,a.Z)({},t,!0))}}),{"":{}})},ge={applications:(0,o.Z)(_).filter((function(e){return e.includes(ce)})).map((function(e){return{label:e,value:e}})),resources:(0,o.Z)(C).filter((function(e){return e.includes(ce)})).map((function(e){return{label:e,value:e}})),operations:(0,o.Z)(F).filter((function(e){return e.includes(ce)})).map((function(e){return{label:e,value:e}}))},be={label:f().createElement("div",null,d.formatMessage(V.Z.noResultsFound)),isDisabled:!0},we=ge[Object.keys(ge)[fe||0]].length>10;return f().createElement("div",{className:"rbac-c-permissions-table"},f().createElement(Z.M,(0,n.Z)({columns:b,isSelectable:!0,isCompact:!0,borders:!1,rows:function(e){return e.map((function(e){var r=e.application,n=e.resource,o=e.operation,i=e.uuid,a=e.requires;return{uuid:"".concat(r,":").concat(n,":").concat(o),requires:a,cells:[{title:r},n,o],selected:Boolean(t&&t.find((function(e){return e.uuid===i}))),disableSelection:"cost-management"===r&&(0===(de(i)||{count:0}).count||!g),disabledContent:f().createElement("div",null,d.formatMessage(g?V.Z.configureResourcesForPermission:V.Z.noCostManagementPermissions)," ",g?f().createElement("a",{href:"./settings/sources"},d.formatMessage(V.Z.configureCostSources)):null)}}))}(j),data:j,filterValue:"",noData:0===(null==j?void 0:j.length),noDataDescription:[d.formatMessage(V.Z.permissionNotDisplayedDescription)],fetchData:function(e){var t=e.limit,r=e.offset,n=e.applications,o=e.resources,i=e.operations;w({limit:t,offset:r,application:(n||X.applications).join(),resourceType:(o||X.resources).join(),verb:(i||X.operations).join()})},setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;H(Y(Y(Y(Y({},X),t?{applications:t}:X.applications),r?{resources:r}:X.resources),n?{operations:n}:X.operations))},isLoading:k||I,pagination:Y(Y({},S),{},{count:S.count}),checkedRows:t,setCheckedItems:function(e){var n=e(t).filter((function(e){var t,r=e.uuid;return"cost-management"!==e.application||(null===(t=de(r))||void 0===t?void 0:t.count)>0})).map((function(e){return{uuid:e.uuid,requires:e.requires}}));r(u()(n,t)?[]:n)},titlePlural:d.formatMessage(V.Z.permissions).toLowerCase(),titleSingular:d.formatMessage(V.Z.permission).toLowerCase(),showMoreTitle:d.formatMessage(ne?V.Z.seeLess:V.Z.seeMore),onFilter:function(e){return se(e)},onShowMore:we?function(){oe((function(){return!ne}))}:void 0,onChange:function(e,t){se(""),pe(t)},value:fe,filters:[{key:"applications",value:X.applications,placeholder:d.formatMessage(V.Z.filterByKey,{key:d.formatMessage(V.Z.application).toLowerCase()}),type:"group",selected:ye(X.applications),groups:[{type:ge.applications.length>0?"checkbox":"plain",items:ge.applications.length>0?(0,o.Z)(ge.applications).slice(0,ne?void 0:10):[be]}]},{key:"resources",value:X.resources,placeholder:d.formatMessage(V.Z.filterByKey,{key:d.formatMessage(V.Z.resourceType).toLowerCase()}),type:"group",selected:ye(X.resources),groups:[{type:ge.resources.length>0?"checkbox":"plain",items:ge.resources.length>0?(0,o.Z)(ge.resources).slice(0,ne?void 0:10):[be]}]},{key:"operations",value:X.operations,placeholder:d.formatMessage(V.Z.filterByKey,{key:d.formatMessage(V.Z.operation).toLowerCase()}),type:"group",selected:ye(X.operations),groups:[{type:ge.operations.length>0?"checkbox":"plain",items:ge.operations.length>0?(0,o.Z)(ge.operations).slice(0,ne?void 0:10):[be]}]}],isFilterable:!0,rowWrapper:R,tableId:"add-role-permissions"},s)))};K.propTypes={selectedPermissions:d().array,setSelectedPermissions:d().func};const U=K},91710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),c=r.n(a),s=r(50533),u=r(76857),l=r(41693),f=r(48880),p=r(29215),d=r(86896),h=r(30893);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t=e.costReducer,r=t.resourceTypes,n=t.isLoading,o=t.loadingResources,i=t.resources;return{resourceTypes:r.data,resources:i,isLoading:n,isLoadingResources:o>0}},g=function(e,t){var r=e[t.key];switch(t.type){case"toggle":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{isOpen:!r.isOpen})));case"select":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:r.selected.includes(t.selection)?r.selected.filter((function(e){return e!==t.selection})):[].concat((0,o.Z)(r.selected),[t.selection])})));case"selectAll":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:r.options.map((function(e){return e.value}))})));case"clear":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{selected:[]})));case"setOptions":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return m(m({},e),{},(0,i.Z)({},t.key,m(m({},r),{},{filteredOptions:r.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const b=function(e){var t=(0,d.Z)(),r=(0,s.useDispatch)(),v=(0,s.useSelector)(y,s.shallowEqual),b=v.resourceTypes,w=v.isLoading,O=v.isLoadingResources,E=v.resources,x=(0,l.Z)(e).input,Z=(0,f.default)(),L=Z.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),j=(0,a.useReducer)(g,L.reduce((function(e,t){return m(m({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),k=(0,n.Z)(j,2),S=k[0],P=k[1];return(0,a.useEffect)((function(){(Z.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return L.find((function(e){return(null==e?void 0:e.uuid)===t}))&&P({type:"select",selection:e,key:t})}))})),r((0,p.A)(undefined)),Z.change("has-cost-resources",!0)}),[]),(0,a.useEffect)((function(){w||(0,o.Z)(new Set(L.map((function(e){var t;return null===(t=b.find((function(t){var r;return t.value===(null===(r=e.uuid.split(":"))||void 0===r?void 0:r[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return t=e,r((0,p.R)(t));var t}))}),[b]),(0,a.useEffect)((function(){O||L.map((function(e){return P({type:"setOptions",key:e.uuid,options:E[(t=e.uuid,null===(r=b.find((function(e){var r;return e.value===(null===(r=t.split(":"))||void 0===r?void 0:r[1])})))||void 0===r||null===(n=r.path.split("/"))||void 0===n?void 0:n[5])]||[]});var t,r,n}))}),[O]),(0,a.useEffect)((function(){var e=Object.entries(S).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],resources:t[1].selected}}));x.onChange(e),Z.change("resource-definitions",e)}),[S]),c().createElement(u.Grid,{hasGutter:!0},c().createElement(u.GridItem,{md:4,className:"rbac-m-hide-on-sm"},c().createElement(u.Text,{component:u.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(h.Z.permissions))),c().createElement(u.GridItem,{md:8,className:"rbac-m-hide-on-sm"},c().createElement(u.Text,{component:u.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(h.Z.resourceDefinitions))),L.map((function(e){var r=e.uuid,n=S[r].filteredOptions;return c().createElement(c().Fragment,null,c().createElement(u.GridItem,{md:4,sm:12},c().createElement(u.Tooltip,{content:c().createElement("div",null,r)},c().createElement(u.FormGroup,{label:r.replace(/^cost-management:/,""),isRequired:!0}))),c().createElement(u.GridItem,{md:8,sm:12},c().createElement(u.Select,{className:"rbac-m-cost-resource-select",variant:u.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(h.Z.selectState),onToggle:function(e){P({type:"setFilter",key:r,filtervalue:""}),function(e,t){P({type:"toggle",key:e,isOpen:t})}(r,e)},onSelect:function(e,o){!function(e,t,r,n){P(r?{type:"selectAll",selection:t,key:n}:{type:"select",selection:t,key:n})}(0,o,o===t.formatMessage(h.Z.selectAll,{length:n.length}),r)},onClear:function(){return P({type:"clear",key:r})},selections:S[r].selected,isOpen:S[r].isOpen,onFilter:function(e){return e&&P({type:"setFilter",key:r,filtervalue:e.target.value})},"aria-labelledby":r,placeholderText:t.formatMessage(h.Z.selectResources),hasInlineFilter:!0},[c().createElement(u.SelectOption,{key:0,value:t.formatMessage(h.Z.selectAll,{length:n.length})})].concat((0,o.Z)(n.map((function(e,t){return c().createElement(u.SelectOption,{key:t+1,value:e.value})})))))))})))}},58854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),c=r(76857),s=r(86896),u=r(30893),l=function(e){var t=e.formFields,r=(0,s.Z)();return o().createElement("div",{className:"rbac"},o().createElement(c.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},r.formatMessage(u.Z.reviewDetails)),t)};l.propTypes={formFields:a().array};const f=l},80709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),c=r.n(a),s=r(76857),u=r(50533),l=r(41693),f=r(48880),p=r(86896),d=r(36580),h=r(71002),v=r(15861);function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function f(){}function p(){}function d(){}var v={};c(v,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(j([])));g&&g!==t&&r.call(g,o)&&(v=g);var b=d.prototype=f.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==(0,h.Z)(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function Z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=d,c(b,"constructor",d),c(d,"constructor",p),p.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(O.prototype),c(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),c(b,a,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),Z(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;Z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}var y=(0,r(96692).bD)(),g=function(){var e=(0,v.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getInventoryGroups(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(30893);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){return{resourceTypes:e.inventoryReducer.resourceTypes.data}},Z=function(e,t){var r,n,a=e[t.key];switch(t.type){case"toggle":return E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{isOpen:!a.isOpen})));case"select":return a.selected.some((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))?E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{selected:a.selected.filter((function(e){var r;return e.id!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))}))):void 0!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)&&void 0!==(null===(n=t.processedSelection)||void 0===n?void 0:n.name)?E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{selected:[].concat((0,o.Z)(a.selected),[t.processedSelection])}))):e;case"selectAll":return E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{selected:(0,o.Z)(a.options)})));case"setFilter":return E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{filteredOptions:a.options.filter((function(e){return e.value.includes(t.filterValue)}))})));case"clear":return E(E({},e),{},(0,i.Z)({},t.key,E(E({},a),{},{selected:[]})));default:return e}};const L=function(e){var t=(0,p.Z)(),r=(0,u.useDispatch)(),h=(0,l.Z)(e).input,v=(0,f.default)(),m=(0,a.useState)({}),y=(0,n.Z)(m,2),O=y[0],L=y[1],j=(0,u.useSelector)(x,u.shallowEqual).resourceTypes,k=v.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("inventory")})),S=(0,a.useReducer)(Z,k.reduce((function(e,t){return E(E({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),P=(0,n.Z)(S,2),T=P[0],_=P[1];return(0,a.useEffect)((function(){r({type:d.rF,payload:g()}),v.change("inventory-group-permissions",[])}),[]),(0,a.useEffect)((function(){var e=(j&&j.length?j:[]).reduce((function(e,t){return e[t.name]=t.id,e}),{});L(e)}),[j]),(0,a.useEffect)((function(){var e=Object.entries(T).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],groups:t[1].selected}}));h.onChange(e),v.change("inventory-group-permissions",e)}),[T]),c().createElement(s.Grid,{hasGutter:!0},c().createElement(s.GridItem,{md:4,className:"rbac-m-hide-on-sm"},c().createElement(s.Text,{component:s.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.permissions))),c().createElement(s.GridItem,{md:8,className:"rbac-m-hide-on-sm"},c().createElement(s.Text,{component:s.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.groupDefinition))),k.map((function(e){var r=e.uuid,n=j&&j.length?j:[];return c().createElement(c().Fragment,{key:"".concat(r)},c().createElement(s.GridItem,{md:4,sm:12},c().createElement(s.FormGroup,{label:r,isRequired:!0})),c().createElement(s.GridItem,{md:8,sm:12},c().createElement(s.Tooltip,{content:c().createElement("div",null,t.formatMessage(b.Z.inventoryGroupsTooltip))},c().createElement(s.Select,{className:"rbac-m-cost-resource-select",variant:s.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(b.Z.inventoryGroupsTypeAheadLabel),"aria-labelledby":r,selections:T[r].selected.map((function(e){return e.name})),placeholderText:t.formatMessage(b.Z.selectGroups),onSelect:function(e,o){var i;return function(e,t,r,n){var o={name:t,id:O[t]};if(r){var i,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(j);try{for(a.s();!(i=a.n()).done;){var c=i.value,s={name:c.name,id:c.id};_({type:"select",processedSelection:s,key:n})}}catch(e){a.e(e)}finally{a.f()}}else _({type:"select",processedSelection:o,key:n})}(0,o,o===t.formatMessage(b.Z.selectAll,{length:null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0}),r)},onToggle:function(e){_({type:"setFilter",key:r,filterValue:""}),function(e,t){_({type:"toggle",key:e,isOpen:t})}(r,e)},onClear:function(){return _({type:"clear",key:r})},onFilter:function(e){return e&&_({type:"setFilter",key:r,filtervalue:e.target.value})},isOpen:T[r].isOpen,hasInlineFilter:!0},[c().createElement(s.SelectOption,{key:"".concat(r,"-all"),value:t.formatMessage(b.Z.selectAll,{length:null==n?void 0:n.length})})].concat((0,o.Z)((n||[]).map((function(e,t){return c().createElement(s.SelectOption,{key:"".concat(r,"-").concat(t+1),value:null==e?void 0:e.name})}))))))))})))}},9599:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var n=function(e,t){var r=t&&t["add-permissions-table"]||[],n=r.some((function(e){return e.uuid.split(":")[0].includes("cost-management")})),o=r.some((function(e){return e.uuid.split(":")[0].includes("inventory")}));return"inventory-groups-role"===e&&n?"cost-resources-definition":"add-permissions"===e&&o?"inventory-groups-role":"add-permissions"===e&&n?"cost-resources-definition":"review"}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},45467:()=>{},81754:()=>{},70347:()=>{},11452:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},10108:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{},11177:()=>{}}]);
//# sourceMappingURL=../sourcemaps/3094.ecdff23e98bf710329bd464ac7ef4987.js.map