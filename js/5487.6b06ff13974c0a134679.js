(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[5487,6710],{53926:(e,t,a)=>{"use strict";a.d(t,{Lr:()=>n,cH:()=>l,nU:()=>r,rO:()=>o});var r,n,s=a(44914);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const o=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),l=s.createContext({keyHandler:null,sendRef:null})},16401:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(74848),n=a(46942),s=a.n(n),o=a(63068),l=a(69),i=a(86228),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c.apply(this,arguments)};const u=function(e){var t=e.className,a=e.title,n=e.actionsContent,u=e.ouiaId,m=e.ouiaSafe,p=void 0===m||m,d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=s()(t),g="RHI/Header",v=(0,l.useOUIAId)(g,u,p);return(0,r.jsxs)(i.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(o.Title,c({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":v,"data-ouia-safe":p},d,{children:a}))}),n?(0,r.jsx)(i.FlexItem,{children:n}):null]})}},405:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(74848),n=a(46942),s=a.n(n),o=function(){return o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};const l=function(e){var t,a=e.type,n=e.children,l=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["type","children","className"]),c=s()(l,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",o({},i,{className:c,children:[" ",n," "]}))}},54128:(e,t,a)=>{var r=a(31800),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},31800:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},38221:(e,t,a)=>{var r=a(23805),n=a(10124),s=a(99374),o=Math.max,l=Math.min;e.exports=function(e,t,a){var i,c,u,m,p,d,f=0,g=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var a=i,r=c;return i=c=void 0,f=t,m=e.apply(r,a)}function A(e){var a=e-d;return void 0===d||a>=t||a<0||v&&e-f>=u}function h(){var e=n();if(A(e))return E(e);p=setTimeout(h,function(e){var a=t-(e-d);return v?l(a,u-(e-f)):a}(e))}function E(e){return p=void 0,b&&i?y(e):(i=c=void 0,m)}function x(){var e=n(),a=A(e);if(i=arguments,c=this,d=e,a){if(void 0===p)return function(e){return f=e,p=setTimeout(h,t),g?y(e):m}(d);if(v)return clearTimeout(p),p=setTimeout(h,t),y(d)}return void 0===p&&(p=setTimeout(h,t)),m}return t=s(t)||0,r(a)&&(g=!!a.leading,u=(v="maxWait"in a)?o(s(a.maxWait)||0,t):u,b="trailing"in a?!!a.trailing:b),x.cancel=function(){void 0!==p&&clearTimeout(p),f=0,i=d=c=p=void 0},x.flush=function(){return void 0===p?m:E(n())},x}},10124:(e,t,a)=>{var r=a(9325);e.exports=function(){return r.Date.now()}},99374:(e,t,a)=>{var r=a(54128),n=a(23805),s=a(44394),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=l.test(e);return a||i.test(e)?c(e.slice(2),a?2:8):o.test(e)?NaN:+e}},44419:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(49634),n=a(58471);const s=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,n.o)(a,e),r)}},5314:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(44914),n=a.n(r),s=a(5556),o=a.n(s),l=a(49634),i=a(92284),c=a(21996);const u=e=>e?n().createElement(i.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?n().createElement(i.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&n().createElement(l.NavLink,{end:!0,to:e.to},e.title)||e.title):n().createElement(c.nv,{key:t})))):null;u.propTypes={breadcrumbs:o().object};const m=u},17039:(e,t,a)=>{"use strict";a.d(t,{N:()=>A,p:()=>h});var r=a(44914),n=a.n(r),s=a(5556),o=a.n(s),l=a(40748),i=a(32392),c=a(21996),u=a(5314),m=a(74848),p=a(46942),d=a.n(p);const f=n().createContext("light");var g=a(69),v=function(){return v=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},v.apply(this,arguments)};const b=function(e){var t=e.className,a=e.children,r=e.ouiaId,n=e.ouiaSafe,s=void 0===n||n,o=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),l=d()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),i="RHI/Header",c=(0,g.useOUIAId)(i,r,s);return(0,m.jsx)(f.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var n=d()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,m.jsx)("section",v({"data-ouia-component-type":i,"data-ouia-component-id":c,"data-ouia-safe":s},o,{className:"".concat(l," ").concat(n),"widget-type":"InsightsPageHeader",children:a}))}})};var y=a(16401);const A=({children:e,breadcrumbs:t})=>n().createElement(r.Fragment,null,t&&n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},n().createElement(u.A,{...t})),n().createElement(b,{className:"rbac-page-header"},e));A.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,breadcrumbs:o().array,paddingBottom:o().bool},A.defaultProps={paddingBottom:!1};const h=({title:e,renderTitleTag:t,description:a,children:s})=>n().createElement(r.Fragment,null,n().createElement(i.Flex,null,n().createElement(i.FlexItem,{className:"pf-v5-u-mb-sm"},n().createElement(y.A,{title:e||n().createElement(c.BX,null),className:"rbac-page-header__title"})),n().createElement(i.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&n().createElement(l.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?n().createElement(l.Text,{component:l.TextVariants.p},a):a),s);h.propTypes={title:o().node,renderTitleTag:o().func,description:o().node,children:o().oneOfType([o().node,o().arrayOf(o().node)])}},82543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W});var r=a(44914),n=a.n(r),s=a(69733),o=a(49634),l=a(6442),i=a(79994),c=a(42932),u=a(79300),m=a(40748),p=a(99608),d=a(73683),f=a(4290),g=a(1104),v=a(97681),b=a(17115),y=a.n(b),A=a(58731),h=a.n(A),E=a(20881),x=a(47143),O=a(38221),T=a.n(O),N=a(405),C=a(63767),I=a(89667),j=a(44419),k=a(58471),w=a(5314),M=a(54073),S=a(40262),P=a(40335),_=a(49573),F=a(38694),L=a(17039),R=a(8582),B=a(44097),$=a(42134),U=a(99843),G=a(61361);let H;const W=()=>{const e=(0,l.A)(),t=(0,j.A)(),a=(0,o.useNavigationType)(),b=(0,s.useDispatch)(),{username:A}=(0,o.useParams)(),[O,W]=(0,r.useState)(""),[D,V]=(0,r.useState)({}),[z,X]=(0,r.useState)(!1),[q,Z]=(0,r.useState)([]),J=(0,E.A)(),{roles:K,isLoadingRoles:Q,rolesWithAccess:Y,user:ee,isLoadingUsers:te,userExists:ae,adminGroup:re}=(0,s.useSelector)((({roleReducer:{error:e,roles:t,isLoading:a,rolesWithAccess:r},userReducer:{users:{data:n},isUserDataLoading:s},groupReducer:{adminGroup:o}})=>({adminGroup:o,roles:t,isLoadingRoles:a,rolesWithAccess:r,user:n&&n.filter((e=>e.username===A))[0],isLoadingUsers:s,userExists:e!==$.C$}))),{orgAdmin:ne,userAccessAdministrator:se}=(0,r.useContext)(S.A),oe=ne||se,le=e=>b((0,R.kN)(e));(0,r.useEffect)((()=>(J.appObjectId(A),b((0,U.Tt)({chrome:J})),b((0,B.hU)({...G.L6,limit:0,filters:{username:A}})),le({limit:20,offset:0,username:A}),X(!0),le({limit:20,offset:0,addFields:["groups_in"],username:A}).then((()=>X(!1))),H=T()(((e,t,a,r,n)=>le({limit:e,offset:t,displayName:a,addFields:r,username:n})),500),()=>J.appObjectId(void 0))),[]);const ie=[{title:e.formatMessage(P.A.roles)},{title:e.formatMessage(P.A.groups),cellTransforms:[p.w]},{title:e.formatMessage(P.A.permissions),cellTransforms:[p.w]},{title:e.formatMessage(P.A.lastModified)}],ce=[e.formatMessage(P.A.application),e.formatMessage(P.A.resourceType),e.formatMessage(P.A.operation)],ue=[{title:e.formatMessage(P.A.users),to:(0,k.o)(_.A.users.link)},{title:ae?A:e.formatMessage(P.A.invalidUser),isActive:!0}];return n().createElement(r.Fragment,null,ae?n().createElement(u.Stack,null,n().createElement(u.StackItem,null,n().createElement(L.N,{breadcrumbs:ue},n().createElement(L.p,{title:A,renderTitleTag:()=>te?n().createElement(I.A,{size:"xs",className:"rbac-c-user__label-skeleton"}):n().createElement(c.Label,{color:ee?.is_active&&"green"},e.formatMessage(ee?.is_active?P.A.active:P.A.inactive))},!te&&ee?n().createElement(r.Fragment,null,n().createElement(m.TextContent,null,`${e.formatMessage(P.A.orgAdministrator)}: `,ee?.is_org_admin?n().createElement(y(),{key:"yes-icon",className:"pf-v5-u-mx-sm"}):n().createElement(h(),{key:"no-icon",className:"pf-v5-u-mx-sm"}),e.formatMessage(ee?.is_org_admin?P.A.yes:P.A.no)),ee?.email&&n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(P.A.email)}: ${ee.email}`),ee?.username&&n().createElement(m.TextContent,null,n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(P.A.username)}: ${ee.username}`))):null))),n().createElement(u.StackItem,null,n().createElement(N.A,{type:"content",className:"rbac-c-user-roles"},n().createElement(F.Z,{columns:ie,isExpandable:!0,onExpand:(e,t,a,r,n)=>{r?V({...D,[n.uuid]:-1}):(V({...D,[n.uuid]:a}),2===a&&b((0,R.$F)(n.uuid)))},rows:((t,a,r)=>t?t.reduce(((t,{uuid:s,display_name:o,groups_in:l=[],modified:i,accessCount:c},u)=>[...t,{uuid:s,cells:[{title:o,props:{component:"th",isOpen:!1}},{title:z?n().createElement(I.A,{size:I.n.xs}):l.length,props:{isOpen:1===D[s]}},{title:c,props:{isOpen:2===D[s]}},{title:n().createElement(C.A,{type:(0,$.eW)(i),date:i})}]},{uuid:`${s}-groups`,parent:3*u,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:l?.length>0?n().createElement(f.X,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:d.a.compact,cells:[e.formatMessage(P.A.name),e.formatMessage(P.A.description)," "],rows:l.map((t=>({cells:[{title:n().createElement(k.A,{to:_.A["group-detail"].link.replace(":groupId",t.uuid)},t.name)},t.description,{title:r.uuid===t.uuid?null:n().createElement(k.A,{to:_.A["user-add-group-roles"].link.replace(":username",a).replace(":groupId",t.uuid),state:{name:t.name}},e.formatMessage(P.A.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},n().createElement(g.A,null),n().createElement(v.B,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},z?e.formatMessage(P.A.loading):e.formatMessage(P.A.noGroups))}]},{uuid:`${s}-permissions`,parent:3*u,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:Y&&Y[s]?Y[s].access?.length>0?n().createElement(f.X,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:d.a.compact,cells:ce,rows:Y[s].access.map((e=>({cells:e.permission.split(":")})))},n().createElement(g.A,null),n().createElement(v.B,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},e.formatMessage(P.A.noPermissions)):n().createElement(x.A,{rows:c,columns:ce,variant:d.a.compact})}]}]),[]):[])(K.data,A,re),data:K.data,filterValue:O,ouiaId:"user-details-table",fetchData:({limit:e,offset:t,name:a})=>{H(e,t,a,["groups_in"],A)},setFilterValue:({name:e})=>W(e),isLoading:Q,toolbarButtons:()=>[...oe?[n().createElement(k.A,{to:_.A["add-user-to-group"].link.replace(":username",A),key:"add-user-to-group",className:"rbac-m-hide-on-sm"},n().createElement(i.Button,{ouiaId:"add-user-to-group-button",variant:"primary","aria-label":"Add user to a group"},e.formatMessage(P.A.addUserToGroup))),{label:e.formatMessage(P.A.addUserToGroup),onClick:()=>{t(_.A["add-user-to-group"].link.replace(":username",A))}}]:[]],pagination:K.meta,filterPlaceholder:e.formatMessage(P.A.roleName).toLowerCase(),titlePlural:e.formatMessage(P.A.roles).toLowerCase(),titleSingular:e.formatMessage(P.A.role).toLowerCase(),tableId:"user"}),n().createElement(r.Suspense,null,n().createElement(o.Outlet,{context:{username:A,selectedRoles:q,setSelectedRoles:Z,closeUrl:_.A["user-detail"].link.replace(":username",A),addRolesToGroup:(e,t)=>b((0,U.Lu)(e,t))}}))))):n().createElement(r.Fragment,null,n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb pf-v5-u-pb-md"},n().createElement(w.A,{...ue})),n().createElement(M.A,{title:e.formatMessage(P.A.userNotFound),description:[e.formatMessage(P.A.userNotFoundDescription,{username:A})],actions:[n().createElement(i.Button,{key:"back-button",className:"pf-v5-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:()=>t("POP"!==a?-1:_.A.users.link)},e.formatMessage(P.A.backToPreviousPage))]})))}}}]);
//# sourceMappingURL=../sourcemaps/5487.6c8900cfe5668d47fa5a09cbbd17957d.js.map