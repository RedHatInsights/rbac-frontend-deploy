"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[4954,7664],{69957:(e,t,r)=>{r.d(t,{LP:()=>o,RI:()=>a,ZP:()=>s});var n=r(40400);const a={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},o=(0,n.IU)(a),s=o},44873:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(85893),a=r(94184),o=r.n(a),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};const i=function(e){var t,r=e.type,a=e.children,i=e.className,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["type","children","className"]),u=o()(i,((t={})["ins-l-".concat(r)]=void 0!==r,t));return(0,n.jsxs)("section",s({},l,{className:u},{children:[" ",a," "]}))}},93736:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(46801),a=r(65126);const o=function(e){var t=(0,n.useNavigate)();return function(r,n){return t((0,a.n)(r,e),n)}}},1227:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(29439),a=r(92950),o=r.n(a),s=r(86896),i=r(45697),l=r.n(i),u=r(30893),c=r(69957),m=r(76857),f=function(e){var t=e.title,r=e.text,i=e.onClose,l=e.onSubmit,f=e.isOpen,p=e.confirmButtonLabel,d=e.withCheckbox,g=(0,s.Z)(),b=(0,a.useState)(!1),v=(0,n.Z)(b,2),Z=v[0],h=v[1];return o().createElement(m.Modal,{className:"rbac",title:o().createElement("div",null,o().createElement(c.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:f,variant:m.ModalVariant.small,onClose:i,actions:[o().createElement(m.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:d&&!Z,variant:"danger",onClick:l},p),o().createElement(m.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:i},g.formatMessage(u.Z.cancel))]},o().createElement(m.Split,{hasGutter:!0},o().createElement(m.SplitItem,{isFilled:!0},o().createElement(m.Stack,{hasGutter:!0},o().createElement(m.TextContent,null,r)))),d?o().createElement(m.Checkbox,{isChecked:Z,onChange:function(){return h(!Z)},label:g.formatMessage(u.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};f.propTypes={text:l().any,title:l().string,confirmButtonLabel:l().string,onSubmit:l().func,onClose:l().func,isOpen:l().bool,withCheckbox:l().bool},f.defaultProps={withCheckbox:!1};const p=f},88093:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(87462),a=r(45987),o=r(92950),s=r.n(o),i=r(1936),l=r(45697),u=r.n(l),c=r(94184),m=r.n(c),f=["row"],p=function(e){var t,r=e.row,o=(0,a.Z)(e,f),l=r.status,u=null==l||null===(t=l.props)||void 0===t?void 0:t["data-is-active"];return s().createElement(i.RowWrapper,(0,n.Z)({className:m()("rbac__user-row",{"ins-m-inactive":!u}),row:r},o))};p.propTypes={row:u().shape({status:u().shape({props:u().shape({"data-is-active":u().bool,data:u().shape({isActive:u().bool})})})})};const d=p},9974:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(93433),a=r(4942),o=r(29439),s=r(87462),i=r(1936),l=r(92950),u=r.n(l),c=r(44012),m=r(86896),f=r(50533),p=r(46801),d=r(76857),g=r(55140),b=r(44873),v=r(30060),Z=r(30893),h=r(19756),M=r(11107),y=r(1227),O=r(88093),E=r(26794),w=r(65126),k=r(93736),C=r(4682);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.groups;return{members:r.members.data,pagination:r.members.meta,groupsPagination:n.pagination||n.meta,groupsFilters:n.filters,group:r,adminDefault:r.admin_default,platformDefault:r.platform_default,isLoading:r.members.isLoading}},j=function(e,t,r){return u().createElement(c.Z,(0,s.Z)({},r?Z.Z.removeMembersText:Z.Z.removeMemberText,{values:{b:function(e){return u().createElement("b",null,e)},name:e,group:t}}))};const I=function(){var e,t=(0,m.Z)(),r=(0,g.Z)(),s=(0,l.useState)(""),c=(0,o.Z)(s,2),x=c[0],I=c[1],L=(0,l.useState)([]),_=(0,o.Z)(L,2),N=_[0],D=_[1],A=(0,l.useState)(!1),B=(0,o.Z)(A,2),R=B[0],T=B[1],F=(0,l.useState)((function(){return null})),U=(0,o.Z)(F,2),z=U[0],G=U[1],V=(0,l.useState)({}),Q=(0,o.Z)(V,2),W=Q[0],q=Q[1],H=(0,p.useParams)().groupId,J=(0,f.useSelector)(S,f.shallowEqual),K=J.members,X=J.pagination,Y=J.groupsPagination,$=J.groupsFilters,ee=J.isLoading,te=J.adminDefault,re=J.platformDefault,ne=J.group,ae=(0,l.useContext)(E.Z),oe=ae.userAccessAdministrator,se=ae.orgAdmin,ie=(0,l.useRef)(se||oe),le=[{title:t.formatMessage(Z.Z.status),transforms:[i.nowrap]},{title:t.formatMessage(Z.Z.username)},{title:t.formatMessage(Z.Z.email)},{title:t.formatMessage(Z.Z.lastName)},{title:t.formatMessage(Z.Z.firstName)}],ue=(0,f.useDispatch)(),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X;ue((0,h.nd)(H,e,t))};(0,l.useEffect)((function(){ce()}),[]),(0,l.useEffect)((function(){ie.current=se||oe}),[se,oe]);var me=function(e){return ue((0,h.tz)(H,e)).then((function(){D([]),ce(void 0,P(P({},X),{},{offset:0})),ue((0,h.bt)({usesMetaInURL:!0,chrome:r}))}))},fe=((0,k.Z)(),(K||[]).map((function(e){return P(P({},e),{},{uuid:e.username})}))),pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,m.Z)();return e.reduce((function(e,a){var o=a.is_active,s=a.username,i=a.email,l=a.first_name,c=a.last_name;return[].concat((0,n.Z)(e),[{uuid:s,username:s,cells:[{title:u().createElement(d.Label,{color:o&&"green"},r.formatMessage(o?Z.Z.active:Z.Z.inactive)),props:{data:{isActive:o}}},s,i,c,l],selected:t.find((function(e){return e.uuid===s}))}])}),[])}(fe,N);return u().createElement(l.Fragment,null,u().createElement(y.Z,{text:W.text,title:W.title,confirmButtonLabel:W.confirmButtonLabel,isOpen:R,onClose:function(){return T(!1)},onSubmit:function(){T(!1),z()}}),u().createElement(b.Z,{type:"content",id:"tab-principals"},re||te?u().createElement(d.Card,null,u().createElement(d.CardBody,null,u().createElement(d.Bullseye,null,u().createElement(d.TextContent,null,u().createElement(d.Text,{component:d.TextVariants.h1},t.formatMessage(te?Z.Z.allOrgAdminsAreMembers:Z.Z.allUsersAreMembers)))))):u().createElement(v.M,{data:fe,isSelectable:ie.current,rows:pe,columns:le,actionResolver:function(){return ie.current?[{title:t.formatMessage(Z.Z.remove),onClick:function(e,r,n){G((function(){return function(){return me([n.username.title])}})),q({title:t.formatMessage(Z.Z.removeMemberQuestion),text:j(n.username.title,ne.name,!1),confirmButtonLabel:t.formatMessage(Z.Z.removeMember)}),T(!0)}}]:null},filterPlaceholder:t.formatMessage(Z.Z.username).toLowerCase(),titlePlural:t.formatMessage(Z.Z.members).toLowerCase(),titleSingular:t.formatMessage(Z.Z.member),ouiaId:"members-table",pagination:X,filterValue:x,fetchData:function(e){var t=e.limit,r=e.offset,n=e.name;return ce(n,{limit:t,offset:r})},setFilterValue:function(e){var t=e.name;return I(t)},checkedRows:N,isLoading:ee,rowWrapper:O.Z,setCheckedItems:function(e){D((function(t){return e(t)}))},toolbarButtons:function(){return(0,n.Z)(ie.current?[u().createElement(w.Z,{to:C.Z["group-add-members"].link.replace(":groupId",H),key:"remove-from-group",className:"rbac-m-hide-on-sm"},u().createElement(d.Button,{variant:"primary","aria-label":"Add member"},t.formatMessage(Z.Z.addMember))),{label:t.formatMessage(Z.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){}},{label:t.formatMessage(Z.Z.remove),props:{isDisabled:!N||!N.length>0,variant:"danger"},onClick:function(){var e=N.length>1,r=t.formatMessage(e?Z.Z.removeMembersQuestion:Z.Z.removeMemberQuestion);G((function(){return function(){return me(N.map((function(e){return e.uuid})))}})),q({title:r,confirmButtonLabel:r,text:j(e?N.length:N[0].uuid,ne.name,e)}),T(!0)}}]:[])},emptyProps:{title:t.formatMessage(Z.Z.noGroupMembers),description:[t.formatMessage(Z.Z.addUserToConfigure),""]},tableId:"group-members"})),u().createElement(l.Suspense,null,u().createElement(p.Outlet,{context:(e={},(0,a.Z)(e,C.Z["group-members-edit-group"].path,{group:ne,cancelRoute:C.Z["group-detail-members"].link.replace(":groupId",H),postMethod:function(){return ue((0,h.yi)(ne.uuid))}}),(0,a.Z)(e,C.Z["group-members-remove-group"].path,{postMethod:function(){return ue((0,h.bt)(P(P({},Y),{},{offset:0,filters:$,usesMetaInURL:!0,chrome:r})))},cancelRoute:C.Z["group-detail-members"].link.replace(":groupId",H),submitRoute:(0,M.zk)(C.Z.groups.link,P(P({},Y),{},{offset:0}),$),groupsUuid:[ne]}),(0,a.Z)(e,C.Z["group-add-members"].path,{fetchData:ce,cancelRoute:C.Z["group-detail-members"].link.replace(":groupId",H)}),e)})))}},44012:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(70655),a=r(92950),o=r(86896),s=r(680);function i(e){var t=(0,o.Z)(),r=t.formatMessage,n=t.textComponent,s=void 0===n?a.Fragment:n,i=e.id,l=e.description,u=e.defaultMessage,c=e.values,m=e.children,f=e.tagName,p=void 0===f?s:f,d=r({id:i,description:l,defaultMessage:u},c,{ignoreTag:e.ignoreTag});return"function"==typeof m?m(Array.isArray(d)?d:[d]):p?a.createElement(p,null,a.Children.toArray(d)):a.createElement(a.Fragment,null,d)}i.displayName="FormattedMessage";var l=a.memo(i,(function(e,t){var r=e.values,a=(0,n.__rest)(e,["values"]),o=t.values,i=(0,n.__rest)(t,["values"]);return(0,s.wU)(o,r)&&(0,s.wU)(a,i)}));l.displayName="MemoizedFormattedMessage";const u=l}}]);
//# sourceMappingURL=../sourcemaps/4954.94b4cb5e4465838f03916663a8a87df0.js.map