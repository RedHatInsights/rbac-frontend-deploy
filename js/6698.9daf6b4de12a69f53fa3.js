"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[6698,7664],{69957:(e,t,n)=>{n.d(t,{LP:()=>i,RI:()=>o,ZP:()=>a});var r=n(40400);const o={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},i=(0,r.IU)(o),a=i},62410:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(85893),o=n(92950),i=n.n(o),a=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},l=36e5,c=24*l,u=30*c,p=365*c,d=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},m=[{rightBound:1/0,description:function(e){return d(Math.round(e/p),"year")}},{rightBound:p,description:function(e){return d(Math.round(e/u),"month")}},{rightBound:u,description:function(e){return d(Math.round(e/c),"day")}},{rightBound:c,description:function(e){return d(Math.round(e/l),"hour")}},{rightBound:l,description:function(e){return d(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return m.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},v=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(o){return function(e,t,n,o){return void 0===o&&(o=""),(0,r.jsx)(a.Tooltip,s({},n,{content:(0,r.jsxs)("div",{children:[o,e]})},{children:t}))}(g("exact")(o),(0,r.jsx)("span",{children:g(e)(o)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const h=function(e){var t=e.date,n=e.type,o=void 0===n?"relative":n,a=e.extraTitle,s=e.tooltipProps,l=t instanceof Date?t:new Date(t),c=null==t||"Invalid Date"===l.toString()?"invalid":o;return(0,r.jsx)(i().Fragment,{children:v(c,s,a)(l)})}},39173:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(85893),o=n(94184),i=n.n(o),a=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};const l=function(e){var t=e.className,n=e.title,o=i()(t);return(0,r.jsx)(a.Title,s({headingLevel:"h1",size:"2xl",className:o,"widget-type":"InsightsPageHeaderTitle"},{children:n}))}},93736:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(46801),o=n(65126);const i=function(e){var t=(0,r.useNavigate)();return function(n,r){return t((0,o.n)(n,e),r)}}},1227:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(29439),o=n(92950),i=n.n(o),a=n(86896),s=n(45697),l=n.n(s),c=n(30893),u=n(69957),p=n(25864),d=function(e){var t=e.title,n=e.text,s=e.onClose,l=e.onSubmit,d=e.isOpen,m=e.confirmButtonLabel,f=e.withCheckbox,g=(0,a.Z)(),v=(0,o.useState)(!1),h=(0,r.Z)(v,2),b=h[0],y=h[1];return i().createElement(p.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(u.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:d,variant:p.ModalVariant.small,onClose:s,actions:[i().createElement(p.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:f&&!b,variant:"danger",onClick:l},m),i().createElement(p.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:s},g.formatMessage(c.Z.cancel))]},i().createElement(p.Split,{hasGutter:!0},i().createElement(p.SplitItem,{isFilled:!0},i().createElement(p.Stack,{hasGutter:!0},i().createElement(p.TextContent,null,n)))),f?i().createElement(p.Checkbox,{isChecked:b,onChange:function(){return y(!b)},label:g.formatMessage(c.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};d.propTypes={text:l().any,title:l().string,confirmButtonLabel:l().string,onSubmit:l().func,onClose:l().func,isOpen:l().bool,withCheckbox:l().bool},d.defaultProps={withCheckbox:!1};const m=d},76137:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(92950),o=n.n(r),i=n(45697),a=n.n(i),s=n(46801),l=n(25864),c=n(19571),u=function(e){return e?o().createElement(l.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?o().createElement(l.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&o().createElement(s.NavLink,{end:!0,to:e.to},e.title)||e.title):o().createElement(c.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:a().object};const p=u},51999:(e,t,n)=>{n.d(t,{Q:()=>h,y:()=>b});var r=n(92950),o=n.n(r),i=n(45697),a=n.n(i),s=n(25864),l=n(19571),c=n(76137),u=n(85893),p=n(94184),d=n.n(p);const m=o().createContext("light");var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)};const g=function(e){var t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","children"]),o=d()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return(0,u.jsx)(m.Consumer,{children:function(e){var t,i;void 0===e&&(e="light");var a=d()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((i={})["pf-m-light"]="light"===e,i));return(0,u.jsx)("section",f({},r,{className:"".concat(o," ").concat(a),"widget-type":"InsightsPageHeader"},{children:n}))}})};var v=n(39173),h=function(e){var t=e.children,n=e.breadcrumbs;return o().createElement(r.Fragment,null,n&&o().createElement("section",{className:"pf-c-page__main-breadcrumb"},o().createElement(c.Z,n)),o().createElement(g,{className:"rbac-page-header"},t))};h.propTypes={children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,breadcrumbs:a().array,paddingBottom:a().bool},h.defaultProps={paddingBottom:!1};var b=function(e){var t=e.title,n=e.renderTitleTag,i=e.description,a=e.children;return o().createElement(r.Fragment,null,o().createElement(s.Flex,null,o().createElement(s.FlexItem,{className:"pf-u-mb-sm"},o().createElement(v.Z,{title:t||o().createElement(l.h2,null),className:"rbac-page-header__title"})),o().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},n&&n())),i&&o().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof i?o().createElement(s.Text,{component:s.TextVariants.p},i):i),a)};b.propTypes={title:a().node,renderTitleTag:a().func,description:a().node,children:a().oneOfType([a().node,a().arrayOf(a().node)])}},95311:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var r,o=n(93433),i=n(4942),a=n(29439),s=n(92950),l=n.n(s),c=n(45697),u=n.n(c),p=n(86896),d=n(46801),m=n(50533),f=n(25864),g=n(39173),v=n(55140),h=n(4682),b=n(93736),y=n(28090),Z=n(51999),O=n(19571),E=n(19756),M=n(87462),P=n(1936),k=n(44012),I=n(65126),j=n(30060),w=n(45987),T=n(62410),_=n(11107),R=n(65916),x=n(85564),D=n.n(x),S=n(30893),C=["count"],L=["type"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return n.reduce((function(n,c){var u=c.resourceDefinitions,p=c.permission,d=c.modified,m=p.split(":"),f=(0,a.Z)(m,3),g=f[0],v=f[1],b=f[2];return[].concat((0,o.Z)(n),[{uuid:p,cells:[g,v,b].concat((0,o.Z)(e?[(p.includes("cost-management")||p.includes("inventory"))&&u.length>0?l().createElement(s.Fragment,{key:"resource-definitions"},l().createElement(I.Z,{to:h.Z["role-detail-permission"].link.replace(":roleId",t).replace(":permissionId",p)},D()(u.map((function(e){return e.attributeFilter.value}))).length)):l().createElement("span",{className:"rbac-c-text__disabled"},r.formatMessage(S.Z.notApplicable))]:[]),[l().createElement(s.Fragment,{key:"".concat(g,"-modified")},l().createElement(T.Z,{date:d,type:(0,_.mh)(d)}))]),selected:Boolean(null==i?void 0:i.find((function(e){return e.uuid===p})))}])}),[])},A={pagination:R.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},G="SET_PAGINATION",V="SELECT_PERMISSIONS",U="SHOW_REMOVE_MODAL",z="SUBMIT_REMOVE_MODAL",W="INITIATE_REMOVE_PERMISSION",K="SET_FILTERS",Q="SET_TOGGLED",q="INITIALIZE_ROLE",H=(r={},(0,i.Z)(r,G,(function(e,t){return B(B({},e),{},{pagination:B(B({},e.pagination),t)})})),(0,i.Z)(r,V,(function(e,t){var n=t.selection;return B(B({},e),{},{selectedPermissions:n})})),(0,i.Z)(r,U,(function(e,t){var n=t.showRemoveModal;return B(B({},e),{},{showRemoveModal:n})})),(0,i.Z)(r,z,(function(e){return B(B({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(r,W,(function(e,t){var n=t.confirmDelete,r=t.deleteInfo;return B(B({},e),{},{confirmDelete:n,showRemoveModal:!0,deleteInfo:r})})),(0,i.Z)(r,K,(function(e,t){return B(B({},e),{},{filters:B(B({},e.filters),t)})})),(0,i.Z)(r,Q,(function(e){return B(B({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(r,q,(function(e,t){var n=t.count,r=(0,w.Z)(t,C);return B(B(B({},e),r),{},{pagination:B(B({},e.pagination),{},{count:n})})})),r),J=function(e,t){var n=t.type,r=(0,w.Z)(t,L);return H[n]?H[n](e,r):e},X=n(1227);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=function(e,t,n){return l().createElement(k.Z,(0,M.Z)({},n?S.Z.permissionsWillNotBeGrantedThroughRole:S.Z.permissionWillNotBeGrantedThroughRole,{values:$($({b:function(e){return l().createElement("b",null,e)}},n?{permissions:e}:{permission:e}),{},{role:t.name})}))},te=function(e){var t=e.cantAddPermissions,n=(0,p.Z)(),r=(0,m.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),m.shallowEqual),c=r.role,u=r.isRecordLoading,d=(0,b.Z)(),g=(0,s.useReducer)(J,A),v=(0,a.Z)(g,2),Z=v[0],O=Z.pagination,E=Z.selectedPermissions,M=Z.showRemoveModal,k=Z.confirmDelete,w=Z.deleteInfo,T=Z.filters,_=Z.isToggled,R=Z.resources,x=Z.operations,D=v[1],C=(0,s.useState)(!0),L=(0,a.Z)(C,2),N=L[0],B=L[1],H=(0,m.useDispatch)(),Y=[{title:n.formatMessage(S.Z.application)},{title:n.formatMessage(S.Z.resourceType)},{title:n.formatMessage(S.Z.operation)},{title:n.formatMessage(S.Z.resourceDefinitions),transforms:[(0,P.info)({popover:n.formatMessage(S.Z.resourceDefinitionsApplyToCost),ariaLabel:n.formatMessage(S.Z.resourceDefinitionsApplyToCost)})]},{title:n.formatMessage(S.Z.lastCommit),transforms:[(0,P.cellWidth)(15)]}],te=t?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,s.useEffect)((function(){var e;if(Object.keys(c).length>0){var t=Object.entries(c.access.reduce((function(e,t){var n=e.resources,r=e.operations,i=t.permission.split(":"),s=(0,a.Z)(i,3),l=s[1],c=s[2];return{resources:n.includes(l)?n:[].concat((0,o.Z)(n),[l]),operations:r.includes(c)?r:[].concat((0,o.Z)(r),[c])}}),{resources:[],operations:[]})).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return $($({},e),{},(0,i.Z)({},r,o.map((function(e){return{label:e,value:e}}))))}),{}),n=t.resources,r=t.operations;D({type:q,resources:n,operations:r,count:c.access?c.access.length:0})}B(null==c||null===(e=c.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")||e.permission.includes("inventory")})))}),[c]);var ne=c&&c.access?(c.access||[]).filter((function(e){var t=e.permission.split(":"),n=(0,a.Z)(t,3),r=n[0],o=n[1],i=n[2],s=T.applications,l=T.resources,c=T.operations;return(!(s.length>0)||s.includes(r))&&(!(l.length>0)||l.includes(o))&&(!(c.length>0)||c.includes(i))})).map((function(e){return $($({uuid:e.permission},e),{},{modified:c.modified})})):[],re=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return H((0,y.lq)(c,t)).then((function(){H((0,y.fp)(c.uuid)),D({type:V,selection:[]})}))},oe=function(e){return e.reduce((function(e,t){return{"":$($({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},ie={label:l().createElement("div",null," ",n.formatMessage(S.Z.noResultsFound)),isDisabled:!0},ae=$({access:[],applications:[]},c),se=Object.values({applications:ae.applications,operations:x,resources:R}).find((function(e){return e.length>10})),le=ne.slice(O.offset,O.offset+O.limit);return l().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},M&&l().createElement(X.Z,{text:w.text,title:w.title,isOpen:M,confirmButtonLabel:w.confirmButtonLabel,onClose:function(){return D({type:U,showRemoveModal:!1})},onSubmit:function(){k(),D({type:z})}}),l().createElement(j.M,{columns:N?Y:Y.filter((function(e){return e.title!==n.formatMessage(S.Z.resourceDefinitions)})),rows:F(N,null==c?void 0:c.uuid,le,n,E),actionResolver:c.system?void 0:function(){return[{title:n.formatMessage(S.Z.remove),onClick:function(e,t,r){return D({type:W,confirmDelete:function(){return re([r])},deleteInfo:{title:n.formatMessage(S.Z.removePermissionQuestion),text:ee(r.uuid,c,!1),confirmButtonLabel:n.formatMessage(S.Z.removePermission)}})}}]},data:le,filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,n=e.offset;return D({type:G,limit:t,offset:n})},isSelectable:!c.system,setCheckedItems:function(e){D({type:V,selection:e(E).map((function(e){return{uuid:e.uuid}}))})},checkedRows:E,onShowMore:se?function(){D({type:Q})}:void 0,setFilterValue:function(e){var t=e.applications,n=e.resources,r=e.operations;D($($($({type:K},t?{applications:t}:T.applications),n?{resources:n}:T.resources),r?{operations:r}:T.operations))},toolbarButtons:function(){return t?[]:[l().createElement(I.Z,{to:h.Z["role-add-permission"].link.replace(":roleId",c.uuid),key:"role-add-permission",className:"rbac-m-hide-on-sm"},l().createElement(f.Button,{variant:"primary","aria-label":"Add Permission"},n.formatMessage(S.Z.addPermissions))),{label:n.formatMessage(S.Z.addPermission),props:{className:"rbac-m-hide-on-md"},onClick:function(){d(h.Z["role-add-permission"].link.replace(":roleId",c.uuid))}},{label:n.formatMessage(S.Z.remove),props:{isDisabled:!E.length>0},onClick:function(){var e=E.length>1;D({type:W,confirmDelete:function(){return re((0,o.Z)(E))},deleteInfo:{title:n.formatMessage(e?S.Z.removePermissionsQuestion:S.Z.removePermissionQuestion),text:ee(e?E.length:E[0].uuid,c,E.length>1),confirmButtonLabel:n.formatMessage(e?S.Z.removePermissions:S.Z.removePermission)}})}}]},isLoading:u,pagination:$($({},O),{},{count:ne.length}),titlePlural:n.formatMessage(S.Z.permissions),titleSingular:n.formatMessage(S.Z.permission),emptyProps:{title:n.formatMessage(S.Z.noRolePermissions),description:te},filters:[{key:"applications",value:0===T.applications.length?"":T.applications,placeholder:n.formatMessage(S.Z.filterByKey,{key:n.formatMessage(S.Z.application).toLowerCase()}),type:"group",selected:oe(T.applications),groups:[{type:ae.applications.length>0?"checkbox":"plain",items:ae.applications.length>0?ae.applications.slice(0,_?void 0:10).map((function(e){return{label:e,value:e}})):[ie]}]},{key:"resources",value:0===T.resources.length?"":T.resources,placeholder:n.formatMessage(S.Z.filterByKey,{key:n.formatMessage(S.Z.resourceType).toLowerCase()}),type:"group",selected:oe(T.resources),groups:[{type:R.length>0?"checkbox":"plain",items:R.length>0?R.slice(0,_?void 0:10):[ie]}]},{key:"operations",value:0===T.operations.length?"":T.operations,placeholder:n.formatMessage(S.Z.filterByKey,{key:n.formatMessage(S.Z.operation).toLowerCase()}),type:"group",selected:oe(T.operations),groups:[{type:x.length>0?"checkbox":"plain",items:x.length>0?x.slice(0,_?void 0:10):[ie]}]}],tableId:"role-permissions"}))};te.propTypes={cantAddPermissions:u().bool};const ne=te;var re=n(74368),oe=n(76137);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(e){var t,n=e.onDelete,r=(0,p.Z)(),c=(0,v.Z)(),u=(0,b.Z)(),M=(0,s.useState)(!1),P=(0,a.Z)(M,2),k=P[0],j=P[1],w=(0,s.useState)(!1),T=(0,a.Z)(w,2),x=T[0],D=T[1],C=(0,d.useParams)(),L=C.roleId,N=C.groupId,B=(0,m.useSelector)((function(e){var t,n,r,o,i,a,s,l,c;return ae(ae({role:e.roleReducer.selectedRole,isLoading:e.roleReducer.isRecordLoading},N&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(n=e.roleReducer)||void 0===n||null===(r=n.roles)||void 0===r?void 0:r.pagination)||R.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(s=a.groups)||void 0===s?void 0:s.pagination)||R.he,groupsFilters:(null===(l=e.groupReducer)||void 0===l||null===(c=l.groups)||void 0===c?void 0:c.filters)||{}})}),m.shallowEqual),F=B.role,A=B.group,G=B.isLoading,V=B.rolesPagination,U=B.rolesFilters,z=B.groupsPagination,W=B.groupsFilters,K=B.systemGroupUuid,Q=(0,m.useSelector)((function(e){return e.roleReducer.error!==_.VG})),q=(0,m.useSelector)((function(e){return e.groupReducer.error!==_.VG})),H=(0,m.useDispatch)(),J=function(){if(H((0,y.fp)(L)),N)if("default-access"!==N)H((0,E.yi)(N));else{if(K)return H((0,E.nV)(K,{})),c.appObjectId(K),function(){return c.appObjectId(void 0)};H((0,E.WD)({chrome:c}))}};(0,s.useEffect)((function(){return J(),c.appObjectId(L),function(){return c.appObjectId(void 0)}}),[L,N,K]),(0,s.useEffect)((function(){0===(null==F?void 0:F.accessCount)&&""!==(null==F?void 0:F.external_tenant)&&""!==(null==F?void 0:F.external_role_id)&&null!=F&&F.system&&D(!0)}),[F]);var X=function(){return[N?{title:r.formatMessage(S.Z.groups),to:(0,_.zk)((0,I.n)(h.Z.groups.link),z,W)}:{title:r.formatMessage(S.Z.roles),to:(0,_.zk)((0,I.n)(h.Z.roles.link),V,U)}].concat((0,o.Z)(q&&N&&("default-access"===N?K:q)?A?[{title:A&&A.name,to:(0,I.n)(h.Z["group-detail-roles"].link).replace(":groupId",N),isLoading:A&&A.loaded}]:[void 0]:q||!N?[]:[{title:r.formatMessage(S.Z.invalidGroup),isActive:!0}]),(0,o.Z)(q||!N?[{title:G?void 0:Q?(null==F?void 0:F.display_name)||(null==F?void 0:F.name):r.formatMessage(S.Z.invalidRole),isActive:!0}]:[]))},Y=!G&&F?F.display_name||F.name:void 0,$=!G&&F?F.description:void 0,ee=[l().createElement(f.DropdownItem,{component:l().createElement(I.Z,{onClick:function(){return j(!1)},to:h.Z["role-detail-edit"].link.replace(":roleId",L)},r.formatMessage(S.Z.edit)),key:"edit-role"}),l().createElement(f.DropdownItem,{component:l().createElement(I.Z,{onClick:n,to:h.Z["role-detail-remove"].link.replace(":roleId",L)},r.formatMessage(S.Z.delete)),className:"rbac-c-role__action",key:"delete-role"})];return l().createElement(s.Fragment,null,!q&&N||!Q?l().createElement(s.Fragment,null,l().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},l().createElement(oe.Z,X())),l().createElement(re.Z,{title:"".concat(q?"Role":"Group"," not found"),description:["".concat(q?"Role":"Group"," with ID ").concat(q?L:N," does not exist.")],actions:[l().createElement(f.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return u(-1)}},r.formatMessage(S.Z.backToPreviousPage))]})):l().createElement(s.Fragment,null,l().createElement(Z.Q,{breadcrumbs:X()},l().createElement(f.Level,null,l().createElement(f.LevelItem,null,l().createElement(g.Z,{title:Y||l().createElement(O.h2,null),className:"rbac-page-header__title"})),!G&&F&&!F.system&&l().createElement(f.LevelItem,null,l().createElement(f.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:l().createElement(f.KebabToggle,{onToggle:function(e){return j(e)},id:"role-actions-dropdown"}),isOpen:k,isPlain:!0,position:"right",dropdownItems:ee}))),$&&l().createElement(f.TextContent,{className:"rbac-page-header__description"},l().createElement(f.Text,{component:"p"},$))),G||!F?l().createElement(O.Wi,null):l().createElement(ne,{cantAddPermissions:x}),l().createElement(s.Suspense,null,l().createElement(d.Outlet,{context:(t={},(0,i.Z)(t,h.Z["role-detail-remove"].path,{afterSubmit:function(){H((0,y.Kt)(ae(ae({},V),{},{offset:0,filters:U,usesMetaInURL:!0,chrome:c})))},cancelRoute:h.Z["role-detail"].link.replace(":roleId",L),submitRoute:(0,_.zk)(h.Z.roles.link,ae(ae({},V),{},{offset:0}),U),isLoading:G}),(0,i.Z)(t,h.Z["role-detail-edit"].path,{afterSubmit:J,cancelRoute:h.Z["role-detail"].link.replace(":roleId",L),isLoading:G}),(0,i.Z)(t,h.Z["role-add-permission"].path,{isOpen:!0,role:F}),t)}))))};se.propTypes={onDelete:u().func};const le=se},44012:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(70655),o=n(92950),i=n(86896),a=n(680);function s(e){var t=(0,i.Z)(),n=t.formatMessage,r=t.textComponent,a=void 0===r?o.Fragment:r,s=e.id,l=e.description,c=e.defaultMessage,u=e.values,p=e.children,d=e.tagName,m=void 0===d?a:d,f=n({id:s,description:l,defaultMessage:c},u,{ignoreTag:e.ignoreTag});return"function"==typeof p?p(Array.isArray(f)?f:[f]):m?o.createElement(m,null,o.Children.toArray(f)):o.createElement(o.Fragment,null,f)}s.displayName="FormattedMessage";var l=o.memo(s,(function(e,t){var n=e.values,o=(0,r.__rest)(e,["values"]),i=t.values,s=(0,r.__rest)(t,["values"]);return(0,a.wU)(i,n)&&(0,a.wU)(o,s)}));l.displayName="MemoizedFormattedMessage";const c=l}}]);
//# sourceMappingURL=../sourcemaps/6698.e64e694ac1deb1f3c60825df8025bb5e.js.map