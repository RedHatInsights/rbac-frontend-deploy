(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[8760,459],{41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>n,dw:()=>o,e4:()=>s,ir:()=>r});var r,o,l=a(28416);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(o||(o={}));const n=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),s=l.createContext({keyHandler:null,sendRef:null})},46818:(e,t,a)=>{"use strict";a.d(t,{P8:()=>o});var r=a(78632);const o=()=>({className:r.Z.modifiers.nowrap})},7876:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(85893),o=a(94184),l=a.n(o),n=function(){return n=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};const s=function(e){var t,a=e.type,o=e.children,s=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]])}return a}(e,["type","children","className"]),c=l()(s,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",n({},i,{className:c,children:[" ",o," "]}))}},84414:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(62012),o=a(64756);const l=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,o.n)(a,e),r)}},34391:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var r=a(28416),o=a.n(r),l=a(25387),n=a(45697),s=a.n(n),i=a(2550),c=a(70214),m=a.n(c),u=a(31055),p=a(94269),d=a(94229),f=a(57043),g=a(23539),b=a(64380);const h=({title:e,text:t,onClose:a,onSubmit:n,isOpen:s,confirmButtonLabel:c,withCheckbox:h})=>{const y=(0,l.YB)(),[v,C]=(0,r.useState)(!1);return o().createElement(d.Modal,{className:"rbac",title:o().createElement("div",null,o().createElement(m(),{className:"ins-m-alert rbac-c__delete-icon"})," ",e),isOpen:s,variant:d.ModalVariant.small,onClose:a,actions:[o().createElement(u.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:h&&!v,variant:"danger",onClick:n},c),o().createElement(u.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:a},y.formatMessage(i.Z.cancel))]},o().createElement(f.Split,{hasGutter:!0},o().createElement(f.SplitItem,{isFilled:!0},o().createElement(g.Stack,{hasGutter:!0},o().createElement(b.TextContent,null,t)))),h?o().createElement(p.Checkbox,{isChecked:v,onChange:()=>C(!v),label:y.formatMessage(i.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-v5-u-mt-lg"}):null)};h.propTypes={text:s().any,title:s().string,confirmButtonLabel:s().string,onSubmit:s().func,onClose:s().func,isOpen:s().bool,withCheckbox:s().bool},h.defaultProps={withCheckbox:!1};const y=h},24869:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(28416),o=a.n(r),l=a(55573),n=a(45697),s=a.n(n),i=a(94184),c=a.n(i);const m=({row:e,...t})=>{const{status:a}=e,r=a?.props?.["data-is-active"];return o().createElement(l.e,{className:c()("rbac__user-row",{"ins-m-inactive":!r}),row:e,...t})};m.propTypes={row:s().shape({status:s().shape({props:s().shape({"data-is-active":s().bool,data:s().shape({isActive:s().bool})})})})};const u=m},66180:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(28416),o=a.n(r),l=a(95376),n=a(58826),s=a.n(n);const i=({title:e,icon:t,description:a,actions:r,...n})=>o().createElement(l.EmptyState,{variant:l.EmptyStateVariant.sm,...n},o().createElement(l.EmptyStateHeader,{titleText:o().createElement(o().Fragment,null,e),icon:o().createElement(l.EmptyStateIcon,{icon:t||s()}),headingLevel:"h4"}),o().createElement(l.EmptyStateBody,{className:"pf-v5-u-mb-md"},a.map(((e,t)=>o().createElement(o().Fragment,{key:t},e," ",o().createElement("br",null))))),o().createElement(l.EmptyStateFooter,null,r))},97246:(e,t,a)=>{"use strict";a.d(t,{M:()=>M});var r=a(28416),o=a.n(r),l=a(25387),n=a(45697),s=a.n(n),i=a(2550),c=a(75863),m=a(21081),u=a(49004),p=a(34844),d=a(15433),f=a(12913),g=a(31055),b=a(93297),h=a(95376),y=a(47826),v=a.n(y),C=a(29301),Z=a(68572),E=a(66180);const M=({isCompact:e,borders:t,columns:a,rows:n,toolbarButtons:s,data:y,actionResolver:M,areActionsDisabled:k,routes:S,titlePlural:w,titleSingular:B,pagination:x,paginationProps:F,filterValue:R,isLoading:I,emptyFilters:P,setFilterValue:D,checkedRows:O,isSelectable:A,isRowSelectable:T,fetchData:L,setCheckedItems:N,emptyProps:V,filterPlaceholder:j,rowWrapper:_,filters:q,isFilterable:W,onShowMore:H,showMoreTitle:Q,onFilter:U,onChange:Y,value:$,sortBy:z,onSort:G,isExpandable:K,onExpand:J,hideFilterChips:X,hideHeader:ee,noData:te,noDataDescription:ae,ouiaId:re,tableId:oe,containerRef:le,textFilterRef:ne})=>{const se=(0,l.YB)();return o().createElement(r.Fragment,null,S(),!I&&0===n?.length&&0===R?.length&&q.every((({value:e})=>!e))?o().createElement(E.Z,{title:se.formatMessage(i.Z.configureItems,{items:w}),icon:v(),description:[se.formatMessage(i.Z.toConfigureUserAccess),se.formatMessage(i.Z.createAtLeastOneItem,{item:B})],actions:s()[0],...V}):(()=>{const l=`${"desc"===z?.direction?"-":""}${a[z?.index]?.key}`;return o().createElement(r.Fragment,null,o().createElement(Z.ZP,{isSelectable:A,isRowSelectable:T,checkedRows:O,setCheckedItems:N,isLoading:I||te,data:y,titleSingular:B,filterValue:R,setFilterValue:D,sortBy:l,pagination:x,paginationProps:F,fetchData:L,toolbarButtons:s,filterPlaceholder:j,filters:q,isFilterable:W,onShowMore:H,showMoreTitle:Q,onFilter:U,onChange:Y,value:$,hideFilterChips:X,tableId:oe,containerRef:le,textFilterRef:ne}),I?o().createElement(f.Z,{variant:e?c.B.compact:void 0,rows:x?.limit,columns:a.map((e=>e.title))}):o().createElement(m.i,{canSelectAll:!1,"aria-label":`${w.toLowerCase()} table`,variant:e?c.B.compact:null,borders:t,...A&&n?.length>0&&{onSelect:(e,t,a,{uuid:r,cells:[o],requires:l})=>N((0,C.ZQ)([{uuid:r,name:o,requires:l}],t))},...K&&{onExpand:J},rows:n?.length>0?n:[{fullWidth:!0,cells:[{title:o().createElement(E.Z,{title:se.formatMessage(i.Z.noMatchingItemsFound,{items:w}),description:te&&ae?ae:[se.formatMessage(i.Z.filterMatchesNoItems,{items:w}),se.formatMessage(i.Z.tryChangingFilters)],actions:te&&ae?void 0:[o().createElement(h.EmptyStateActions,{key:"clear-filters"},o().createElement(g.Button,{variant:"link",ouiaId:"clear-filters-button",onClick:()=>{D(P),L({...x,offset:0,...P||{name:""}})}},se.formatMessage(i.Z.clearAllFilters)))]}),props:{colSpan:a.length}}]}],cells:a,...n?.length>0&&{actionResolver:M},className:0==n?.length?"ins-c-table-empty-state":"",areActionsDisabled:k,rowWrapper:_,sortBy:z,ouiaId:re,onSort:(e,t,a,r)=>G(e,t,a,r)},!ee&&o().createElement(u.x,null),o().createElement(p.R,null)),!x.noBottom&&o().createElement(d.Z,null,!I&&o().createElement(b.Pagination,{...(0,Z.Wz)(x,L,R,z,F),variant:"bottom",dropDirection:"up"})))})())};M.propTypes={...Z.ZP.propTypes,sortBy:s().shape({directions:s().string,index:s().number}),rowWrapper:s().any,isCompact:s().bool,isRowSelectable:s().func,borders:s().bool,emptyFilters:s().object,checkedRows:s().array,columns:s().array.isRequired,rows:s().array.isRequired,titlePlural:s().string,routes:s().func,actionResolver:s().func,areActionsDisabled:s().func,pagination:s().shape({noBottom:s().bool,limit:s().number,offset:s().number,count:s().number}),paginationProps:s().shape({toggleTemplate:s().func,isCompact:s().bool}),isExpandable:s().bool,onExpand:s().func,onSort:s().func,containerRef:s().node,noData:s().bool,hideFilterChips:s().bool,hideHeader:s().bool,noDataDescription:s().arrayOf(s().node),filters:s().array,tableId:s().string.isRequired},M.defaultProps={...Z.ZP.defaultProps,emptyFilters:{},isCompact:!1,borders:!0,routes:()=>null,hideFilterChips:!1,checkedRows:[],hideHeader:!1}},68572:(e,t,a)=>{"use strict";a.d(t,{Wz:()=>d,ZP:()=>y});var r=a(28416),o=a.n(r),l=a(31611),n=a(25387),s=a(45697),i=a.n(s),c=a(2550),m=a(96486),u=a(29301),p=a(74982);const d=(e={},t,a="",r="",o)=>({...o,itemCount:e.count,perPage:e.limit,page:(0,p.wy)(e.limit,e.offset),onSetPage:(o,l)=>{t({...e,offset:(0,p.vE)(l,e.limit),name:a,orderBy:r})},perPageOptions:[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],onPerPageSelect:(e,o)=>{t({offset:0,limit:o,name:a,orderBy:r})}}),f=(e,t=[],a=(()=>{}),r=[],o,l=(()=>!0))=>{const s=(0,n.YB)();return{count:t.length,items:[{title:s.formatMessage(c.Z.selectNone),onClick:()=>{a((()=>[]))}},{...!e&&r&&r.length>0?{title:s.formatMessage(c.Z.selectPage,{length:r.filter(l).length}),onClick:()=>{a((0,u.ZQ)(r,!0))}}:{}}],checked:(0,u.um)(r,t,l),onSelect:t=>{!e&&a((0,u.ZQ)(r,t))},id:o}},g=(e,t=(()=>{}),a=(()=>{}),r="",o={},l="",s,i,p,d,f,g,b,h,y,v,C)=>{const Z=(0,n.YB)();return{onChange:h,value:y,items:[...p&&p.length>0?p.map((({key:l,label:n,value:s,selected:i,placeholder:h,type:y="text",groups:C,items:E,innerRef:M})=>({label:n||(0,u.RI)(l),type:y??"text",filterValues:{innerRef:M,id:`filter-by-${l}`,key:`filter-by-${l}`,placeholder:h||Z.formatMessage(c.Z.filterByKey,{key:l}),value:s,selected:i,..."text"!==y?{isFilterable:d,onShowMore:f,showMoreTitle:g,onFilter:b}:{},groups:C,items:E,onChange:(e,n)=>{const s="string"==typeof n||Array.isArray(n)?n:Object.keys((0,m.pickBy)(n[""],(e=>e)));t({...r,...o,offset:0,[l]:s}),(0,u.Aq)((()=>a({...o,offset:0,orderBy:v,...p.reduce(((e,t)=>({...e,[t.key]:t.value})),{}),[l]:s}))).then((e=>(M?.current?.focus(),e)))},isDisabled:e}}))):[{label:(0,u.RI)(s||l),type:"text",filterValues:{innerRef:C,id:"filter-by-string",key:"filter-by-string",placeholder:Z.formatMessage(c.Z.filterByKey,{key:s||l}),value:r,onChange:(e,r)=>{t({...o,offset:0,name:r}),(0,u.Aq)((()=>a({...o,offset:0,name:r,orderBy:v}))).then((e=>(C?.current?.focus(),e)))},isDisabled:e}}],...i||[]]}},b=(e="",t,a={},r=(()=>{}),o=(()=>{}),l)=>({filters:t&&t.length>0?t.map((({key:e,value:t})=>t&&0!==t.length&&{category:(0,u.RI)(e),type:e,chips:Array.isArray(t)?t.map((e=>({name:e}))):[{name:t}]})).filter(Boolean):[{name:e}],onDelete:(e,[n],s)=>{const i=(e,t,a)=>s?"group"===t||"checkbox"===t?[]:"":a!==n.type?e:"checkbox"===t||"group"===t?e.filter((e=>e!==n.chips[0]?.name)):Array.isArray(e)?[]:"",c=t.reduce(((e,{key:t,value:a,type:r})=>({...e,[t]:i(a,r,t)})),{});r({...a,offset:0,name:"",...c}),o({...a,offset:0,orderBy:l,name:"",...c})}}),h=({isSelectable:e,isRowSelectable:t,checkedRows:a,setCheckedItems:r,isLoading:n,data:s,titleSingular:i,filterValue:c,setFilterValue:m,pagination:u,paginationProps:p,fetchData:h,sortBy:y,toolbarButtons:v,filterPlaceholder:C,filterItems:Z,filters:E,isFilterable:M,onShowMore:k,showMoreTitle:S,onFilter:w,onChange:B,value:x,hideFilterChips:F,tableId:R,textFilterRef:I})=>o().createElement(l.Z,{...e&&{bulkSelect:f(n,a,r,s,R,t)},filterConfig:g(n,m,h,c,u,i,C,Z,E,M,k,S,w,B,x,y,I),actionsConfig:{actions:v()},...!n&&{pagination:d(u,h,c,y,p)},...(c.length>0||E&&E.length>0)&&!F&&{activeFiltersConfig:b(c,E,u,m,h,y)}});h.propTypes={isSelectable:i().bool,isRowSelectable:i().func,checkedRows:i().array,setCheckedItems:i().func,isLoading:i().bool,data:i().array,titleSingular:i().string,filterValue:i().oneOfType([i().array,i().string]),setFilterValue:i().func,filters:i().arrayOf(i().shape({value:i().oneOfType([i().string,i().number,i().array]),key:i().string,placeholder:i().string})),isFilterable:i().bool,onShowMore:i().func,showMoreTitle:i().string,onFilter:i().func,onChange:i().func,value:i().any,pagination:i().shape({limit:i().number,offset:i().number,count:i().number}),paginationProps:i().shape({toggleTemplate:i().func,isCompact:i().bool}),sortBy:i().string,filterItems:i().arrayOf(i().object),filterPlaceholder:i().string,isCollapsible:i().bool,fetchData:i().func.isRequired,toolbarButtons:i().func,hideFilterChips:i().bool,tableId:i().string,textFilterRef:i().object},h.defaultProps={isCollapsible:!1,isSelectable:!1,isLoading:!1,data:[],titleSingular:"",filterValue:[],pagination:p.he,setCheckedItems:()=>{},setFilterValue:()=>{},sortBy:void 0,toolbarButtons:()=>[],filterItems:[],filters:[],isFilterable:!1,hideFilterChips:!1};const y=h},86009:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(46818),o=a(28416),l=a.n(o),n=a(25387),s=a(86706),i=a(62012),c=a(31055),m=a(88094),u=a(64380),p=a(74503),d=a(55140),f=a(7876),g=a(97246),b=a(78173),h=a(2550),y=a(77044),v=a(29301),C=a(34391),Z=a(24869),E=a(86601),M=a(64756),k=a(84414),S=a(14289);const w=({groupReducer:{selectedGroup:e,groups:t}})=>({members:e.members.data,pagination:e.members.meta,groupsPagination:t.pagination||t.meta,groupsFilters:t.filters,group:e,adminDefault:e.admin_default,platformDefault:e.platform_default,isLoading:e.members.isLoading}),B=(e,t,a)=>l().createElement(n._H,{...a?h.Z.removeMembersText:h.Z.removeMemberText,values:{b:e=>l().createElement("b",null,e),name:e,group:t}}),x=()=>{const e=(0,n.YB)(),t=(0,d.Z)(),[a,x]=(0,o.useState)(""),[F,R]=(0,o.useState)([]),[I,P]=(0,o.useState)(!1),[D,O]=(0,o.useState)((()=>null)),[A,T]=(0,o.useState)({}),{groupId:L}=(0,i.useParams)(),{members:N,pagination:V,groupsPagination:j,groupsFilters:_,isLoading:q,adminDefault:W,platformDefault:H,group:Q}=(0,s.useSelector)(w,s.shallowEqual),{userAccessAdministrator:U,orgAdmin:Y}=(0,o.useContext)(E.Z),$=(0,o.useRef)(Y||U),z=[{title:e.formatMessage(h.Z.status),transforms:[r.P8]},{title:e.formatMessage(h.Z.username)},{title:e.formatMessage(h.Z.email)},{title:e.formatMessage(h.Z.lastName)},{title:e.formatMessage(h.Z.firstName)}],G=(0,s.useDispatch)(),K=(e,t=V)=>{G((0,y.nd)(L,e,t))};(0,o.useEffect)((()=>{K()}),[]),(0,o.useEffect)((()=>{$.current=Y||U}),[Y,U]);const J=e=>G((0,y.tz)(L,e)).then((()=>{R([]),K(void 0,{...V,offset:0}),G((0,y.bt)({usesMetaInURL:!0,chrome:t}))})),X=((0,k.Z)(),(N||[]).map((e=>({...e,uuid:e.username})))),ee=((e,t=[])=>{const a=(0,n.YB)();return e.reduce(((e,{is_active:r,username:o,email:n,first_name:s,last_name:i})=>[...e,{uuid:o,username:o,cells:[{title:l().createElement(b.Label,{color:r&&"green"},a.formatMessage(r?h.Z.active:h.Z.inactive)),props:{data:{isActive:r}}},o,n,i,s],selected:t.find((e=>e.uuid===o))}]),[])})(X,F);return l().createElement(o.Fragment,null,l().createElement(C.Z,{text:A.text,title:A.title,confirmButtonLabel:A.confirmButtonLabel,isOpen:I,onClose:()=>P(!1),onSubmit:()=>{P(!1),D()}}),l().createElement(f.Z,{type:"content",id:"tab-principals"},H||W?l().createElement(m.Card,null,l().createElement(m.CardBody,null,l().createElement(p.Bullseye,null,l().createElement(u.TextContent,null,l().createElement(u.Text,{component:u.TextVariants.h1},e.formatMessage(W?h.Z.allOrgAdminsAreMembers:h.Z.allUsersAreMembers)))))):l().createElement(g.M,{data:X,isSelectable:$.current,rows:ee,columns:z,actionResolver:()=>$.current?[{title:e.formatMessage(h.Z.remove),onClick:(t,a,r)=>{O((()=>()=>J([r.username.title]))),T({title:e.formatMessage(h.Z.removeMemberQuestion),text:B(r.username.title,Q.name,!1),confirmButtonLabel:e.formatMessage(h.Z.removeMember)}),P(!0)}}]:null,filterPlaceholder:e.formatMessage(h.Z.username).toLowerCase(),titlePlural:e.formatMessage(h.Z.members).toLowerCase(),titleSingular:e.formatMessage(h.Z.member),ouiaId:"members-table",pagination:V,filterValue:a,fetchData:({limit:e,offset:t,name:a})=>K(a,{limit:e,offset:t}),setFilterValue:({name:e})=>x(e),checkedRows:F,isLoading:q,rowWrapper:Z.Z,setCheckedItems:e=>{R((t=>e(t)))},toolbarButtons:()=>[...$.current?[l().createElement(M.Z,{to:S.Z["group-add-members"].link.replace(":groupId",L),key:"remove-from-group",className:"rbac-m-hide-on-sm"},l().createElement(c.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(h.Z.addMember))),{label:e.formatMessage(h.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:()=>{}},{label:e.formatMessage(h.Z.remove),props:{isDisabled:!F||!F.length>0,variant:"danger"},onClick:()=>{const t=F.length>1,a=e.formatMessage(t?h.Z.removeMembersQuestion:h.Z.removeMemberQuestion);O((()=>()=>J(F.map((e=>e.uuid))))),T({title:a,confirmButtonLabel:a,text:B(t?F.length:F[0].uuid,Q.name,t)}),P(!0)}}]:[]],emptyProps:{title:e.formatMessage(h.Z.noGroupMembers),description:[e.formatMessage(h.Z.addUserToConfigure),""]},tableId:"group-members"})),l().createElement(o.Suspense,null,l().createElement(i.Outlet,{context:{[S.Z["group-members-edit-group"].path]:{group:Q,cancelRoute:S.Z["group-detail-members"].link.replace(":groupId",L),postMethod:()=>G((0,y.yi)(Q.uuid))},[S.Z["group-members-remove-group"].path]:{postMethod:()=>G((0,y.bt)({...j,offset:0,filters:_,usesMetaInURL:!0,chrome:t})),cancelRoute:S.Z["group-detail-members"].link.replace(":groupId",L),submitRoute:(0,v.zk)(S.Z.groups.link,{...j,offset:0},_),groupsUuid:[Q]},[S.Z["group-add-members"].path]:{fetchData:K,cancelRoute:S.Z["group-detail-members"].link.replace(":groupId",L)}}})))}},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/8760.0eaaa45a0a2e10c0cd8197d765ac175d.js.map