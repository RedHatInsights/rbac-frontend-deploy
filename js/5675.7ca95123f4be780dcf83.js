(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[5675],{78357:(e,t,a)=>{"use strict";a.d(t,{Wt:()=>p,DR:()=>d});var n=a(66029),l=a.n(n),i=a(84457),o=a(56787),s=a(23971),r=a(8643),c=a(88706);const d={all:"all",none:"none",page:"page",nonePage:"nonePage"},p=e=>{var{isDataPaginated:t=!0,canSelectAll:a,pageSelected:p,pagePartiallySelected:m,pageCount:g,selectedCount:u=0,totalCount:f=0,ouiaId:h="BulkSelect",onSelect:b,menuToggleCheckboxProps:v}=e,k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a}(e,["isDataPaginated","canSelectAll","pageSelected","pagePartiallySelected","pageCount","selectedCount","totalCount","ouiaId","onSelect","menuToggleCheckboxProps"]);const[E,y]=(0,n.useState)(!1),_=(0,n.useMemo)((()=>l().createElement(l().Fragment,null,l().createElement(i.h,{ouiaId:`${h}-select-none`,value:d.none,key:d.none},"Select none (0)"),t&&l().createElement(i.h,{ouiaId:`${h}-select-page`,value:d.page,key:d.page},"Select page"+(g?` (${g})`:"")),a&&l().createElement(i.h,{ouiaId:`${h}-select-all`,value:d.all,key:d.all},"Select all"+(f?` (${f})`:"")))),[t,a,h,g,f]),O=t?d.page:d.all,S=t?d.nonePage:d.none,C=()=>y(!E);return l().createElement(o.L,Object.assign({shouldFocusToggleOnSelect:!0,ouiaId:`${h}-dropdown`,onSelect:(e,t)=>{y(!E),null==b||b(t)},isOpen:E,onOpenChange:e=>y(e),toggle:e=>l().createElement(s.O,{ref:e,isExpanded:E,onClick:C,"aria-label":"Bulk select toggle","data-ouia-component-id":`${h}-toggle`,splitButtonOptions:{items:[l().createElement(r.O,Object.assign({ouiaId:`${h}-checkbox`,id:`${h}-checkbox`,key:"bulk-select-checkbox","aria-label":`Select ${O}`,isChecked:t&&m||!t&&u>0&&u<f?null:p||u===f,onChange:e=>null==b?void 0:b(e&&null!==e?O:S)},v)),u>0?l().createElement("span",{onClick:C,"data-ouia-component-id":`${h}-text`,key:"bulk-select-text"},`${u} selected`):null]}})},k),l().createElement(c.s,null,_))}},25701:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n=a(66029),l=a.n(n),i=a(32045),o=a(28191),s=a(92298),r=a(15627),c=a(79851),d=a(34512),p=a(68774),m=a(68340),g=a(47173),u=a(15265);const f=(0,a(77232).QM)({iconMinWidth:{minWidth:"48px"}}),h=({title:e,subtitle:t,linkProps:a,icon:n,label:h,breadcrumbs:b=null,actionMenu:v,ouiaId:k="ContentHeader"})=>{const E=f();return l().createElement(i.NP,{variant:"light"},b&&l().createElement("div",{className:"pf-v5-u-mb-md"},b),l().createElement(o.k,null,n&&l().createElement(l().Fragment,null,l().createElement(s.B,{alignSelf:{default:"alignSelfCenter"},className:`${E.iconMinWidth}`},n),l().createElement(r.i,{orientation:{default:"vertical"}})),l().createElement(s.B,{flex:{default:"flex_1"}},l().createElement(c.P,{hasGutter:!0},l().createElement(d.J,null,l().createElement(p.D,null,l().createElement(m.x,{className:"pf-v5-u-mb-sm",component:"h1",ouiaId:`${k}-title`},e))),h&&l().createElement(d.J,null,h),l().createElement(d.J,{isFilled:!0}),v&&l().createElement(d.J,null,v)),l().createElement(p.D,null,l().createElement(m.x,{component:"p",ouiaId:`${k}-subtitle`},t),a&&l().createElement(g.zx,Object.assign({variant:g.Wu.link,ouiaId:`${k}-link-button`,isInline:!0,icon:a.isExternal?l().createElement(u.ExternalLinkAltIcon,null):null,iconPosition:"end"},a),a.label)))))}},8643:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});var n=a(65353),l=a(66029),i=a(54783),o=a(38296),s=a(62472);class r extends l.Component{constructor(e){super(e),this.handleChange=e=>{this.props.onChange(e.target.checked,e)},this.calculateChecked=()=>{const{isChecked:e,defaultChecked:t}=this.props;return null!==e&&(void 0!==e?e:t)},this.state={ouiaStateId:(0,s.getDefaultOUIAId)(r.displayName)}}render(){const e=this.props,{className:t,isValid:a,isDisabled:c,isChecked:d,children:p,ouiaId:m,ouiaSafe:g,onChange:u,defaultChecked:f,id:h}=e,b=(0,n.__rest)(e,["className","isValid","isDisabled","isChecked","children","ouiaId","ouiaSafe","onChange","defaultChecked","id"]),v=p&&l.createElement("span",{className:(0,o.css)(i.Z.checkLabel,t),"aria-hidden":"true",id:h},p);return l.createElement("label",{className:(0,o.css)(i.Z.check,!p&&i.Z.modifiers.standalone,t)},l.createElement("input",Object.assign({className:(0,o.css)(i.Z.checkInput)},void 0!==this.calculateChecked()&&{onChange:this.handleChange},{name:h,type:"checkbox",ref:e=>e&&(e.indeterminate=null===d),"aria-invalid":!a,disabled:c},void 0!==f?{defaultChecked:f}:{checked:this.calculateChecked()},(0,s.getOUIAProps)(r.displayName,void 0!==m?m:this.state.ouiaStateId,g),b)),v)}}r.displayName="MenuToggleCheckbox",r.defaultProps={isValid:!0,isDisabled:!1,onChange:()=>{}}},32045:(e,t,a)=>{"use strict";a.d(t,{Dk:()=>n,NP:()=>g,xB:()=>l});var n,l,i=a(65353),o=a(66029),s=a(41145),r=a(38296),c=a(80164),d=a(31495);!function(e){e.default="default",e.light="light",e.dark="dark",e.darker="darker"}(n||(n={})),function(e){e.default="default",e.nav="nav",e.subNav="subnav",e.breadcrumb="breadcrumb",e.tabs="tabs",e.wizard="wizard"}(l||(l={}));const p={[l.default]:s.Z.pageMainSection,[l.nav]:s.Z.pageMainNav,[l.subNav]:s.Z.pageMainSubnav,[l.breadcrumb]:s.Z.pageMainBreadcrumb,[l.tabs]:s.Z.pageMainTabs,[l.wizard]:s.Z.pageMainWizard},m={[n.default]:"",[n.light]:s.Z.modifiers.light,[n.dark]:s.Z.modifiers.dark_200,[n.darker]:s.Z.modifiers.dark_100},g=e=>{var{className:t="",children:a,variant:n="default",type:g="default",padding:u,isFilled:f,isWidthLimited:h=!1,isCenterAligned:b=!1,stickyOnBreakpoint:v,hasShadowTop:k=!1,hasShadowBottom:E=!1,hasOverflowScroll:y=!1,"aria-label":_,component:O="section"}=e,S=(0,i.__rest)(e,["className","children","variant","type","padding","isFilled","isWidthLimited","isCenterAligned","stickyOnBreakpoint","hasShadowTop","hasShadowBottom","hasOverflowScroll","aria-label","component"]);const{height:C,getVerticalBreakpoint:w}=o.useContext(d.z1);o.useEffect((()=>{y&&!_&&console.warn("PageSection: An accessible aria-label is required when hasOverflowScroll is set to true.")}),[y,_]);const P=O;return o.createElement(P,Object.assign({},S,{className:(0,r.css)(p[g],(0,c.wt)(u,s.Z),(0,c.wt)(v,s.Z,"sticky-",w(C),!0),m[n],!1===f&&s.Z.modifiers.noFill,!0===f&&s.Z.modifiers.fill,h&&s.Z.modifiers.limitWidth,h&&b&&g!==l.subNav&&s.Z.modifiers.alignCenter,k&&s.Z.modifiers.shadowTop,E&&s.Z.modifiers.shadowBottom,y&&s.Z.modifiers.overflowScroll,t)},y&&{tabIndex:0},{"aria-label":_}),h&&o.createElement("div",{className:(0,r.css)(s.Z.pageMainBody)},a),!h&&a)};g.displayName="PageSection"},68774:(e,t,a)=>{"use strict";a.d(t,{D:()=>s});var n=a(65353),l=a(66029),i=a(62873),o=a(38296);const s=e=>{var{children:t,className:a="",isVisited:s=!1}=e,r=(0,n.__rest)(e,["children","className","isVisited"]);return l.createElement("div",Object.assign({},r,{className:(0,o.css)(i.Z.content,s&&i.Z.modifiers.visited,a)}),t)};s.displayName="TextContent"},79851:(e,t,a)=>{"use strict";a.d(t,{P:()=>s});var n=a(65353),l=a(66029),i=a(89059),o=a(38296);const s=e=>{var{hasGutter:t=!1,isWrappable:a=!1,className:s="",children:r=null,component:c="div"}=e,d=(0,n.__rest)(e,["hasGutter","isWrappable","className","children","component"]);const p=c;return l.createElement(p,Object.assign({},d,{className:(0,o.css)(i.Z.split,t&&i.Z.modifiers.gutter,a&&i.Z.modifiers.wrap,s)}),r)};s.displayName="Split"},34512:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});var n=a(65353),l=a(66029),i=a(89059),o=a(38296);const s=e=>{var{isFilled:t=!1,className:a="",children:s=null}=e,r=(0,n.__rest)(e,["isFilled","className","children"]);return l.createElement("div",Object.assign({},r,{className:(0,o.css)(i.Z.splitItem,t&&i.Z.modifiers.fill,a)}),s)};s.displayName="SplitItem"},36452:(e,t,a)=>{"use strict";a.d(t,{sD:()=>s,GM:()=>i,hb:()=>r});var n=a(66029),l=a.n(n);const i={rowClick:"rowClick"},o=(0,n.createContext)({subscribe:()=>()=>null,trigger:()=>null}),s=({children:e})=>{const[t,a]=(0,n.useState)({[i.rowClick]:{}}),s=(0,n.useCallback)(((e,...a)=>{Object.values(t[e]).forEach((e=>{e(...a)}))}),[t]);return l().createElement(o.Provider,{value:{subscribe:(e,t)=>{const n=crypto.randomUUID();return a((a=>Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),{[n]:t})}))),()=>{a((t=>{const a=Object.assign({},t);return delete a[e][n],a}))}},trigger:s}},e)},r=()=>(0,n.useContext)(o)},72640:(e,t,a)=>{"use strict";a.d(t,{GM:()=>i.GM,H9:()=>l.ZP,VO:()=>o.ZP,aJ:()=>n.aJ,hb:()=>i.hb}),a(93302);var n=a(16623),l=(a(22479),a(84816),a(65612),a(94034),a(66828)),i=a(36452),o=a(16503)},41145:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n}),a(92084);const n={avatar:"pf-v5-c-avatar",brand:"pf-v5-c-brand",button:"pf-v5-c-button",contextSelector:"pf-v5-c-context-selector",dirRtl:"pf-v5-m-dir-rtl",drawer:"pf-v5-c-drawer",masthead:"pf-v5-c-masthead",modifiers:{light:"pf-m-light",menu:"pf-m-menu",hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",read:"pf-m-read",selected:"pf-m-selected",unread:"pf-m-unread",attention:"pf-m-attention",expanded:"pf-m-expanded",collapsed:"pf-m-collapsed",pageInsets:"pf-m-page-insets",insetNone:"pf-m-inset-none",fill:"pf-m-fill",noFill:"pf-m-no-fill",limitWidth:"pf-m-limit-width",alignCenter:"pf-m-align-center",overflowScroll:"pf-m-overflow-scroll",shadowBottom:"pf-m-shadow-bottom",shadowTop:"pf-m-shadow-top",stickyTop:"pf-m-sticky-top",stickyBottom:"pf-m-sticky-bottom",stickyTopOnSmHeight:"pf-m-sticky-top-on-sm-height",stickyBottomOnSmHeight:"pf-m-sticky-bottom-on-sm-height",stickyTopOnMdHeight:"pf-m-sticky-top-on-md-height",stickyBottomOnMdHeight:"pf-m-sticky-bottom-on-md-height",stickyTopOnLgHeight:"pf-m-sticky-top-on-lg-height",stickyBottomOnLgHeight:"pf-m-sticky-bottom-on-lg-height",stickyTopOnXlHeight:"pf-m-sticky-top-on-xl-height",stickyBottomOnXlHeight:"pf-m-sticky-bottom-on-xl-height",stickyTopOn_2xlHeight:"pf-m-sticky-top-on-2xl-height",stickyBottomOn_2xlHeight:"pf-m-sticky-bottom-on-2xl-height",light_100:"pf-m-light-100",dark_100:"pf-m-dark-100",dark_200:"pf-m-dark-200",padding:"pf-m-padding",noPadding:"pf-m-no-padding",paddingOnSm:"pf-m-padding-on-sm",noPaddingOnSm:"pf-m-no-padding-on-sm",paddingOnMd:"pf-m-padding-on-md",noPaddingOnMd:"pf-m-no-padding-on-md",paddingOnLg:"pf-m-padding-on-lg",noPaddingOnLg:"pf-m-no-padding-on-lg",paddingOnXl:"pf-m-padding-on-xl",noPaddingOnXl:"pf-m-no-padding-on-xl",paddingOn_2xl:"pf-m-padding-on-2xl",noPaddingOn_2xl:"pf-m-no-padding-on-2xl",light_200:"pf-m-light-200"},nav:"pf-v5-c-nav",notificationBadge:"pf-v5-c-notification-badge",page:"pf-v5-c-page",pageDrawer:"pf-v5-c-page__drawer",pageHeader:"pf-v5-c-page__header",pageHeaderBrand:"pf-v5-c-page__header-brand",pageHeaderBrandLink:"pf-v5-c-page__header-brand-link",pageHeaderBrandToggle:"pf-v5-c-page__header-brand-toggle",pageHeaderNav:"pf-v5-c-page__header-nav",pageHeaderTools:"pf-v5-c-page__header-tools",pageHeaderToolsGroup:"pf-v5-c-page__header-tools-group",pageHeaderToolsItem:"pf-v5-c-page__header-tools-item",pageMain:"pf-v5-c-page__main",pageMainBody:"pf-v5-c-page__main-body",pageMainBreadcrumb:"pf-v5-c-page__main-breadcrumb",pageMainDrawer:"pf-v5-c-page__main-drawer",pageMainGroup:"pf-v5-c-page__main-group",pageMainNav:"pf-v5-c-page__main-nav",pageMainSection:"pf-v5-c-page__main-section",pageMainSubnav:"pf-v5-c-page__main-subnav",pageMainTabs:"pf-v5-c-page__main-tabs",pageMainWizard:"pf-v5-c-page__main-wizard",pageSidebar:"pf-v5-c-page__sidebar",pageSidebarBody:"pf-v5-c-page__sidebar-body",themeDark:"pf-v5-theme-dark"}},89059:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n}),a(16166);const n={modifiers:{wrap:"pf-m-wrap",fill:"pf-m-fill",gutter:"pf-m-gutter"},split:"pf-v5-l-split",splitItem:"pf-v5-l-split__item"}},89725:(e,t,a)=>{"use strict";a.r(t),a.d(t,{RolesPage:()=>R,default:()=>H});var n=a(66029),l=a.n(n),i=a(86706),o=a(16623),s=a(78357),r=a(16503),c=a(22479),d=a(66828),p=a(36452),m=a(25784),g=a(34685),u=a(93297),f=a(55656),h=a(25701),b=a(13563),v=a(25387),k=a(2550),E=a(29301),y=a(62012),_=a(78972),O=a(72232),S=a(91397),C=a(72640),w=a(1439),P=a.n(w);const x=({viewedRole:e})=>{const t=(0,v.YB)(),a=[t.formatMessage(k.Z.application),t.formatMessage(k.Z.resourceType),t.formatMessage(k.Z.operation)],i=(0,n.useMemo)((()=>(e?.access??[]).map((e=>(e=>{const[t,a,n]=e.permission.split(":");return[t,a,n]})(e)))),[e?.access]);return l().createElement(r.VO,{ouiaId:"role-permissions-table"},l().createElement(d.H9,{columns:a,rows:i}))},M=({viewedRole:e})=>{const t=(0,v.YB)(),a=[t.formatMessage(k.Z.userGroup),t.formatMessage(k.Z.workspaceAssignment)],i=(0,n.useMemo)((()=>(e?.groups_in??[]).map((e=>[e.name,"TBD"]))),[e?.groups_in]);return l().createElement(r.VO,{ouiaId:"assigned-usergroups-table"},l().createElement(d.H9,{columns:a,rows:i}))},Z="RolesTable",B=({selectedRole:e,setSelectedRole:t})=>{const[a,i]=l().useState(0),o=(0,C.hb)(),s=(0,v.YB)();(0,n.useEffect)((()=>{const e=o.subscribe(C.GM.rowClick,(e=>{t(e)}));return()=>e()}),[]);const r=l().createElement(_.Popover,{triggerAction:"hover",headerContent:s.formatMessage(k.Z.assignedUserGroupsTooltipHeader),bodyContent:s.formatMessage(k.Z.assignedUserGroupsTooltipBody)},l().createElement(P(),null));return l().createElement(m.DrawerPanelContent,{minSize:"600px"},l().createElement(m.DrawerHead,null,l().createElement(O.Title,{className:"pf-v5-u-mb-md",headingLevel:"h2",ouiaId:`${Z}-drawer-title`},e?.display_name),l().createElement(m.DrawerActions,null,l().createElement(m.DrawerCloseButton,{onClick:()=>t(void 0),"data-ouia-component-id":`${Z}-drawer-close-button`}))),l().createElement(S.Tabs,{activeKey:a,onSelect:(e,t)=>{i(t)},ouiaId:`${Z}-drawer-tabs`},l().createElement(S.Tab,{eventKey:0,title:l().createElement(S.TabTitleText,null,"Permissions"),ouiaId:`${Z}-permissions-tab`},l().createElement(x,{viewedRole:e})),l().createElement(S.Tab,{eventKey:1,title:l().createElement(S.TabTitleText,null,"Assigned user groups ",r),ouiaId:`${Z}-assigned-groups-tab`},l().createElement(M,{viewedRole:e}))))},I=[{title:"Edit role",onClick:()=>console.log("Editing role")},{title:"Delete role",onClick:()=>console.log("Removing role")}],N=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],T="RolesTable",D=({selectedRole:e})=>{const{roles:t,totalCount:a}=(0,i.useSelector)((e=>({roles:e.roleReducer.roles.data||[],totalCount:e.roleReducer.roles.meta.count}))),{trigger:m}=(0,p.hb)(),_=(0,v.YB)(),O=[_.formatMessage(k.Z.name),_.formatMessage(k.Z.description),_.formatMessage(k.Z.permissions),_.formatMessage(k.Z.workspaces),_.formatMessage(k.Z.userGroups),_.formatMessage(k.Z.lastModified)],S=(0,i.useDispatch)(),[C,w]=(0,y.useSearchParams)(),P=(0,o.p8)({perPage:20,searchParams:C,setSearchParams:w}),{page:x,perPage:M,onSetPage:Z,onPerPageSelect:B}=P,D=(0,o.aJ)({matchOption:(e,t)=>e[0]===t[0]}),{selected:R,onSelect:H,isSelected:$}=D,j=(0,n.useCallback)((e=>{const{count:t,limit:a,offset:n,orderBy:l}=e;S((0,b.Kt)({...(0,E.jl)({count:t,limit:a,offset:n,orderBy:l})}))}),[S]);(0,n.useEffect)((()=>{j({limit:M,offset:(x-1)*M,orderBy:"display_name",count:a||0})}),[j,x,M]);const W=t.map((t=>({row:Object.values({display_name:t.display_name,description:t.description,permissions:t.accessCount,workspaces:"",user_groups:"",last_modified:t.modified,rowActions:{cell:l().createElement(f.k,{items:I}),props:{isActionCell:!0}}}),props:{isClickable:!0,onRowClick:()=>(e=>{m(p.GM.rowClick,e)})(e?.display_name===t.display_name?void 0:t),isRowSelected:e?.name===t.name}}))),A=W.length>0&&W.every($),G=!A&&W.some($);return l().createElement(l().Fragment,null,l().createElement(h.Z,{title:"Roles",subtitle:""}),l().createElement(g.PageSection,{isWidthLimited:!0},l().createElement(r.VO,{ouiaId:T,selection:D},l().createElement(c.u,{ouiaId:`${T}-header-toolbar`,bulkSelect:l().createElement(s.Wt,{isDataPaginated:!0,pageCount:t.length,totalCount:a,selectedCount:R.length,pageSelected:A,pagePartiallySelected:G,onSelect:e=>{e===s.DR.none&&H(!1),e===s.DR.all&&H(!0,t),e===s.DR.nonePage&&H(!1,W),e===s.DR.page&&H(!0,W)}}),pagination:l().createElement(u.Pagination,{perPageOptions:N,itemCount:a,page:x,perPage:M,onSetPage:Z,onPerPageSelect:B})}),l().createElement(d.H9,{columns:O,rows:W,ouiaId:`${T}-table`}),l().createElement(c.u,{ouiaId:`${T}-footer-toolbar`,pagination:l().createElement(u.Pagination,{perPageOptions:N,itemCount:a,page:x,perPage:M,onSetPage:Z,onPerPageSelect:B})}))))},R=()=>{const[e,t]=(0,n.useState)(),a=(0,n.useRef)(null);return l().createElement(p.sD,null,l().createElement(m.Drawer,{isExpanded:Boolean(e),onExpand:()=>a.current?.focus(),"data-ouia-component-id":`${T}-detail-drawer`},l().createElement(m.DrawerContent,{panelContent:l().createElement(B,{selectedRole:e,setSelectedRole:t})},l().createElement(m.DrawerContentBody,null,l().createElement(D,{selectedRole:e})))))},H=R},92084:()=>{},97236:()=>{},38299:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/5675.fd1eea82f191ba0c34db2a4da8fc6258.js.map