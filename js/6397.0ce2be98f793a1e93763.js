(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[6397,459],{41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>o,dw:()=>n,e4:()=>i,ir:()=>r});var r,n,l=a(66029);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const o=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),i=l.createContext({keyHandler:null,sendRef:null})},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(85893),n=a(94184),l=a.n(n),o=a(78956),i=a(6427),s=a(36530),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c.apply(this,arguments)};const u=function(e){var t=e.className,a=e.title,n=e.actionsContent,u=e.ouiaId,d=e.ouiaSafe,p=void 0===d||d,m=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=l()(t),g="RHI/Header",h=(0,i.useOUIAId)(g,u,p);return(0,r.jsxs)(s.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,r.jsx)(s.FlexItem,{children:(0,r.jsx)(o.Title,c({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":h,"data-ouia-safe":p},m,{children:a}))}),n?(0,r.jsx)(s.FlexItem,{children:n}):null]})}},29693:(e,t,a)=>{"use strict";a.d(t,{C$:()=>u,pj:()=>c,xk:()=>s});var r=a(85564),n=a.n(r),l=a(75465);const o=(0,l.zX)(),i=(0,l.bD)(),s=async({name:e,perPage:t,page:a,options:r}={})=>await o.apiResourceTypeGetResourceTypeGroupsList(e,t,a,r),c=async e=>await i.apiGroupGetGroupsById(e),u=e=>e?n()(e.map((e=>e.attributeFilter.value))):[]},82617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(66029),n=a.n(r),l=a(45697),o=a.n(l),i=a(62012),s=a(75629),c=a(12849);const u=e=>e?n().createElement(s.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?n().createElement(s.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&n().createElement(i.NavLink,{end:!0,to:e.to},e.title)||e.title):n().createElement(c.Vj,{key:t})))):null;u.propTypes={breadcrumbs:o().object};const d=u},66180:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(66029),n=a.n(r),l=a(95376),o=a(58826),i=a.n(o);const s=({title:e,icon:t,description:a,actions:r,...o})=>n().createElement(l.EmptyState,{variant:l.EmptyStateVariant.sm,...o},n().createElement(l.EmptyStateHeader,{titleText:n().createElement(n().Fragment,null,e),icon:n().createElement(l.EmptyStateIcon,{icon:t||i()}),headingLevel:"h4"}),n().createElement(l.EmptyStateBody,{className:"pf-v5-u-mb-md"},a.map(((e,t)=>n().createElement(n().Fragment,{key:t},e," ",n().createElement("br",null))))),n().createElement(l.EmptyStateFooter,null,r))},97246:(e,t,a)=>{"use strict";a.d(t,{M:()=>S});var r=a(66029),n=a.n(r),l=a(25387),o=a(45697),i=a.n(o),s=a(2550),c=a(79083),u=a(75863),d=a(21081),p=a(49004),m=a(34844),f=a(15433),g=a(12913),h=a(31055),y=a(93297),b=a(95376),v=a(47826),C=a.n(v),E=a(29301),I=a(68572),R=a(66180);const S=({className:e,isCompact:t,borders:a,columns:o,rows:i,toolbarButtons:v,data:S,actionResolver:F,areActionsDisabled:w,routes:k,titlePlural:x,titleSingular:P,pagination:B,paginationProps:O,filterValue:Z,isLoading:M,emptyFilters:T,setFilterValue:j,checkedRows:D,isSelectable:L,isRowSelectable:A,fetchData:N,setCheckedItems:V,emptyProps:_,filterPlaceholder:H,rowWrapper:q,filters:G,isFilterable:$,onShowMore:W,showMoreTitle:z,onFilter:Q,onChange:Y,value:U,sortBy:K,onSort:X,isExpandable:J,onExpand:ee,hideFilterChips:te,hideHeader:ae,noData:re,noDataDescription:ne,ouiaId:le,tableId:oe,containerRef:ie,textFilterRef:se,toolbarChildren:ce})=>{const ue=(0,l.YB)(),de=(0,c.useFlag)("platform.rbac.itless");return n().createElement("div",{className:e},k(),!M&&0===i?.length&&0===Z?.length&&G.every((({value:e})=>!e))?n().createElement(R.Z,{title:ue.formatMessage(s.Z.configureItems,{items:x}),icon:C(),description:[ue.formatMessage(s.Z.toConfigureUserAccess),ue.formatMessage(s.Z.createAtLeastOneItem,{item:P})],actions:v()[0],..._}):(()=>{const e=`${"desc"===K?.direction?"-":""}${o[K?.index]?.key}`;return n().createElement(r.Fragment,null,n().createElement(I.ZP,{isSelectable:L,isRowSelectable:A,checkedRows:D,setCheckedItems:V,isLoading:M||re,data:S,titleSingular:P,filterValue:Z,setFilterValue:j,sortBy:e,pagination:B,paginationProps:O,fetchData:N,toolbarButtons:v,filterPlaceholder:H,filters:G,isFilterable:$,onShowMore:W,showMoreTitle:z,onFilter:Q,onChange:Y,value:U,hideFilterChips:te,tableId:oe,containerRef:ie,textFilterRef:se,toolbarChildren:ce}),M?n().createElement(g.Z,{variant:t?u.B.compact:void 0,rows:B?.limit,columns:o.map((e=>e.title))}):n().createElement(d.i,{canSelectAll:!1,"aria-label":`${x.toLowerCase()} table`,variant:t?u.B.compact:null,borders:a,...L&&i?.length>0&&{onSelect:(e,t,a,{uuid:r,cells:[n],requires:l})=>V((0,E.ZQ)([{uuid:r,name:n,requires:l,...de&&{username:S[a]?.username}}],t))},...J&&{onExpand:ee},rows:i?.length>0?i:[{fullWidth:!0,cells:[{title:n().createElement(R.Z,{title:ue.formatMessage(s.Z.noMatchingItemsFound,{items:x}),description:re&&ne?ne:[ue.formatMessage(s.Z.filterMatchesNoItems,{items:x}),ue.formatMessage(s.Z.tryChangingFilters)],actions:re&&ne?void 0:[n().createElement(b.EmptyStateActions,{key:"clear-filters"},n().createElement(h.Button,{variant:"link",ouiaId:"clear-filters-button",onClick:()=>{j(T),N({...B,offset:0,...T||{name:""}})}},ue.formatMessage(s.Z.clearAllFilters)))]}),props:{colSpan:o.length}}]}],cells:o,...i?.length>0&&{actionResolver:F},className:0==i?.length?"ins-c-table-empty-state":"",areActionsDisabled:w,rowWrapper:q,sortBy:K,ouiaId:le,onSort:(e,t,a,r)=>X(e,t,a,r)},!ae&&n().createElement(p.x,null),n().createElement(m.R,null)),!B.noBottom&&n().createElement(f.Z,null,!M&&n().createElement(y.Pagination,{...(0,I.Wz)(B,N,Z,K,O),variant:"bottom",dropDirection:"up"})))})())};S.propTypes={...I.ZP.propTypes,sortBy:i().shape({directions:i().string,index:i().number}),className:i().string,rowWrapper:i().any,isCompact:i().bool,isRowSelectable:i().func,borders:i().bool,emptyFilters:i().object,checkedRows:i().array,columns:i().array.isRequired,rows:i().array.isRequired,titlePlural:i().string,routes:i().func,actionResolver:i().func,areActionsDisabled:i().func,pagination:i().shape({noBottom:i().bool,limit:i().number,offset:i().number,count:i().number}),paginationProps:i().shape({toggleTemplate:i().func,isCompact:i().bool}),isExpandable:i().bool,onExpand:i().func,onSort:i().func,containerRef:i().node,noData:i().bool,hideFilterChips:i().bool,hideHeader:i().bool,noDataDescription:i().arrayOf(i().node),filters:i().array,tableId:i().string.isRequired,toolbarChildren:i().func},S.defaultProps={...I.ZP.defaultProps,emptyFilters:{},isCompact:!1,borders:!0,routes:()=>null,hideFilterChips:!1,checkedRows:[],hideHeader:!1,toolbarChildren:()=>null}},68572:(e,t,a)=>{"use strict";a.d(t,{Wz:()=>m,ZP:()=>b});var r=a(66029),n=a.n(r),l=a(31611),o=a(25387),i=a(45697),s=a.n(i),c=a(2550),u=a(96486),d=a(29301),p=a(74982);const m=(e={},t,a="",r="",n)=>({...n,itemCount:e.count,perPage:e.limit,page:(0,p.wy)(e.limit,e.offset),onSetPage:(n,l)=>{t({...e,offset:(0,p.vE)(l,e.limit),name:a,orderBy:r})},perPageOptions:[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],onPerPageSelect:(e,n)=>{t({offset:0,limit:n,name:a,orderBy:r})}}),f=(e,t=[],a=(()=>{}),r=[],n,l=(()=>!0))=>{const i=(0,o.YB)();return{count:t.length,items:[{title:i.formatMessage(c.Z.selectNone),onClick:()=>{a((()=>[]))}},{...!e&&r&&r.length>0?{title:i.formatMessage(c.Z.selectPage,{length:r.filter(l).length}),onClick:()=>{a((0,d.ZQ)(r,!0))}}:{}}],checked:(0,d.um)(r,t,l),onSelect:t=>{!e&&a((0,d.ZQ)(r,t))},id:n}},g=(e,t=(()=>{}),a=(()=>{}),r="",n={},l="",i,s,p,m,f,g,h,y,b,v,C)=>{const E=(0,o.YB)();return{onChange:y,value:b,items:[...p&&p.length>0?p.map((({key:l,label:o,value:i,selected:s,placeholder:y,type:b="text",groups:C,items:I,innerRef:R})=>({label:o||(0,d.RI)(l),type:b??"text",filterValues:{innerRef:R,id:`filter-by-${l}`,key:`filter-by-${l}`,placeholder:y||E.formatMessage(c.Z.filterByKey,{key:l}),value:i,selected:s,..."text"!==b?{isFilterable:m,onShowMore:f,showMoreTitle:g,onFilter:h}:{},groups:C,items:I,onChange:(e,o)=>{const i="string"==typeof o||Array.isArray(o)?o:Object.keys((0,u.pickBy)(o[""],(e=>e)));t({...r,...n,offset:0,[l]:i}),(0,d.Aq)((()=>a({...n,offset:0,orderBy:v,...p.reduce(((e,t)=>({...e,[t.key]:t.value})),{}),[l]:i}))).then((e=>(R?.current?.focus(),e)))},isDisabled:e}}))):[{label:(0,d.RI)(i||l),type:"text",filterValues:{innerRef:C,id:"filter-by-string",key:"filter-by-string",placeholder:E.formatMessage(c.Z.filterByKey,{key:i||l}),value:r,onChange:(e,r)=>{t({...n,offset:0,name:r}),(0,d.Aq)((()=>a({...n,offset:0,name:r,orderBy:v}))).then((e=>(C?.current?.focus(),e)))},isDisabled:e}}],...s||[]]}},h=(e="",t,a={},r=(()=>{}),n=(()=>{}),l)=>({filters:t&&t.length>0?t.map((({key:e,value:t})=>t&&0!==t.length&&{category:(0,d.RI)(e),type:e,chips:Array.isArray(t)?t.map((e=>({name:e}))):[{name:t}]})).filter(Boolean):[{name:e}],onDelete:(e,[o],i)=>{const s=(e,t,a)=>i?"group"===t||"checkbox"===t?[]:"":a!==o.type?e:"checkbox"===t||"group"===t?e.filter((e=>e!==o.chips[0]?.name)):Array.isArray(e)?[]:"",c=t.reduce(((e,{key:t,value:a,type:r})=>({...e,[t]:s(a,r,t)})),{});r({...a,offset:0,name:"",...c}),n({...a,offset:0,orderBy:l,name:"",...c})}}),y=({isSelectable:e,isRowSelectable:t,checkedRows:a,setCheckedItems:r,isLoading:o,data:i,titleSingular:s,filterValue:c,setFilterValue:u,pagination:d,paginationProps:p,fetchData:y,sortBy:b,toolbarButtons:v,filterPlaceholder:C,filterItems:E,filters:I,isFilterable:R,onShowMore:S,showMoreTitle:F,onFilter:w,onChange:k,value:x,hideFilterChips:P,tableId:B,textFilterRef:O,toolbarChildren:Z})=>n().createElement(l.Z,{...e&&{bulkSelect:f(o,a,r,i,B,t)},filterConfig:g(o,u,y,c,d,s,C,E,I,R,S,F,w,k,x,b,O),actionsConfig:{actions:v()},...!o&&{pagination:m(d,y,c,b,p)},...(c.length>0||I&&I.length>0)&&!P&&{activeFiltersConfig:h(c,I,d,u,y,b)}},Z());y.propTypes={isSelectable:s().bool,isRowSelectable:s().func,checkedRows:s().array,setCheckedItems:s().func,isLoading:s().bool,data:s().array,titleSingular:s().string,filterValue:s().oneOfType([s().array,s().string]),setFilterValue:s().func,filters:s().arrayOf(s().shape({value:s().oneOfType([s().string,s().number,s().array]),key:s().string,placeholder:s().string})),isFilterable:s().bool,onShowMore:s().func,showMoreTitle:s().string,onFilter:s().func,onChange:s().func,value:s().any,pagination:s().shape({limit:s().number,offset:s().number,count:s().number}),paginationProps:s().shape({toggleTemplate:s().func,isCompact:s().bool}),sortBy:s().string,filterItems:s().arrayOf(s().object),filterPlaceholder:s().string,isCollapsible:s().bool,fetchData:s().func.isRequired,toolbarButtons:s().func,hideFilterChips:s().bool,tableId:s().string,textFilterRef:s().object,toolbarChildren:s().func},y.defaultProps={isCollapsible:!1,isSelectable:!1,isLoading:!1,data:[],titleSingular:"",filterValue:[],pagination:p.he,setCheckedItems:()=>{},setFilterValue:()=>{},sortBy:void 0,toolbarButtons:()=>[],filterItems:[],filters:[],isFilterable:!1,hideFilterChips:!1,toolbarChildren:()=>null};const b=y},13851:(e,t,a)=>{"use strict";a.d(t,{Q:()=>v,y:()=>C});var r=a(66029),n=a.n(r),l=a(45697),o=a.n(l),i=a(64380),s=a(86304),c=a(12849),u=a(82617),d=a(85893),p=a(94184),m=a.n(p);const f=n().createContext("light");var g=a(6427),h=function(){return h=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)};const y=function(e){var t=e.className,a=e.children,r=e.ouiaId,n=e.ouiaSafe,l=void 0===n||n,o=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),i=m()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),s="RHI/Header",c=(0,g.useOUIAId)(s,r,l);return(0,d.jsx)(f.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var n=m()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,d.jsx)("section",h({"data-ouia-component-type":s,"data-ouia-component-id":c,"data-ouia-safe":l},o,{className:"".concat(i," ").concat(n),"widget-type":"InsightsPageHeader",children:a}))}})};var b=a(39173);const v=({children:e,breadcrumbs:t})=>n().createElement(r.Fragment,null,t&&n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},n().createElement(u.Z,{...t})),n().createElement(y,{className:"rbac-page-header"},e));v.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,breadcrumbs:o().array,paddingBottom:o().bool},v.defaultProps={paddingBottom:!1};const C=({title:e,renderTitleTag:t,description:a,children:l})=>n().createElement(r.Fragment,null,n().createElement(s.Flex,null,n().createElement(s.FlexItem,{className:"pf-v5-u-mb-sm"},n().createElement(b.Z,{title:e||n().createElement(c.h2,null),className:"rbac-page-header__title"})),n().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&n().createElement(i.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?n().createElement(i.Text,{component:i.TextVariants.p},a):a),l);C.propTypes={title:o().node,renderTitleTag:o().func,description:o().node,children:o().oneOfType([o().node,o().arrayOf(o().node)])}},66254:(e,t,a)=>{"use strict";a.d(t,{M:()=>o,f:()=>l});var r=a(71079),n=a(29693);const l=(e,t)=>({type:r.YS,meta:{permissions:e,config:t},payload:n.xk(t)}),o=e=>({type:r.WV,meta:{groupsIds:e},payload:n.pj(e.filter((e=>e?.length>0)))})},60966:(e,t,a)=>{"use strict";a.d(t,{Hg:()=>i,Rt:()=>n,_T:()=>l,u3:()=>o});var r=a(2550);const n=e=>e.split(":")[0].includes("inventory"),l=e=>n(e)&&e.split(":")[1].includes("hosts"),o=e=>e.split(":")[0].includes("cost-management"),i=(e,t,a)=>{let n=e.filter(Boolean);return l(t)&&e.includes(null)&&n.unshift(a.formatMessage(r.Z.ungroupedSystems)),n.reduce(((e,t)=>[...e,{cells:[t]}]),[])}},53224:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var r=a(66029),n=a.n(r),l=a(64380),o=a(91848),i=a(31055),s=a(86706),c=a(62012),u=a(97246),d=a(60966),p=a(13851),m=a(39173),f=a(12849),g=a(74982),h=a(13563),y=a(14289),b=a(64756),v=a(29301),C=a(25387),E=a(66254),I=a(29693),R=a(2550);const S=()=>{const e=(0,C.YB)(),[t,a]=(0,r.useState)({pagination:{...g.he,filter:""}}),{pagination:S,filter:F}=t,w=(0,s.useDispatch)(),{roleId:k,permissionId:x}=(0,c.useParams)(),P=(0,r.useMemo)((()=>(0,d.Rt)(x)),[x]),{role:B,permission:O,isRoleLoading:Z,rolesPagination:M,rolesFilters:T,inventoryGroupsDetails:j,isLoadingInventoryDetails:D}=(0,s.useSelector)((e=>({role:e.roleReducer.selectedRole,permission:e.roleReducer.selectedRole.access?{...e.roleReducer.selectedRole?.access.find((e=>e.permission===x))}:{},isRoleLoading:e.roleReducer.isRecordLoading,rolesPagination:e.roleReducer?.roles?.pagination||g.he,rolesFilters:e.roleReducer?.roles?.filters||{},inventoryGroupsDetails:e.inventoryReducer?.inventoryGroupsDetails,isLoadingInventoryDetails:e.inventoryReducer?.isLoading})),s.shallowEqual);(0,r.useEffect)((()=>{w((0,h.fp)(k)).then((({value:e})=>{var t;P&&(t=(0,I.C$)(e?.access?.find((e=>e.permission===x))?.resourceDefinitions),w((0,E.M)(t)))}))}),[k]),(0,r.useEffect)((()=>{a({...t,pagination:{...t.pagination,count:B.access?B.access.length:0}})}),[B]);const L=(0,r.useMemo)((()=>!Z&&!D&&(0,I.C$)(O.resourceDefinitions).map((e=>P&&null!=e?j?.[e]?.name:e))||[]),[x,Z,D]),A=(0,r.useMemo)((()=>L.filter((e=>!F||e?.includes(F)||null===e))),[L,F]),N=(0,r.useMemo)((()=>A.slice(S.offset,S.offset+S.limit)),[A,S.offset,S.offset]);return n().createElement(r.Fragment,null,n().createElement(p.Q,{breadcrumbs:[{title:e.formatMessage(R.Z.roles),to:(0,v.zk)((0,b.n)(y.Z.roles.link),M,T)},{title:Z?void 0:B&&(B.display_name||B.name),to:(0,b.n)(y.Z["role-detail"].link.replace(":roleId",k))},{title:x,isActive:!0}]},n().createElement(o.Level,null,n().createElement(o.LevelItem,null,n().createElement(m.Z,{title:x||n().createElement(f.h2,null),className:"rbac-page-header__title"})))),n().createElement("section",{className:"pf-v5-c-page__main-section rbac-c-role__permissions"},n().createElement(l.TextContent,null,n().createElement(l.Text,{component:l.TextVariants.h1},e.formatMessage(R.Z.definedResources))),n().createElement(u.M,{columns:[{}],rows:(0,d.Hg)(N,x,e),data:N,filterValue:F,fetchData:({limit:e,offset:r,name:n})=>a({...t,filter:n,pagination:{...t.pagination,limit:e,offset:r}}),isCompact:!0,setFilterValue:({name:e})=>a({...t,filter:e}),toolbarButtons:()=>B.system?[]:[n().createElement(r.Fragment,{key:"edit-resource-definitions"},n().createElement(b.Z,{to:y.Z["role-detail-permission-edit"].link.replace(":roleId",k).replace(":permissionId",x)},n().createElement(i.Button,{variant:"primary","aria-label":"Edit"},e.formatMessage(R.Z.edit))))],isLoading:Z||P&&D,pagination:{...S,count:A.length},titlePlural:e.formatMessage(R.Z.resources).toLowerCase(),titleSingular:e.formatMessage(R.Z.resource).toLowerCase(),hideHeader:!0,tableId:"role-resource-definitions"}),n().createElement(r.Suspense,null,n().createElement(c.Outlet,{context:{cancelRoute:y.Z["role-detail-permission"].link.replace(":roleId",k).replace(":permissionId",x)}}))))}},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6397.3f221507038275781593659afc0275ea.js.map