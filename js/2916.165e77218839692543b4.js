/*! For license information please see 2916.165e77218839692543b4.js.LICENSE.txt */
(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[2916],{29215:(e,t,r)=>{"use strict";r.d(t,{R:()=>d,A:()=>f});var n=r(36580),o=r(71002),i=r(15861);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function m(){}function h(){}var v={};l(v,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(j([])));y&&y!==t&&r.call(y,i)&&(v=y);var b=h.prototype=d.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function n(i,a,s,c){var l=p(e[i],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==(0,o.Z)(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=h,l(b,"constructor",h),l(h,"constructor",m),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(Z.prototype),l(Z.prototype,s,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new Z(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var s=(0,r(96692).i$)();function c(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){return{type:n.s6,payload:c(e)}},d=function(e){return{type:n.ZX,payload:u(e)}}},40483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(4942),o=r(45987),i=r(87462),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76429),p=r(67850),f=r(48880),d=r(74219),m=r(57820),h=r(16396),v=r(4853),g=["ModalProps","saveLabel","cancelLabel","alert"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b="modal-form",E=function(e){return s().createElement(v.l,(0,i.Z)({},e,{id:b}))},Z=function(e){var t=e.saveLabel,r=e.cancelLabel,n=(0,f.default)().onCancel;return s().createElement(u.Z,null,(function(e){var o=e.pristine,i=e.invalid,a=e.validating,c=e.submitting;return s().createElement("div",{className:"pf-c-form"},s().createElement(m.W,{className:"pf-u-mt-0"},s().createElement(h.Button,{ouiaId:"primary-save-button",variant:"primary",form:b,type:"submit",isDisabled:o||a||c||i},t),s().createElement(h.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:n,id:"cancel-modal"},r)))}))};Z.propTypes={saveLabel:l().node,cancelLabel:l().node},Z.defaultProps={saveLabel:"Save",cancelLabel:"Cancel"};var w=function(e){var t=e.ModalProps,r=e.saveLabel,n=e.cancelLabel,a=e.alert,c=(0,o.Z)(e,g);return s().createElement(d.Modal,(0,i.Z)({},t,{footer:s().createElement(Z,{saveLabel:r,cancelLabel:n})}),null==a?void 0:a(),s().createElement(p.ZP,(0,i.Z)({},c,{showFormControls:!1,FormWrapper:E})))};w.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ModalProps:l().object},Z.propTypes);const O=w},36457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(87462),o=r(4942),i=r(45987),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(93433),p=r(86896),f=r(30893),d=r(76857),m=["input","options","isReadOnly","isDisabled","isRequired"],h=["label","isRequired","helperText","meta","description","hideLabel"],v=function(e){var t=e.input,r=e.options,o=e.isReadOnly,a=e.isDisabled,c=e.isRequired,l=(0,i.Z)(e,m);return s().createElement(d.FormSelect,(0,n.Z)({},t,l,{isDisabled:a||o}),function(e,t,r){var n=(0,p.Z)();if(t&&r)return e;var o=(0,u.Z)(e);return o.find((function(e){return void 0===e.value}))?(0,u.Z)(o):[{label:n.formatMessage(f.Z[r?"pleaseChoose":"none"])}].concat((0,u.Z)(o))}(r,t.value,c).map((function(e){return s().createElement(d.FormSelectOption,(0,n.Z)({key:e.value||e.label},e,{label:e.label.toString()}))})))};v.propTypes={input:l().object.isRequired,options:l().arrayOf(l().shape({value:l().any,label:l().string.isRequired})).isRequired,isReadOnly:l().bool,isDisabled:l().bool,isRequired:l().bool,FieldProvider:l().any};var g=function(e){var t=e.label,r=e.isRequired,o=e.helperText,a=e.meta,c=e.description,l=e.hideLabel,u=(0,i.Z)(e,h),p=a.error,f=a.touched&&p;return s().createElement(d.FormGroup,{isRequired:r,label:!l&&t,fieldId:u.id,isValid:!f,helperText:o,helperTextInvalid:a.error},c&&s().createElement(d.TextContent,null,s().createElement(d.Text,{component:d.TextVariants.small},c)),s().createElement(v,(0,n.Z)({label:t,isValid:!f,isRequired:r},u)))};g.propTypes={componentType:l().string,label:l().string,isRequired:l().bool,helperText:l().string,meta:l().object,description:l().string,hideLabel:l().bool};const y=g;var b=r(41609),E=r.n(b),Z=r(48880),w=r(76429),O=function(e){var t=e.dirtyFieldsSinceLastSubmit,r=e.submitSucceeded,n=e.pristine,o=(0,Z.default)().onCancel,i=E()(t)||!r&&n,a=(0,p.Z)();return s().createElement(d.ActionGroup,{className:"pf-u-mt-0"},s().createElement(d.Button,{ouiaId:"primary-submit-button",type:"submit",isDisabled:i,variant:"primary"},a.formatMessage(f.Z.save)),s().createElement(d.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:function(){return o()}},a.formatMessage(f.Z.cancel)))};O.propTypes={dirtyFieldsSinceLastSubmit:l().shape((0,o.Z)({},l().string,l().oneOfType([l().string,l().number,l().bool]))),submitSucceeded:l().bool,pristine:l().bool,onCancel:l().func};const P=function(e){return s().createElement(w.Z,{subscription:{pristine:!0,submitSucceeded:!0,dirtyFieldsSinceLastSubmit:!0}},(function(t){return s().createElement(O,(0,n.Z)({},t,e))}))};var x=r(67850),j=r(65412),L=r(75747),S=r(93025),T=r(96354),k=["formTemplateProps"],M=function(e){var t,r=e.formTemplateProps,a=(0,i.Z)(e,k);return s().createElement(S.Z,(0,n.Z)({componentMapper:(t={},(0,o.Z)(t,T.Z.TEXT_FIELD,j.Z),(0,o.Z)(t,T.Z.TEXTAREA,L.Z),(0,o.Z)(t,T.Z.SELECT,y),t),FormTemplate:function(e){return s().createElement(x.ZP,(0,n.Z)({},r,e,{FormButtons:P}))}},a))};M.propTypes={formTemplateProps:l().object};const R=M},27979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(4942),o=r(93433),i=r(29439),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76857),p=r(48880),f=r(55795),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){var t,r,n,c=e.formFields,l=(0,p.default)(),h=(0,a.useState)(l.getState().values["add-permissions-table"]||[]),g=(0,i.Z)(h,2),y=g[0],b=g[1],E=(0,a.useState)(!1),Z=(0,i.Z)(E,2),w=Z[0],O=Z[1],P=l.getState().values["not-allowed-permissions"],x=(0,d.Z)(),j=(null===(t=l.getState().values)||void 0===t||null===(r=t["copy-base-role"])||void 0===r||null===(n=r.applications)||void 0===n?void 0:n.filter((function(e){return!(null!=y&&y.find((function(t){return t.uuid.includes(e)})))})))||[],L=c[0][0];return s().createElement("div",{className:"rbac"},y.length>0?s().createElement("div",{className:"rbac-c-selected-chips"},s().createElement(u.ChipGroup,{categoryName:x.formatMessage(m.Z.selectedPermissions)},y.reduce((function(e,t){return[t].concat((0,o.Z)(e))}),[]).map((function(e){var t=e.uuid;return s().createElement(u.Chip,{key:t,color:"blue",isTruncated:!0,onClick:function(){return b(y.filter((function(e){return e.uuid!==t})))}},t)})))):null,s().createElement(u.Title,{headingLevel:"h1",size:"xl",className:"rbac-c-add-permission-title"},x.formatMessage(m.Z.addPermissions)),s().createElement(u.TextContent,null,s().createElement(u.Text,null,x.formatMessage(m.Z.selectPermissionsForRole),0!==j.length&&s().createElement(u.Popover,{headerContent:x.formatMessage(m.Z.onlyGranularPermissions),bodyContent:x.formatMessage(m.Z.noWildcardPermissions)},s().createElement(u.Button,{variant:"link"},x.formatMessage(m.Z.whyNotSeeingAllPermissions)," ",s().createElement(f.ZP,null))))),(null==P?void 0:P.length)>0&&!w?s().createElement(u.Alert,{variant:"default",isInline:!0,title:"".concat(x.formatMessage(m.Z.followingPermissionsCannotBeAdded)," ").concat(P.join(", ")),actionClose:s().createElement(u.AlertActionCloseButton,{onClose:function(){return O(!0)}})}):null,[[v(v({},L),{},{props:v(v({},L.props),{},{selectedPermissions:y,setSelectedPermissions:b})})]])};g.propTypes={formFields:l().array};const y=g},11514:(e,t,r)=>{"use strict";r.d(t,{Z:()=>V});var n=r(87462),o=r(93433),i=r(29439),a=r(4942),s=r(45987),c=r(18446),l=r.n(c),u=r(92950),p=r.n(u),f=r(45697),d=r.n(f),m=r(28216),h=r(41693),v=r(48880),g=r(48623),y=r(94124),b=r(36580),E=r(71002),Z=r(15861);function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=Z(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(j([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=d.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,E.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var O=(0,r(96692).Y3)();function P(e,t,r,n,o,i,a,s,c,l,u){return x.apply(this,arguments)}function x(){return(x=(0,Z.Z)(w().mark((function e(t,r,n,o,i,a,s,c,l,u,p){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissions(t,r,n,o,i,a,s,c,l,u,p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r,n,o,i,a,s){return L.apply(this,arguments)}function L(){return(L=(0,Z.Z)(w().mark((function e(t,r,n,o,i,a,s,c){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissionOptions(t,r,n,o,i,a,void 0,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={application:b.KD,resource_type:b.vf,verb:b.E2},T=r(29215),k=r(28090),M=r(76857),R=r(1936),D=["row"],_=function(e){var t=e.row,r=(0,s.Z)(e,D);return t.disableSelection?p().createElement(M.Tooltip,{content:t.disabledContent,exitDelay:1500,entryDelay:1500},p().createElement(R.RowWrapper,(0,n.Z)({className:"rbac-c-disabled-row",row:t},r))):p().createElement(R.RowWrapper,(0,n.Z)({row:t},r))};_.propTypes={props:d().object,row:d().object};var C=r(86896),I=r(30893),F=r(95249),N=["selectedPermissions","setSelectedPermissions"];function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){var t=e.permissionReducer,r=t.permission,n=t.isLoading,o=t.options,i=o.application,a=o.operation,s=o.resource,c=t.expandSplats,l=t.isLoadingExpandSplats,u=e.roleReducer,p=u.isRecordLoading,f=u.selectedRole,d=e.costReducer.resourceTypes;return{permissions:r.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,r=e.resource_type,n=e.verb,o=e.permission,i=e.requires;return{application:t,resource:r,operation:n,uuid:o,requires:i}})),pagination:r.meta,isLoading:n||p,baseRole:f,applicationOptions:i.data.filter((function(e){return"*"!==e})),resourceOptions:s.data.filter((function(e){return"*"!==e})),operationOptions:a.data.filter((function(e){return"*"!==e})),expandedPermissions:c.data.map((function(e){return e.permission})),isLoadingExpandSplats:l,resourceTypes:d.data}},q=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,c=(0,s.Z)(e,N),f=(0,m.useDispatch)(),d=(0,C.Z)(),E=(0,F.ZP)("cost-management",["cost-management:*:*"]).hasAccess,Z=[d.formatMessage(I.Z.application),d.formatMessage(I.Z.resourceType),d.formatMessage(I.Z.operation)],w=function(e){return f((r=(t=A(A(A({},e),ee?{exclude_roles:ee}:{}),{},{allowed_only:!0})).limit,n=t.offset,o=t.orderBy,i=t.application,a=t.resourceType,s=t.verb,c=t.permission,u=void 0===(l=t.exclude_globals)||l,p=t.exclude_roles,d=t.allowed_only,m=t.options,{type:b.wI,payload:P(r,n,o,i,a,s,c,u,p,d,m)}));var t,r,n,o,i,a,s,c,l,u,p,d,m},O=function(e){return f((r=(t=A(A({},e),{},{allowedOnly:!0})).field,n=t.limit,o=t.offset,i=t.application,a=t.resourceType,s=t.verb,c=t.allowedOnly,l=t.options,{type:S[r],payload:j(r,n,o,i,a,s,c,l)}));var t,r,n,o,i,a,s,c,l},x=(0,m.useSelector)(B,m.shallowEqual),L=x.permissions,M=x.isLoading,R=x.pagination,D=x.baseRole,G=x.applicationOptions,q=x.resourceOptions,V=x.operationOptions,W=x.expandedPermissions,z=x.isLoadingExpandSplats,K=x.resourceTypes,H=(0,h.Z)(c).input,Y=(0,v.default)(),X=(0,u.useState)({applications:[],resources:[],operations:[]}),Q=(0,i.Z)(X,2),U=Q[0],$=Q[1],J=Y.getState().values["role-type"],ee=Y.getState().values["role-uuid"],te=(0,u.useState)(!1),re=(0,i.Z)(te,2),ne=re[0],oe=re[1],ie=(0,u.useState)(""),ae=(0,i.Z)(ie,2),se=ae[0],ce=ae[1],le=(0,u.useState)(),ue=(0,i.Z)(le,2),pe=ue[0],fe=ue[1],de=function(e){return K.find((function(t){var r;return t.value===(null===(r=e.split(":"))||void 0===r?void 0:r[1])}))},me=(0,u.useCallback)((0,g.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"application",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),he=(0,u.useCallback)((0,g.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"resource_type",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),ve=(0,u.useCallback)((0,g.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"verb",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]);(0,u.useEffect)((function(){var e,t=null===(e=Y.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===J&&t&&f((0,k.fp)(t)),Y.change("has-cost-resources",!1),w(R),O({field:"application",limit:50}),O({field:"resource_type",limit:50}),O({field:"verb",limit:50}),function(){return f({type:b.e0,payload:{data:[]}})}}),[]),(0,u.useEffect)((function(){E&&f((0,T.A)())}),[E]),(0,u.useEffect)((function(){he(U),ve(U)}),[U.applications]),(0,u.useEffect)((function(){me(U),ve(U)}),[U.resources]),(0,u.useEffect)((function(){me(U),he(U)}),[U.operations]),(0,u.useEffect)((function(){H.onChange(t)}),[t]),(0,u.useEffect)((function(){var e;if(!(!D||"copy"!==J||Y.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=Y.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==D?void 0:D.uuid)||z||M)){var n,i,a,s,c,l,u,p,d,m,h,v,g,y=[],E=(null==D?void 0:D.access.filter((function(e){var t;return!!G.includes(null==e||null===(t=e.permission)||void 0===t?void 0:t.split(":")[0])||(y.push(e),!1)})))||[];if(Y.change("not-allowed-permissions",y.map((function(e){return e.permission}))),0===W.length&&void 0===z){var Z=(0,o.Z)(new Set(E.map((function(e){return e.permission.split(":")[0]}))));f((a=void 0===(i=(n={application:Z.join()}).limit)?1e3:i,c=void 0===(s=n.offset)?0:s,l=n.orderBy,u=n.application,p=n.resourceType,d=n.verb,m=n.permission,v=void 0===(h=n.exclude_globals)||h,g=n.options,{type:b.e,payload:P(a,c,l,u,p,d,m,v,g)}))}else{var w=E.map((function(e){return e.permission.replace("*",".*")}));r((function(){return W.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(de(e)||{count:0}).count})).filter((function(e){return w.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),Y.change("base-permissions-loaded",!0)}}}),[L,D]);var ge=function(e){return e.reduce((function(e,t){return{"":A(A({},null==e?void 0:e[""]),{},(0,a.Z)({},t,!0))}}),{"":{}})},ye={applications:(0,o.Z)(G).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),resources:(0,o.Z)(q).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),operations:(0,o.Z)(V).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}}))},be={label:p().createElement("div",null,d.formatMessage(I.Z.noResultsFound)),isDisabled:!0},Ee=ye[Object.keys(ye)[pe||0]].length>10;return p().createElement("div",{className:"rbac-c-permissions-table"},p().createElement(y.f,(0,n.Z)({columns:Z,isSelectable:!0,isCompact:!0,borders:!1,createRows:function(e){return e.map((function(e){var r=e.application,n=e.resource,o=e.operation,i=e.uuid,a=e.requires;return{uuid:"".concat(r,":").concat(n,":").concat(o),requires:a,cells:[{title:r},n,o],selected:Boolean(t&&t.find((function(e){return e.uuid===i}))),disableSelection:"cost-management"===r&&(0===(de(i)||{count:0}).count||!E),disabledContent:p().createElement("div",null,d.formatMessage(E?I.Z.configureResourcesForPermission:I.Z.noCostManagementPermissions)," ",E?p().createElement("a",{href:"./settings/sources"},d.formatMessage(I.Z.configureCostSources)):null)}}))},data:L,filterValue:"",noData:0===(null==L?void 0:L.length),noDataDescription:[d.formatMessage(I.Z.permissionNotDisplayedDescription)],fetchData:function(e){var t=e.limit,r=e.offset,n=e.applications,o=e.resources,i=e.operations;w({limit:t,offset:r,application:(n||U.applications).join(),resourceType:(o||U.resources).join(),verb:(i||U.operations).join()})},setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;$(A(A(A(A({},U),t?{applications:t}:U.applications),r?{resources:r}:U.resources),n?{operations:n}:U.operations))},isLoading:M||z,pagination:A(A({},R),{},{count:R.count}),checkedRows:t,setCheckedItems:function(e){var n=e(t).filter((function(e){var t,r=e.uuid;return"cost-management"!==e.application||(null===(t=de(r))||void 0===t?void 0:t.count)>0})).map((function(e){return{uuid:e.uuid,requires:e.requires}}));r(l()(n,t)?[]:n)},titlePlural:d.formatMessage(I.Z.permissions).toLowerCase(),titleSingular:d.formatMessage(I.Z.permission).toLowerCase(),showMoreTitle:d.formatMessage(ne?I.Z.seeLess:I.Z.seeMore),onFilter:function(e){return ce(e)},onShowMore:Ee?function(){oe((function(){return!ne}))}:void 0,onChange:function(e,t){ce(""),fe(t)},value:pe,filters:[{key:"applications",value:U.applications,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.application).toLowerCase()}),type:"group",selected:ge(U.applications),groups:[{type:ye.applications.length>0?"checkbox":"plain",items:ye.applications.length>0?(0,o.Z)(ye.applications).slice(0,ne?void 0:10):[be]}]},{key:"resources",value:U.resources,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.resourceType).toLowerCase()}),type:"group",selected:ge(U.resources),groups:[{type:ye.resources.length>0?"checkbox":"plain",items:ye.resources.length>0?(0,o.Z)(ye.resources).slice(0,ne?void 0:10):[be]}]},{key:"operations",value:U.operations,placeholder:d.formatMessage(I.Z.filterByKey,{key:d.formatMessage(I.Z.operation).toLowerCase()}),type:"group",selected:ge(U.operations),groups:[{type:ye.operations.length>0?"checkbox":"plain",items:ye.operations.length>0?(0,o.Z)(ye.operations).slice(0,ne?void 0:10):[be]}]}],isFilterable:!0,rowWrapper:_,tableId:"add-role-permissions"},c)))};q.propTypes={selectedPermissions:d().array,setSelectedPermissions:d().func};const V=q},91710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),s=r.n(a),c=r(28216),l=r(76857),u=r(41693),p=r(48880),f=r(29215),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){var t=e.costReducer,r=t.resourceTypes,n=t.isLoading,o=t.loadingResources,i=t.resources;return{resourceTypes:r.data,resources:i,isLoading:n,isLoadingResources:o>0}},y=function(e,t){var r=e[t.key];switch(t.type){case"toggle":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{isOpen:!r.isOpen})));case"select":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.selected.includes(t.selection)?r.selected.filter((function(e){return e!==t.selection})):[].concat((0,o.Z)(r.selected),[t.selection])})));case"selectAll":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.options.map((function(e){return e.value}))})));case"clear":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:[]})));case"setOptions":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{filteredOptions:r.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const b=function(e){var t=(0,d.Z)(),r=(0,c.useDispatch)(),h=(0,c.useSelector)(g,c.shallowEqual),b=h.resourceTypes,E=h.isLoading,Z=h.isLoadingResources,w=h.resources,O=(0,u.Z)(e).input,P=(0,p.default)(),x=P.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),j=(0,a.useReducer)(y,x.reduce((function(e,t){return v(v({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),L=(0,n.Z)(j,2),S=L[0],T=L[1];return(0,a.useEffect)((function(){(P.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return x.find((function(e){return(null==e?void 0:e.uuid)===t}))&&T({type:"select",selection:e,key:t})}))})),r((0,f.A)(undefined)),P.change("has-cost-resources",!0)}),[]),(0,a.useEffect)((function(){E||(0,o.Z)(new Set(x.map((function(e){var t;return null===(t=b.find((function(t){var r;return t.value===(null===(r=e.uuid.split(":"))||void 0===r?void 0:r[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return t=e,r((0,f.R)(t));var t}))}),[b]),(0,a.useEffect)((function(){Z||x.map((function(e){return T({type:"setOptions",key:e.uuid,options:w[(t=e.uuid,null===(r=b.find((function(e){var r;return e.value===(null===(r=t.split(":"))||void 0===r?void 0:r[1])})))||void 0===r||null===(n=r.path.split("/"))||void 0===n?void 0:n[5])]||[]});var t,r,n}))}),[Z]),(0,a.useEffect)((function(){var e=Object.entries(S).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],resources:t[1].selected}}));O.onChange(e),P.change("resource-definitions",e)}),[S]),s().createElement(l.Grid,{hasGutter:!0},s().createElement(l.GridItem,{md:4,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.permissions))),s().createElement(l.GridItem,{md:8,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.resourceDefinitions))),x.map((function(e){var r=e.uuid,n=S[r].filteredOptions;return s().createElement(s().Fragment,null,s().createElement(l.GridItem,{md:4,sm:12},s().createElement(l.Tooltip,{content:s().createElement("div",null,r)},s().createElement(l.FormGroup,{label:r.replace(/^cost-management:/,""),isRequired:!0}))),s().createElement(l.GridItem,{md:8,sm:12},s().createElement(l.Select,{className:"rbac-m-cost-resource-select",variant:l.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(m.Z.selectState),onToggle:function(e){T({type:"setFilter",key:r,filtervalue:""}),function(e,t){T({type:"toggle",key:e,isOpen:t})}(r,e)},onSelect:function(e,o){!function(e,t,r,n){T(r?{type:"selectAll",selection:t,key:n}:{type:"select",selection:t,key:n})}(0,o,o===t.formatMessage(m.Z.selectAll,{length:n.length}),r)},onClear:function(){return T({type:"clear",key:r})},selections:S[r].selected,isOpen:S[r].isOpen,onFilter:function(e){return e&&T({type:"setFilter",key:r,filtervalue:e.target.value})},"aria-labelledby":r,placeholderText:t.formatMessage(m.Z.selectResources),hasInlineFilter:!0},[s().createElement(l.SelectOption,{key:0,value:t.formatMessage(m.Z.selectAll,{length:n.length})})].concat((0,o.Z)(n.map((function(e,t){return s().createElement(l.SelectOption,{key:t+1,value:e.value})})))))))})))}},93436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(96354),u=r(64124),p=r(71355),f=r(40483),d=r(36457);var m=r(334),h=r(28216),v=r(76254),g=r(43115),y=r(40639),b=r(28090),E=r(86896),Z=r(30893),w=function(e){var t=e.routeMatch,r=e.cancelRoute,s=e.submitRoute,c=void 0===s?r:s,w=e.afterSubmit,O=(0,E.Z)(),P=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),x=(0,m.useHistory)(),j=x.replace,L=x.push,S=(0,h.useDispatch)(),T=(0,m.useRouteMatch)(t).params.id,k=(0,h.useSelector)((function(e){return(0,v.z)(e,T)})),M=(0,i.useState)(k),R=(0,o.Z)(M,2),D=R[0],_=R[1];(0,i.useEffect)((function(){!D&&(0,g.fp)(T).then((function(e){P.current&&_(e)}))}),[T]);var C=function(e,t,r){return e.length<150?(0,g.vd)({name:e}).then((function(n){var o=n.data;if(0!==o.length&&o.some((function(n){return n[t]!==r&&n.display_name===e})))throw O.formatMessage(Z.Z.roleWithNameExists)})):Promise.reject(O.formatMessage(Z.Z.maxCharactersWarning,{number:150}))},I=(0,y.Z)((function(e,t,r,n){return e&&0!==e.length?n(e,t,r):Promise.reject(O.formatMessage(Z.Z.required))})),F={"validate-role-name":function(e){var t=e.idKey,r=e.id,n=e.validationPromise;return function(e){return I(e,t,r,n)}}},N=function(){S((0,p.addNotification)({variant:"warning",dismissDelay:8e3,title:O.formatMessage(Z.Z.editingRoleTitle),description:O.formatMessage(Z.Z.editingRoleCanceledDescription)})),j(r)};return D?a().createElement(d.Z,{schema:function(e){return{fields:[{name:"name",component:l.Z.TEXT_FIELD,label:O.formatMessage(Z.Z.name),isRequired:!0,validate:[{type:"validate-role-name",id:e,idKey:"uuid",validationPromise:C}]},{name:"description",component:l.Z.TEXTAREA,label:O.formatMessage(Z.Z.description),validate:[{type:u.Z.MAX_LENGTH,threshold:150}]}]}}(T),initialValues:D,onSubmit:function(e){return S((0,b.sZ)(T,{name:e.name,display_name:e.name,description:e.description})).then((function(){w(),L(c)}))},onCancel:N,validatorMapper:F,FormTemplate:function(e){return a().createElement(f.Z,(0,n.Z)({},e,{ModalProps:{onClose:N,isOpen:!0,variant:"small",title:"Edit role information"}}))}}):null};w.propTypes={routeMatch:c().string.isRequired,cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const O=w},13063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(28216),u=r(334),p=r(69957),f=r(76857),d=r(83215),m=r(28090),h=r(43115),v=r(76254),g=r(86896),y=r(44012),b=r(30893),E=function(e){var t=e.routeMatch,r=e.cancelRoute,s=e.submitRoute,c=void 0===s?r:s,E=e.afterSubmit,Z=(0,g.Z)(),w=(0,u.useRouteMatch)(t).params.id.split(","),O=(0,l.useSelector)((function(e){return 1===w.length?(0,v.B)(e,w[0]):w.length})),P=(0,i.useState)(!0),x=(0,o.Z)(P,2),j=x[0],L=x[1],S=(0,i.useState)(O),T=(0,o.Z)(S,2),k=T[0],M=T[1],R=(0,l.useDispatch)(),D=(0,u.useHistory)(),_=D.push,C=D.replace;(0,i.useEffect)((function(){w&&O?M(O):w&&1===w.length&&(0,h.fp)(w[0]).then((function(e){return M(e.display_name)})).catch((function(e){var t,r;return R((0,d.wN)({variant:"danger",title:"Could not get role",description:null==e||null===(t=e.errors)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.detail}))}))}),[O,w]);var I=function(){return C(r)};return k?a().createElement(f.Modal,{className:"rbac","aria-label":"remove-role",header:a().createElement(f.TextContent,null,a().createElement(f.Split,{hasGutter:!0},a().createElement(f.SplitItem,null,a().createElement(p.ZP,{size:"lg",style:{fill:"#f0ab00"}})),a().createElement(f.SplitItem,null,a().createElement(f.Text,{component:"h1"},Z.formatMessage(b.Z.deleteRoleQuestion))))),isOpen:!0,variant:"small",onClose:I,actions:[a().createElement(f.Button,{isDisabled:j,key:"submit",variant:"danger",type:"button",id:"confirm-delete-portfolio",onClick:function(){Promise.all(w.map((function(e){return R((0,m.l5)(e))}))).then((function(){return E()})),_(c)}},Z.formatMessage(b.Z.confirm)),a().createElement(f.Button,{key:"cancel",variant:"link",type:"button",onClick:I},Z.formatMessage(b.Z.cancel))]},a().createElement(f.TextContent,null,a().createElement(f.Text,{component:f.TextVariants.p},a().createElement(y.Z,(0,n.Z)({},b.Z.roleWilBeRemovedWithPermissions,{values:{strong:function(e){return a().createElement("strong",null,e)},name:k,count:w.length}}))),a().createElement(f.Checkbox,{id:"remove-role-checkbox",label:Z.formatMessage(b.Z.understandActionIrreversible),isChecked:!j,onChange:function(){return L((function(e){return!e}))}}))):null};E.propTypes={routeMatch:c().string.isRequired,cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const Z=E},76254:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,z:()=>n});var n=function(e,t){var r=e.roleReducer,n=r.roles,o=void 0===n?{data:[]}:n,i=r.selectedRole;return(null==i?void 0:i.uuid)===t?i:o.data.find((function(e){return e.uuid===t}))},o=function(e,t){var r;return null===(r=n(e,t))||void 0===r?void 0:r.display_name}},15608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ie});var n,o=r(93433),i=r(4942),a=r(29439),s=r(92950),c=r.n(s),l=r(45697),u=r.n(l),p=r(334),f=r(28216),d=r(76857),m=r(39173),h=r(4682),v=r(28090),g=r(38376),y=r(19571),b=r(87462),E=r(94124),Z=r(45987),w=r(64107),O=r(11107),P=r(61338),x=r(85564),j=r.n(x),L=r(86896),S=r(30893),T=["count"],k=["type"];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(e,t){var r=(0,L.Z)();return function(n,i){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.reduce((function(n,i){var u=i.resourceDefinitions,f=i.permission,d=i.modified,m=f.split(":"),h=(0,a.Z)(m,3),v=h[0],g=h[1],y=h[2];return[].concat((0,o.Z)(n),[{uuid:f,cells:[v,g,y].concat((0,o.Z)(e?[f.includes("cost-management")&&u.length>0?c().createElement(s.Fragment,{key:"resource-definitions"},c().createElement(p.Link,{to:"/roles/detail/".concat(t,"/permission/").concat(f)},j()(u.map((function(e){return e.attributeFilter.value}))).length)):c().createElement("span",{className:"rbac-c-text__disabled"},r.formatMessage(S.Z.notApplicable))]:[]),[c().createElement(s.Fragment,{key:"".concat(v,"-modified")},c().createElement(w.Z,{date:d,type:(0,O.mh)(d)}))]),selected:Boolean(null==l?void 0:l.find((function(e){return e.uuid===f})))}])}),[])}},_={pagination:P.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},C="SET_PAGINATION",I="SELECT_PERMISSIONS",F="SHOW_REMOVE_MODAL",N="SUBMIT_REMOVE_MODAL",G="INITIATE_REMOVE_PERMISSION",A="SET_FILTERS",B="SET_TOGGLED",q="INITIALIZE_ROLE",V=(n={},(0,i.Z)(n,C,(function(e,t){return R(R({},e),{},{pagination:R(R({},e.pagination),t)})})),(0,i.Z)(n,I,(function(e,t){var r=t.selection;return R(R({},e),{},{selectedPermissions:r})})),(0,i.Z)(n,F,(function(e,t){var r=t.showRemoveModal;return R(R({},e),{},{showRemoveModal:r})})),(0,i.Z)(n,N,(function(e){return R(R({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(n,G,(function(e,t){var r=t.confirmDelete,n=t.deleteInfo;return R(R({},e),{},{confirmDelete:r,showRemoveModal:!0,deleteInfo:n})})),(0,i.Z)(n,A,(function(e,t){return R(R({},e),{},{filters:R(R({},e.filters),t)})})),(0,i.Z)(n,B,(function(e){return R(R({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(n,q,(function(e,t){var r=t.count,n=(0,Z.Z)(t,T);return R(R(R({},e),n),{},{pagination:R(R({},e.pagination),{},{count:r})})})),n),W=function(e,t){var r=t.type,n=(0,Z.Z)(t,k);return V[r]?V[r](e,n):e},z=r(1936),K=r(71002),H=r(15861),Y=r(48880);var X=r(68778),Q=function(e){var t=e.currentRoleID,r=(0,L.Z)(),n=(0,f.useDispatch)();return c().createElement(c().Fragment,null,c().createElement(d.EmptyState,null,c().createElement(d.EmptyStateIcon,{color:"green",icon:X.ZP}),c().createElement(d.Title,{headingLevel:"h4",size:"lg"},r.formatMessage(S.Z.permissionsAddedSuccessfully)),c().createElement(d.EmptyStateBody,null),c().createElement(p.Link,{to:"/roles/detail/".concat(t)},c().createElement(d.Button,{onClick:function(){return n((0,v.fp)(t))}},r.formatMessage(S.Z.exit)))))};const U=Q;Q.propTypes={currentRoleID:u().string.isRequired};var $=r(73943),J=r(93025),ee=r(67850),te=r(52817),re=r(11514),ne=r(91710),oe=r(27979);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=function(e){var t,r=e.formFields;return(0,s.useContext)(ye).submitting?c().createElement(d.Bullseye,null,c().createElement(d.Spinner,{size:"xl"})):c().createElement("div",{className:"rbac"},[[ae({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};se.propTypes={formFields:u().array};const ce=se;var le=r(28412),ue=r(82644),pe=r(29558),fe=r(2034);function de(){de=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(P([])));v&&v!==t&&r.call(v,o)&&(m=v);var g=d.prototype=p.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,K.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=function(e){return c().createElement(ee.ZP,(0,b.Z)({},e,{showFormControls:!1}))},ge={"add-permissions-table":re.Z,"cost-resources":ne.Z,review:function(){var e=(0,L.Z)(),t=(0,Y.default)().getState().values,r=t["role-name"],n=t["role-description"],o=t["add-permissions-table"],i=t["resource-definitions"],a=t["has-cost-resources"];return c().createElement(d.Stack,{hasGutter:!0},c().createElement(d.StackItem,null,c().createElement(d.TextContent,null,c().createElement(d.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-sm"},e.formatMessage(S.Z.reviewDetails)))),c().createElement(d.StackItem,{className:"rbac-l-stack__item-summary"},c().createElement(d.Grid,{hasGutter:!0},c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.roleName))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},r)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.roleDescription))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},n)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.addedPermissions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},o.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e.uuid," ")})))),a&&c().createElement(c().Fragment,null,c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(S.Z.resourceDefinitions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},i.map((function(e){return e.resources.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e," ")}))}))))))))}},ye=(0,s.createContext)({success:!1,submitting:!1,error:void 0}),be=function(e){var t=e.role,r=(0,L.Z)(),n=(0,s.useState)(!1),i=(0,a.Z)(n,2),l=i[0],u=i[1],m=(0,s.useState)(""),h=(0,a.Z)(m,2),g=h[0],y=h[1],b=(0,p.useHistory)(),E=(0,f.useDispatch)(),Z=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),w=(0,a.Z)(Z,2),O=w[0],P=w[1],x=(0,s.useRef)(document.createElement("div")),j=(0,s.useMemo)((function(){return function(e){var t=(0,ue.Sn)(),r=(0,pe.d)({locale:le.locale,messages:fe},t);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,crossroads:["role-type"],title:r.formatMessage(S.Z.addPermissions),container:e,fields:[{name:"add-permissions",title:r.formatMessage(S.Z.addPermissions),StepTemplate:oe.Z,nextStep:function(e){var t=e.values;return t&&t["add-permissions-table"]&&t["add-permissions-table"].some((function(e){return e.uuid.split(":")[0].includes("cost-management")}))?"cost-resources-definition":"review"},fields:[{component:"add-permissions-table",name:"add-permissions-table"}]},{name:"cost-resources-definition",title:r.formatMessage(S.Z.defineCostResources),nextStep:"review",fields:[{component:"plain-text",name:"text-description",label:c().createElement("p",null,r.formatMessage(S.Z.applyCostPermissionText))},{component:"cost-resources",name:"cost-resources",validate:[function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){return e.resources.length>0}))?void 0:r.formatMessage(S.Z.assignAtLeastOneResource)}]}]},{name:"review",title:r.formatMessage(S.Z.reviewDetails),StepTemplate:ce,fields:[{component:"review",name:"review"}]}]}]}}(x.current)}),[]);(0,s.useEffect)((function(){y(t.uuid)})),(0,s.useEffect)((function(){x.current.hidden=l}),[l]);var T=function(){b.push("/roles/detail/".concat(t.uuid))},k=function(){var e=(0,H.Z)(de().mark((function e(r){var n,i,a,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r["add-permissions-table"],i=r["cost-resources"],a=[].concat((0,o.Z)(t.access.map((function(e){return e.permission}))),(0,o.Z)(n.map((function(e){return e.uuid})))),s=he(he({},t),{},{access:(0,o.Z)(n.reduce((function(e,t){var r=t.uuid,n=t.requires;return[].concat((0,o.Z)(e),(0,o.Z)([r].concat((0,o.Z)(n.filter((function(e){return!a.includes(e)})))).map((function(e){return{permission:e,resourceDefinitions:null!=i&&i.find((function(t){return t.permission===e}))?[{attributeFilter:{key:"cost-management.".concat(e.split(":")[1]),operation:"in",value:null==i?void 0:i.find((function(t){return t.permission===e})).resources}}]:[]}}))))}),t.access)),accessCount:t.accessCount+n.length}),P((function(e){return he(he({},e),{},{submitting:!0})})),E((0,v.ul)(g,s)).then((function(){return P((function(e){return he(he({},e),{},{submitting:!1,success:!0,hideForm:!0})}))})).catch((function(){P((function(e){return he(he({},e),{},{submitting:!1,success:!1,hideForm:!0})})),b.push("/roles/detail/".concat(t.uuid))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c().createElement(ye.Provider,{value:he(he({},O),{},{setWizardError:function(e){return P((function(t){return he(he({},t),{},{error:e})}))},setWizardSuccess:function(e){return P((function(t){return he(he({},t),{},{success:e})}))},setHideForm:function(e){return P((function(t){return he(he({},t),{},{hideForm:e})}))},rolePermissions:t.access})},c().createElement($.R,{type:r.formatMessage(S.Z.permission),isOpen:l,onModalCancel:function(){return u(!1)},onConfirmCancel:T}),O.hideForm?O.success?c().createElement(d.Wizard,{title:r.formatMessage(S.Z.addPermissions),isOpen:!0,steps:[{name:"success",component:new U({currentRoleID:g}),isFinishedStep:!0}]}):null:c().createElement(J.Z,{container:x,schema:j,subscription:{values:!0},FormTemplate:ve,initialValues:{"role-uuid":t.uuid,"role-type":"create","role-name":t.display_name,"role-description":t.description},componentMapper:he(he({},te.ZP),ge),onSubmit:k,onCancel:function(e){var t;e&&(null===(t=e["add-permissions-table"])||void 0===t?void 0:t.length)>0?u(!0):T()}}))};be.defaultProps={role:{}},be.propTypes={role:u().object};const Ee=be;var Ze=r(1227),we=r(44012);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xe=function(e,t,r){return c().createElement(we.Z,(0,b.Z)({},r?S.Z.permissionsWillNotBeGrantedThroughRole:S.Z.permissionWillNotBeGrantedThroughRole,{values:Pe(Pe({b:function(e){return c().createElement("b",null,e)}},r?{permissions:e}:{permission:e}),{},{role:t.name})}))},je=function(e){var t=e.cantAddPermissions,r=(0,L.Z)(),n=(0,f.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),f.shallowEqual),l=n.role,u=n.isRecordLoading,m=(0,p.useHistory)(),g=(0,s.useReducer)(W,_),y=(0,a.Z)(g,2),b=y[0],Z=b.pagination,w=b.selectedPermissions,O=b.showRemoveModal,P=b.confirmDelete,x=b.deleteInfo,j=b.filters,T=b.isToggled,k=b.resources,M=b.operations,R=y[1],V=(0,s.useState)(!0),K=(0,a.Z)(V,2),H=K[0],Y=K[1],X=(0,f.useDispatch)(),Q=[{title:r.formatMessage(S.Z.application)},{title:r.formatMessage(S.Z.resourceType)},{title:r.formatMessage(S.Z.operation)},{title:r.formatMessage(S.Z.resourceDefinitions),transforms:[(0,z.info)({popover:r.formatMessage(S.Z.resourceDefinitionsApplyToCost),ariaLabel:r.formatMessage(S.Z.resourceDefinitionsApplyToCost)})]},{title:r.formatMessage(S.Z.lastCommit),transforms:[(0,z.cellWidth)(15)]}],U=t?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,s.useEffect)((function(){var e;if(Object.keys(l).length>0){var t=Object.entries(l.access.reduce((function(e,t){var r=e.resources,n=e.operations,i=t.permission.split(":"),s=(0,a.Z)(i,3),c=s[1],l=s[2];return{resources:r.includes(c)?r:[].concat((0,o.Z)(r),[c]),operations:n.includes(l)?n:[].concat((0,o.Z)(n),[l])}}),{resources:[],operations:[]})).reduce((function(e,t){var r=(0,a.Z)(t,2),n=r[0],o=r[1];return Pe(Pe({},e),{},(0,i.Z)({},n,o.map((function(e){return{label:e,value:e}}))))}),{}),r=t.resources,n=t.operations;R({type:q,resources:r,operations:n,count:l.access?l.access.length:0})}Y(null==l||null===(e=l.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")})))}),[l]);var $=l&&l.access?(l.access||[]).filter((function(e){var t=e.permission.split(":"),r=(0,a.Z)(t,3),n=r[0],o=r[1],i=r[2],s=j.applications,c=j.resources,l=j.operations;return(!(s.length>0)||s.includes(n))&&(!(c.length>0)||c.includes(o))&&(!(l.length>0)||l.includes(i))})).map((function(e){return Pe(Pe({uuid:e.permission},e),{},{modified:l.modified})})):[],J=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return X((0,v.lq)(l,t)).then((function(){X((0,v.fp)(l.uuid)),R({type:I,selection:[]})}))},ee=function(e){return e.reduce((function(e,t){return{"":Pe(Pe({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},te={label:c().createElement("div",null," ",r.formatMessage(S.Z.noResultsFound)),isDisabled:!0},re=Pe({access:[],applications:[]},l),ne=Object.values({applications:re.applications,operations:M,resources:k}).find((function(e){return e.length>10}));return c().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},O&&c().createElement(Ze.Z,{text:x.text,title:x.title,isOpen:O,confirmButtonLabel:x.confirmButtonLabel,onClose:function(){return R({type:F,showRemoveModal:!1})},onSubmit:function(){P(),R({type:N})}}),c().createElement(E.f,{columns:H?Q:Q.filter((function(e){return e.title!==r.formatMessage(S.Z.resourceDefinitions)})),createRows:D(H,null==l?void 0:l.uuid),actionResolver:l.system?void 0:function(){return[{title:r.formatMessage(S.Z.remove),onClick:function(e,t,n){return R({type:G,confirmDelete:function(){return J([n])},deleteInfo:{title:r.formatMessage(S.Z.removePermissionQuestion),text:xe(n.uuid,l,!1),confirmButtonLabel:r.formatMessage(S.Z.removePermission)}})}}]},data:$.slice(Z.offset,Z.offset+Z.limit),filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,r=e.offset;return R({type:C,limit:t,offset:r})},isSelectable:!l.system,setCheckedItems:function(e){R({type:I,selection:e(w).map((function(e){return{uuid:e.uuid}}))})},checkedRows:w,onShowMore:ne?function(){R({type:B})}:void 0,setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;R(Pe(Pe(Pe({type:A},t?{applications:t}:j.applications),r?{resources:r}:j.resources),n?{operations:n}:j.operations))},toolbarButtons:function(){return t?[]:[c().createElement(p.Link,{to:"/roles/detail/".concat(l.uuid,"/role-add-permission"),key:"role-add-permission",className:"rbac-m-hide-on-sm"},c().createElement(d.Button,{variant:"primary","aria-label":"Add Permission"},r.formatMessage(S.Z.addPermissions))),{label:r.formatMessage(S.Z.addPermission),props:{className:"rbac-m-hide-on-md"},onClick:function(){m.push("/roles/detail/".concat(l.uuid,"/role-add-permission"))}},{label:r.formatMessage(S.Z.remove),props:{isDisabled:!w.length>0},onClick:function(){var e=w.length>1;R({type:G,confirmDelete:function(){return J((0,o.Z)(w))},deleteInfo:{title:r.formatMessage(e?S.Z.removePermissionsQuestion:S.Z.removePermissionQuestion),text:xe(e?w.length:w[0].uuid,l,w.length>1),confirmButtonLabel:r.formatMessage(e?S.Z.removePermissions:S.Z.removePermission)}})}}]},isLoading:u,pagination:Pe(Pe({},Z),{},{count:$.length}),titlePlural:r.formatMessage(S.Z.permissions),titleSingular:r.formatMessage(S.Z.permission),routes:function(){return c().createElement(p.Route,{exact:!0,path:h.Z["role-add-permission"].path},c().createElement(Ee,{isOpen:!0,role:l}))},emptyProps:{title:r.formatMessage(S.Z.noRolePermissions),description:U},filters:[{key:"applications",value:0===j.applications.length?"":j.applications,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.application).toLowerCase()}),type:"group",selected:ee(j.applications),groups:[{type:re.applications.length>0?"checkbox":"plain",items:re.applications.length>0?re.applications.slice(0,T?void 0:10).map((function(e){return{label:e,value:e}})):[te]}]},{key:"resources",value:0===j.resources.length?"":j.resources,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.resourceType).toLowerCase()}),type:"group",selected:ee(j.resources),groups:[{type:k.length>0?"checkbox":"plain",items:k.length>0?k.slice(0,T?void 0:10):[te]}]},{key:"operations",value:0===j.operations.length?"":j.operations,placeholder:r.formatMessage(S.Z.filterByKey,{key:r.formatMessage(S.Z.operation).toLowerCase()}),type:"group",selected:ee(j.operations),groups:[{type:M.length>0?"checkbox":"plain",items:M.length>0?M.slice(0,T?void 0:10):[te]}]}],tableId:"role-permissions"}))};je.propTypes={cantAddPermissions:u().bool};const Le=je;var Se=r(19756),Te=r(13063),ke=r(93436),Me=r(67643),Re=r(76137);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce=function(e){var t=e.onDelete,r=(0,L.Z)(),n=(0,p.useHistory)(),i=(0,s.useState)(!1),l=(0,a.Z)(i,2),u=l[0],b=l[1],E=(0,s.useState)(!1),Z=(0,a.Z)(E,2),w=Z[0],x=Z[1],j=(0,p.useParams)(),T=j.uuid,k=j.groupUuid,M=(0,f.useSelector)((function(e){var t,r,n,o,i,a,s,c,l;return _e(_e({role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading},k&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(r=e.roleReducer)||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.pagination)||P.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(s=a.groups)||void 0===s?void 0:s.pagination)||P.he,groupsFilters:(null===(c=e.groupReducer)||void 0===c||null===(l=c.groups)||void 0===l?void 0:l.filters)||{}})}),f.shallowEqual),R=M.role,D=M.group,_=M.isRecordLoading,C=M.rolesPagination,I=M.rolesFilters,F=M.groupsPagination,N=M.groupsFilters,G=M.systemGroupUuid,A=(0,f.useSelector)((function(e){return e.roleReducer.error!==O.VG})),B=(0,f.useSelector)((function(e){return e.groupReducer.error!==O.VG})),q=(0,f.useDispatch)(),V=function(){if(q((0,v.fp)(T)),k)if("default-access"!==k)q((0,Se.yi)(k));else{if(G)return q((0,Se.nV)(G,{})),insights.chrome.appObjectId(G),function(){return insights.chrome.appObjectId(void 0)};q((0,Se.WD)())}};(0,s.useEffect)((function(){return V(),insights.chrome.appObjectId(T),function(){return insights.chrome.appObjectId(void 0)}}),[T,k,G]),(0,s.useEffect)((function(){0===(null==R?void 0:R.accessCount)&&""!==(null==R?void 0:R.external_tenant)&&""!==(null==R?void 0:R.external_role_id)&&null!=R&&R.system&&x(!0)}),[R]);var W=function(){return[k?{title:r.formatMessage(S.Z.groups),to:(0,O.zk)(h.Z.groups.path,F,N)}:{title:r.formatMessage(S.Z.roles),to:(0,O.zk)(h.Z.roles.path,C,I)}].concat((0,o.Z)(B&&k&&("default-access"===k?G:B)?D?[{title:D&&D.name,to:"/groups/detail/".concat(k,"/roles"),isLoading:D&&D.loaded}]:[void 0]:B||!k?[]:[{title:r.formatMessage(S.Z.invalidGroup),isActive:!0}]),(0,o.Z)(B||!k?[{title:_?void 0:A?(null==R?void 0:R.display_name)||(null==R?void 0:R.name):r.formatMessage(S.Z.invalidRole),isActive:!0}]:[]))},z=!_&&R?R.display_name||R.name:void 0,K=!_&&R?R.description:void 0,H=[c().createElement(d.DropdownItem,{component:c().createElement(p.Link,{onClick:function(){return b(!1)},to:h.Z["role-detail-edit"].path.replace(":id",T)},r.formatMessage(S.Z.edit)),key:"edit-role"}),c().createElement(d.DropdownItem,{component:c().createElement(p.Link,{onClick:t,to:h.Z["role-detail-remove"].path.replace(":id",T)},r.formatMessage(S.Z.delete)),className:"rbac-c-role__action",key:"delete-role"})];return c().createElement(s.Fragment,null,!B&&k||!A?c().createElement(s.Fragment,null,c().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},c().createElement(Re.Z,W())),c().createElement(Me.Z,{title:"".concat(B?"Role":"Group"," not found"),description:["".concat(B?"Role":"Group"," with ID ").concat(B?T:k," does not exist.")],actions:[c().createElement(d.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return n.goBack()}},r.formatMessage(S.Z.backToPreviousPage))]})):c().createElement(s.Fragment,null,c().createElement(g.Q,{breadcrumbs:W()},c().createElement(d.Level,null,c().createElement(d.LevelItem,null,c().createElement(m.Z,{title:z||c().createElement(y.h2,null),className:"rbac-page-header__title"})),!_&&R&&!R.system&&c().createElement(d.LevelItem,null,c().createElement(d.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:c().createElement(d.KebabToggle,{onToggle:function(e){return b(e)},id:"role-actions-dropdown"}),isOpen:u,isPlain:!0,position:"right",dropdownItems:H}))),K&&c().createElement(d.TextContent,{className:"rbac-page-header__description"},c().createElement(d.Text,{component:"p"},K))),_||!R?c().createElement(y.Wi,null):c().createElement(Le,{cantAddPermissions:w}),c().createElement(p.Route,{path:h.Z["role-detail-remove"].path},!_&&c().createElement(Te.Z,{afterSubmit:function(){q((0,v.Kt)(_e(_e({},C),{},{offset:0,filters:I,inModal:!1})))},cancelRoute:h.Z["role-detail"].path.replace(":uuid",T),submitRoute:(0,O.zk)(h.Z.roles.path,_e(_e({},C),{},{offset:0}),I),routeMatch:h.Z["role-detail-remove"].path})),c().createElement(p.Route,{path:h.Z["role-detail-edit"].path},!_&&c().createElement(ke.Z,{afterSubmit:V,cancelRoute:h.Z["role-detail"].path.replace(":uuid",T),routeMatch:h.Z["role-detail-edit"].path}))))};Ce.propTypes={onDelete:u().func};const Ie=Ce},40639:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(99166);const o=(e,t=250,r={onlyResolvesLast:!1})=>(0,n.Z)(e,t,r)},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},45467:()=>{},65088:()=>{},81754:()=>{},70347:()=>{},11452:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},10108:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{},11177:()=>{}}]);