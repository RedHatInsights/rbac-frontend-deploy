"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[8219,7664],{69957:(e,t,n)=>{n.d(t,{LP:()=>i,RI:()=>o,ZP:()=>a});var r=n(40400);const o={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},i=(0,r.IU)(o),a=i},7081:(e,t,n)=>{n.d(t,{ZP:()=>a,lb:()=>o,wl:()=>i});var r=n(40400);const o={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},i=(0,r.IU)(o),a=i},62410:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(85893),o=n(92950),i=n.n(o),a=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},l=36e5,c=24*l,u=30*c,p=365*c,d=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},m=[{rightBound:1/0,description:function(e){return d(Math.round(e/p),"year")}},{rightBound:p,description:function(e){return d(Math.round(e/u),"month")}},{rightBound:u,description:function(e){return d(Math.round(e/c),"day")}},{rightBound:c,description:function(e){return d(Math.round(e/l),"hour")}},{rightBound:l,description:function(e){return d(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return m.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},v=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(o){return function(e,t,n,o){return void 0===o&&(o=""),(0,r.jsx)(a.Tooltip,s({},n,{content:(0,r.jsxs)("div",{children:[o,e]})},{children:t}))}(g("exact")(o),(0,r.jsx)("span",{children:g(e)(o)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const h=function(e){var t=e.date,n=e.type,o=void 0===n?"relative":n,a=e.extraTitle,s=e.tooltipProps,l=t instanceof Date?t:new Date(t),c=null==t||"Invalid Date"===l.toString()?"invalid":o;return(0,r.jsx)(i().Fragment,{children:v(c,s,a)(l)})}},39173:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(85893),o=n(94184),i=n.n(o),a=n(25864),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};const l=function(e){var t=e.className,n=e.title,o=i()(t);return(0,r.jsx)(a.Title,s({headingLevel:"h1",size:"2xl",className:o,"widget-type":"InsightsPageHeaderTitle"},{children:n}))}},93736:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(46801),o=n(65126);const i=function(e){var t=(0,r.useNavigate)();return function(n,r){return t((0,o.n)(n,e),r)}}},1227:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(29439),o=n(92950),i=n.n(o),a=n(86896),s=n(45697),l=n.n(s),c=n(30893),u=n(69957),p=n(25864),d=function(e){var t=e.title,n=e.text,s=e.onClose,l=e.onSubmit,d=e.isOpen,m=e.confirmButtonLabel,f=e.withCheckbox,g=(0,a.Z)(),v=(0,o.useState)(!1),h=(0,r.Z)(v,2),b=h[0],y=h[1];return i().createElement(p.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(u.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:d,variant:p.ModalVariant.small,onClose:s,actions:[i().createElement(p.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:f&&!b,variant:"danger",onClick:l},m),i().createElement(p.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:s},g.formatMessage(c.Z.cancel))]},i().createElement(p.Split,{hasGutter:!0},i().createElement(p.SplitItem,{isFilled:!0},i().createElement(p.Stack,{hasGutter:!0},i().createElement(p.TextContent,null,n)))),f?i().createElement(p.Checkbox,{isChecked:b,onChange:function(){return y(!b)},label:g.formatMessage(c.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};d.propTypes={text:l().any,title:l().string,confirmButtonLabel:l().string,onSubmit:l().func,onClose:l().func,isOpen:l().bool,withCheckbox:l().bool},d.defaultProps={withCheckbox:!1};const m=d},76137:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(92950),o=n.n(r),i=n(45697),a=n.n(i),s=n(46801),l=n(25864),c=n(19571),u=function(e){return e?o().createElement(l.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?o().createElement(l.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&o().createElement(s.NavLink,{end:!0,to:e.to},e.title)||e.title):o().createElement(c.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:a().object};const p=u},51999:(e,t,n)=>{n.d(t,{Q:()=>h,y:()=>b});var r=n(92950),o=n.n(r),i=n(45697),a=n.n(i),s=n(25864),l=n(19571),c=n(76137),u=n(85893),p=n(94184),d=n.n(p);const m=o().createContext("light");var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)};const g=function(e){var t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","children"]),o=d()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return(0,u.jsx)(m.Consumer,{children:function(e){var t,i;void 0===e&&(e="light");var a=d()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((i={})["pf-m-light"]="light"===e,i));return(0,u.jsx)("section",f({},r,{className:"".concat(o," ").concat(a),"widget-type":"InsightsPageHeader"},{children:n}))}})};var v=n(39173),h=function(e){var t=e.children,n=e.breadcrumbs;return o().createElement(r.Fragment,null,n&&o().createElement("section",{className:"pf-c-page__main-breadcrumb"},o().createElement(c.Z,n)),o().createElement(g,{className:"rbac-page-header"},t))};h.propTypes={children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,breadcrumbs:a().array,paddingBottom:a().bool},h.defaultProps={paddingBottom:!1};var b=function(e){var t=e.title,n=e.renderTitleTag,i=e.description,a=e.children;return o().createElement(r.Fragment,null,o().createElement(s.Flex,null,o().createElement(s.FlexItem,{className:"pf-u-mb-sm"},o().createElement(v.Z,{title:t||o().createElement(l.h2,null),className:"rbac-page-header__title"})),o().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},n&&n())),i&&o().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof i?o().createElement(s.Text,{component:s.TextVariants.p},i):i),a)};b.propTypes={title:a().node,renderTitleTag:a().func,description:a().node,children:a().oneOfType([a().node,a().arrayOf(a().node)])}},95311:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var r,o=n(93433),i=n(4942),a=n(29439),s=n(92950),l=n.n(s),c=n(45697),u=n.n(c),p=n(86896),d=n(46801),m=n(50533),f=n(25864),g=n(39173),v=n(55140),h=n(93736),b=n(28090),y=n(51999),Z=n(19571),O=n(19756),E=n(84866),P=n(11107),M=n(65916),I=n(87462),k=n(1936),w=n(44012),j=n(65126),T=n(30060),_=n(45987),R=n(62410),x=n(85564),D=n.n(x),C=n(30893),S=n(4682),L=["count"],N=["type"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return n.reduce((function(n,c){var u=c.resourceDefinitions,p=c.permission,d=c.modified,m=p.split(":"),f=(0,a.Z)(m,3),g=f[0],v=f[1],h=f[2];return[].concat((0,o.Z)(n),[{uuid:p,cells:[g,v,h].concat((0,o.Z)(e?[(p.includes("cost-management")||p.includes("inventory"))&&u.length>0?l().createElement(s.Fragment,{key:"resource-definitions"},l().createElement(j.Z,{to:S.Z["role-detail-permission"].link.replace(":roleId",t).replace(":permissionId",p)},D()(u.map((function(e){return e.attributeFilter.value}))).length)):l().createElement("span",{className:"rbac-c-text__disabled"},r.formatMessage(C.Z.notApplicable))]:[]),[l().createElement(s.Fragment,{key:"".concat(g,"-modified")},l().createElement(R.Z,{date:d,type:(0,P.mh)(d)}))]),selected:Boolean(null==i?void 0:i.find((function(e){return e.uuid===p})))}])}),[])},G={pagination:M.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},V="SET_PAGINATION",z="SELECT_PERMISSIONS",U="SHOW_REMOVE_MODAL",W="SUBMIT_REMOVE_MODAL",K="INITIATE_REMOVE_PERMISSION",Q="SET_FILTERS",q="SET_TOGGLED",H="INITIALIZE_ROLE",J=(r={},(0,i.Z)(r,V,(function(e,t){return F(F({},e),{},{pagination:F(F({},e.pagination),t)})})),(0,i.Z)(r,z,(function(e,t){var n=t.selection;return F(F({},e),{},{selectedPermissions:n})})),(0,i.Z)(r,U,(function(e,t){var n=t.showRemoveModal;return F(F({},e),{},{showRemoveModal:n})})),(0,i.Z)(r,W,(function(e){return F(F({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(r,K,(function(e,t){var n=t.confirmDelete,r=t.deleteInfo;return F(F({},e),{},{confirmDelete:n,showRemoveModal:!0,deleteInfo:r})})),(0,i.Z)(r,Q,(function(e,t){return F(F({},e),{},{filters:F(F({},e.filters),t)})})),(0,i.Z)(r,q,(function(e){return F(F({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(r,H,(function(e,t){var n=t.count,r=(0,_.Z)(t,L);return F(F(F({},e),r),{},{pagination:F(F({},e.pagination),{},{count:n})})})),r),X=function(e,t){var n=t.type,r=(0,_.Z)(t,N);return J[n]?J[n](e,r):e},Y=n(1227);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e,t,n){return l().createElement(w.Z,(0,I.Z)({},n?C.Z.permissionsWillNotBeGrantedThroughRole:C.Z.permissionWillNotBeGrantedThroughRole,{values:ee(ee({b:function(e){return l().createElement("b",null,e)}},n?{permissions:e}:{permission:e}),{},{role:t.name})}))},ne=function(e){var t=e.cantAddPermissions,n=(0,p.Z)(),r=(0,m.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),m.shallowEqual),c=r.role,u=r.isRecordLoading,d=(0,h.Z)(),g=(0,s.useReducer)(X,G),v=(0,a.Z)(g,2),y=v[0],Z=y.pagination,O=y.selectedPermissions,E=y.showRemoveModal,P=y.confirmDelete,M=y.deleteInfo,I=y.filters,w=y.isToggled,_=y.resources,R=y.operations,x=v[1],D=(0,s.useState)(!0),L=(0,a.Z)(D,2),N=L[0],B=L[1],F=(0,m.useDispatch)(),J=[{title:n.formatMessage(C.Z.application)},{title:n.formatMessage(C.Z.resourceType)},{title:n.formatMessage(C.Z.operation)},{title:n.formatMessage(C.Z.resourceDefinitions),transforms:[(0,k.info)({popover:n.formatMessage(C.Z.resourceDefinitionsApplyToCostAndInventory),ariaLabel:n.formatMessage(C.Z.resourceDefinitionsApplyToCostAndInventory)})]},{title:n.formatMessage(C.Z.lastCommit),transforms:[(0,k.cellWidth)(15)]}],$=t?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,s.useEffect)((function(){var e;if(Object.keys(c).length>0){var t=Object.entries(c.access.reduce((function(e,t){var n=e.resources,r=e.operations,i=t.permission.split(":"),s=(0,a.Z)(i,3),l=s[1],c=s[2];return{resources:n.includes(l)?n:[].concat((0,o.Z)(n),[l]),operations:r.includes(c)?r:[].concat((0,o.Z)(r),[c])}}),{resources:[],operations:[]})).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return ee(ee({},e),{},(0,i.Z)({},r,o.map((function(e){return{label:e,value:e}}))))}),{}),n=t.resources,r=t.operations;x({type:H,resources:n,operations:r,count:c.access?c.access.length:0})}B(null==c||null===(e=c.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")||e.permission.includes("inventory")})))}),[c]);var ne=c&&c.access?(c.access||[]).filter((function(e){var t=e.permission.split(":"),n=(0,a.Z)(t,3),r=n[0],o=n[1],i=n[2],s=I.applications,l=I.resources,c=I.operations;return(!(s.length>0)||s.includes(r))&&(!(l.length>0)||l.includes(o))&&(!(c.length>0)||c.includes(i))})).map((function(e){return ee(ee({uuid:e.permission},e),{},{modified:c.modified})})):[],re=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return F((0,b.lq)(c,t)).then((function(){F((0,b.fp)(c.uuid)),x({type:z,selection:[]})}))},oe=function(e){return e.reduce((function(e,t){return{"":ee(ee({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},ie={label:l().createElement("div",null," ",n.formatMessage(C.Z.noResultsFound)),isDisabled:!0},ae=ee({access:[],applications:[]},c),se=Object.values({applications:ae.applications,operations:R,resources:_}).find((function(e){return e.length>10})),le=ne.slice(Z.offset,Z.offset+Z.limit);return l().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},E&&l().createElement(Y.Z,{text:M.text,title:M.title,isOpen:E,confirmButtonLabel:M.confirmButtonLabel,onClose:function(){return x({type:U,showRemoveModal:!1})},onSubmit:function(){P(),x({type:W})}}),l().createElement(T.M,{columns:N?J:J.filter((function(e){return e.title!==n.formatMessage(C.Z.resourceDefinitions)})),rows:A(N,null==c?void 0:c.uuid,le,n,O),actionResolver:c.system?void 0:function(){return[{title:n.formatMessage(C.Z.remove),onClick:function(e,t,r){return x({type:K,confirmDelete:function(){return re([r])},deleteInfo:{title:n.formatMessage(C.Z.removePermissionQuestion),text:te(r.uuid,c,!1),confirmButtonLabel:n.formatMessage(C.Z.removePermission)}})}}]},data:le,filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,n=e.offset;return x({type:V,limit:t,offset:n})},isSelectable:!c.system,setCheckedItems:function(e){x({type:z,selection:e(O).map((function(e){return{uuid:e.uuid}}))})},checkedRows:O,onShowMore:se?function(){x({type:q})}:void 0,setFilterValue:function(e){var t=e.applications,n=e.resources,r=e.operations;x(ee(ee(ee({type:Q},t?{applications:t}:I.applications),n?{resources:n}:I.resources),r?{operations:r}:I.operations))},toolbarButtons:function(){return t?[]:[l().createElement(j.Z,{to:S.Z["role-add-permission"].link.replace(":roleId",c.uuid),key:"role-add-permission",className:"rbac-m-hide-on-sm"},l().createElement(f.Button,{variant:"primary","aria-label":"Add Permission"},n.formatMessage(C.Z.addPermissions))),{label:n.formatMessage(C.Z.addPermission),props:{className:"rbac-m-hide-on-md"},onClick:function(){d(S.Z["role-add-permission"].link.replace(":roleId",c.uuid))}},{label:n.formatMessage(C.Z.remove),props:{isDisabled:!O.length>0},onClick:function(){var e=O.length>1;x({type:K,confirmDelete:function(){return re((0,o.Z)(O))},deleteInfo:{title:n.formatMessage(e?C.Z.removePermissionsQuestion:C.Z.removePermissionQuestion),text:te(e?O.length:O[0].uuid,c,O.length>1),confirmButtonLabel:n.formatMessage(e?C.Z.removePermissions:C.Z.removePermission)}})}}]},isLoading:u,pagination:ee(ee({},Z),{},{count:ne.length}),titlePlural:n.formatMessage(C.Z.permissions),titleSingular:n.formatMessage(C.Z.permission),emptyProps:{title:n.formatMessage(C.Z.noRolePermissions),description:$},filters:[{key:"applications",value:0===I.applications.length?"":I.applications,placeholder:n.formatMessage(C.Z.filterByKey,{key:n.formatMessage(C.Z.application).toLowerCase()}),type:"group",selected:oe(I.applications),groups:[{type:ae.applications.length>0?"checkbox":"plain",items:ae.applications.length>0?ae.applications.slice(0,w?void 0:10).map((function(e){return{label:e,value:e}})):[ie]}]},{key:"resources",value:0===I.resources.length?"":I.resources,placeholder:n.formatMessage(C.Z.filterByKey,{key:n.formatMessage(C.Z.resourceType).toLowerCase()}),type:"group",selected:oe(I.resources),groups:[{type:_.length>0?"checkbox":"plain",items:_.length>0?_.slice(0,w?void 0:10):[ie]}]},{key:"operations",value:0===I.operations.length?"":I.operations,placeholder:n.formatMessage(C.Z.filterByKey,{key:n.formatMessage(C.Z.operation).toLowerCase()}),type:"group",selected:oe(I.operations),groups:[{type:R.length>0?"checkbox":"plain",items:R.length>0?R.slice(0,w?void 0:10):[ie]}]}],tableId:"role-permissions"}))};ne.propTypes={cantAddPermissions:u().bool};const re=ne;var oe=n(74368),ie=n(76137);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e){var t,n=e.onDelete,r=(0,p.Z)(),c=(0,v.Z)(),u=(0,h.Z)(),I=(0,s.useState)(!1),k=(0,a.Z)(I,2),w=k[0],T=k[1],_=(0,s.useState)(!1),R=(0,a.Z)(_,2),x=R[0],D=R[1],L=(0,d.useParams)(),N=L.roleId,B=L.groupId,F=(0,m.useSelector)((function(e){var t,n,r,o,i,a,s,l,c;return se(se({role:e.roleReducer.selectedRole,isLoading:e.roleReducer.isRecordLoading},B&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(n=e.roleReducer)||void 0===n||null===(r=n.roles)||void 0===r?void 0:r.pagination)||M.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(s=a.groups)||void 0===s?void 0:s.pagination)||M.he,groupsFilters:(null===(l=e.groupReducer)||void 0===l||null===(c=l.groups)||void 0===c?void 0:c.filters)||{}})}),m.shallowEqual),A=F.role,G=F.group,V=F.isLoading,z=F.rolesPagination,U=F.rolesFilters,W=F.groupsPagination,K=F.groupsFilters,Q=F.systemGroupUuid,q=(0,m.useSelector)((function(e){return e.roleReducer.error!==P.VG})),H=(0,m.useSelector)((function(e){return e.groupReducer.error!==P.VG})),J=(0,m.useDispatch)(),X=function(){if(J((0,b.fp)(N)),B)if(B!==E.Cn)J((0,O.yi)(B));else{if(Q)return J((0,O.nV)(Q,{})),c.appObjectId(Q),function(){return c.appObjectId(void 0)};J((0,O.WD)({chrome:c}))}};(0,s.useEffect)((function(){return X(),c.appObjectId(N),function(){return c.appObjectId(void 0)}}),[N,B,Q]),(0,s.useEffect)((function(){0===(null==A?void 0:A.accessCount)&&""!==(null==A?void 0:A.external_tenant)&&""!==(null==A?void 0:A.external_role_id)&&null!=A&&A.system&&D(!0)}),[A]);var Y=function(){return[B?{title:r.formatMessage(C.Z.groups),to:(0,P.zk)((0,j.n)(S.Z.groups.link),W,K)}:{title:r.formatMessage(C.Z.roles),to:(0,P.zk)((0,j.n)(S.Z.roles.link),z,U)}].concat((0,o.Z)(H&&B&&(B===E.Cn?Q:H)?G?[{title:G&&G.name,to:(0,j.n)(S.Z["group-detail-roles"].link).replace(":groupId",B),isLoading:G&&G.loaded}]:[void 0]:H||!B?[]:[{title:r.formatMessage(C.Z.invalidGroup),isActive:!0}]),(0,o.Z)(H||!B?[{title:V?void 0:q?(null==A?void 0:A.display_name)||(null==A?void 0:A.name):r.formatMessage(C.Z.invalidRole),isActive:!0}]:[]))},$=!V&&A?A.display_name||A.name:void 0,ee=!V&&A?A.description:void 0,te=[l().createElement(f.DropdownItem,{component:l().createElement(j.Z,{onClick:function(){return T(!1)},to:S.Z["role-detail-edit"].link.replace(":roleId",N)},r.formatMessage(C.Z.edit)),key:"edit-role"}),l().createElement(f.DropdownItem,{component:l().createElement(j.Z,{onClick:n,to:S.Z["role-detail-remove"].link.replace(":roleId",N)},r.formatMessage(C.Z.delete)),className:"rbac-c-role__action",key:"delete-role"})];return l().createElement(s.Fragment,null,!H&&B||!q?l().createElement(s.Fragment,null,l().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},l().createElement(ie.Z,Y())),l().createElement(oe.Z,{title:"".concat(H?"Role":"Group"," not found"),description:["".concat(H?"Role":"Group"," with ID ").concat(H?N:B," does not exist.")],actions:[l().createElement(f.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return u(-1)}},r.formatMessage(C.Z.backToPreviousPage))]})):l().createElement(s.Fragment,null,l().createElement(y.Q,{breadcrumbs:Y()},l().createElement(f.Level,null,l().createElement(f.LevelItem,null,l().createElement(g.Z,{title:$||l().createElement(Z.h2,null),className:"rbac-page-header__title"})),!V&&A&&!A.system&&l().createElement(f.LevelItem,null,l().createElement(f.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:l().createElement(f.KebabToggle,{onToggle:function(e){return T(e)},id:"role-actions-dropdown"}),isOpen:w,isPlain:!0,position:"right",dropdownItems:te}))),ee&&l().createElement(f.TextContent,{className:"rbac-page-header__description"},l().createElement(f.Text,{component:"p"},ee))),V||!A?l().createElement(Z.Wi,null):l().createElement(re,{cantAddPermissions:x}),l().createElement(s.Suspense,null,l().createElement(d.Outlet,{context:(t={},(0,i.Z)(t,S.Z["role-detail-remove"].path,{afterSubmit:function(){J((0,b.Kt)(se(se({},z),{},{offset:0,filters:U,usesMetaInURL:!0,chrome:c})))},cancelRoute:S.Z["role-detail"].link.replace(":roleId",N),submitRoute:(0,P.zk)(S.Z.roles.link,se(se({},z),{},{offset:0}),U),isLoading:V}),(0,i.Z)(t,S.Z["role-detail-edit"].path,{afterSubmit:X,cancelRoute:S.Z["role-detail"].link.replace(":roleId",N),isLoading:V}),(0,i.Z)(t,S.Z["role-add-permission"].path,{isOpen:!0,role:A}),t)}))))};le.propTypes={onDelete:u().func};const ce=le},44012:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(70655),o=n(92950),i=n(86896),a=n(680);function s(e){var t=(0,i.Z)(),n=t.formatMessage,r=t.textComponent,a=void 0===r?o.Fragment:r,s=e.id,l=e.description,c=e.defaultMessage,u=e.values,p=e.children,d=e.tagName,m=void 0===d?a:d,f=n({id:s,description:l,defaultMessage:c},u,{ignoreTag:e.ignoreTag});return"function"==typeof p?p(Array.isArray(f)?f:[f]):m?o.createElement(m,null,o.Children.toArray(f)):o.createElement(o.Fragment,null,f)}s.displayName="FormattedMessage";var l=o.memo(s,(function(e,t){var n=e.values,o=(0,r.__rest)(e,["values"]),i=t.values,s=(0,r.__rest)(t,["values"]);return(0,a.wU)(i,n)&&(0,a.wU)(o,s)}));l.displayName="MemoizedFormattedMessage";const c=l}}]);
//# sourceMappingURL=../sourcemaps/8219.907db5683b66130e9e70e35b134f56b9.js.map