(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[129],{82680:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,'.ins-c-rbac__user-label-skeleton{width:50px}@media only screen and (min-width: 769px){input#filter-by-username.ins-c-conditional-filter[type="text"]{width:230px}}\n',""]),e.exports=t},60129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>B});var r=n(80150),a=n.n(r),i=n(47194),s=n(49739),o=n(83826),l=n(37671),c=n(54213),u=n(30159),p=n(94961),d=n(319),m=n.n(d),f=n(63038),h=n.n(f),b=n(59713),g=n.n(b),v=n(45697),E=n.n(v),y=n(70983),O=n(23279),_=n.n(O),j=n(69174),T=n(17721),w=n(62410),x=n(56455),P=n(89531),R=n(77802),S=n(55917),k=n(71410),A=(n(1888),n(12460));function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z,C=["Roles",{title:"Groups",cellTransforms:[A.compoundExpand]},{title:"Permissions",cellTransforms:[A.compoundExpand]},{title:"Last commit"}],I=function(e){var t=e.match.params.username,n=e.fetchRoles,u=e.fetchRoleForUser,p=e.fetchUsers,d=e.roles,f=e.isLoading,b=e.rolesWithAccess,v=e.user;(0,r.useEffect)((function(){return p(U(U({},k.he),{},{limit:0,username:t})),insights.chrome.appObjectId(t),function(){return insights.chrome.appObjectId(void 0)}}),[]);var E=(0,r.useState)(""),y=h()(E,2),O=y[0],P=y[1],R=(0,r.useState)({}),L=h()(R,2),I=L[0],D=L[1];return(0,r.useEffect)((function(){n({limit:20,offset:0,addFields:["groups_in"],username:t}),Z=_()((function(e,t,r,a,i){return n({limit:e,offset:t,name:r,addFields:a,username:i})}),500)}),[]),a().createElement(s.K,null,a().createElement(o.v,null,a().createElement(l.Q,{paddingBottm:!1,breadcrumbs:[{title:"Users",to:"/users"},{title:t,isActive:!0}]},a().createElement(l.y,{title:t,renderTitleTag:function(){return v&&!f?a().createElement(j._,{color:(null==v?void 0:v.is_active)&&"green"},(null==v?void 0:v.is_active)?"Active":"Inactive"):a().createElement(x.Z,{size:"xs",className:"ins-c-rbac__user-label-skeleton"})},description:"".concat(t,"'s roles, groups and permissions.")}))),a().createElement(o.v,null,a().createElement(c.Z,{type:"content",id:"user-detail"},a().createElement(T.M,{columns:C,isCompact:!1,isExpandable:!0,onExpand:function(e,t,n,r,a){r?D(U(U({},I),{},g()({},a.uuid,-1))):(D(U(U({},I),{},g()({},a.uuid,n))),2===n&&u(a.uuid))},createRows:function(e){return e?e.reduce((function(e,t,n){var r=t.uuid,s=t.name,o=t.groups_in,l=void 0===o?[]:o,c=t.modified,u=t.accessCount;return[].concat(m()(e),[{uuid:r,cells:[{title:s,props:{component:"th",isOpen:!1}},{title:"".concat(l.length),props:{isOpen:1===I[r]}},{title:u,props:{isOpen:2===I[r]}},{title:a().createElement(w.Z,{type:"exact",date:c})}]},{uuid:"".concat(r,"-groups"),parent:3*n,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:a().createElement(A.Table,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:A.TableVariant.compact,cells:["Name","Description"],rows:l.map((function(e){return{cells:[{title:a().createElement(i.Link,{to:"/groups/detail/".concat(e.uuid)},e.name)},e.description]}}))},a().createElement(A.TableHeader,null),a().createElement(A.TableBody,null))}]},{uuid:"".concat(r,"-groups"),parent:3*n,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:b&&b[r]?a().createElement(A.Table,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:A.TableVariant.compact,cells:["Application","Resource type","Operation"],rows:b[r].access.map((function(e){return{cells:e.permission.split(":")}}))},a().createElement(A.TableHeader,null),a().createElement(A.TableBody,null)):a().createElement(S.Wi,null)}]}])}),[]):[]},data:d.data,filterValue:O,ouiaId:"user-details-table",fetchData:function(e){var n=e.limit,r=e.offset,a=e.name;Z(n,r,a,["groups_in"],t)},setFilterValue:function(e){var t=e.name;return P(t)},isLoading:f,pagination:d.meta,filterPlaceholder:"role name",titlePlural:"roles",titleSingular:"role",tableId:"user"}))))};I.propTypes={match:E().object,fetchRoles:E().func,fetchRoleForUser:E().func,fetchUsers:E().func,roles:E().object,isLoading:E().bool,rolesWithAccess:E().object,user:E().object};const D=(0,i.withRouter)((0,y.connect)((function(e,t){var n=e.roleReducer,r=n.roles,a=n.isLoading,i=n.rolesWithAccess,s=e.userReducer.users.data,o=t.match.params.username;return{roles:r,isLoading:a,rolesWithAccess:i,user:s&&s.filter((function(e){return e.username===o}))[0]}}),(function(e){return{fetchRoles:function(t){return e((0,P.vd)(t))},fetchRoleForUser:function(t){return e((0,P.sv)(t))},fetchUsers:function(t){return e((0,R.u)(t))}}}))(I));var F=n(60306),N=n(6562),W=function(){var e=a().createElement(p.Z,{description:"These are all of the users in your Red Hat organization. To add new users or manage existing users, go to your"});return(0,r.useEffect)((function(){insights.chrome.appNavClick({id:"users",secondaryNav:!0})}),[]),a().createElement(i.Switch,null,a().createElement(N.Z,{pageAction:"user-detail",exact:!0,path:F._j.tG,render:function(e){return a().createElement(D,e)}}),a().createElement(N.Z,{pageAction:"users-list",path:[F._j.rC,F._j.Sy],render:function(){return a().createElement(s.K,null,a().createElement(o.v,null,a().createElement(l.Q,{paddingBottm:!1},a().createElement(l.y,{title:"Users",description:e}))),a().createElement(o.v,null,a().createElement(c.Z,{type:"content",id:"users"},a().createElement(u.Z,{userLinks:!0,props:{isSelectable:!1,isCompact:!1}}))))}}))};W.propTypes={},W.defaultProps={};const B=W},1888:(e,t,n)=>{var r=n(93379),a=n(82680);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.id,a,""]]);var i=r(a,{insert:"head",singleton:!1});if(!a.locals||e.hot.invalidate){var s=a.locals;e.hot.accept(82680,(function(){"string"==typeof(a=(a=n(82680)).__esModule?a.default:a)&&(a=[[e.id,a,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(s,a.locals)?(s=a.locals,i(a)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),e.exports=a.locals||{}}}]);
//# sourceMappingURL=129.ef5ace49268667805433.js.map