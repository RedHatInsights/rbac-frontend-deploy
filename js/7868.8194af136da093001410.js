(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[7868],{5715:(e,t,s)=>{"use strict";s.d(t,{C:()=>p});var n=s(8674),a=s(44914),i=s(20689),r=s(3758),l=s(57776),c=s(53926),o=s(33774),m=s(31398);const p=e=>{var{id:t="",children:s=null,className:d="",isOpen:u=!1,parentRef:g=null,getMenuRef:b=null,isDisabled:f=!1,isPlain:h=!1,isText:A=!1,toggleVariant:v="default",isActive:y=!1,onToggle:E=(e,t)=>{},icon:O=null,toggleIndicator:_=i.default,splitButtonItems:I,splitButtonVariant:k="checkbox","aria-haspopup":N,ouiaId:S,ouiaSafe:j,ref:P}=e,T=(0,n.__rest)(e,["id","children","className","isOpen","parentRef","getMenuRef","isDisabled","isPlain","isText","toggleVariant","isActive","onToggle","icon","toggleIndicator","splitButtonItems","splitButtonVariant","aria-haspopup","ouiaId","ouiaSafe","ref"]);const w=(0,m.useOUIAProps)(p.displayName,S,j),x=a.createElement(c.rO.Consumer,null,(({toggleTextClass:e,toggleIndicatorClass:n,toggleIconClass:i})=>a.createElement(r.l,Object.assign({},T,{id:t,className:d,isOpen:u,parentRef:g,getMenuRef:b,isActive:y,isDisabled:f,isPlain:h,isText:A,toggleVariant:v,onToggle:E,"aria-haspopup":N},w,I&&{isSplitButton:!0,"aria-label":T["aria-label"]||"Select"}),O&&a.createElement("span",{className:(0,o.css)(i)},O),s&&a.createElement("span",{className:_&&(0,o.css)(e)},s),_&&a.createElement("span",{className:(0,o.css)(!I&&n)},a.createElement(_,null)))));return I?a.createElement("div",{className:(0,o.css)(l.A.dropdownToggle,l.A.modifiers.splitButton,"action"===k&&l.A.modifiers.action,"primary"===v&&"action"===k&&l.A.modifiers.primary,"secondary"===v&&"action"===k&&l.A.modifiers.secondary,f&&l.A.modifiers.disabled)},I,x):x};p.displayName="DropdownToggle"},16401:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var n=s(74848),a=s(46942),i=s.n(a),r=s(63068),l=s(69),c=s(86228),o=function(){return o=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)};const m=function(e){var t=e.className,s=e.title,a=e.actionsContent,m=e.ouiaId,p=e.ouiaSafe,d=void 0===p||p,u=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]])}return s}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),g=i()(t),b="RHI/Header",f=(0,l.useOUIAId)(b,m,d);return(0,n.jsxs)(c.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,n.jsx)(c.FlexItem,{children:(0,n.jsx)(r.Title,o({headingLevel:"h1",size:"2xl",className:g,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":b,"data-ouia-component-id":f,"data-ouia-safe":d},u,{children:s}))}),a?(0,n.jsx)(c.FlexItem,{children:a}):null]})}},25487:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var n=s(44914),a=s.n(n),i=s(49634),r=s(81855),l=s(5715),c=s(99780),o=s(16401),m=s(20881),p=s(40748),d=s(29068),u=s(6442),g=s(5556),b=s.n(g),f=s(40335),h=s(42932),A=s(26956);const v=({isOrgAdmin:e,isUserAccessAdmin:t})=>{const s=(0,u.A)(),n=s.formatMessage(f.A[e?"orgAdministrator":"userAccessAdmin"]),i=a().createElement("span",null,s.formatMessage(f.A[e?"orgAdminHint":"userAccessAdminHint"]));return e||t?a().createElement(A.Tooltip,{position:A.TooltipPosition.right,content:i},a().createElement(h.Label,{color:"purple"}," ",n," ")):a().createElement(a().Fragment,null)};v.propTypes={isOrgAdmin:b().bool,isUserAccessAdmin:b().bool};const y=v;var E=s(40262);const O=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",advisor:"/insights/advisor",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions","ocp-advisor","ocm"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",remediations:"/remediations",subscriptions:"/subscriptions",repositories:"/content",provisioning:"/provisioning",tasks:"/tasks"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","remediations","subscriptions","content-sources","provisioning","tasks"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}];var _=s(76260),I=s(79300),k=s(7248),N=s(46942),S=s.n(N),j=s(36966),P=s(86458);const T=(...e)=>{const{search:t}=(0,i.useLocation)(),s=new URLSearchParams(t);return e.reduce(((e,t)=>({...e,[t]:s.get(t)})),{})},w=({header:e,entitlements:t,isDisabled:s})=>{const{bundle:n}=T("bundle");return a().createElement(a().Fragment,null,e&&a().createElement(k.Title,{headingLevel:"h3",size:"xl"},e),a().createElement(I.Stack,{className:S()({"pf-v5-u-mt-lg":!e}),hasGutter:!0},t&&O?.map((e=>{const r=t.find((([t])=>e.entitlement===t)),l=e.entitlement;return r?a().createElement(I.StackItem,{key:l,className:"rbac-c-mua-cardWrapper"},a().createElement(i.NavLink,{"aria-label":"card-link",className:S()("rbac-c-mua-bundles__cardlink",{"pf-v5-u-background-color-disabled-color-300":s}),to:{pathname:"",search:`bundle=${l}`}},a().createElement(P.Card,{key:e.title,isFlat:s||l!==n,isSelectable:!s,isSelected:!s&&l===n,className:S()({"pf-v5-u-background-color-disabled-color-300":s})},a().createElement(P.CardTitle,{className:"pf-v5-u-font-weight-light"}," ",e.title),a().createElement(P.CardBody,null,a().createElement(j.List,{className:"pf-v5-u-color-400 pf-v5-u-font-size-sm rbac-c-mua-bundles__card--applist",isPlain:!0},Object.entries(e.apps||{}).map((([e])=>a().createElement(j.ListItem,{key:e}," ",e," ")))))))):null}))))};w.propTypes={header:b().string,entitlements:b().array,isDisabled:b().bool};const x=w;var U=s(47181);const C=()=>n.Fragment,L=()=>{const{bundle:e}=T("bundle"),t=(e=>{const{pathname:t}=(0,i.useLocation)(),s=(0,i.useNavigate)();return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?O.find((({entitlement:t})=>t===e))?.appsIds||[]:(s({to:t,search:`bundle=${e=U.pI}`},{replace:!0}),[])})(e),[r,l]=(0,n.useState)({});(0,n.useEffect)((()=>{Object.prototype.hasOwnProperty.call(r,e)||s(93965)(`./${e}`).then((t=>l((s=>({...s,[e]:t.default}))))).catch(console.log)}),[e]);const c=r[e]||C;return a().createElement(c,{key:e,apps:t})};var M=s(85718);const F=({entitlements:e,isOrgAdmin:t,isUserAccessAdmin:s})=>{const n=(0,u.A)(),i=Object.entries(e).filter((([e,{is_entitled:t}])=>t&&"application_services"!==e)),{bundle:r}=T("bundle"),l=t||s;return a().createElement(M.A.Provider,{value:l},a().createElement(_.Grid,null,a().createElement(_.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},a().createElement(I.Stack,null,a().createElement(I.StackItem,{"data-testid":"entitle-section",className:"rbac-l-myUserAccess-section__cards--entitled"},a().createElement(x,{entitlements:i})))),a().createElement(_.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==r&&a().createElement(k.Title,{headingLevel:"h3",size:"xl"},n.formatMessage(l?f.A.yourRoles:f.A.yourPermissions,{name:O.find((({entitlement:e})=>e===r))?.title})),a().createElement(L,null))))};F.propTypes={entitlements:b().object,isOrgAdmin:b().bool,isUserAccessAdmin:b().bool};const B=F,R=()=>{const e=(0,u.A)(),t=(0,m.A)(),[s,g]=(0,n.useState)({}),[{bundle:b},h]=(0,i.useSearchParams)(),[A,v]=(0,n.useState)(b),{userAccessAdministrator:_}=(0,n.useContext)(E.A);(0,n.useEffect)((()=>{t.auth.getUser().then((({identity:e,entitlements:t})=>g({entitlements:t,isOrgAdmin:e?.user?.is_org_admin}))),!b&&h({bundle:U.pI})}),[]);const I={...s.entitlements,application_services:{is_entitled:!0,is_trial:!1}},k=Object.entries(I).filter((([,{is_entitled:e}])=>e)),[N,S]=(0,n.useState)(!1);return a().createElement(a().Fragment,null,Object.prototype.hasOwnProperty.call(s,"entitlements")&&(Object.prototype.hasOwnProperty.call(s,"isOrgAdmin")||_)?a().createElement(a().Fragment,null,a().createElement(o.A,{className:"rbac-p-myUserAccess--title sticky",title:a().createElement(a().Fragment,null,a().createElement("span",null," ",e.formatMessage(f.A.myUserAccess)," "),a().createElement(y,{isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:_}))}),a().createElement(p.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},e.formatMessage(f.A.selectAppsToViewPermissions)),k&&a().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},a().createElement(r.m,{ouiaId:"mua-bundle-dropdown",toggle:a().createElement(l.C,{onToggle:()=>S(!N),id:"mua-bundle-dropdown"},A||e.formatMessage(f.A.chooseSubscriptionEllipsis)),dropdownItems:O.map((e=>a().createElement(i.NavLink,{key:e.entitlement,to:{pathname:"",search:`bundle=${e.entitlement}`}},a().createElement(c.t,{onClick:()=>{v(e.title),S(!1)},component:"button"},e.title)))),isOpen:N})),a().createElement("section",null,a().createElement(B,{entitlements:I,isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:_}))):a().createElement(d.Spinner,null))}},85718:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});const n=(0,s(44914).createContext)(!1)},93965:(e,t,s)=>{var n={"./MUABundles":[25957,5957],"./MUABundles.scss":[25957,5957],"./__mocks__/rhel":[82289,2289],"./__mocks__/rhel.js":[82289,2289],"./ansible":[38944,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,6465],"./ansible.js":[38944,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,6465],"./application_services":[33661,5086,3661],"./application_services.js":[33661,5086,3661],"./openshift":[50880,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,2337],"./openshift.js":[50880,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,2337],"./rhel":[34879,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,6710],"./rhel.js":[34879,9060,3349,4475,3168,9546,5086,1971,6530,380,5970,9282,6710]};function a(e){if(!s.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(a)))}a.keys=()=>Object.keys(n),a.id=93965,e.exports=a}}]);
//# sourceMappingURL=../sourcemaps/7868.a5fd860663bf42edc9538d823899dad4.js.map