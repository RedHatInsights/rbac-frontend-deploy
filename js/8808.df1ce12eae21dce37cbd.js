(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[8808,459],{41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>l,dw:()=>n,e4:()=>o,ir:()=>r});var r,n,s=a(28416);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const l=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),o=s.createContext({keyHandler:null,sendRef:null})},63456:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(85893),n=a(94184),s=a.n(n),l=a(28416);const o=a.n(l)().createContext("light");var i=function(){return i=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};const c=function(e){var t=e.className,a=e.children,n=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","children"]),l=s()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section");return(0,r.jsx)(o.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var c=s()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,r.jsx)("section",i({},n,{className:"".concat(l," ").concat(c),"widget-type":"InsightsPageHeader",children:a}))}})}},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(85893),n=a(94184),s=a.n(n),l=a(78956);const o=function(e){var t=e.className,a=e.title,n=s()(t);return(0,r.jsx)(l.Title,{headingLevel:"h1",size:"2xl",className:n,"widget-type":"InsightsPageHeaderTitle",children:a})}},7876:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(85893),n=a(94184),s=a.n(n),l=function(){return l=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l.apply(this,arguments)};const o=function(e){var t,a=e.type,n=e.children,o=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["type","children","className"]),c=s()(o,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",l({},i,{className:c,children:[" ",n," "]}))}},27561:(e,t,a)=>{var r=a(67990),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},67990:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},23279:(e,t,a)=>{var r=a(13218),n=a(7771),s=a(14841),l=Math.max,o=Math.min;e.exports=function(e,t,a){var i,c,u,m,p,d,f=0,g=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var a=i,r=c;return i=c=void 0,f=t,m=e.apply(r,a)}function E(e){var a=e-d;return void 0===d||a>=t||a<0||v&&e-f>=u}function y(){var e=n();if(E(e))return Z(e);p=setTimeout(y,function(e){var a=t-(e-d);return v?o(a,u-(e-f)):a}(e))}function Z(e){return p=void 0,b&&i?h(e):(i=c=void 0,m)}function x(){var e=n(),a=E(e);if(i=arguments,c=this,d=e,a){if(void 0===p)return function(e){return f=e,p=setTimeout(y,t),g?h(e):m}(d);if(v)return clearTimeout(p),p=setTimeout(y,t),h(d)}return void 0===p&&(p=setTimeout(y,t)),m}return t=s(t)||0,r(a)&&(g=!!a.leading,u=(v="maxWait"in a)?l(s(a.maxWait)||0,t):u,b="trailing"in a?!!a.trailing:b),x.cancel=function(){void 0!==p&&clearTimeout(p),f=0,i=d=c=p=void 0},x.flush=function(){return void 0===p?m:Z(n())},x}},7771:(e,t,a)=>{var r=a(55639);e.exports=function(){return r.Date.now()}},14841:(e,t,a)=>{var r=a(27561),n=a(13218),s=a(33448),l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=o.test(e);return a||i.test(e)?c(e.slice(2),a?2:8):l.test(e)?NaN:+e}},84414:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(62012),n=a(64756);const s=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,n.n)(a,e),r)}},82617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var r=a(28416),n=a.n(r),s=a(45697),l=a.n(s),o=a(62012),i=a(75629),c=a(12849);const u=e=>e?n().createElement(i.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?n().createElement(i.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&n().createElement(o.NavLink,{end:!0,to:e.to},e.title)||e.title):n().createElement(c.Vj,{key:t})))):null;u.propTypes={breadcrumbs:l().object};const m=u},2086:(e,t,a)=>{"use strict";a.d(t,{Q:()=>d,y:()=>f});var r=a(28416),n=a.n(r),s=a(45697),l=a.n(s),o=a(64380),i=a(86304),c=a(12849),u=a(82617),m=a(63456),p=a(39173);const d=({children:e,breadcrumbs:t})=>n().createElement(r.Fragment,null,t&&n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},n().createElement(u.Z,{...t})),n().createElement(m.Z,{className:"rbac-page-header"},e));d.propTypes={children:l().oneOfType([l().arrayOf(l().node),l().node]).isRequired,breadcrumbs:l().array,paddingBottom:l().bool},d.defaultProps={paddingBottom:!1};const f=({title:e,renderTitleTag:t,description:a,children:s})=>n().createElement(r.Fragment,null,n().createElement(i.Flex,null,n().createElement(i.FlexItem,{className:"pf-v5-u-mb-sm"},n().createElement(p.Z,{title:e||n().createElement(c.h2,null),className:"rbac-page-header__title"})),n().createElement(i.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&n().createElement(o.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?n().createElement(o.Text,{component:o.TextVariants.p},a):a),s);f.propTypes={title:l().node,renderTitleTag:l().func,description:l().node,children:l().oneOfType([l().node,l().arrayOf(l().node)])}},27997:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var r=a(28416),n=a.n(r),s=a(86706),l=a(62012),o=a(25387),i=a(31055),c=a(78173),u=a(23539),m=a(64380),p=a(56869),d=a(75863),f=a(21081),g=a(49004),v=a(34844),b=a(91693),h=a.n(b),E=a(77029),y=a.n(E),Z=a(55140),x=a(12913),T=a(23279),O=a.n(T),N=a(7876),M=a(62410),C=a(32819),k=a(84414),w=a(64756),_=a(82617),j=a(66180),I=a(86601),S=a(2550),P=a(14289),B=a(97246),F=a(2086),L=a(13563),R=a(2981),A=a(29301),$=a(77044),G=a(74982);let U;const V=()=>{const e=(0,o.YB)(),t=(0,k.Z)(),a=(0,s.useDispatch)(),{username:b}=(0,l.useParams)(),[E,T]=(0,r.useState)(""),[V,D]=(0,r.useState)({}),[W,z]=(0,r.useState)(!1),[H,Q]=(0,r.useState)([]),q=(0,Z.Z)(),{roles:Y,isLoadingRoles:J,rolesWithAccess:K,user:X,isLoadingUsers:ee,userExists:te,adminGroup:ae}=(0,s.useSelector)((({roleReducer:{error:e,roles:t,isLoading:a,rolesWithAccess:r},userReducer:{users:{data:n},isUserDataLoading:s},groupReducer:{adminGroup:l}})=>({adminGroup:l,roles:t,isLoadingRoles:a,rolesWithAccess:r,user:n&&n.filter((e=>e.username===b))[0],isLoadingUsers:s,userExists:e!==A.VG}))),{orgAdmin:re,userAccessAdministrator:ne}=(0,r.useContext)(I.Z),se=re||ne,le=e=>a((0,L.vd)(e));(0,r.useEffect)((()=>(q.appObjectId(b),a((0,$.fB)({chrome:q})),a((0,R.u)({...G.he,limit:0,filters:{username:b}})),le({limit:20,offset:0,username:b}),z(!0),le({limit:20,offset:0,addFields:["groups_in"],username:b}).then((()=>z(!1))),U=O()(((e,t,a,r,n)=>le({limit:e,offset:t,displayName:a,addFields:r,username:n})),500),()=>q.appObjectId(void 0))),[]);const oe=[{title:e.formatMessage(S.Z.roles)},{title:e.formatMessage(S.Z.groups),cellTransforms:[p.z]},{title:e.formatMessage(S.Z.permissions),cellTransforms:[p.z]},{title:e.formatMessage(S.Z.lastModified)}],ie=[e.formatMessage(S.Z.application),e.formatMessage(S.Z.resourceType),e.formatMessage(S.Z.operation)],ce=[{title:e.formatMessage(S.Z.users),to:(0,w.n)(P.Z.users.link)},{title:te?b:e.formatMessage(S.Z.invalidUser),isActive:!0}];return n().createElement(r.Fragment,null,te?n().createElement(u.Stack,null,n().createElement(u.StackItem,null,n().createElement(F.Q,{breadcrumbs:ce},n().createElement(F.y,{title:b,renderTitleTag:()=>ee?n().createElement(C.Z,{size:"xs",className:"rbac-c-user__label-skeleton"}):n().createElement(c.Label,{color:X?.is_active&&"green"},e.formatMessage(X?.is_active?S.Z.active:S.Z.inactive))},!ee&&X?n().createElement(r.Fragment,null,n().createElement(m.TextContent,null,`${e.formatMessage(S.Z.orgAdministrator)}: `,X?.is_org_admin?n().createElement(h(),{key:"yes-icon",className:"pf-v5-u-mx-sm"}):n().createElement(y(),{key:"no-icon",className:"pf-v5-u-mx-sm"}),e.formatMessage(X?.is_org_admin?S.Z.yes:S.Z.no)),X?.email&&n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(S.Z.email)}: ${X.email}`),X?.username&&n().createElement(m.TextContent,null,n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(S.Z.username)}: ${X.username}`))):null))),n().createElement(u.StackItem,null,n().createElement(N.Z,{type:"content",className:"rbac-c-user-roles"},n().createElement(B.M,{columns:oe,isExpandable:!0,onExpand:(e,t,r,n,s)=>{n?D({...V,[s.uuid]:-1}):(D({...V,[s.uuid]:r}),2===r&&a((0,L.sv)(s.uuid)))},rows:((t,a,r)=>t?t.reduce(((t,{uuid:s,display_name:l,groups_in:o=[],modified:i,accessCount:c},u)=>[...t,{uuid:s,cells:[{title:l,props:{component:"th",isOpen:!1}},{title:W?n().createElement(C.Z,{size:C.i.xs}):o.length,props:{isOpen:1===V[s]}},{title:c,props:{isOpen:2===V[s]}},{title:n().createElement(M.Z,{type:(0,A.mh)(i),date:i})}]},{uuid:`${s}-groups`,parent:3*u,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:o?.length>0?n().createElement(f.i,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:d.B.compact,cells:[e.formatMessage(S.Z.name),e.formatMessage(S.Z.description)," "],rows:o.map((t=>({cells:[{title:n().createElement(w.Z,{to:P.Z["group-detail"].link.replace(":groupId",t.uuid)},t.name)},t.description,{title:r.uuid===t.uuid?null:n().createElement(w.Z,{to:P.Z["user-add-group-roles"].link.replace(":username",a).replace(":groupId",t.uuid),state:{name:t.name}},e.formatMessage(S.Z.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},n().createElement(g.x,null),n().createElement(v.R,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},W?e.formatMessage(S.Z.loading):e.formatMessage(S.Z.noGroups))}]},{uuid:`${s}-permissions`,parent:3*u,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:K&&K[s]?K[s].access?.length>0?n().createElement(f.i,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:d.B.compact,cells:ie,rows:K[s].access.map((e=>({cells:e.permission.split(":")})))},n().createElement(g.x,null),n().createElement(v.R,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},e.formatMessage(S.Z.noPermissions)):n().createElement(x.Z,{rows:c,columns:ie,variant:d.B.compact})}]}]),[]):[])(Y.data,b,ae),data:Y.data,filterValue:E,ouiaId:"user-details-table",fetchData:({limit:e,offset:t,name:a})=>{U(e,t,a,["groups_in"],b)},setFilterValue:({name:e})=>T(e),isLoading:J,toolbarButtons:()=>[...se?[n().createElement(w.Z,{to:P.Z["add-user-to-group"].link.replace(":username",b),key:"add-user-to-group",className:"rbac-m-hide-on-sm"},n().createElement(i.Button,{ouiaId:"add-user-to-group-button",variant:"primary","aria-label":"Add user to a group"},e.formatMessage(S.Z.addUserToGroup))),{label:e.formatMessage(S.Z.addUserToGroup),onClick:()=>{t(P.Z["add-user-to-group"].link.replace(":username",b))}}]:[]],pagination:Y.meta,filterPlaceholder:e.formatMessage(S.Z.roleName).toLowerCase(),titlePlural:e.formatMessage(S.Z.roles).toLowerCase(),titleSingular:e.formatMessage(S.Z.role).toLowerCase(),tableId:"user"}),n().createElement(r.Suspense,null,n().createElement(l.Outlet,{context:{username:b,selectedRoles:H,setSelectedRoles:Q,closeUrl:P.Z["user-detail"].link.replace(":username",b),addRolesToGroup:(e,t)=>a((0,$.Wj)(e,t))}}))))):n().createElement(r.Fragment,null,n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb pf-v5-u-pb-md"},n().createElement(_.Z,{...ce})),n().createElement(j.Z,{title:e.formatMessage(S.Z.userNotFound),description:[e.formatMessage(S.Z.userNotFoundDescription,{username:b})],actions:[n().createElement(i.Button,{key:"back-button",className:"pf-v5-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:()=>t(-1)},e.formatMessage(S.Z.backToPreviousPage))]})))}}}]);
//# sourceMappingURL=../sourcemaps/8808.2edee23ac0ade931a47f8a22dd57a1d3.js.map