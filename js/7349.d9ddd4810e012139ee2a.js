/*! For license information please see 7349.d9ddd4810e012139ee2a.js.LICENSE.txt */
(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[7349],{92758:(e,t,r)=>{"use strict";r.d(t,{MS:()=>l,aX:()=>s,qF:()=>c});var n=r(93433),o=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new URLSearchParams(e.search),c=r.reduce((function(e,t){var r=s.getAll(t);return a(a({},e),{},(0,o.Z)({},t,r.length>1?r:r[0]))}),{});return Object.keys(i).forEach((function(e){var t=i[e];c=a(a({},c),{},(0,o.Z)({},e,Array.isArray(c[e])?(0,n.Z)(new Set([].concat((0,n.Z)(c[e]),(0,n.Z)(Array.isArray(t)?t:[t])))):(null==t?void 0:t.length)>0&&t||c[e])),Array.isArray(t)?t.forEach((function(t){return s.getAll(e).includes(t)||s.append(e,t)})):s.get(e)||t&&s.set(e,t)})),t({pathname:e.pathname,search:s.toString()},{replace:!0}),c},c=function(e,t){var r=new URLSearchParams(e.search);return t.some((function(e){return r.get(e)}))},l=function(e,t,r){var n=new URLSearchParams(e.search);Object.keys(r).forEach((function(e){return n.delete(e)})),Object.keys(r).forEach((function(e){var t=r[e];Array.isArray(t)?t.forEach((function(t){return t&&n.append(e,t)})):t&&n.set(e,t)})),t({pathname:e.pathname,search:n.toString()},{replace:!0})}},93736:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(46801),o=r(94496);const i=function(e){var t=(0,n.useNavigate)();return function(r,n){return t((0,o.n)(r,e),n)}}},94496:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m,n:()=>f});var n=r(87462),o=r(4942),i=r(92950),a=r.n(i),s=r(46801),c=r(45697),l=r.n(c);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/iam/user-access";return"string"==typeof e?"".concat(t,"/").concat(e).replaceAll("//","/"):p(p({},e),{},{pathname:"".concat(t,"/").concat(e.pathname).replaceAll("//","/")})},d=a().forwardRef((function(e,t){return a().createElement(s.Link,(0,n.Z)({},e,{ref:t,to:f(e.to,e.linkBasename)}))}));d.displayName="AppLink",d.propTypes={to:l().oneOfType([l().string,l().object]),linkBasename:l().string};const m=d},1227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(29439),o=r(92950),i=r.n(o),a=r(86896),s=r(45697),c=r.n(s),l=r(30893),u=r(69957),p=r(76857),f=function(e){var t=e.title,r=e.text,s=e.onClose,c=e.onSubmit,f=e.isOpen,d=e.confirmButtonLabel,m=e.withCheckbox,h=(0,a.Z)(),v=(0,o.useState)(!1),y=(0,n.Z)(v,2),g=y[0],b=y[1];return i().createElement(p.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(u.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:f,variant:p.ModalVariant.small,onClose:s,actions:[i().createElement(p.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:m&&!g,variant:"danger",onClick:c},d),i().createElement(p.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:s},h.formatMessage(l.Z.cancel))]},i().createElement(p.Split,{hasGutter:!0},i().createElement(p.SplitItem,{isFilled:!0},i().createElement(p.Stack,{hasGutter:!0},i().createElement(p.TextContent,null,r)))),m?i().createElement(p.Checkbox,{isChecked:g,onChange:function(){return b(!g)},label:h.formatMessage(l.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};f.propTypes={text:c().any,title:c().string,confirmButtonLabel:c().string,onSubmit:c().func,onClose:c().func,isOpen:c().bool,withCheckbox:c().bool},f.defaultProps={withCheckbox:!1};const d=f},76137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(46801),c=r(76857),l=r(19571),u=function(e){return e?o().createElement(c.Breadcrumb,null,Object.values(e).map((function(e,t){return e.title?o().createElement(c.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&o().createElement(s.NavLink,{end:!0,to:e.to},e.title)||e.title):o().createElement(l.Vj,{key:t})}))):null};u.propTypes={breadcrumbs:a().object};const p=u},38376:(e,t,r)=>{"use strict";r.d(t,{Q:()=>f,y:()=>d});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(19571),l=r(76137),u=r(89376),p=r(39173),f=function(e){var t=e.children,r=e.breadcrumbs;return o().createElement(n.Fragment,null,r&&o().createElement("section",{className:"pf-c-page__main-breadcrumb"},o().createElement(l.Z,r)),o().createElement(u.Z,{className:"rbac-page-header"},t))};f.propTypes={children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,breadcrumbs:a().array,paddingBottom:a().bool},f.defaultProps={paddingBottom:!1};var d=function(e){var t=e.title,r=e.renderTitleTag,i=e.description,a=e.children;return o().createElement(n.Fragment,null,o().createElement(s.Flex,null,o().createElement(s.FlexItem,{className:"pf-u-mb-sm"},o().createElement(p.Z,{title:t||o().createElement(c.h2,null),className:"rbac-page-header__title"})),o().createElement(s.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},r&&r())),i&&o().createElement(s.TextContent,{className:"rbac-page-header__description"},"string"==typeof i?o().createElement(s.Text,{component:s.TextVariants.p},i):i),a)};d.propTypes={title:a().node,renderTitleTag:a().func,description:a().node,children:a().oneOfType([a().node,a().arrayOf(a().node)])}},29215:(e,t,r)=>{"use strict";r.d(t,{R:()=>d,A:()=>f});var n=r(36580),o=r(71002),i=r(15861);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function m(){}function h(){}var v={};l(v,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==t&&r.call(g,i)&&(v=g);var b=h.prototype=d.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function n(i,a,s,c){var l=p(e[i],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==(0,o.Z)(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(b,"constructor",h),l(h,"constructor",m),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(Z.prototype),l(Z.prototype,s,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new Z(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var s=(0,r(96692).i$)();function c(e){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResourceTypes(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getResource(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){return{type:n.s6,payload:c(e)}},d=function(e){return{type:n.ZX,payload:u(e)}}},40483:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(4942),o=r(45987),i=r(87462),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76429),p=r(67850),f=r(48880),d=r(74219),m=r(57820),h=r(16396),v=r(4853),y=["ModalProps","saveLabel","cancelLabel","alert"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b="modal-form",E=function(e){return s().createElement(v.l,(0,i.Z)({},e,{id:b}))},Z=function(e){var t=e.saveLabel,r=e.cancelLabel,n=(0,f.default)().onCancel;return s().createElement(u.Z,null,(function(e){var o=e.pristine,i=e.invalid,a=e.validating,c=e.submitting;return s().createElement("div",{className:"pf-c-form"},s().createElement(m.W,{className:"pf-u-mt-0"},s().createElement(h.Button,{ouiaId:"primary-save-button",variant:"primary",form:b,type:"submit",isDisabled:o||a||c||i},t),s().createElement(h.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:n,id:"cancel-modal"},r)))}))};Z.propTypes={saveLabel:l().node,cancelLabel:l().node},Z.defaultProps={saveLabel:"Save",cancelLabel:"Cancel"};var w=function(e){var t=e.ModalProps,r=e.saveLabel,n=e.cancelLabel,a=e.alert,c=(0,o.Z)(e,y);return s().createElement(d.Modal,(0,i.Z)({},t,{footer:s().createElement(Z,{saveLabel:r,cancelLabel:n})}),null==a?void 0:a(),s().createElement(p.ZP,(0,i.Z)({},c,{showFormControls:!1,FormWrapper:E})))};w.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ModalProps:l().object},Z.propTypes);const O=w},36457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(87462),o=r(4942),i=r(45987),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(93433),p=r(86896),f=r(30893),d=r(76857),m=["input","options","isReadOnly","isDisabled","isRequired"],h=["label","isRequired","helperText","meta","description","hideLabel"],v=function(e){var t=e.input,r=e.options,o=e.isReadOnly,a=e.isDisabled,c=e.isRequired,l=(0,i.Z)(e,m);return s().createElement(d.FormSelect,(0,n.Z)({},t,l,{isDisabled:a||o}),function(e,t,r){var n=(0,p.Z)();if(t&&r)return e;var o=(0,u.Z)(e);return o.find((function(e){return void 0===e.value}))?(0,u.Z)(o):[{label:n.formatMessage(f.Z[r?"pleaseChoose":"none"])}].concat((0,u.Z)(o))}(r,t.value,c).map((function(e){return s().createElement(d.FormSelectOption,(0,n.Z)({key:e.value||e.label},e,{label:e.label.toString()}))})))};v.propTypes={input:l().object.isRequired,options:l().arrayOf(l().shape({value:l().any,label:l().string.isRequired})).isRequired,isReadOnly:l().bool,isDisabled:l().bool,isRequired:l().bool,FieldProvider:l().any};var y=function(e){var t=e.label,r=e.isRequired,o=e.helperText,a=e.meta,c=e.description,l=e.hideLabel,u=(0,i.Z)(e,h),p=a.error,f=a.touched&&p;return s().createElement(d.FormGroup,{isRequired:r,label:!l&&t,fieldId:u.id,isValid:!f,helperText:o,helperTextInvalid:a.error},c&&s().createElement(d.TextContent,null,s().createElement(d.Text,{component:d.TextVariants.small},c)),s().createElement(v,(0,n.Z)({label:t,isValid:!f,isRequired:r},u)))};y.propTypes={componentType:l().string,label:l().string,isRequired:l().bool,helperText:l().string,meta:l().object,description:l().string,hideLabel:l().bool};const g=y;var b=r(41609),E=r.n(b),Z=r(48880),w=r(76429),O=function(e){var t=e.dirtyFieldsSinceLastSubmit,r=e.submitSucceeded,n=e.pristine,o=(0,Z.default)().onCancel,i=E()(t)||!r&&n,a=(0,p.Z)();return s().createElement(d.ActionGroup,{className:"pf-u-mt-0"},s().createElement(d.Button,{ouiaId:"primary-submit-button",type:"submit",isDisabled:i,variant:"primary"},a.formatMessage(f.Z.save)),s().createElement(d.Button,{ouiaId:"secondary-cancel-button",variant:"link",onClick:function(){return o()}},a.formatMessage(f.Z.cancel)))};O.propTypes={dirtyFieldsSinceLastSubmit:l().shape((0,o.Z)({},l().string,l().oneOfType([l().string,l().number,l().bool]))),submitSucceeded:l().bool,pristine:l().bool,onCancel:l().func};const x=function(e){return s().createElement(w.Z,{subscription:{pristine:!0,submitSucceeded:!0,dirtyFieldsSinceLastSubmit:!0}},(function(t){return s().createElement(O,(0,n.Z)({},t,e))}))};var j=r(67850),P=r(65412),S=r(75747),k=r(93025),L=r(96354),T=["formTemplateProps"],M=function(e){var t,r=e.formTemplateProps,a=(0,i.Z)(e,T);return s().createElement(k.Z,(0,n.Z)({componentMapper:(t={},(0,o.Z)(t,L.Z.TEXT_FIELD,P.Z),(0,o.Z)(t,L.Z.TEXTAREA,S.Z),(0,o.Z)(t,L.Z.SELECT,g),t),FormTemplate:function(e){return s().createElement(j.ZP,(0,n.Z)({},r,e,{FormButtons:x}))}},a))};M.propTypes={formTemplateProps:l().object};const R=M},93327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(92950),o=r(45697),i=r.n(o),a=r(55140),s=function(e){var t=e.pageAction,r=e.children,o=(0,a.Z)();return(0,n.useEffect)((function(){return o.appAction(t),function(){return o.appAction(void 0)}}),[t]),r};s.propTypes={pageAction:i().string.isRequired};const c=s},73943:(e,t,r)=>{"use strict";r.d(t,{R:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(69957),l=r(86896),u=r(30893),p=function(e){var t=e.type,r=e.isOpen,n=e.onModalCancel,i=e.onConfirmCancel,a=e.customTitle,p=e.customDescription,f=e.customPrimaryButtonTitle,d=e.customSecondaryButtonTitle,m=(0,l.Z)();return o().createElement(s.Modal,{title:o().createElement("span",{className:"rbac-c-wizard__cancel-warning-header"},o().createElement(c.ZP,{size:"md",className:"rbac-c-wizard__cancel-warning-header--icon"}),a||m.formatMessage(u.Z.exitItemCreation,{item:t})),variant:s.ModalVariant.small,className:"rbac rbac-c-wizard__cancel-warning",isOpen:r,onClose:n,actions:[o().createElement(s.Button,{ouiaId:"primary-exit-button",key:"confirm",variant:"primary",onClick:i},null!=f?f:m.formatMessage(u.Z.exit)),o().createElement(s.Button,{ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:n},null!=d?d:m.formatMessage(u.Z.stay))]},o().createElement("span",null,p||m.formatMessage(u.Z.discardedInputsWarning)," "))};p.propTypes={type:a().string,customTitle:a().node,customDescription:a().node,customPrimaryButtonTitle:a().string,customSecondaryButtonTitle:a().string,isOpen:a().bool,onModalCancel:a().func,onConfirmCancel:a().func}},27979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(4942),o=r(93433),i=r(29439),a=r(92950),s=r.n(a),c=r(45697),l=r.n(c),u=r(76857),p=r(48880),f=r(55795),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t,r,n,c=e.formFields,l=(0,p.default)(),h=(0,a.useState)(l.getState().values["add-permissions-table"]||[]),y=(0,i.Z)(h,2),g=y[0],b=y[1],E=(0,a.useState)(!1),Z=(0,i.Z)(E,2),w=Z[0],O=Z[1],x=l.getState().values["not-allowed-permissions"],j=(0,d.Z)(),P=(null===(t=l.getState().values)||void 0===t||null===(r=t["copy-base-role"])||void 0===r||null===(n=r.applications)||void 0===n?void 0:n.filter((function(e){return!(null!=g&&g.find((function(t){return t.uuid.includes(e)})))})))||[],S=c[0][0];return s().createElement("div",{className:"rbac"},g.length>0?s().createElement("div",{className:"rbac-c-selected-chips"},s().createElement(u.ChipGroup,{categoryName:j.formatMessage(m.Z.selectedPermissions)},g.reduce((function(e,t){return[t].concat((0,o.Z)(e))}),[]).map((function(e){var t=e.uuid;return s().createElement(u.Chip,{key:t,color:"blue",isTruncated:!0,onClick:function(){return b(g.filter((function(e){return e.uuid!==t})))}},t)})))):null,s().createElement(u.Title,{headingLevel:"h1",size:"xl",className:"rbac-c-add-permission-title"},j.formatMessage(m.Z.addPermissions)),s().createElement(u.TextContent,null,s().createElement(u.Text,null,j.formatMessage(m.Z.selectPermissionsForRole),0!==P.length&&s().createElement(u.Popover,{headerContent:j.formatMessage(m.Z.onlyGranularPermissions),bodyContent:j.formatMessage(m.Z.noWildcardPermissions)},s().createElement(u.Button,{variant:"link"},j.formatMessage(m.Z.whyNotSeeingAllPermissions)," ",s().createElement(f.ZP,null))))),(null==x?void 0:x.length)>0&&!w?s().createElement(u.Alert,{variant:"default",isInline:!0,title:"".concat(j.formatMessage(m.Z.followingPermissionsCannotBeAdded)," ").concat(x.join(", ")),actionClose:s().createElement(u.AlertActionCloseButton,{onClose:function(){return O(!0)}})}):null,[[v(v({},S),{},{props:v(v({},S.props),{},{selectedPermissions:g,setSelectedPermissions:b})})]])};y.propTypes={formFields:l().array};const g=y},11514:(e,t,r)=>{"use strict";r.d(t,{Z:()=>V});var n=r(87462),o=r(93433),i=r(29439),a=r(4942),s=r(45987),c=r(18446),l=r.n(c),u=r(92950),p=r.n(u),f=r(45697),d=r.n(f),m=r(50533),h=r(41693),v=r(48880),y=r(48623),g=r(41800),b=r(36580),E=r(71002),Z=r(15861);function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=Z(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(P([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=d.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,E.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var O=(0,r(96692).Y3)();function x(e,t,r,n,o,i,a,s,c,l,u){return j.apply(this,arguments)}function j(){return(j=(0,Z.Z)(w().mark((function e(t,r,n,o,i,a,s,c,l,u,p){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissions(t,r,n,o,i,a,s,c,l,u,p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,r,n,o,i,a,s){return S.apply(this,arguments)}function S(){return(S=(0,Z.Z)(w().mark((function e(t,r,n,o,i,a,s,c){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listPermissionOptions(t,r,n,o,i,a,void 0,s,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={application:b.KD,resource_type:b.vf,verb:b.E2},L=r(29215),T=r(28090),M=r(76857),R=r(1936),_=["row"],D=function(e){var t=e.row,r=(0,s.Z)(e,_);return t.disableSelection?p().createElement(M.Tooltip,{content:t.disabledContent,exitDelay:1500,entryDelay:1500},p().createElement(R.RowWrapper,(0,n.Z)({className:"rbac-c-disabled-row",row:t},r))):p().createElement(R.RowWrapper,(0,n.Z)({row:t},r))};D.propTypes={props:d().object,row:d().object};var I=r(86896),C=r(30893),N=r(43707),F=["selectedPermissions","setSelectedPermissions"];function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){var t=e.permissionReducer,r=t.permission,n=t.isLoading,o=t.options,i=o.application,a=o.operation,s=o.resource,c=t.expandSplats,l=t.isLoadingExpandSplats,u=e.roleReducer,p=u.isRecordLoading,f=u.selectedRole,d=e.costReducer.resourceTypes;return{permissions:r.data.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.application,r=e.resource_type,n=e.verb,o=e.permission,i=e.requires;return{application:t,resource:r,operation:n,uuid:o,requires:i}})),pagination:r.meta,isLoading:n||p,baseRole:f,applicationOptions:i.data.filter((function(e){return"*"!==e})),resourceOptions:s.data.filter((function(e){return"*"!==e})),operationOptions:a.data.filter((function(e){return"*"!==e})),expandedPermissions:c.data.map((function(e){return e.permission})),isLoadingExpandSplats:l,resourceTypes:d.data}},q=function(e){var t=e.selectedPermissions,r=e.setSelectedPermissions,c=(0,s.Z)(e,F),f=(0,m.useDispatch)(),d=(0,I.Z)(),E=(0,N.ZP)("cost-management",["cost-management:*:*"]).hasAccess,Z=[d.formatMessage(C.Z.application),d.formatMessage(C.Z.resourceType),d.formatMessage(C.Z.operation)],w=function(e){return f((r=(t=A(A(A({},e),ee?{exclude_roles:ee}:{}),{},{allowed_only:!0})).limit,n=t.offset,o=t.orderBy,i=t.application,a=t.resourceType,s=t.verb,c=t.permission,u=void 0===(l=t.exclude_globals)||l,p=t.exclude_roles,d=t.allowed_only,m=t.options,{type:b.wI,payload:x(r,n,o,i,a,s,c,u,p,d,m)}));var t,r,n,o,i,a,s,c,l,u,p,d,m},O=function(e){return f((r=(t=A(A({},e),{},{allowedOnly:!0})).field,n=t.limit,o=t.offset,i=t.application,a=t.resourceType,s=t.verb,c=t.allowedOnly,l=t.options,{type:k[r],payload:P(r,n,o,i,a,s,c,l)}));var t,r,n,o,i,a,s,c,l},j=(0,m.useSelector)(B,m.shallowEqual),S=j.permissions,M=j.isLoading,R=j.pagination,_=j.baseRole,G=j.applicationOptions,q=j.resourceOptions,V=j.operationOptions,z=j.expandedPermissions,W=j.isLoadingExpandSplats,K=j.resourceTypes,Y=(0,h.Z)(c).input,U=(0,v.default)(),X=(0,u.useState)({applications:[],resources:[],operations:[]}),Q=(0,i.Z)(X,2),H=Q[0],$=Q[1],J=U.getState().values["role-type"],ee=U.getState().values["role-uuid"],te=(0,u.useState)(!1),re=(0,i.Z)(te,2),ne=re[0],oe=re[1],ie=(0,u.useState)(""),ae=(0,i.Z)(ie,2),se=ae[0],ce=ae[1],le=(0,u.useState)(),ue=(0,i.Z)(le,2),pe=ue[0],fe=ue[1],de=function(e){return K.find((function(t){var r;return t.value===(null===(r=e.split(":"))||void 0===r?void 0:r[1])}))},me=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"application",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),he=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"resource_type",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]),ve=(0,u.useCallback)((0,y.Z)((function(e){var t=e.applications,r=e.resources,n=e.operations;return O({field:"verb",limit:50,application:t.join(),resourceType:r.join(),verb:n.join()})}),2e3),[]);(0,u.useEffect)((function(){var e,t=null===(e=U.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid;return"copy"===J&&t&&f((0,T.fp)(t)),U.change("has-cost-resources",!1),w(R),O({field:"application",limit:50}),O({field:"resource_type",limit:50}),O({field:"verb",limit:50}),function(){return f({type:b.e0,payload:{data:[]}})}}),[]),(0,u.useEffect)((function(){E&&f((0,L.A)())}),[E]),(0,u.useEffect)((function(){he(H),ve(H)}),[H.applications]),(0,u.useEffect)((function(){me(H),ve(H)}),[H.resources]),(0,u.useEffect)((function(){me(H),he(H)}),[H.operations]),(0,u.useEffect)((function(){Y.onChange(t)}),[t]),(0,u.useEffect)((function(){var e;if(!(!_||"copy"!==J||U.getState().values["base-permissions-loaded"]||t.length>0||(null===(e=U.getState().values["copy-base-role"])||void 0===e?void 0:e.uuid)!==(null==_?void 0:_.uuid)||W||M)){var n,i,a,s,c,l,u,p,d,m,h,v,y,g=[],E=(null==_?void 0:_.access.filter((function(e){var t;return!!G.includes(null==e||null===(t=e.permission)||void 0===t?void 0:t.split(":")[0])||(g.push(e),!1)})))||[];if(U.change("not-allowed-permissions",g.map((function(e){return e.permission}))),0===z.length&&void 0===W){var Z=(0,o.Z)(new Set(E.map((function(e){return e.permission.split(":")[0]}))));f((a=void 0===(i=(n={application:Z.join()}).limit)?1e3:i,c=void 0===(s=n.offset)?0:s,l=n.orderBy,u=n.application,p=n.resourceType,d=n.verb,m=n.permission,v=void 0===(h=n.exclude_globals)||h,y=n.options,{type:b.e,payload:x(a,c,l,u,p,d,m,v,y)}))}else{var w=E.map((function(e){return e.permission.replace("*",".*")}));r((function(){return z.filter((function(e){return"cost-management"!==e.split(":")[0]||0!==(de(e)||{count:0}).count})).filter((function(e){return w.some((function(t){return e.match(t)}))})).map((function(e){return{uuid:e}}))})),U.change("base-permissions-loaded",!0)}}}),[S,_]);var ye=function(e){return e.reduce((function(e,t){return{"":A(A({},null==e?void 0:e[""]),{},(0,a.Z)({},t,!0))}}),{"":{}})},ge={applications:(0,o.Z)(G).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),resources:(0,o.Z)(q).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}})),operations:(0,o.Z)(V).filter((function(e){return e.includes(se)})).map((function(e){return{label:e,value:e}}))},be={label:p().createElement("div",null,d.formatMessage(C.Z.noResultsFound)),isDisabled:!0},Ee=ge[Object.keys(ge)[pe||0]].length>10;return p().createElement("div",{className:"rbac-c-permissions-table"},p().createElement(g.M,(0,n.Z)({columns:Z,isSelectable:!0,isCompact:!0,borders:!1,rows:function(e){return e.map((function(e){var r=e.application,n=e.resource,o=e.operation,i=e.uuid,a=e.requires;return{uuid:"".concat(r,":").concat(n,":").concat(o),requires:a,cells:[{title:r},n,o],selected:Boolean(t&&t.find((function(e){return e.uuid===i}))),disableSelection:"cost-management"===r&&(0===(de(i)||{count:0}).count||!E),disabledContent:p().createElement("div",null,d.formatMessage(E?C.Z.configureResourcesForPermission:C.Z.noCostManagementPermissions)," ",E?p().createElement("a",{href:"./settings/sources"},d.formatMessage(C.Z.configureCostSources)):null)}}))}(S),data:S,filterValue:"",noData:0===(null==S?void 0:S.length),noDataDescription:[d.formatMessage(C.Z.permissionNotDisplayedDescription)],fetchData:function(e){var t=e.limit,r=e.offset,n=e.applications,o=e.resources,i=e.operations;w({limit:t,offset:r,application:(n||H.applications).join(),resourceType:(o||H.resources).join(),verb:(i||H.operations).join()})},setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;$(A(A(A(A({},H),t?{applications:t}:H.applications),r?{resources:r}:H.resources),n?{operations:n}:H.operations))},isLoading:M||W,pagination:A(A({},R),{},{count:R.count}),checkedRows:t,setCheckedItems:function(e){var n=e(t).filter((function(e){var t,r=e.uuid;return"cost-management"!==e.application||(null===(t=de(r))||void 0===t?void 0:t.count)>0})).map((function(e){return{uuid:e.uuid,requires:e.requires}}));r(l()(n,t)?[]:n)},titlePlural:d.formatMessage(C.Z.permissions).toLowerCase(),titleSingular:d.formatMessage(C.Z.permission).toLowerCase(),showMoreTitle:d.formatMessage(ne?C.Z.seeLess:C.Z.seeMore),onFilter:function(e){return ce(e)},onShowMore:Ee?function(){oe((function(){return!ne}))}:void 0,onChange:function(e,t){ce(""),fe(t)},value:pe,filters:[{key:"applications",value:H.applications,placeholder:d.formatMessage(C.Z.filterByKey,{key:d.formatMessage(C.Z.application).toLowerCase()}),type:"group",selected:ye(H.applications),groups:[{type:ge.applications.length>0?"checkbox":"plain",items:ge.applications.length>0?(0,o.Z)(ge.applications).slice(0,ne?void 0:10):[be]}]},{key:"resources",value:H.resources,placeholder:d.formatMessage(C.Z.filterByKey,{key:d.formatMessage(C.Z.resourceType).toLowerCase()}),type:"group",selected:ye(H.resources),groups:[{type:ge.resources.length>0?"checkbox":"plain",items:ge.resources.length>0?(0,o.Z)(ge.resources).slice(0,ne?void 0:10):[be]}]},{key:"operations",value:H.operations,placeholder:d.formatMessage(C.Z.filterByKey,{key:d.formatMessage(C.Z.operation).toLowerCase()}),type:"group",selected:ye(H.operations),groups:[{type:ge.operations.length>0?"checkbox":"plain",items:ge.operations.length>0?(0,o.Z)(ge.operations).slice(0,ne?void 0:10):[be]}]}],isFilterable:!0,rowWrapper:D,tableId:"add-role-permissions"},c)))};q.propTypes={selectedPermissions:d().array,setSelectedPermissions:d().func};const V=q},91710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),s=r.n(a),c=r(50533),l=r(76857),u=r(41693),p=r(48880),f=r(29215),d=r(86896),m=r(30893);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t=e.costReducer,r=t.resourceTypes,n=t.isLoading,o=t.loadingResources,i=t.resources;return{resourceTypes:r.data,resources:i,isLoading:n,isLoadingResources:o>0}},g=function(e,t){var r=e[t.key];switch(t.type){case"toggle":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{isOpen:!r.isOpen})));case"select":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.selected.includes(t.selection)?r.selected.filter((function(e){return e!==t.selection})):[].concat((0,o.Z)(r.selected),[t.selection])})));case"selectAll":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:r.options.map((function(e){return e.value}))})));case"clear":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{selected:[]})));case"setOptions":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{options:t.options,filteredOptions:t.options})));case"setFilter":return v(v({},e),{},(0,i.Z)({},t.key,v(v({},r),{},{filteredOptions:r.options.filter((function(e){return e.value.includes(t.filtervalue)}))})));default:return e}};const b=function(e){var t=(0,d.Z)(),r=(0,c.useDispatch)(),h=(0,c.useSelector)(y,c.shallowEqual),b=h.resourceTypes,E=h.isLoading,Z=h.isLoadingResources,w=h.resources,O=(0,u.Z)(e).input,x=(0,p.default)(),j=x.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("cost-management")})),P=(0,a.useReducer)(g,j.reduce((function(e,t){return v(v({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),S=(0,n.Z)(P,2),k=S[0],L=S[1];return(0,a.useEffect)((function(){(x.getState().values["resource-definitions"]||[]).map((function(e){var t=e.permission;return e.resources.map((function(e){return j.find((function(e){return(null==e?void 0:e.uuid)===t}))&&L({type:"select",selection:e,key:t})}))})),r((0,f.A)(undefined)),x.change("has-cost-resources",!0)}),[]),(0,a.useEffect)((function(){E||(0,o.Z)(new Set(j.map((function(e){var t;return null===(t=b.find((function(t){var r;return t.value===(null===(r=e.uuid.split(":"))||void 0===r?void 0:r[1])})))||void 0===t?void 0:t.path})))).filter((function(e){return e})).map((function(e){return t=e,r((0,f.R)(t));var t}))}),[b]),(0,a.useEffect)((function(){Z||j.map((function(e){return L({type:"setOptions",key:e.uuid,options:w[(t=e.uuid,null===(r=b.find((function(e){var r;return e.value===(null===(r=t.split(":"))||void 0===r?void 0:r[1])})))||void 0===r||null===(n=r.path.split("/"))||void 0===n?void 0:n[5])]||[]});var t,r,n}))}),[Z]),(0,a.useEffect)((function(){var e=Object.entries(k).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],resources:t[1].selected}}));O.onChange(e),x.change("resource-definitions",e)}),[k]),s().createElement(l.Grid,{hasGutter:!0},s().createElement(l.GridItem,{md:4,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.permissions))),s().createElement(l.GridItem,{md:8,className:"rbac-m-hide-on-sm"},s().createElement(l.Text,{component:l.TextVariants.h4,className:"rbac-bold-text"},t.formatMessage(m.Z.resourceDefinitions))),j.map((function(e){var r=e.uuid,n=k[r].filteredOptions;return s().createElement(s().Fragment,null,s().createElement(l.GridItem,{md:4,sm:12},s().createElement(l.Tooltip,{content:s().createElement("div",null,r)},s().createElement(l.FormGroup,{label:r.replace(/^cost-management:/,""),isRequired:!0}))),s().createElement(l.GridItem,{md:8,sm:12},s().createElement(l.Select,{className:"rbac-m-cost-resource-select",variant:l.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(m.Z.selectState),onToggle:function(e){L({type:"setFilter",key:r,filtervalue:""}),function(e,t){L({type:"toggle",key:e,isOpen:t})}(r,e)},onSelect:function(e,o){!function(e,t,r,n){L(r?{type:"selectAll",selection:t,key:n}:{type:"select",selection:t,key:n})}(0,o,o===t.formatMessage(m.Z.selectAll,{length:n.length}),r)},onClear:function(){return L({type:"clear",key:r})},selections:k[r].selected,isOpen:k[r].isOpen,onFilter:function(e){return e&&L({type:"setFilter",key:r,filtervalue:e.target.value})},"aria-labelledby":r,placeholderText:t.formatMessage(m.Z.selectResources),hasInlineFilter:!0},[s().createElement(l.SelectOption,{key:0,value:t.formatMessage(m.Z.selectAll,{length:n.length})})].concat((0,o.Z)(n.map((function(e,t){return s().createElement(l.SelectOption,{key:t+1,value:e.value})})))))))})))}},58854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(92950),o=r.n(n),i=r(45697),a=r.n(i),s=r(76857),c=r(86896),l=r(30893),u=function(e){var t=e.formFields,r=(0,c.Z)();return o().createElement("div",{className:"rbac"},o().createElement(s.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},r.formatMessage(l.Z.reviewDetails)),t)};u.propTypes={formFields:a().array};const p=u},80709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(29439),o=r(93433),i=r(4942),a=r(92950),s=r.n(a),c=r(76857),l=r(50533),u=r(41693),p=r(48880),f=r(86896),d=r(36580),m=r(71002),h=r(15861);function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(P([])));g&&g!==t&&r.call(g,o)&&(h=g);var b=d.prototype=p.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,m.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(b,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(Z.prototype),s(Z.prototype,i,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new Z(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),s(b,a,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var y=(0,r(96692).bD)(),g=function(){var e=(0,h.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getInventoryGroups(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(30893);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){return{resourceTypes:e.inventoryReducer.resourceTypes.data}},x=function(e,t){var r,n,a=e[t.key];switch(t.type){case"toggle":return w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{isOpen:!a.isOpen})));case"select":return a.selected.some((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))?w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{selected:a.selected.filter((function(e){var r;return e.id!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)}))}))):void 0!==(null===(r=t.processedSelection)||void 0===r?void 0:r.id)&&void 0!==(null===(n=t.processedSelection)||void 0===n?void 0:n.name)?w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{selected:[].concat((0,o.Z)(a.selected),[t.processedSelection])}))):e;case"selectAll":return w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{selected:(0,o.Z)(a.options)})));case"setFilter":return w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{filteredOptions:a.options.filter((function(e){return e.value.includes(t.filterValue)}))})));case"clear":return w(w({},e),{},(0,i.Z)({},t.key,w(w({},a),{},{selected:[]})));default:return e}};const j=function(e){var t=(0,f.Z)(),r=(0,l.useDispatch)(),m=(0,u.Z)(e).input,h=(0,p.default)(),v=(0,a.useState)({}),y=(0,n.Z)(v,2),Z=y[0],j=y[1],P=(0,l.useSelector)(O,l.shallowEqual).resourceTypes,S=h.getState().values["add-permissions-table"].filter((function(e){return e.uuid.split(":")[0].includes("inventory")})),k=(0,a.useReducer)(x,S.reduce((function(e,t){return w(w({},e),{},(0,i.Z)({},t.uuid,{selected:[],options:[],filteredOptions:[],isOpen:!1}))}),{})),L=(0,n.Z)(k,2),T=L[0],M=L[1];return(0,a.useEffect)((function(){r({type:d.rF,payload:g()}),h.change("inventory-group-permissions",[])}),[]),(0,a.useEffect)((function(){var e=(P&&P.length?P:[]).reduce((function(e,t){return e[t.name]=t.id,e}),{});j(e)}),[P]),(0,a.useEffect)((function(){var e=Object.entries(T).map((function(e){var t=(0,n.Z)(e,2);return{permission:t[0],groups:t[1].selected}}));m.onChange(e),h.change("inventory-group-permissions",e)}),[T]),s().createElement(c.Grid,{hasGutter:!0},s().createElement(c.GridItem,{md:4,className:"rbac-m-hide-on-sm"},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.permissions))),s().createElement(c.GridItem,{md:8,className:"rbac-m-hide-on-sm"},s().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text pf-u-mt-sm"},t.formatMessage(b.Z.groupDefinition))),S.map((function(e){var r=e.uuid,n=P&&P.length?P:[];return s().createElement(s().Fragment,{key:"".concat(r)},s().createElement(c.GridItem,{md:4,sm:12},s().createElement(c.FormGroup,{label:r,isRequired:!0})),s().createElement(c.GridItem,{md:8,sm:12},s().createElement(c.Tooltip,{content:s().createElement("div",null,t.formatMessage(b.Z.inventoryGroupsTooltip))},s().createElement(c.Select,{className:"rbac-m-cost-resource-select",variant:c.SelectVariant.checkbox,typeAheadAriaLabel:t.formatMessage(b.Z.inventoryGroupsTypeAheadLabel),"aria-labelledby":r,selections:T[r].selected.map((function(e){return e.name})),placeholderText:t.formatMessage(b.Z.selectGroups),onSelect:function(e,o){var i;return function(e,t,r,n){var o={name:t,id:Z[t]};if(r){var i,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(P);try{for(a.s();!(i=a.n()).done;){var s=i.value,c={name:s.name,id:s.id};M({type:"select",processedSelection:c,key:n})}}catch(e){a.e(e)}finally{a.f()}}else M({type:"select",processedSelection:o,key:n})}(0,o,o===t.formatMessage(b.Z.selectAll,{length:null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0}),r)},onToggle:function(e){M({type:"setFilter",key:r,filterValue:""}),function(e,t){M({type:"toggle",key:e,isOpen:t})}(r,e)},onClear:function(){return M({type:"clear",key:r})},onFilter:function(e){return e&&M({type:"setFilter",key:r,filtervalue:e.target.value})},isOpen:T[r].isOpen,hasInlineFilter:!0},[s().createElement(c.SelectOption,{key:"".concat(r,"-all"),value:t.formatMessage(b.Z.selectAll,{length:null==n?void 0:n.length})})].concat((0,o.Z)((n||[]).map((function(e,t){return s().createElement(c.SelectOption,{key:"".concat(r,"-").concat(t+1),value:null==e?void 0:e.name})}))))))))})))}},93436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(96354),u=r(64124),p=r(71355),f=r(86896),d=r(46801),m=r(50533),h=r(40483),v=r(36457);var y=r(76254),g=r(43115),b=r(40639),E=r(28090),Z=r(30893),w=function(e){var t=e.cancelRoute,r=e.submitRoute,s=void 0===r?t:r,c=e.afterSubmit,w=(0,f.Z)(),O=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}(),x=(0,d.useNavigate)(),j=(0,m.useDispatch)(),P=(0,d.useParams)().roleId,S=(0,m.useSelector)((function(e){return(0,y.z)(e,P)})),k=(0,i.useState)(S),L=(0,o.Z)(k,2),T=L[0],M=L[1];(0,i.useEffect)((function(){!T&&(0,g.fp)(P).then((function(e){O.current&&M(e)}))}),[P]);var R,_=(0,b.Z)((function(e,t,r,n){return e&&0!==e.length?n(e,t,r):Promise.reject(w.formatMessage(Z.Z.required))})),D={"validate-role-name":function(e){var t=e.idKey,r=e.id,n=e.validationPromise;return function(e){return _(e,t,r,n)}}},I=function(){j((0,p.addNotification)({variant:"warning",dismissDelay:8e3,title:w.formatMessage(Z.Z.editingRoleTitle),description:w.formatMessage(Z.Z.editingRoleCanceledDescription)})),x(t,{replace:!0})};return T?a().createElement(v.Z,{schema:(R=P,{fields:[{name:"name",component:l.Z.TEXT_FIELD,label:w.formatMessage(Z.Z.name),isRequired:!0,validate:[{type:"validate-role-name",id:R,idKey:"uuid",validationPromise:function(e,t,r){return e.length<150?(0,g.vd)({name:e}).then((function(n){var o=n.data;if(0!==o.length&&o.some((function(n){return n[t]!==r&&n.display_name===e})))throw w.formatMessage(Z.Z.roleWithNameExists)})):Promise.reject(w.formatMessage(Z.Z.maxCharactersWarning,{number:150}))}}]},{name:"description",component:l.Z.TEXTAREA,label:w.formatMessage(Z.Z.description),validate:[{type:u.Z.MAX_LENGTH,threshold:150}]}]}),initialValues:T,onSubmit:function(e){return j((0,E.sZ)(P,{name:e.name,display_name:e.name,description:e.description})).then((function(){c(),x(s)}))},onCancel:I,validatorMapper:D,FormTemplate:function(e){return a().createElement(h.Z,(0,n.Z)({},e,{ModalProps:{onClose:I,isOpen:!0,variant:"small",title:"Edit role information"}}))}}):null};w.propTypes={cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const O=w},9599:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var n=function(e,t){var r=t&&t["add-permissions-table"]||[],n=r.some((function(e){return e.uuid.split(":")[0].includes("cost-management")})),o=r.some((function(e){return e.uuid.split(":")[0].includes("inventory")}));return"inventory-groups-role"===e&&n?"cost-resources-definition":"add-permissions"===e&&o?"inventory-groups-role":"add-permissions"===e&&n?"cost-resources-definition":"review"}},13063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(87462),o=r(29439),i=r(92950),a=r.n(i),s=r(45697),c=r.n(s),l=r(50533),u=r(46801),p=r(69957),f=r(76857),d=r(83215),m=r(28090),h=r(43115),v=r(76254),y=r(86896),g=r(44012),b=r(30893),E=function(e){var t=e.cancelRoute,r=e.submitRoute,s=void 0===r?t:r,c=e.afterSubmit,E=(0,y.Z)(),Z=(0,u.useParams)().roleId.split(","),w=(0,l.useSelector)((function(e){return 1===Z.length?(0,v.B)(e,Z[0]):Z.length})),O=(0,i.useState)(!0),x=(0,o.Z)(O,2),j=x[0],P=x[1],S=(0,i.useState)(w),k=(0,o.Z)(S,2),L=k[0],T=k[1],M=(0,l.useDispatch)(),R=(0,u.useNavigate)();(0,i.useEffect)((function(){Z&&w?T(w):Z&&1===Z.length&&(0,h.fp)(Z[0]).then((function(e){return T(e.display_name)})).catch((function(e){var t,r;return M((0,d.wN)({variant:"danger",title:"Could not get role",description:null==e||null===(t=e.errors)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.detail}))}))}),[w,Z]);var _=function(){return R(t,{replace:!0})};return L?a().createElement(f.Modal,{className:"rbac","aria-label":"remove-role",header:a().createElement(f.TextContent,null,a().createElement(f.Split,{hasGutter:!0},a().createElement(f.SplitItem,null,a().createElement(p.ZP,{size:"lg",style:{fill:"#f0ab00"}})),a().createElement(f.SplitItem,null,a().createElement(f.Text,{component:"h1"},E.formatMessage(b.Z.deleteRoleQuestion))))),isOpen:!0,variant:"small",onClose:_,actions:[a().createElement(f.Button,{isDisabled:j,key:"submit",variant:"danger",type:"button",id:"confirm-delete-portfolio",onClick:function(){Promise.all(Z.map((function(e){return M((0,m.l5)(e))}))).then((function(){return c()})),R(s)}},E.formatMessage(b.Z.confirm)),a().createElement(f.Button,{key:"cancel",variant:"link",type:"button",onClick:_},E.formatMessage(b.Z.cancel))]},a().createElement(f.TextContent,null,a().createElement(f.Text,{component:f.TextVariants.p},a().createElement(g.Z,(0,n.Z)({},b.Z.roleWilBeRemovedWithPermissions,{values:{strong:function(e){return a().createElement("strong",null,e)},name:L,count:Z.length}}))),a().createElement(f.Checkbox,{id:"remove-role-checkbox",label:E.formatMessage(b.Z.understandActionIrreversible),isChecked:!j,onChange:function(){return P((function(e){return!e}))}}))):null};E.propTypes={cancelRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]).isRequired,submitRoute:c().oneOfType([c().string,c().shape({pathname:c().string.isRequired,search:c().string,hash:c().string})]),afterSubmit:c().func.isRequired};const Z=E},76254:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,z:()=>n});var n=function(e,t){var r=e.roleReducer,n=r.roles,o=void 0===n?{data:[]}:n,i=r.selectedRole;return(null==i?void 0:i.uuid)===t?i:o.data.find((function(e){return e.uuid===t}))},o=function(e,t){var r;return null===(r=n(e,t))||void 0===r?void 0:r.display_name}},15608:(e,t,r)=>{"use strict";r.d(t,{Z:()=>qe});var n,o=r(93433),i=r(4942),a=r(29439),s=r(92950),c=r.n(s),l=r(45697),u=r.n(l),p=r(46801),f=r(50533),d=r(76857),m=r(39173),h=r(86896),v=r(4682),y=r(93736),g=r(28090),b=r(38376),E=r(19571),Z=r(19756),w=r(87462),O=r(1936),x=r(44012),j=r(94496),P=r(41800),S=r(45987),k=r(62410),L=r(11107),T=r(61338),M=r(85564),R=r.n(M),_=r(30893),D=["count"],I=["type"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return r.reduce((function(r,l){var u=l.resourceDefinitions,p=l.permission,f=l.modified,d=p.split(":"),m=(0,a.Z)(d,3),h=m[0],y=m[1],g=m[2];return[].concat((0,o.Z)(r),[{uuid:p,cells:[h,y,g].concat((0,o.Z)(e?[p.includes("cost-management")&&u.length>0?c().createElement(s.Fragment,{key:"resource-definitions"},c().createElement(j.Z,{to:v.Z["role-detail-permission"].link.replace(":roleId",t).replace(":permissionId",p)},R()(u.map((function(e){return e.attributeFilter.value}))).length)):c().createElement("span",{className:"rbac-c-text__disabled"},n.formatMessage(_.Z.notApplicable))]:[]),[c().createElement(s.Fragment,{key:"".concat(h,"-modified")},c().createElement(k.Z,{date:f,type:(0,L.mh)(f)}))]),selected:Boolean(null==i?void 0:i.find((function(e){return e.uuid===p})))}])}),[])},G={pagination:T.he,selectedPermissions:[],showRemoveModal:!1,confirmDelete:function(){return null},deleteInfo:{},filters:{applications:[],resources:[],operations:[]},isToggled:!1,resources:[],operations:[]},A="SET_PAGINATION",B="SELECT_PERMISSIONS",q="SHOW_REMOVE_MODAL",V="SUBMIT_REMOVE_MODAL",z="INITIATE_REMOVE_PERMISSION",W="SET_FILTERS",K="SET_TOGGLED",Y="INITIALIZE_ROLE",U=(n={},(0,i.Z)(n,A,(function(e,t){return N(N({},e),{},{pagination:N(N({},e.pagination),t)})})),(0,i.Z)(n,B,(function(e,t){var r=t.selection;return N(N({},e),{},{selectedPermissions:r})})),(0,i.Z)(n,q,(function(e,t){var r=t.showRemoveModal;return N(N({},e),{},{showRemoveModal:r})})),(0,i.Z)(n,V,(function(e){return N(N({},e),{},{selectedPermissions:[],showRemoveModal:!1})})),(0,i.Z)(n,z,(function(e,t){var r=t.confirmDelete,n=t.deleteInfo;return N(N({},e),{},{confirmDelete:r,showRemoveModal:!0,deleteInfo:n})})),(0,i.Z)(n,W,(function(e,t){return N(N({},e),{},{filters:N(N({},e.filters),t)})})),(0,i.Z)(n,K,(function(e){return N(N({},e),{},{isToggled:!e.isToggled})})),(0,i.Z)(n,Y,(function(e,t){var r=t.count,n=(0,S.Z)(t,D);return N(N(N({},e),n),{},{pagination:N(N({},e.pagination),{},{count:r})})})),n),X=function(e,t){var r=t.type,n=(0,S.Z)(t,I);return U[r]?U[r](e,n):e},Q=r(71002),H=r(15861),$=r(93025),J=r(67850),ee=r(52817),te=r(73943),re=r(11514),ne=r(48880);var oe=r(68778),ie=function(e){var t=e.currentRoleID,r=(0,h.Z)(),n=(0,f.useDispatch)();return c().createElement(c().Fragment,null,c().createElement(d.EmptyState,null,c().createElement(d.EmptyStateIcon,{color:"green",icon:oe.ZP}),c().createElement(d.Title,{headingLevel:"h4",size:"lg"},r.formatMessage(_.Z.permissionsAddedSuccessfully)),c().createElement(d.EmptyStateBody,null),c().createElement(j.Z,{to:v.Z["role-detail"].link.replace(":roleId",t)},c().createElement(d.Button,{onClick:function(){return n((0,g.fp)(t))}},r.formatMessage(_.Z.exit)))))};const ae=ie;ie.propTypes={currentRoleID:u().string.isRequired};var se=r(91710),ce=r(80709),le=r(27979);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=function(e){var t,r=e.formFields;return(0,s.useContext)(je).submitting?c().createElement(d.Bullseye,null,c().createElement(d.Spinner,{size:"xl"})):c().createElement("div",{className:"rbac"},[[pe({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};fe.propTypes={formFields:u().array};const de=fe;var me=r(28412),he=r(82644),ve=r(29558),ye=r(2034),ge=r(9599),be=r(58854);function Ee(){Ee=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function f(){}function d(){}var m={};s(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,o)&&(m=v);var y=d.prototype=p.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==(0,Q.Z)(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=d,s(y,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;w(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe=function(e){return c().createElement(J.ZP,(0,w.Z)({},e,{showFormControls:!1}))},xe={"add-permissions-table":re.Z,"inventory-groups-role":ce.Z,"cost-resources":se.Z,review:function(){var e=(0,h.Z)(),t=(0,ne.default)().getState().values,r=t["role-name"],n=t["role-description"],o=t["add-permissions-table"],i=t["resource-definitions"],a=t["has-cost-resources"];return c().createElement(d.Stack,{hasGutter:!0},c().createElement(d.StackItem,null,c().createElement(d.TextContent,null,c().createElement(d.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-sm"},e.formatMessage(_.Z.reviewDetails)))),c().createElement(d.StackItem,{className:"rbac-l-stack__item-summary"},c().createElement(d.Grid,{hasGutter:!0},c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(_.Z.roleName))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},r)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(_.Z.roleDescription))),c().createElement(d.GridItem,{span:9},c().createElement(d.Text,{component:d.TextVariants.p},n)),c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(_.Z.addedPermissions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},o.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e.uuid," ")})))),a&&c().createElement(c().Fragment,null,c().createElement(d.GridItem,{span:3},c().createElement(d.Text,{className:"pf-c-title",component:d.TextVariants.h6},e.formatMessage(_.Z.resourceDefinitions))),c().createElement(d.GridItem,{span:9},c().createElement(d.TextContent,{component:d.TextVariants.p},i.map((function(e){return e.resources.map((function(e,t){return c().createElement(d.Text,{key:t}," ",e," ")}))}))))))))}},je=(0,s.createContext)({success:!1,submitting:!1,error:void 0}),Pe=function(e){var t=e.role,r=(0,h.Z)(),n=(0,s.useState)(!1),i=(0,a.Z)(n,2),l=i[0],u=i[1],p=(0,s.useState)(""),m=(0,a.Z)(p,2),b=m[0],E=m[1],Z=(0,y.Z)(),w=(0,f.useDispatch)(),O=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),x=(0,a.Z)(O,2),j=x[0],P=x[1],S=(0,s.useRef)(document.createElement("div")),k=(0,s.useMemo)((function(){return function(e){var t=(0,he.Sn)(),r=(0,ve.d)({locale:me.S,messages:ye},t);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,crossroads:["role-type"],title:r.formatMessage(_.Z.addPermissions),container:e,fields:[{name:"add-permissions",title:r.formatMessage(_.Z.addPermissions),StepTemplate:le.Z,nextStep:function(e){var t=e.values;return(0,ge.j)("add-permissions",t)},fields:[{component:"add-permissions-table",name:"add-permissions-table"}]},{name:"inventory-groups-role",title:r.formatMessage(_.Z.inventoryGroupsAccessTitle),StepTemplate:be.Z,nextStep:function(e){var t=e.values;return(0,ge.j)("inventory-groups-role",t)},fields:[{component:"plain-text",name:"text-description",label:c().createElement("p",null,r.formatMessage(_.Z.inventoryGroupsAccessDescription))},{component:"inventory-groups-role",name:"inventory-groups-role"}]},{name:"cost-resources-definition",title:r.formatMessage(_.Z.defineCostResources),nextStep:"review",fields:[{component:"plain-text",name:"text-description",label:c().createElement("p",null,r.formatMessage(_.Z.applyCostPermissionText))},{component:"cost-resources",name:"cost-resources",validate:[function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){var t=e.resources;return t&&t.length>0}))?void 0:r.formatMessage(_.Z.assignAtLeastOneResource)}]}]},{name:"review",title:r.formatMessage(_.Z.reviewDetails),StepTemplate:de,fields:[{component:"review",name:"review"}]}]}]}}(S.current)}),[]);(0,s.useEffect)((function(){E(t.uuid)})),(0,s.useEffect)((function(){S.current.hidden=l}),[l]);var L=function(){Z(v.Z["role-detail"].link.replace(":roleId",t.uuid))},T=function(){var e=(0,H.Z)(Ee().mark((function e(r){var n,i,a,s;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r["add-permissions-table"],i=r["cost-resources"],a=[].concat((0,o.Z)(t.access.map((function(e){return e.permission}))),(0,o.Z)(n.map((function(e){return e.uuid})))),s=we(we({},t),{},{access:(0,o.Z)(n.reduce((function(e,t){var r=t.uuid,n=t.requires;return[].concat((0,o.Z)(e),(0,o.Z)([r].concat((0,o.Z)(n.filter((function(e){return!a.includes(e)})))).map((function(e){return{permission:e,resourceDefinitions:null!=i&&i.find((function(t){return t.permission===e}))?[{attributeFilter:{key:"cost-management.".concat(e.split(":")[1]),operation:"in",value:null==i?void 0:i.find((function(t){return t.permission===e})).resources}}]:[]}}))))}),t.access)),accessCount:t.accessCount+n.length}),P((function(e){return we(we({},e),{},{submitting:!0})})),w((0,g.ul)(b,s)).then((function(){return P((function(e){return we(we({},e),{},{submitting:!1,success:!0,hideForm:!0})}))})).catch((function(){P((function(e){return we(we({},e),{},{submitting:!1,success:!1,hideForm:!0})})),Z(v.Z["role-detail"].link.replace(":roleId",t.uuid))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c().createElement(je.Provider,{value:we(we({},j),{},{setWizardError:function(e){return P((function(t){return we(we({},t),{},{error:e})}))},setWizardSuccess:function(e){return P((function(t){return we(we({},t),{},{success:e})}))},setHideForm:function(e){return P((function(t){return we(we({},t),{},{hideForm:e})}))},rolePermissions:t.access})},c().createElement(te.R,{type:r.formatMessage(_.Z.permission),isOpen:l,onModalCancel:function(){return u(!1)},onConfirmCancel:L}),j.hideForm?j.success?c().createElement(d.Wizard,{title:r.formatMessage(_.Z.addPermissions),isOpen:!0,steps:[{name:"success",component:new ae({currentRoleID:b}),isFinishedStep:!0}],onClose:L}):null:c().createElement($.Z,{container:S,schema:k,subscription:{values:!0},FormTemplate:Oe,initialValues:{"role-uuid":t.uuid,"role-type":"create","role-name":t.display_name,"role-description":t.description},componentMapper:we(we({},ee.ZP),xe),onSubmit:T,onCancel:function(e){var t;e&&(null===(t=e["add-permissions-table"])||void 0===t?void 0:t.length)>0?u(!0):L()}}))};Pe.defaultProps={role:{}},Pe.propTypes={role:u().object};const Se=Pe;var ke=r(1227);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me=function(e,t,r){return c().createElement(x.Z,(0,w.Z)({},r?_.Z.permissionsWillNotBeGrantedThroughRole:_.Z.permissionWillNotBeGrantedThroughRole,{values:Te(Te({b:function(e){return c().createElement("b",null,e)}},r?{permissions:e}:{permission:e}),{},{role:t.name})}))},Re=function(e){var t=e.cantAddPermissions,r=(0,h.Z)(),n=(0,f.useSelector)((function(e){return{role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading}}),f.shallowEqual),l=n.role,u=n.isRecordLoading,m=(0,y.Z)(),b=(0,s.useReducer)(X,G),E=(0,a.Z)(b,2),Z=E[0],w=Z.pagination,x=Z.selectedPermissions,S=Z.showRemoveModal,k=Z.confirmDelete,L=Z.deleteInfo,T=Z.filters,M=Z.isToggled,R=Z.resources,D=Z.operations,I=E[1],C=(0,s.useState)(!0),N=(0,a.Z)(C,2),U=N[0],Q=N[1],H=(0,f.useDispatch)(),$=[{title:r.formatMessage(_.Z.application)},{title:r.formatMessage(_.Z.resourceType)},{title:r.formatMessage(_.Z.operation)},{title:r.formatMessage(_.Z.resourceDefinitions),transforms:[(0,O.info)({popover:r.formatMessage(_.Z.resourceDefinitionsApplyToCost),ariaLabel:r.formatMessage(_.Z.resourceDefinitionsApplyToCost)})]},{title:r.formatMessage(_.Z.lastCommit),transforms:[(0,O.cellWidth)(15)]}],J=t?[""]:["To configure user access to applications,","add at least one permission to this role.",""];(0,s.useEffect)((function(){var e;if(Object.keys(l).length>0){var t=Object.entries(l.access.reduce((function(e,t){var r=e.resources,n=e.operations,i=t.permission.split(":"),s=(0,a.Z)(i,3),c=s[1],l=s[2];return{resources:r.includes(c)?r:[].concat((0,o.Z)(r),[c]),operations:n.includes(l)?n:[].concat((0,o.Z)(n),[l])}}),{resources:[],operations:[]})).reduce((function(e,t){var r=(0,a.Z)(t,2),n=r[0],o=r[1];return Te(Te({},e),{},(0,i.Z)({},n,o.map((function(e){return{label:e,value:e}}))))}),{}),r=t.resources,n=t.operations;I({type:Y,resources:r,operations:n,count:l.access?l.access.length:0})}Q(null==l||null===(e=l.access)||void 0===e?void 0:e.find((function(e){return e.permission.includes("cost-management")})))}),[l]);var ee=l&&l.access?(l.access||[]).filter((function(e){var t=e.permission.split(":"),r=(0,a.Z)(t,3),n=r[0],o=r[1],i=r[2],s=T.applications,c=T.resources,l=T.operations;return(!(s.length>0)||s.includes(n))&&(!(c.length>0)||c.includes(o))&&(!(l.length>0)||l.includes(i))})).map((function(e){return Te(Te({uuid:e.permission},e),{},{modified:l.modified})})):[],te=function(e){var t=e.reduce((function(e,t){return[].concat((0,o.Z)(e),[t.uuid])}),[]);return H((0,g.lq)(l,t)).then((function(){H((0,g.fp)(l.uuid)),I({type:B,selection:[]})}))},re=function(e){return e.reduce((function(e,t){return{"":Te(Te({},null==e?void 0:e[""]),{},(0,i.Z)({},t,!0))}}),{"":{}})},ne={label:c().createElement("div",null," ",r.formatMessage(_.Z.noResultsFound)),isDisabled:!0},oe=Te({access:[],applications:[]},l),ie=Object.values({applications:oe.applications,operations:D,resources:R}).find((function(e){return e.length>10})),ae=ee.slice(w.offset,w.offset+w.limit);return c().createElement("section",{className:"pf-c-page__main-section rbac-c-role__permissions"},S&&c().createElement(ke.Z,{text:L.text,title:L.title,isOpen:S,confirmButtonLabel:L.confirmButtonLabel,onClose:function(){return I({type:q,showRemoveModal:!1})},onSubmit:function(){k(),I({type:V})}}),c().createElement(p.Routes,null,c().createElement(p.Route,{path:v.Z["role-add-permission"].path,element:c().createElement(Se,{isOpen:!0,role:l})})),c().createElement(P.M,{columns:U?$:$.filter((function(e){return e.title!==r.formatMessage(_.Z.resourceDefinitions)})),rows:F(U,null==l?void 0:l.uuid,ae,r),actionResolver:l.system?void 0:function(){return[{title:r.formatMessage(_.Z.remove),onClick:function(e,t,n){return I({type:z,confirmDelete:function(){return te([n])},deleteInfo:{title:r.formatMessage(_.Z.removePermissionQuestion),text:Me(n.uuid,l,!1),confirmButtonLabel:r.formatMessage(_.Z.removePermission)}})}}]},data:ae,filterValue:"",ouiaId:"role-permissions-table",fetchData:function(e){var t=e.limit,r=e.offset;return I({type:A,limit:t,offset:r})},isSelectable:!l.system,setCheckedItems:function(e){I({type:B,selection:e(x).map((function(e){return{uuid:e.uuid}}))})},checkedRows:x,onShowMore:ie?function(){I({type:K})}:void 0,setFilterValue:function(e){var t=e.applications,r=e.resources,n=e.operations;I(Te(Te(Te({type:W},t?{applications:t}:T.applications),r?{resources:r}:T.resources),n?{operations:n}:T.operations))},toolbarButtons:function(){return t?[]:[c().createElement(j.Z,{to:v.Z["role-add-permission"].link.replace(":roleId",l.uuid),key:"role-add-permission",className:"rbac-m-hide-on-sm"},c().createElement(d.Button,{variant:"primary","aria-label":"Add Permission"},r.formatMessage(_.Z.addPermissions))),{label:r.formatMessage(_.Z.addPermission),props:{className:"rbac-m-hide-on-md"},onClick:function(){m(v.Z["role-add-permission"].link.replace(":roleId",l.uuid))}},{label:r.formatMessage(_.Z.remove),props:{isDisabled:!x.length>0},onClick:function(){var e=x.length>1;I({type:z,confirmDelete:function(){return te((0,o.Z)(x))},deleteInfo:{title:r.formatMessage(e?_.Z.removePermissionsQuestion:_.Z.removePermissionQuestion),text:Me(e?x.length:x[0].uuid,l,x.length>1),confirmButtonLabel:r.formatMessage(e?_.Z.removePermissions:_.Z.removePermission)}})}}]},isLoading:u,pagination:Te(Te({},w),{},{count:ee.length}),titlePlural:r.formatMessage(_.Z.permissions),titleSingular:r.formatMessage(_.Z.permission),emptyProps:{title:r.formatMessage(_.Z.noRolePermissions),description:J},filters:[{key:"applications",value:0===T.applications.length?"":T.applications,placeholder:r.formatMessage(_.Z.filterByKey,{key:r.formatMessage(_.Z.application).toLowerCase()}),type:"group",selected:re(T.applications),groups:[{type:oe.applications.length>0?"checkbox":"plain",items:oe.applications.length>0?oe.applications.slice(0,M?void 0:10).map((function(e){return{label:e,value:e}})):[ne]}]},{key:"resources",value:0===T.resources.length?"":T.resources,placeholder:r.formatMessage(_.Z.filterByKey,{key:r.formatMessage(_.Z.resourceType).toLowerCase()}),type:"group",selected:re(T.resources),groups:[{type:R.length>0?"checkbox":"plain",items:R.length>0?R.slice(0,M?void 0:10):[ne]}]},{key:"operations",value:0===T.operations.length?"":T.operations,placeholder:r.formatMessage(_.Z.filterByKey,{key:r.formatMessage(_.Z.operation).toLowerCase()}),type:"group",selected:re(T.operations),groups:[{type:D.length>0?"checkbox":"plain",items:D.length>0?D.slice(0,M?void 0:10):[ne]}]}],tableId:"role-permissions"}))};Re.propTypes={cantAddPermissions:u().bool};const _e=Re;var De=r(13063),Ie=r(93436),Ce=r(67643),Ne=r(76137),Fe=r(55140);function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Be=function(e){var t=e.onDelete,r=(0,h.Z)(),n=(0,Fe.Z)(),i=(0,y.Z)(),l=(0,s.useState)(!1),u=(0,a.Z)(l,2),w=u[0],O=u[1],x=(0,s.useState)(!1),P=(0,a.Z)(x,2),S=P[0],k=P[1],M=(0,p.useParams)(),R=M.roleId,D=M.groupId,I=(0,f.useSelector)((function(e){var t,r,n,o,i,a,s,c,l;return Ae(Ae({role:e.roleReducer.selectedRole,isRecordLoading:e.roleReducer.isRecordLoading},D&&{group:e.groupReducer.selectedGroup}),{},{systemGroupUuid:null===(t=e.groupReducer.systemGroup)||void 0===t?void 0:t.uuid,rolesPagination:(null===(r=e.roleReducer)||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.pagination)||T.he,rolesFilters:(null===(o=e.roleReducer)||void 0===o||null===(i=o.roles)||void 0===i?void 0:i.filters)||{},groupsPagination:(null===(a=e.groupReducer)||void 0===a||null===(s=a.groups)||void 0===s?void 0:s.pagination)||T.he,groupsFilters:(null===(c=e.groupReducer)||void 0===c||null===(l=c.groups)||void 0===l?void 0:l.filters)||{}})}),f.shallowEqual),C=I.role,N=I.group,F=I.isRecordLoading,G=I.rolesPagination,A=I.rolesFilters,B=I.groupsPagination,q=I.groupsFilters,V=I.systemGroupUuid,z=(0,f.useSelector)((function(e){return e.roleReducer.error!==L.VG})),W=(0,f.useSelector)((function(e){return e.groupReducer.error!==L.VG})),K=(0,f.useDispatch)(),Y=function(){if(K((0,g.fp)(R)),D)if("default-access"!==D)K((0,Z.yi)(D));else{if(V)return K((0,Z.nV)(V,{})),n.appObjectId(V),function(){return n.appObjectId(void 0)};K((0,Z.WD)())}};(0,s.useEffect)((function(){return Y(),n.appObjectId(R),function(){return n.appObjectId(void 0)}}),[R,D,V]),(0,s.useEffect)((function(){0===(null==C?void 0:C.accessCount)&&""!==(null==C?void 0:C.external_tenant)&&""!==(null==C?void 0:C.external_role_id)&&null!=C&&C.system&&k(!0)}),[C]);var U=function(){return[D?{title:r.formatMessage(_.Z.groups),to:(0,L.zk)((0,j.n)(v.Z.groups.link),B,q)}:{title:r.formatMessage(_.Z.roles),to:(0,L.zk)((0,j.n)(v.Z.roles.link),G,A)}].concat((0,o.Z)(W&&D&&("default-access"===D?V:W)?N?[{title:N&&N.name,to:v.Z["group-detail-roles"].link.replace("groupId",D),isLoading:N&&N.loaded}]:[void 0]:W||!D?[]:[{title:r.formatMessage(_.Z.invalidGroup),isActive:!0}]),(0,o.Z)(W||!D?[{title:F?void 0:z?(null==C?void 0:C.display_name)||(null==C?void 0:C.name):r.formatMessage(_.Z.invalidRole),isActive:!0}]:[]))},X=!F&&C?C.display_name||C.name:void 0,Q=!F&&C?C.description:void 0,H=[c().createElement(d.DropdownItem,{component:c().createElement(j.Z,{onClick:function(){return O(!1)},to:v.Z["role-detail-edit"].link.replace(":roleId",R)},r.formatMessage(_.Z.edit)),key:"edit-role"}),c().createElement(d.DropdownItem,{component:c().createElement(j.Z,{onClick:t,to:v.Z["role-detail-remove"].link.replace(":roleId",R)},r.formatMessage(_.Z.delete)),className:"rbac-c-role__action",key:"delete-role"})];return c().createElement(s.Fragment,null,!W&&D||!z?c().createElement(s.Fragment,null,c().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},c().createElement(Ne.Z,U())),c().createElement(Ce.Z,{title:"".concat(W?"Role":"Group"," not found"),description:["".concat(W?"Role":"Group"," with ID ").concat(W?R:D," does not exist.")],actions:[c().createElement(d.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return i(-1)}},r.formatMessage(_.Z.backToPreviousPage))]})):c().createElement(s.Fragment,null,c().createElement(b.Q,{breadcrumbs:U()},c().createElement(d.Level,null,c().createElement(d.LevelItem,null,c().createElement(m.Z,{title:X||c().createElement(E.h2,null),className:"rbac-page-header__title"})),!F&&C&&!C.system&&c().createElement(d.LevelItem,null,c().createElement(d.Dropdown,{ouiaId:"role-title-actions-dropdown",toggle:c().createElement(d.KebabToggle,{onToggle:function(e){return O(e)},id:"role-actions-dropdown"}),isOpen:w,isPlain:!0,position:"right",dropdownItems:H}))),Q&&c().createElement(d.TextContent,{className:"rbac-page-header__description"},c().createElement(d.Text,{component:"p"},Q))),F||!C?c().createElement(E.Wi,null):c().createElement(_e,{cantAddPermissions:S}),c().createElement(p.Routes,null,c().createElement(p.Route,{path:v.Z["role-detail-remove"].path,element:c().createElement(c().Fragment,null,!F&&c().createElement(De.Z,{afterSubmit:function(){K((0,g.Kt)(Ae(Ae({},G),{},{offset:0,filters:A,usesMetaInURL:!0})))},cancelRoute:v.Z["role-detail"].path.replace(":roleId",R),submitRoute:(0,L.zk)((0,j.n)(v.Z.roles.link),Ae(Ae({},G),{},{offset:0}),A),routeMatch:v.Z["role-detail-remove"].path}))}),c().createElement(p.Route,{path:v.Z["role-detail-edit"].path,element:c().createElement(c().Fragment,null,!F&&c().createElement(Ie.Z,{afterSubmit:Y,cancelRoute:v.Z["role-detail"].path.replace(":roleId",R),routeMatch:v.Z["role-detail-edit"].path}))}))))};Be.propTypes={onDelete:u().func};const qe=Be},40639:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(99166);const o=(e,t=250,r={onlyResolvesLast:!1})=>(0,n.Z)(e,t,r)},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},45467:()=>{},65088:()=>{},81754:()=>{},70347:()=>{},11452:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},10108:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{},11177:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7349.e587b41e3d46d4742efa87dd84c58716.js.map