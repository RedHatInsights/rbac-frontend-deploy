(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[8808,459],{41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>o,dw:()=>n,e4:()=>l,ir:()=>r});var r,n,s=a(66029);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const o=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),l=s.createContext({keyHandler:null,sendRef:null})},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(85893),n=a(94184),s=a.n(n),o=a(78956),l=a(6427),i=a(36530),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},c.apply(this,arguments)};const u=function(e){var t=e.className,a=e.title,n=e.actionsContent,u=e.ouiaId,m=e.ouiaSafe,p=void 0===m||m,d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=s()(t),g="RHI/Header",v=(0,l.useOUIAId)(g,u,p);return(0,r.jsxs)(i.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(o.Title,c({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":v,"data-ouia-safe":p},d,{children:a}))}),n?(0,r.jsx)(i.FlexItem,{children:n}):null]})}},7876:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(85893),n=a(94184),s=a.n(n),o=function(){return o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};const l=function(e){var t,a=e.type,n=e.children,l=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["type","children","className"]),c=s()(l,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",o({},i,{className:c,children:[" ",n," "]}))}},27561:(e,t,a)=>{var r=a(67990),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},67990:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},23279:(e,t,a)=>{var r=a(13218),n=a(7771),s=a(14841),o=Math.max,l=Math.min;e.exports=function(e,t,a){var i,c,u,m,p,d,f=0,g=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var a=i,r=c;return i=c=void 0,f=t,m=e.apply(r,a)}function h(e){var a=e-d;return void 0===d||a>=t||a<0||v&&e-f>=u}function E(){var e=n();if(h(e))return x(e);p=setTimeout(E,function(e){var a=t-(e-d);return v?l(a,u-(e-f)):a}(e))}function x(e){return p=void 0,b&&i?y(e):(i=c=void 0,m)}function Z(){var e=n(),a=h(e);if(i=arguments,c=this,d=e,a){if(void 0===p)return function(e){return f=e,p=setTimeout(E,t),g?y(e):m}(d);if(v)return clearTimeout(p),p=setTimeout(E,t),y(d)}return void 0===p&&(p=setTimeout(E,t)),m}return t=s(t)||0,r(a)&&(g=!!a.leading,u=(v="maxWait"in a)?o(s(a.maxWait)||0,t):u,b="trailing"in a?!!a.trailing:b),Z.cancel=function(){void 0!==p&&clearTimeout(p),f=0,i=d=c=p=void 0},Z.flush=function(){return void 0===p?m:x(n())},Z}},7771:(e,t,a)=>{var r=a(55639);e.exports=function(){return r.Date.now()}},14841:(e,t,a)=>{var r=a(27561),n=a(13218),s=a(33448),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=l.test(e);return a||i.test(e)?c(e.slice(2),a?2:8):o.test(e)?NaN:+e}},84414:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(62012),n=a(64756);const s=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,n.n)(a,e),r)}},82617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var r=a(66029),n=a.n(r),s=a(45697),o=a.n(s),l=a(62012),i=a(75629),c=a(12849);const u=e=>e?n().createElement(i.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?n().createElement(i.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&n().createElement(l.NavLink,{end:!0,to:e.to},e.title)||e.title):n().createElement(c.Vj,{key:t})))):null;u.propTypes={breadcrumbs:o().object};const m=u},13851:(e,t,a)=>{"use strict";a.d(t,{Q:()=>h,y:()=>E});var r=a(66029),n=a.n(r),s=a(45697),o=a.n(s),l=a(64380),i=a(86304),c=a(12849),u=a(82617),m=a(85893),p=a(94184),d=a.n(p);const f=n().createContext("light");var g=a(6427),v=function(){return v=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},v.apply(this,arguments)};const b=function(e){var t=e.className,a=e.children,r=e.ouiaId,n=e.ouiaSafe,s=void 0===n||n,o=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),l=d()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),i="RHI/Header",c=(0,g.useOUIAId)(i,r,s);return(0,m.jsx)(f.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var n=d()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,m.jsx)("section",v({"data-ouia-component-type":i,"data-ouia-component-id":c,"data-ouia-safe":s},o,{className:"".concat(l," ").concat(n),"widget-type":"InsightsPageHeader",children:a}))}})};var y=a(39173);const h=({children:e,breadcrumbs:t})=>n().createElement(r.Fragment,null,t&&n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},n().createElement(u.Z,{...t})),n().createElement(b,{className:"rbac-page-header"},e));h.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,breadcrumbs:o().array,paddingBottom:o().bool},h.defaultProps={paddingBottom:!1};const E=({title:e,renderTitleTag:t,description:a,children:s})=>n().createElement(r.Fragment,null,n().createElement(i.Flex,null,n().createElement(i.FlexItem,{className:"pf-v5-u-mb-sm"},n().createElement(y.Z,{title:e||n().createElement(c.h2,null),className:"rbac-page-header__title"})),n().createElement(i.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&n().createElement(l.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?n().createElement(l.Text,{component:l.TextVariants.p},a):a),s);E.propTypes={title:o().node,renderTitleTag:o().func,description:o().node,children:o().oneOfType([o().node,o().arrayOf(o().node)])}},27997:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var r=a(66029),n=a.n(r),s=a(86706),o=a(62012),l=a(25387),i=a(31055),c=a(78173),u=a(23539),m=a(64380),p=a(56869),d=a(75863),f=a(61696),g=a(49004),v=a(34844),b=a(91693),y=a.n(b),h=a(77029),E=a.n(h),x=a(55140),Z=a(12913),O=a(23279),T=a.n(O),N=a(7876),C=a(62410),I=a(32819),j=a(84414),M=a(64756),k=a(82617),w=a(66180),S=a(86601),P=a(2550),_=a(14289),F=a(97246),R=a(13851),A=a(13563),B=a(60063),L=a(29301),$=a(77044),G=a(74982);let U;const H=()=>{const e=(0,l.YB)(),t=(0,j.Z)(),a=(0,o.useNavigationType)(),b=(0,s.useDispatch)(),{username:h}=(0,o.useParams)(),[O,H]=(0,r.useState)(""),[V,D]=(0,r.useState)({}),[W,z]=(0,r.useState)(!1),[Q,q]=(0,r.useState)([]),Y=(0,x.Z)(),{roles:J,isLoadingRoles:K,rolesWithAccess:X,user:ee,isLoadingUsers:te,userExists:ae,adminGroup:re}=(0,s.useSelector)((({roleReducer:{error:e,roles:t,isLoading:a,rolesWithAccess:r},userReducer:{users:{data:n},isUserDataLoading:s},groupReducer:{adminGroup:o}})=>({adminGroup:o,roles:t,isLoadingRoles:a,rolesWithAccess:r,user:n&&n.filter((e=>e.username===h))[0],isLoadingUsers:s,userExists:e!==L.VG}))),{orgAdmin:ne,userAccessAdministrator:se}=(0,r.useContext)(S.Z),oe=ne||se,le=e=>b((0,A.vd)(e));(0,r.useEffect)((()=>(Y.appObjectId(h),b((0,$.fB)({chrome:Y})),b((0,B.uh)({...G.he,limit:0,filters:{username:h}})),le({limit:20,offset:0,username:h}),z(!0),le({limit:20,offset:0,addFields:["groups_in"],username:h}).then((()=>z(!1))),U=T()(((e,t,a,r,n)=>le({limit:e,offset:t,displayName:a,addFields:r,username:n})),500),()=>Y.appObjectId(void 0))),[]);const ie=[{title:e.formatMessage(P.Z.roles)},{title:e.formatMessage(P.Z.groups),cellTransforms:[p.z]},{title:e.formatMessage(P.Z.permissions),cellTransforms:[p.z]},{title:e.formatMessage(P.Z.lastModified)}],ce=[e.formatMessage(P.Z.application),e.formatMessage(P.Z.resourceType),e.formatMessage(P.Z.operation)],ue=[{title:e.formatMessage(P.Z.users),to:(0,M.n)(_.Z.users.link)},{title:ae?h:e.formatMessage(P.Z.invalidUser),isActive:!0}];return n().createElement(r.Fragment,null,ae?n().createElement(u.Stack,null,n().createElement(u.StackItem,null,n().createElement(R.Q,{breadcrumbs:ue},n().createElement(R.y,{title:h,renderTitleTag:()=>te?n().createElement(I.Z,{size:"xs",className:"rbac-c-user__label-skeleton"}):n().createElement(c.Label,{color:ee?.is_active&&"green"},e.formatMessage(ee?.is_active?P.Z.active:P.Z.inactive))},!te&&ee?n().createElement(r.Fragment,null,n().createElement(m.TextContent,null,`${e.formatMessage(P.Z.orgAdministrator)}: `,ee?.is_org_admin?n().createElement(y(),{key:"yes-icon",className:"pf-v5-u-mx-sm"}):n().createElement(E(),{key:"no-icon",className:"pf-v5-u-mx-sm"}),e.formatMessage(ee?.is_org_admin?P.Z.yes:P.Z.no)),ee?.email&&n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(P.Z.email)}: ${ee.email}`),ee?.username&&n().createElement(m.TextContent,null,n().createElement(m.Text,{component:m.TextVariants.p},`${e.formatMessage(P.Z.username)}: ${ee.username}`))):null))),n().createElement(u.StackItem,null,n().createElement(N.Z,{type:"content",className:"rbac-c-user-roles"},n().createElement(F.M,{columns:ie,isExpandable:!0,onExpand:(e,t,a,r,n)=>{r?D({...V,[n.uuid]:-1}):(D({...V,[n.uuid]:a}),2===a&&b((0,A.sv)(n.uuid)))},rows:((t,a,r)=>t?t.reduce(((t,{uuid:s,display_name:o,groups_in:l=[],modified:i,accessCount:c},u)=>[...t,{uuid:s,cells:[{title:o,props:{component:"th",isOpen:!1}},{title:W?n().createElement(I.Z,{size:I.i.xs}):l.length,props:{isOpen:1===V[s]}},{title:c,props:{isOpen:2===V[s]}},{title:n().createElement(C.Z,{type:(0,L.mh)(i),date:i})}]},{uuid:`${s}-groups`,parent:3*u,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:l?.length>0?n().createElement(f.i,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:d.B.compact,cells:[e.formatMessage(P.Z.name),e.formatMessage(P.Z.description)," "],rows:l.map((t=>({cells:[{title:n().createElement(M.Z,{to:_.Z["group-detail"].link.replace(":groupId",t.uuid)},t.name)},t.description,{title:r.uuid===t.uuid?null:n().createElement(M.Z,{to:_.Z["user-add-group-roles"].link.replace(":username",a).replace(":groupId",t.uuid),state:{name:t.name}},e.formatMessage(P.Z.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},n().createElement(g.x,null),n().createElement(v.R,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},W?e.formatMessage(P.Z.loading):e.formatMessage(P.Z.noGroups))}]},{uuid:`${s}-permissions`,parent:3*u,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:X&&X[s]?X[s].access?.length>0?n().createElement(f.i,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:d.B.compact,cells:ce,rows:X[s].access.map((e=>({cells:e.permission.split(":")})))},n().createElement(g.x,null),n().createElement(v.R,null)):n().createElement(m.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},e.formatMessage(P.Z.noPermissions)):n().createElement(Z.Z,{rows:c,columns:ce,variant:d.B.compact})}]}]),[]):[])(J.data,h,re),data:J.data,filterValue:O,ouiaId:"user-details-table",fetchData:({limit:e,offset:t,name:a})=>{U(e,t,a,["groups_in"],h)},setFilterValue:({name:e})=>H(e),isLoading:K,toolbarButtons:()=>[...oe?[n().createElement(M.Z,{to:_.Z["add-user-to-group"].link.replace(":username",h),key:"add-user-to-group",className:"rbac-m-hide-on-sm"},n().createElement(i.Button,{ouiaId:"add-user-to-group-button",variant:"primary","aria-label":"Add user to a group"},e.formatMessage(P.Z.addUserToGroup))),{label:e.formatMessage(P.Z.addUserToGroup),onClick:()=>{t(_.Z["add-user-to-group"].link.replace(":username",h))}}]:[]],pagination:J.meta,filterPlaceholder:e.formatMessage(P.Z.roleName).toLowerCase(),titlePlural:e.formatMessage(P.Z.roles).toLowerCase(),titleSingular:e.formatMessage(P.Z.role).toLowerCase(),tableId:"user"}),n().createElement(r.Suspense,null,n().createElement(o.Outlet,{context:{username:h,selectedRoles:Q,setSelectedRoles:q,closeUrl:_.Z["user-detail"].link.replace(":username",h),addRolesToGroup:(e,t)=>b((0,$.Wj)(e,t))}}))))):n().createElement(r.Fragment,null,n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb pf-v5-u-pb-md"},n().createElement(k.Z,{...ue})),n().createElement(w.Z,{title:e.formatMessage(P.Z.userNotFound),description:[e.formatMessage(P.Z.userNotFoundDescription,{username:h})],actions:[n().createElement(i.Button,{key:"back-button",className:"pf-v5-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:()=>t("POP"!==a?-1:_.Z.users.link)},e.formatMessage(P.Z.backToPreviousPage))]})))}}}]);
//# sourceMappingURL=../sourcemaps/8808.e3d16e8582a507ac3e421cdf1d4d4aae.js.map