(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[463],{15493:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var a=s(28416),n=s.n(a),i=s(62012),l=s(79332),r=s(65353),c=s(5964),o=s(75587),m=s(73699),p=s(41435),d=s(38296),u=s(62472);const b=e=>{var{id:t="",children:s=null,className:n="",isOpen:i=!1,parentRef:l=null,getMenuRef:g=null,isDisabled:h=!1,isPlain:f=!1,isText:E=!1,toggleVariant:A="default",isActive:v=!1,onToggle:_=((e,t)=>{}),icon:y=null,toggleIndicator:O=c.default,splitButtonItems:k,splitButtonVariant:N="checkbox","aria-haspopup":S,ouiaId:I,ouiaSafe:T,ref:U}=e,Z=(0,r.__rest)(e,["id","children","className","isOpen","parentRef","getMenuRef","isDisabled","isPlain","isText","toggleVariant","isActive","onToggle","icon","toggleIndicator","splitButtonItems","splitButtonVariant","aria-haspopup","ouiaId","ouiaSafe","ref"]);const P=(0,u.useOUIAProps)(b.displayName,I,T),w=a.createElement(p.Dl.Consumer,null,(({toggleTextClass:e,toggleIndicatorClass:r,toggleIconClass:c})=>a.createElement(o.Z,Object.assign({},Z,{id:t,className:n,isOpen:i,parentRef:l,getMenuRef:g,isActive:v,isDisabled:h,isPlain:f,isText:E,toggleVariant:A,onToggle:_,"aria-haspopup":S},P,k&&{isSplitButton:!0,"aria-label":Z["aria-label"]||"Select"}),y&&a.createElement("span",{className:(0,d.css)(c)},y),s&&a.createElement("span",{className:O&&(0,d.css)(e)},s),O&&a.createElement("span",{className:(0,d.css)(!k&&r)},a.createElement(O,null)))));return k?a.createElement("div",{className:(0,d.css)(m.Z.dropdownToggle,m.Z.modifiers.splitButton,"action"===N&&m.Z.modifiers.action,"primary"===A&&"action"===N&&m.Z.modifiers.primary,"secondary"===A&&"action"===N&&m.Z.modifiers.secondary,h&&m.Z.modifiers.disabled)},k,w):w};b.displayName="DropdownToggle";var g=s(85044),h=s(39173),f=s(55140),E=s(64380),A=s(15950),v=s(25387),_=s(45697),y=s.n(_),O=s(2550),k=s(78173),N=s(50247);const S=({isOrgAdmin:e,isUserAccessAdmin:t})=>{const s=(0,v.YB)(),a=s.formatMessage(O.Z[e?"orgAdministrator":"userAccessAdmin"]),i=n().createElement("span",null,s.formatMessage(O.Z[e?"orgAdminHint":"userAccessAdminHint"]));return e||t?n().createElement(N.Tooltip,{position:N.TooltipPosition.right,content:i},n().createElement(k.Label,{color:"purple"}," ",a," ")):n().createElement(n().Fragment,null)};S.propTypes={isOrgAdmin:y().bool,isUserAccessAdmin:y().bool};const I=S;var T=s(86601);const U=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",advisor:"/insights/advisor",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions","ocp-advisor","ocm"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",subscriptions:"/subscriptions",repositories:"/content",provisioning:"/provisioning"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","subscriptions","content-sources","provisioning"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}];var Z=s(9545),P=s(23539),w=s(72232),j=s(94184),C=s.n(j),M=s(88094);const x=(...e)=>{const{search:t}=(0,i.useLocation)(),s=new URLSearchParams(t);return e.reduce(((e,t)=>({...e,[t]:s.get(t)})),{})},B=({header:e,entitlements:t,isDisabled:s})=>{const{bundle:a}=x("bundle");return n().createElement(n().Fragment,null,e&&n().createElement(w.Title,{headingLevel:"h3",size:"xl"},e),n().createElement(P.Stack,{className:C()({"pf-v5-u-mt-lg":!e}),hasGutter:!0},t&&U?.map((e=>{const l=t.find((([t])=>e.entitlement===t)),r=e.entitlement;return l?n().createElement(P.StackItem,{key:r,className:"rbac-c-mua-cardWrapper"},n().createElement(i.NavLink,{"aria-label":"card-link",className:C()("rbac-c-mua-bundles__cardlink",{"rbac-c-mua-bundles__cardlink--disabled":s}),to:{pathname:"",search:`bundle=${r}`}},n().createElement(M.Card,{key:e.title,isFlat:s||r!==a,isSelectable:!s,isSelected:!s&&r===a,className:C()("rbac-c-mua-bundles__card",`rbac-c-mua-bundles__card--${e.entitlement}`,{"rbac-c-mua-bundles__card--disabled":s})},n().createElement(M.CardTitle,{className:"rbac-c-mua-bundles__card--header"}," ",e.title),n().createElement(M.CardBody,null,n().createElement(P.Stack,{hasGutter:!0},n().createElement(P.StackItem,{className:"rbac-c-mua-bundles__card--applist"},Object.entries(e.apps||{}).map((([e])=>n().createElement("span",{key:e}," ",e," "))))))))):null}))))};B.propTypes={header:y().string,entitlements:y().array,isDisabled:y().bool};const L=B;var D=s(75614);const R=()=>a.Fragment,F=()=>{const{bundle:e}=x("bundle"),t=(e=>{const{pathname:t}=(0,i.useLocation)(),s=(0,i.useNavigate)();return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?U.find((({entitlement:t})=>t===e))?.appsIds||[]:(s({to:t,search:`bundle=${e=D.Jr}`},{replace:!0}),[])})(e),[l,r]=(0,a.useState)({});(0,a.useEffect)((()=>{Object.prototype.hasOwnProperty.call(l,e)||s(19289)(`./${e}`).then((t=>r((s=>({...s,[e]:t.default}))))).catch(console.log)}),[e]);const c=l[e]||R;return n().createElement(c,{key:e,apps:t})};var V=s(65655);const G=({entitlements:e,isOrgAdmin:t,isUserAccessAdmin:s})=>{const a=(0,v.YB)(),i=Object.entries(e).filter((([e,{is_entitled:t}])=>t&&"application_services"!==e)),{bundle:l}=x("bundle"),r=t||s;return n().createElement(V.Z.Provider,{value:r},n().createElement(Z.Grid,null,n().createElement(Z.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},n().createElement(P.Stack,null,n().createElement(P.StackItem,{"data-testid":"entitle-section",className:"rbac-l-myUserAccess-section__cards--entitled"},n().createElement(L,{entitlements:i})))),n().createElement(Z.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==l&&n().createElement(w.Title,{headingLevel:"h3",size:"xl"},a.formatMessage(r?O.Z.yourRoles:O.Z.yourPermissions,{name:U.find((({entitlement:e})=>e===l))?.title})),n().createElement(F,null))))};G.propTypes={entitlements:y().object,isOrgAdmin:y().bool,isUserAccessAdmin:y().bool};const $=G,H=()=>{const e=(0,v.YB)(),t=(0,f.Z)(),[s,r]=(0,a.useState)({}),[{bundle:c},o]=(0,i.useSearchParams)(),[m,p]=(0,a.useState)(c),{userAccessAdministrator:d}=(0,a.useContext)(T.Z);(0,a.useEffect)((()=>{t.auth.getUser().then((({identity:e,entitlements:t})=>r({entitlements:t,isOrgAdmin:e?.user?.is_org_admin}))),!c&&o({bundle:D.Jr})}),[]);const u={...s.entitlements,application_services:{is_entitled:!0,is_trial:!1}},_=Object.entries(u).filter((([,{is_entitled:e}])=>e)),[y,k]=(0,a.useState)(!1);return n().createElement(n().Fragment,null,Object.prototype.hasOwnProperty.call(s,"entitlements")&&(Object.prototype.hasOwnProperty.call(s,"isOrgAdmin")||d)?n().createElement(n().Fragment,null,n().createElement(h.Z,{className:"rbac-p-myUserAccess--title sticky",title:n().createElement(n().Fragment,null,n().createElement("span",null," ",e.formatMessage(O.Z.myUserAccess)," "),n().createElement(I,{isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:d}))}),n().createElement(E.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},e.formatMessage(O.Z.selectAppsToViewPermissions)),_&&n().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},n().createElement(l.L,{ouiaId:"mua-bundle-dropdown",toggle:n().createElement(b,{onToggle:()=>k(!y),id:"mua-bundle-dropdown"},m||e.formatMessage(O.Z.chooseSubscriptionEllipsis)),dropdownItems:U.map((e=>n().createElement(i.NavLink,{key:e.entitlement,to:{pathname:"",search:`bundle=${e.entitlement}`}},n().createElement(g.h,{onClick:()=>{p(e.title),k(!1)},component:"button"},e.title)))),isOpen:y})),n().createElement("section",null,n().createElement($,{entitlements:u,isOrgAdmin:s.isOrgAdmin,isUserAccessAdmin:d}))):n().createElement(A.Spinner,null))}},65655:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a=(0,s(28416).createContext)(!1)},19289:(e,t,s)=>{var a={"./MUABundles":[51796,1796],"./MUABundles.scss":[51796,1796],"./__mocks__/rhel":[9116,9116],"./__mocks__/rhel.js":[9116,9116],"./ansible":[47341,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,5600],"./ansible.js":[47341,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,5600],"./application_services":[60989,5376,9222,989],"./application_services.js":[60989,5376,9222,989],"./openshift":[93474,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,4225],"./openshift.js":[93474,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,4225],"./rhel":[93312,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,459],"./rhel.js":[93312,2372,2562,8718,8971,9389,4444,5376,8826,7440,4229,9366,1621,459]};function n(e){if(!s.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(s.e)).then((()=>s(n)))}n.keys=()=>Object.keys(a),n.id=19289,e.exports=n},30187:()=>{}}]);
//# sourceMappingURL=../sourcemaps/463.b8eba531320594ea33e03fb42eb3b926.js.map