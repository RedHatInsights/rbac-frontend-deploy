"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[5278,7664],{7081:(e,t,n)=>{n.d(t,{ZP:()=>i,lb:()=>o,wl:()=>c});var r=n(40400);const o={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},c=(0,r.IU)(o),i=c},62410:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(85893),o=n(92950),c=n.n(o),i=n(25864),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},u=36e5,s=24*u,l=30*s,d=365*s,p=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},f=[{rightBound:1/0,description:function(e){return p(Math.round(e/d),"year")}},{rightBound:d,description:function(e){return p(Math.round(e/l),"month")}},{rightBound:l,description:function(e){return p(Math.round(e/s),"day")}},{rightBound:s,description:function(e){return p(Math.round(e/u),"hour")}},{rightBound:u,description:function(e){return p(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],v=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},g=function(e){return{exact:function(e){return v(e)+" UTC"},onlyDate:function(e){return v(e).slice(0,-6)},relative:function(e){return f.reduce((function(t,n){return n.rightBound>Date.now()-e.getTime()?n.description(Date.now()-e.getTime()):t}),v(e))},invalid:function(){return"Invalid date"}}[e]},m=function(e,t,n){return{exact:function(t){return g(e)(t)},onlyDate:function(t){return g(e)(t)},relative:function(o){return function(e,t,n,o){return void 0===o&&(o=""),(0,r.jsx)(i.Tooltip,a({},n,{content:(0,r.jsxs)("div",{children:[o,e]})},{children:t}))}(g("exact")(o),(0,r.jsx)("span",{children:g(e)(o)}),t,n)},invalid:function(){return"Invalid date"}}[e]};const h=function(e){var t=e.date,n=e.type,o=void 0===n?"relative":n,i=e.extraTitle,a=e.tooltipProps,u=t instanceof Date?t:new Date(t),s=null==t||"Invalid Date"===u.toString()?"invalid":o;return(0,r.jsx)(c().Fragment,{children:m(s,a,i)(u)})}},44873:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(85893),o=n(94184),c=n.n(o),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};const a=function(e){var t,n=e.type,o=e.children,a=e.className,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type","children","className"]),s=c()(a,((t={})["ins-l-".concat(n)]=void 0!==n,t));return(0,r.jsxs)("section",i({},u,{className:s},{children:[" ",o," "]}))}},93736:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(46801),o=n(65126);const c=function(e){var t=(0,r.useNavigate)();return function(n,r){return t((0,o.n)(n,e),r)}}},45998:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(29439),o=n(4942),c=n(93433),i=n(92950),a=n.n(i),u=n(50533),s=n(86896),l=n(46801),d=n(25864),p=n(44873),f=n(62410),v=n(65916),g=n(30060),m=n(19756),h=n(11107),y=n(84866),b=n(26794),Z=n(65126),O=n(93736),w=n(30893),P=n(4682);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null==e?void 0:e.reduce((function(e,n){var r=n.uuid,o=n.name,u=n.clientID,s=n.owner,l=n.time_created;return[].concat((0,c.Z)(e),[{uuid:r,title:o,cells:[o,u,s,a().createElement(i.Fragment,{key:"".concat(o,"-modified")},a().createElement(f.Z,{date:l,type:(0,h.mh)(l)}))],selected:Boolean(t&&t.find((function(e){return e.uuid===r})))}])}),[])},S=function(e){var t,n,r=e.groupReducer,o=r.selectedGroup,c=r.systemGroup,i=r.groups;return{serviceAccounts:(null===(t=o.serviceAccounts)||void 0===t?void 0:t.data)||[],pagination:k(k({},v.he),(null==o||null===(n=o.serviceAccounts)||void 0===n?void 0:n.meta)||{}),groupsPagination:i.pagination||i.meta,groupsFilters:i.filters,isLoading:o.serviceAccounts.isLoading,isAdminDefault:o.admin_default,systemGroupUuid:null==c?void 0:c.uuid,group:o}};const A=function(){var e,t=(0,s.Z)(),n=(0,u.useDispatch)(),f=(0,O.Z)(),v=(0,l.useParams)().groupId,h=(0,i.useState)(""),j=(0,r.Z)(h,2),k=j[0],A=j[1],I=(0,i.useState)(""),D=(0,r.Z)(I,2),C=D[0],E=D[1],B=(0,i.useState)(""),x=(0,r.Z)(B,2),T=x[0],N=x[1],F=(0,i.useState)([]),G=(0,r.Z)(F,2),_=G[0],L=G[1],U=(0,i.useContext)(b.Z),R=U.userAccessAdministrator,z=U.orgAdmin,V=(0,i.useRef)(z||R),J=(0,u.useSelector)(S),q=J.serviceAccounts,H=J.pagination,K=J.isLoading,Q=J.isAdminDefault,W=J.systemGroupUuid,X=function(e,t){return n((0,m.Gr)(e,t))},Y=[{title:t.formatMessage(w.Z.description),orderBy:"description"},{title:t.formatMessage(w.Z.clientId),orderBy:"clientID"},{title:t.formatMessage(w.Z.owner),orderBy:"owner"},{title:t.formatMessage(w.Z.timeCreated),orderBy:"timeCreated"}],$=(0,i.useCallback)((function(){v!==y.Cn?X(v,H):W&&X(W,H)}),[W,v]);return(0,i.useEffect)((function(){$()}),[W]),(0,i.useEffect)((function(){V.current=z||R}),[z,R]),a().createElement(a().Fragment,null,a().createElement(p.Z,{type:"content",id:"tab-service-accounts"},a().createElement(d.Alert,{className:"rbac-service-accounts-alert",variant:"info",isInline:!0,isPlain:!0,title:t.formatMessage(w.Z.visitServiceAccountsPage,{link:a().createElement(Z.Z,{to:"/service-accounts",linkBasename:"/iam"},t.formatMessage(w.Z.serviceAccountsPage))})}),a().createElement(g.M,{columns:Y,isSelectable:!0,rows:M(q,_),data:q,filterValue:k,fetchData:function(e){X(v,e)},emptyFilters:{owner:"",description:"",timeCreated:""},setFilterValue:function(e){var t=e.name,n=e.description;void 0!==t&&E(t),void 0!==n&&A(n),void 0!==T&&N(n)},isLoading:K,pagination:H,checkedRows:_,setCheckedItems:L,titlePlural:t.formatMessage(w.Z.serviceAccounts).toLowerCase(),titleSingular:t.formatMessage(w.Z.serviceAccount),toolbarButtons:function(){return[a().createElement(Z.Z,{className:"rbac-m-hide-on-sm",to:P.Z["group-add-service-account"].link.replace(":groupId",v),key:"add-to-group"},a().createElement(d.Button,{ouiaId:"add-service-account-button",variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add service account to group"},t.formatMessage(w.Z.addServiceAccount))),{label:t.formatMessage(w.Z.remove),value:"remove",props:{isDisabled:0===_.length,isDanger:!0},onClick:function(){var e=(0,l.createSearchParams)();_.forEach((function(t){var n=t.name;return e.append("id",n)})),f({pathname:P.Z["group-service-accounts-remove-group"].link.replace(":groupId",v),search:e.toString()})}},{label:t.formatMessage(w.Z.addServiceAccount),props:{className:"rbac-m-hide-on-md"},onClick:function(){return f(P.Z["group-add-service-account"].link.replace(":groupId",v))}}]},actionResolver:function(e){var n=e.uuid;return(0,c.Z)(V.current&&!Q?[{title:t.formatMessage(w.Z.remove),onClick:function(){return f({pathname:P.Z["group-service-accounts-remove-group"].link.replace(":groupId",v),search:(0,l.createSearchParams)({name:n}).toString()})}}]:[])},emptyProps:{title:t.formatMessage(w.Z.noGroupAccounts),description:[t.formatMessage(Q?w.Z.contactServiceTeamForAccounts:w.Z.addAccountsToThisGroup),""]},filters:[{key:"description",value:k},{key:"owner",value:C}],tableId:"group-accounts",ouiaId:"group-accounts"})),a().createElement(i.Suspense,null,a().createElement(l.Outlet,{context:(e={},(0,o.Z)(e,P.Z["group-service-accounts-remove-group"].path,{postMethod:function(e){f(P.Z["group-detail-service-accounts"].link.replace(":groupId",v)),e&&e.then($)}}),(0,o.Z)(e,P.Z["group-add-service-account"].path,{postMethod:function(e){f(P.Z["group-detail-service-accounts"].link.replace(":groupId",v)),e&&e.then($)}}),e)})))}}}]);
//# sourceMappingURL=../sourcemaps/5278.d13901a26492f4dffa6aee2e20e670f4.js.map