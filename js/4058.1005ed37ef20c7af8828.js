"use strict";(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[4058,459],{41435:(e,t,a)=>{a.d(t,{Dl:()=>o,dw:()=>r,e4:()=>c,ir:()=>n});var n,r,s=a(28416);!function(e){e.right="right",e.left="left"}(n||(n={})),function(e){e.up="up",e.down="down"}(r||(r={}));const o=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),c=s.createContext({keyHandler:null,sendRef:null})},7876:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(85893),r=a(94184),s=a.n(r),o=function(){return o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};const c=function(e){var t,a=e.type,r=e.children,c=e.className,i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["type","children","className"]),l=s()(c,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,n.jsxs)("section",o({},i,{className:l,children:[" ",r," "]}))}},84414:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(62012),r=a(64756);const s=e=>{const t=(0,n.useNavigate)();return(a,n)=>t((0,r.n)(a,e),n)}},92057:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var n=a(28416),r=a.n(n),s=a(86706),o=a(25387),c=a(62012),i=a(5904),l=a(74503),u=a(31055),d=a(88094),m=a(64380),p=a(7876),g=a(62410),f=a(74982),v=a(97246),h=a(77044),Z=a(29301),y=a(75614),b=a(86601),C=a(64756),I=a(84414),k=a(2550),A=a(14289);const M=(e=[],t=[])=>e?.reduce(((e,{uuid:a,name:s,clientID:o,owner:c,time_created:i})=>[...e,{uuid:a,title:s,cells:[s,o,c,r().createElement(n.Fragment,{key:`${s}-modified`},r().createElement(g.Z,{date:i,type:(0,Z.mh)(i)}))],selected:Boolean(t&&t.find((e=>e.uuid===a)))}]),[]),E=({groupReducer:{selectedGroup:e,systemGroup:t,groups:a}})=>({serviceAccounts:e.serviceAccounts?.data||[],pagination:{...f.he,...e?.serviceAccounts?.meta||{}},groupsPagination:a.pagination||a.meta,groupsFilters:a.filters,isLoading:e.serviceAccounts.isLoading,isAdminDefault:e.admin_default,systemGroupUuid:t?.uuid,group:e,platformDefault:e.platform_default}),D=()=>{const e=(0,o.YB)(),t=(0,s.useDispatch)(),a=(0,I.Z)(),{groupId:g}=(0,c.useParams)(),[f,Z]=(0,n.useState)({clientID:"",name:"",description:""}),[D,S]=(0,n.useState)([]),{userAccessAdministrator:w,orgAdmin:O}=(0,n.useContext)(b.Z),P=(0,n.useRef)(O||w),{serviceAccounts:x,pagination:T,isLoading:B,isAdminDefault:F,systemGroupUuid:N,platformDefault:j}=(0,s.useSelector)(E),G=(e,a)=>t((0,h.Gr)(e,a)),L=[{title:e.formatMessage(k.Z.name)},{title:e.formatMessage(k.Z.clientId)},{title:e.formatMessage(k.Z.owner)},{title:e.formatMessage(k.Z.timeCreated)}],R=(0,n.useCallback)((()=>{g!==y.Cn?G(g,T):N&&G(N,T)}),[N,g]);return(0,n.useEffect)((()=>{R()}),[N]),(0,n.useEffect)((()=>{P.current=O||w}),[O,w]),r().createElement(r().Fragment,null,r().createElement(p.Z,{type:"content",id:"tab-service-accounts"},j?r().createElement(d.Card,null,r().createElement(d.CardBody,null,r().createElement(l.Bullseye,null,r().createElement(m.TextContent,null,r().createElement(m.Text,{component:m.TextVariants.h1},e.formatMessage(k.Z.noAccountsInDefaultAccess)))))):r().createElement(r().Fragment,null,r().createElement(i.Alert,{className:"rbac-service-accounts-alert",variant:"info",isInline:!0,isPlain:!0,title:e.formatMessage(k.Z.visitServiceAccountsPage,{link:r().createElement(C.Z,{to:"/service-accounts",linkBasename:"/iam"},e.formatMessage(k.Z.serviceAccountsPage))})}),r().createElement(v.M,{columns:L,isSelectable:!0,rows:M(x,D),data:x,filterValue:f,fetchData:e=>G(g,e),emptyFilters:{clientID:"",name:"",description:""},setFilterValue:({clientID:e,name:t,description:a})=>{Z({clientID:void 0===e?f.clientID:e,name:void 0===t?f.name:t,description:void 0===a?f.description:a})},isLoading:B,pagination:T,checkedRows:D,setCheckedItems:S,titlePlural:e.formatMessage(k.Z.serviceAccounts).toLowerCase(),titleSingular:e.formatMessage(k.Z.serviceAccount),toolbarButtons:()=>[r().createElement(C.Z,{className:"rbac-m-hide-on-sm",to:A.Z["group-add-service-account"].link.replace(":groupId",g),key:"add-to-group"},r().createElement(u.Button,{ouiaId:"add-service-account-button",variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add service account to group"},e.formatMessage(k.Z.addServiceAccount))),{label:e.formatMessage(k.Z.remove),props:{isDisabled:0===D.length},onClick:()=>{const e=(0,c.createSearchParams)();D.forEach((({name:t})=>e.append("name",t))),a({pathname:A.Z["group-service-accounts-remove-group"].link.replace(":groupId",g),search:e.toString()})}},{label:e.formatMessage(k.Z.addServiceAccount),props:{className:"rbac-m-hide-on-md"},onClick:()=>a(A.Z["group-add-service-account"].link.replace(":groupId",g))}],actionResolver:({uuid:t})=>[...P.current&&!F?[{title:e.formatMessage(k.Z.remove),onClick:()=>a({pathname:A.Z["group-service-accounts-remove-group"].link.replace(":groupId",g),search:(0,c.createSearchParams)({name:t}).toString()})}]:[]],emptyProps:{title:e.formatMessage(k.Z.noGroupAccounts),description:[e.formatMessage(F?k.Z.contactServiceTeamForAccounts:k.Z.addAccountsToThisGroup),""]},filters:[{key:"clientID",value:f.clientID,label:e.formatMessage(k.Z.clientId),placeholder:e.formatMessage(k.Z.filterByKey,{key:`${e.formatMessage(k.Z.clientId)[0].toLowerCase()}${e.formatMessage(k.Z.clientId).slice(1)}`})},{key:"name",value:f.name},{key:"description",value:f.description}],isFilterable:!0,tableId:"group-accounts",ouiaId:"group-accounts"}))),j?null:r().createElement(n.Suspense,null,r().createElement(c.Outlet,{context:{[A.Z["group-service-accounts-remove-group"].path]:{postMethod:e=>{S([]),a(A.Z["group-detail-service-accounts"].link.replace(":groupId",g)),e&&e.then?.(R)}},[A.Z["group-add-service-account"].path]:{postMethod:e=>{a(A.Z["group-detail-service-accounts"].link.replace(":groupId",g)),e&&e.then?.(R)}}}})))}}}]);
//# sourceMappingURL=../sourcemaps/4058.0af070701ee70175a1d3bd9c83baed4e.js.map