(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[8902],{35814:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var o=a(93345),n=a.n(o),r=a(8604),s=a(17228),l=a(49646),i=a(60281),c=a(40335),u=a(69733),m=a(59622),g=a(96219),p=a(52453),d=a(13692),b=a(6271),E=a(58510),P=a(52577),S=a(44097),f=a(42134),v=a(49634);const C=["Username","Email","First name","Last name","Status","Org admin"],h=[{title:"Add to user group",onClick:()=>console.log("ADD TO USER GROUP")},{title:"Remove from user group",onClick:()=>console.log("REMOVE FROM USER GROUP")}],R=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],U="iam-users-table",T=()=>{const e=(0,u.useDispatch)(),{users:t,totalCount:a}=(0,u.useSelector)((e=>({users:e.userReducer.users.data||[],totalCount:e.userReducer.users.meta.count}))),[r,s]=(0,v.useSearchParams)(),l=(0,m.Vs)({perPage:20,searchParams:r,setSearchParams:s}),{page:i,perPage:c,onSetPage:T,onPerPageSelect:k}=l,y=(0,m.Jk)({matchOption:(e,t)=>e[0]===t[0]}),{selected:G,onSelect:I,isSelected:A}=y,D=(0,o.useCallback)((t=>{const{count:a,limit:o,offset:n,orderBy:r}=t;e((0,S.hU)({...(0,f.YP)({count:a,limit:o,offset:n,orderBy:r}),usesMetaInURL:!0}))}),[e]);(0,o.useEffect)((()=>{D({limit:c,offset:(i-1)*c,orderBy:"username",count:a||0})}),[D,i,c]);const O=t.map((e=>[e.username,e.email,e.first_name,e.last_name,e.is_active?"Active":"Inactive",e.is_org_admin?"Yes":"No",{cell:n().createElement(P.G,{items:h}),props:{isActionCell:!0}}])),L=O.length>0&&O.every(A),w=!L&&O.some(A),M=n().createElement(E.Pagination,{perPageOptions:R,itemCount:a,page:i,perPage:c,onSetPage:T,onPerPageSelect:k});return n().createElement(p.U$,{ouiaId:U,selection:y},n().createElement(d.R,{ouiaId:`${U}-header-toolbar`,bulkSelect:n().createElement(g.rT,{isDataPaginated:!0,pageCount:t.length,selectedCount:G.length,totalCount:a,pageSelected:L,pagePartiallySelected:w,onSelect:e=>{e===g.oG.none?I(!1):e===g.oG.page?I(!0,O):e===g.oG.nonePage&&I(!1,O)}}),pagination:n().cloneElement(M,{isCompact:!0})}),n().createElement(b.Ub,{variant:"compact","aria-label":"Users Table",ouiaId:`${U}-table`,columns:C,rows:O}),n().createElement(d.R,{ouiaId:`${U}-footer-toolbar`,pagination:M}))};var k=a(26956),y=a(99843),G=a(59266);const I=["User group name","Description","Users","Service accounts","Roles","Workspaces","Last modified"],A=[{title:"Edit user group",onClick:()=>console.log("EDIT USER GROUP")},{title:"Delete user group",onClick:()=>console.log("DELETE USER GROUP")}],D=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],O="iam-user-groups-table",L=()=>{const e=(0,u.useDispatch)(),{groups:t,totalCount:a}=(0,u.useSelector)((e=>({groups:e.groupReducer?.groups?.data||[],totalCount:e.groupReducer?.groups?.meta.count||0}))),[r,s]=(0,v.useSearchParams)(),l=(0,m.Vs)({perPage:20,searchParams:r,setSearchParams:s}),{page:i,perPage:c,onSetPage:S,onPerPageSelect:C}=l,h=(0,m.Jk)({matchOption:(e,t)=>e[0]===t[0]}),{selected:R,onSelect:U,isSelected:T}=h,L=(0,o.useCallback)((t=>{const{count:a,limit:o,offset:n,orderBy:r}=t;e((0,y.pl)({...(0,f.YP)({count:a,limit:o,offset:n,orderBy:r}),usesMetaInURL:!0}))}),[e]);(0,o.useEffect)((()=>{L({limit:c,offset:(i-1)*c,orderBy:"name",count:a||0})}),[L,i,c]);const w=t.map((e=>[e.name,e.description?n().createElement(k.Tooltip,{isContentLeftAligned:!0,content:e.description},n().createElement("span",null,e.description.length>23?e.description.slice(0,20)+"...":e.description)):n().createElement("div",{className:"pf-v5-u-color-400"},"No description"),e.principalCount,e.serviceAccounts||"?",e.roleCount,e.workspaces||"?",(0,G.A)(new Date(e.modified),{addSuffix:!0}),{cell:n().createElement(P.G,{items:A}),props:{isActionCell:!0}}])),M=w.length>0&&w.every(T),$=!M&&w.some(T),N=n().createElement(E.Pagination,{perPageOptions:D,itemCount:a,page:i,perPage:c,onSetPage:S,onPerPageSelect:C});return n().createElement(p.U$,{ouiaId:O,selection:h},n().createElement(d.R,{ouiaId:`${O}-header-toolbar`,bulkSelect:n().createElement(g.rT,{isDataPaginated:!0,pageCount:t.length,selectedCount:R.length,totalCount:a,pageSelected:M,pagePartiallySelected:$,onSelect:e=>{e===g.oG.none?U(!1):e===g.oG.page?U(!0,w):e===g.oG.nonePage&&U(!1,w)}}),pagination:n().cloneElement(N,{isCompact:!0})}),n().createElement(b.Ub,{variant:"compact","aria-label":"Users Table",ouiaId:`${O}-table`,columns:I,rows:w}),n().createElement(d.R,{ouiaId:`${O}-footer-toolbar`,pagination:N}))},w=()=>{const e=(0,r.tz)(),[t,a]=n().useState(0),u=n().createRef(),m=n().createRef(),g=(0,v.useNavigate)(),p=(0,v.useLocation)();return(0,o.useEffect)((()=>{const e=new URLSearchParams(p.search).get("activeTab");e&&a(Number(e))}),[p.search]),n().createElement(n().Fragment,null,n().createElement(i.A,{title:e.formatMessage(c.A.usersAndUserGroups),subtitle:e.formatMessage(c.A.usersAndUserGroupsDescription)}),n().createElement(s.PageSection,{type:"tabs",variant:s.PageSectionVariants.light,isWidthLimited:!0},n().createElement(l.Tabs,{activeKey:t,onSelect:(e,t)=>{const o=Number(t);a(o),(e=>{const t=new URLSearchParams(p.search);t.set("activeTab",e.toString()),g({search:t.toString()})})(o)},inset:{default:"insetNone",md:"insetSm",xl:"insetLg","2xl":"inset2xl"},role:"region"},n().createElement(l.Tab,{eventKey:0,title:e.formatMessage(c.A.users),tabContentId:"usersTab",tabContentRef:u,ouiaId:"users-tab-button"}),n().createElement(l.Tab,{eventKey:1,title:e.formatMessage(c.A.userGroups),tabContentId:"groupsTab",tabContentRef:m,ouiaId:"user-groups-tab-button"}))),n().createElement(s.PageSection,null,n().createElement(l.TabContent,{eventKey:0,id:"usersTab",ref:u,"aria-label":"Users tab"},n().createElement(T,null)),n().createElement(l.TabContent,{eventKey:1,id:"groupsTab",ref:m,"aria-label":"Groups tab",hidden:!0},n().createElement(L,null))))}},50545:()=>{},81117:()=>{},36752:()=>{},83696:()=>{}}]);