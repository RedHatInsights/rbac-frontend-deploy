(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[298,459],{68774:(e,t,a)=>{"use strict";a.d(t,{D:()=>o});var r=a(65353),l=a(66029),s=a(62873),n=a(38296);const o=e=>{var{children:t,className:a="",isVisited:o=!1}=e,i=(0,r.__rest)(e,["children","className","isVisited"]);return l.createElement("div",Object.assign({},i,{className:(0,n.css)(s.Z.content,o&&s.Z.modifiers.visited,a)}),t)};o.displayName="TextContent"},41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>n,dw:()=>l,e4:()=>o,ir:()=>r});var r,l,s=a(66029);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(l||(l={}));const n=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),o=s.createContext({keyHandler:null,sendRef:null})},46818:(e,t,a)=>{"use strict";a.d(t,{P8:()=>l});var r=a(78632);const l=()=>({className:r.Z.modifiers.nowrap})},40472:(e,t)=>{"use strict";t.__esModule=!0,t.global_breakpoint_2xl={name:"--pf-v5-global--breakpoint--2xl",value:"1450px",var:"var(--pf-v5-global--breakpoint--2xl)"},t.default=t.global_breakpoint_2xl},92732:(e,t)=>{"use strict";t.__esModule=!0,t.global_breakpoint_lg={name:"--pf-v5-global--breakpoint--lg",value:"992px",var:"var(--pf-v5-global--breakpoint--lg)"},t.default=t.global_breakpoint_lg},60144:(e,t)=>{"use strict";t.__esModule=!0,t.global_breakpoint_sm={name:"--pf-v5-global--breakpoint--sm",value:"576px",var:"var(--pf-v5-global--breakpoint--sm)"},t.default=t.global_breakpoint_sm},63242:(e,t)=>{"use strict";t.__esModule=!0,t.global_breakpoint_xl={name:"--pf-v5-global--breakpoint--xl",value:"1200px",var:"var(--pf-v5-global--breakpoint--xl)"},t.default=t.global_breakpoint_xl},79995:(e,t)=>{"use strict";t.U6={name:"--pf-v5-global--breakpoint--xs",value:"0",var:"var(--pf-v5-global--breakpoint--xs)"},t.ZP=t.U6},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(85893),l=a(94184),s=a.n(l),n=a(78956),o=a(6427),i=a(36530),c=function(){return c=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},c.apply(this,arguments)};const d=function(e){var t=e.className,a=e.title,l=e.actionsContent,d=e.ouiaId,u=e.ouiaSafe,m=void 0===u||u,p=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["className","title","actionsContent","ouiaId","ouiaSafe"]),f=s()(t),g="RHI/Header",b=(0,o.useOUIAId)(g,d,m);return(0,r.jsxs)(i.Flex,{justifyContent:{default:"justifyContentSpaceBetween"},children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(n.Title,c({headingLevel:"h1",size:"2xl",className:f,"widget-type":"InsightsPageHeaderTitle","data-ouia-component-type":g,"data-ouia-component-id":b,"data-ouia-safe":m},p,{children:a}))}),l?(0,r.jsx)(i.FlexItem,{children:l}):null]})}},7876:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(85893),l=a(94184),s=a.n(l),n=function(){return n=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},n.apply(this,arguments)};const o=function(e){var t,a=e.type,l=e.children,o=e.className,i=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["type","children","className"]),c=s()(o,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",n({},i,{className:c,children:[" ",l," "]}))}},75529:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(79995),l=a(60144),s=a(78236),n=a(92732),o=a(63242),i=a(40472);const c={xs:parseInt(r.ZP.value.replace("px","")),sm:parseInt(l.default.value.replace("px","")),md:parseInt(s.default.value.replace("px","")),lg:parseInt(n.default.value.replace("px","")),xl:parseInt(o.default.value.replace("px","")),"2xl":parseInt(i.default.value.replace("px",""))}},11549:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(75529);const l=function(e){return(null===r.Z||void 0===r.Z?void 0:r.Z[e])<=r.Z.sm}},78596:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(66029),l=a(75529);const s=function(){for(var e,t=window.innerWidth,a=0,r=Object.entries(l.Z);a<r.length;a++){var s=r[a],n=s[0];if(s[1]>=t)break;e=n}return e},n=function(){var e=(0,r.useState)((function(){return s()})),t=e[0],a=e[1],l=(0,r.useRef)(t);return(0,r.useEffect)((function(){function e(){var e=s();e!==l.current&&(l.current=e,a(e))}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},23340:(e,t,a)=>{"use strict";a.d(t,{MS:()=>s,aX:()=>r,qF:()=>l});const r=(e,t,a,r={})=>{const l=new URLSearchParams(e.search);let s=a.reduce(((e,t)=>{const a=l.getAll(t);return{...e,[t]:a.length>1?a:a[0]}}),{});return Object.keys(r).forEach((e=>{const t=r[e];s={...s,[e]:Array.isArray(s[e])?[...new Set([...s[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||s[e]},Array.isArray(t)?t.forEach((t=>l.getAll(e).includes(t)||l.append(e,t))):l.get(e)||t&&l.set(e,t)})),t({pathname:e.pathname,search:l.toString()},{replace:!0}),s},l=(e,t)=>{const a=new URLSearchParams(e.search);return t.some((e=>a.get(e)))},s=(e,t,a)=>{const r=new URLSearchParams(e.search);Object.keys(a).forEach((e=>r.delete(e))),Object.keys(a).forEach((e=>{const t=a[e];Array.isArray(t)?t.forEach((t=>t&&r.append(e,t))):t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0})}},96392:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var r=a(66029),l=a.n(r),s=a(45697),n=a.n(s),o=a(62012),i=a(65353),c=a(44303),d=a(38296),u=a(62472);const m=e=>{var{children:t=null,className:a="","aria-label":l="Breadcrumb",ouiaId:s,ouiaSafe:n=!0}=e,o=(0,i.__rest)(e,["children","className","aria-label","ouiaId","ouiaSafe"]);const p=(0,u.useOUIAProps)(m.displayName,s,n);return r.createElement("nav",Object.assign({},o,{"aria-label":l,className:(0,d.css)(c.Z.breadcrumb,a)},p),r.createElement("ol",{className:c.Z.breadcrumbList,role:"list"},r.Children.map(t,((e,t)=>{const a=t>0;return r.isValidElement(e)?r.cloneElement(e,{showDivider:a}):e}))))};m.displayName="Breadcrumb";var p=a(93174);const f=e=>{var{children:t=null,className:a="",to:l,isActive:s=!1,isDropdown:n=!1,showDivider:o,target:u,component:m="a",render:f}=e,g=(0,i.__rest)(e,["children","className","to","isActive","isDropdown","showDivider","target","component","render"]);const b=m,v=s?"page":void 0,y=(0,d.css)(c.Z.breadcrumbLink,s&&c.Z.modifiers.current);return r.createElement("li",Object.assign({},g,{className:(0,d.css)(c.Z.breadcrumbItem,a)}),o&&r.createElement("span",{className:c.Z.breadcrumbItemDivider},r.createElement(p.default,null)),"button"===m&&r.createElement("button",{className:y,"aria-current":v,type:"button"},t),n&&r.createElement("span",{className:(0,d.css)(c.Z.breadcrumbDropdown)},t),f&&f({className:y,ariaCurrent:v}),l&&!f&&r.createElement(b,{href:l,target:u,className:y,"aria-current":v},t),!l&&"button"!==m&&!n&&t)};f.displayName="BreadcrumbItem";var g=a(12849);const b=e=>e?l().createElement(m,null,Object.values(e).map(((e,t)=>e.title?l().createElement(f,{key:e.title,isActive:e.isActive},e.to&&l().createElement(o.NavLink,{end:!0,to:e.to},e.title)||e.title):l().createElement(g.Vj,{key:t})))):null;b.propTypes={breadcrumbs:n().object};const v=b},13851:(e,t,a)=>{"use strict";a.d(t,{Q:()=>E,y:()=>_});var r=a(66029),l=a.n(r),s=a(45697),n=a.n(s),o=a(28191),i=a(92298),c=a(68774),d=a(68340),u=a(12849),m=a(96392),p=a(85893),f=a(94184),g=a.n(f);const b=l().createContext("light");var v=a(6427),y=function(){return y=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},y.apply(this,arguments)};const h=function(e){var t=e.className,a=e.children,r=e.ouiaId,l=e.ouiaSafe,s=void 0===l||l,n=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(a[r[l]]=e[r[l]])}return a}(e,["className","children","ouiaId","ouiaSafe"]),o=g()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section"),i="RHI/Header",c=(0,v.useOUIAId)(i,r,s);return(0,p.jsx)(b.Consumer,{children:function(e){var t,r;void 0===e&&(e="light");var l=g()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((r={})["pf-m-light"]="light"===e,r));return(0,p.jsx)("section",y({"data-ouia-component-type":i,"data-ouia-component-id":c,"data-ouia-safe":s},n,{className:"".concat(o," ").concat(l),"widget-type":"InsightsPageHeader",children:a}))}})};var Z=a(39173);const E=({children:e,breadcrumbs:t})=>l().createElement(r.Fragment,null,t&&l().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},l().createElement(m.Z,{...t})),l().createElement(h,{className:"rbac-page-header"},e));E.propTypes={children:n().oneOfType([n().arrayOf(n().node),n().node]).isRequired,breadcrumbs:n().array,paddingBottom:n().bool},E.defaultProps={paddingBottom:!1};const _=({title:e,renderTitleTag:t,description:a,children:s})=>l().createElement(r.Fragment,null,l().createElement(o.k,null,l().createElement(i.B,{className:"pf-v5-u-mb-sm"},l().createElement(Z.Z,{title:e||l().createElement(u.h2,null),className:"rbac-page-header__title"})),l().createElement(i.B,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&l().createElement(c.D,{className:"rbac-page-header__description"},"string"==typeof a?l().createElement(d.x,{component:d.q.p},a):a),s);_.propTypes={title:n().node,renderTitleTag:n().func,description:n().node,children:n().oneOfType([n().node,n().arrayOf(n().node)])}},11207:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>G});var r=a(66029),l=a.n(r),s=a(25387),n=a(86706),o=a(62012),i=a(1082),c=a(7732),d=a(56869),u=a(46818),m=a(47173),p=a(49739),f=a(83826),g=a(78596),b=a(11549),v=a(55140),y=a(7876),h=a(62410),Z=a(68340),E=a(75863),_=a(61696),k=a(49004),x=a(34844),O=a(64756),N=a(29301),w=a(2550),I=a(14289),S=a(13563),C=a(13851),j=a(97246),M=a(86601),P=a(74982),R=a(23340),T=a(55573),A=a(45697),L=a.n(A),B=a(94184),D=a.n(B);const F=({className:e,row:t,...a})=>l().createElement(T.e,{className:D()(e,{"rbac-c-role-default":t.system}),row:t,...a});F.propTypes={row:L().shape({system:L().bool}),className:L().string};const z=F;var U=a(77044);const G=()=>{const{orgAdmin:e,userAccessAdministrator:t}=(0,r.useContext)(M.Z),[a,T]=(0,r.useState)([]),A=(0,s.YB)(),L=(0,n.useDispatch)(),B=(0,r.useRef)(null),D=(0,o.useNavigate)(),F=(0,o.useLocation)(),G=(0,g.Z)(),H=(0,v.Z)(),{roles:V,filters:$,pagination:q,isLoading:W,adminGroup:X}=(0,n.useSelector)((({roleReducer:{roles:{data:t,filters:a,pagination:r},isLoading:l},groupReducer:{adminGroup:s}})=>({adminGroup:s,roles:t,filters:a,pagination:{limit:r.limit??(e?P.HE:P.he).limit,offset:r.offset??(e?P.HE:P.he).offset,count:r.count,redirected:r.redirected},isLoading:l})),n.shallowEqual),K=[{title:A.formatMessage(w.Z.name),key:"display_name",transforms:[(0,i.d)(20),c.p]},{title:A.formatMessage(w.Z.description)},{title:A.formatMessage(w.Z.groups),cellTransforms:[d.z],transforms:[u.P8]},{title:A.formatMessage(w.Z.permissions),cellTransforms:[d.z],transforms:[u.P8]},{title:A.formatMessage(w.Z.lastModified),key:"modified",transforms:[u.P8,c.p]}],Q=e=>L((0,S.Kt)({...e,usesMetaInURL:!0,chrome:H})),Y=e||t,[J,ee]=(0,r.useState)($.display_name||""),[te,ae]=(0,r.useState)({index:Number(Y),direction:"asc"}),[re,le]=(0,r.useState)({}),[se,ne]=(0,r.useState)([]),[oe,ie]=(0,r.useState)([]),ce=`${"desc"===te?.direction?"-":""}${K[te?.index-Number(Y)].key}`;(0,r.useEffect)((()=>{(0,P.oG)(F,D,q.limit,q.offset)}),[q.offset,q.limit,q.count,q.redirected]),(0,r.useEffect)((()=>{(0,R.MS)(F,D,{display_name:J})}),[J]),(0,r.useEffect)((()=>{const{limit:e,offset:t}=(0,P.rj)(F,D,q),{display_name:a}=(0,R.aX)(F,D,["display_name"],{display_name:J});ee(a),H.appNavClick({id:"roles",secondaryNav:!0}),L((0,U.fB)({chrome:H})),Q({limit:e,offset:t,orderBy:ce,filters:{display_name:a}})}),[]),(0,r.useEffect)((()=>{F.pathname.includes("detail")?(0,N.Gw)(F,D):((0,P.Zc)(F)||(0,P.oG)(F,D,q.limit,q.offset),J?.length>0&&!(0,R.qF)(F,["display_name"])&&(0,R.aX)(F,D,["display_name"],{display_name:J}))}),[F.pathname]);const de=((e,t,a,s,n)=>e.reduce(((e,{uuid:o,access:i=[],display_name:c,name:d,description:u,system:m,accessCount:p,groups_in_count:f,groups_in:g,modified:b},v)=>[...e,{uuid:o,system:m,disableSelection:!!m,selected:Boolean(t?.find?.((e=>e.uuid===o))),cells:[{title:l().createElement(O.Z,{to:I.Z["role-detail"].link.replace(":roleId",o)},c||d)},{title:u},{title:f,props:{isOpen:3===s[o]}},{title:p,props:{isOpen:4===s[o]}},{title:l().createElement(h.Z,{date:b,type:(0,N.mh)(b)})}]},{uuid:`${o}-groups`,parent:3*v,compoundParent:2,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:f>0?l().createElement(_.i,{"aria-label":"Compound groups table",ouiaId:"role-in-groups-nested-table",variant:E.B.compact,cells:[a.formatMessage(w.Z.groupName),a.formatMessage(w.Z.description)," "],rows:g.map((e=>({cells:[{title:l().createElement(O.Z,{to:I.Z["group-detail"].link.replace(":groupId",e.uuid)},e.name)},e.description,{title:n?.uuid===e.uuid?null:l().createElement(O.Z,{to:I.Z["roles-add-group-roles"].link.replace(":roleId",o).replace(":groupId",e.uuid),state:{name:e.name}},a.formatMessage(w.Z.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},l().createElement(k.x,null),l().createElement(x.R,null)):l().createElement(Z.x,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(w.Z.noGroups))}]},{uuid:`${o}-permissions`,parent:3*v,compoundParent:3,fullWidth:!0,noPadding:!0,cells:[{props:{colSpan:7,className:"pf-m-no-padding"},title:i.length>0?l().createElement(_.i,{ouiaId:"permissions-in-role-nested-table","aria-label":"Compound permissions table",variant:E.B.compact,cells:[a.formatMessage(w.Z.application),a.formatMessage(w.Z.resourceType),a.formatMessage(w.Z.operation),a.formatMessage(w.Z.lastModified)],rows:i.map((e=>{const[t,a,s]=e.permission.split(":");return{cells:[t,a,s,l().createElement(r.Fragment,{key:`${t}-modified`},l().createElement(h.Z,{date:b,type:(0,N.mh)(b)}))]}}))},l().createElement(k.x,null),l().createElement(x.R,null)):l().createElement(Z.x,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},a.formatMessage(w.Z.noPermissions))}]}]),[]))(V,a,A,re,X),ue=q.count===se.length;return l().createElement(p.K,{className:"rbac-c-roles"},l().createElement(f.v,null,l().createElement(C.Q,null,l().createElement(C.y,{title:A.formatMessage(w.Z.roles)}))),l().createElement(f.v,null,l().createElement(y.Z,{type:"content",id:"tab-roles"},l().createElement(j.M,{isSelectable:Y,isRowSelectable:e=>!(e.platform_default||e.admin_default||e.system),checkedRows:a,textFilterRef:B,setCheckedItems:e=>{T((t=>e(t).filter((({platform_default:e,admin_default:t,system:a})=>!(e||t||a))).map((({uuid:e,name:t})=>({uuid:e,label:t})))))},actionResolver:e=>e.compoundParent?[]:[{title:A.formatMessage(w.Z.edit),onClick:(e,t,a)=>D((0,O.n)(I.Z["edit-role"].link.replace(":roleId",a.uuid)))},{title:A.formatMessage(w.Z.delete),onClick:(e,t,a)=>{ne([a]),D((0,O.n)(I.Z["remove-role"].link.replace(":roleId",a.uuid)))}}],columns:K,areActionsDisabled:({system:e})=>!!e,rowWrapper:z,rows:de,data:V,filterValue:J,fetchData:({name:e,limit:t,offset:a})=>((0,R.MS)(F,D,{display_name:e}),Q((0,N.jl)({limit:t,offset:a,orderBy:ce,filters:{display_name:e}}))),setFilterValue:({name:e=""})=>ee(e),isExpandable:!0,onExpand:(e,t,a,r,l)=>le({...re,[l.uuid]:r?-1:a+Number(!Y)}),isLoading:!W&&0===V?.length&&0===J?.length||W,pagination:q,ouiaId:"roles-table",titlePlural:A.formatMessage(w.Z.roles).toLowerCase(),titleSingular:A.formatMessage(w.Z.role).toLowerCase(),toolbarButtons:()=>e||t?[l().createElement(O.Z,{to:I.Z["add-role"].link,key:"add-role",className:"rbac-m-hide-on-sm"},l().createElement(m.zx,{ouiaId:"create-role-button",variant:"primary","aria-label":"Create role"},A.formatMessage(w.Z.createRole))),...(0,b.Z)(G)?[{label:A.formatMessage(w.Z.createRole),onClick:()=>D((0,O.n)(I.Z["add-role"].link))}]:[],{label:A.formatMessage(w.Z.edit),props:{isDisabled:!(1===a.length)},onClick:()=>D((0,O.n)(I.Z["edit-role"].link.replace(":roleId",a[0].uuid)))},{label:A.formatMessage(w.Z.delete),props:{isDisabled:!a.length>0},onClick:()=>{ne(a),D((0,O.n)(I.Z["remove-role"].link.replace(":roleId",a.map((({uuid:e})=>e)))))}}]:[],filterPlaceholder:A.formatMessage(w.Z.name).toLowerCase(),tableId:"roles",sortBy:te,onSort:(e,t,a)=>{const r=`${"desc"===a?"-":""}${K[t-Number(Y)].key}`;ae({index:t,direction:a}),Q((0,N.jl)({limit:q.limit,offset:0,orderBy:r,filters:{display_name:J}}))}}),l().createElement(r.Suspense,null,l().createElement(o.Outlet,{context:{[I.Z["add-role"].path]:{pagination:q,filters:{display_name:J}},[I.Z["remove-role"].path]:{isLoading:W,cancelRoute:(0,N.zk)(I.Z.roles.link,q,$),submitRoute:(0,N.zk)(I.Z.roles.link,{...q,offset:0},ue?{}:$),afterSubmit:()=>{Q({...q,filters:ue?{}:{display_name:J},offset:0}),ue&&ee(""),T([])},setFilterValue:ee},[I.Z["edit-role"].path]:{isLoading:W,cancelRoute:(0,N.zk)(I.Z.roles.link,q,$),afterSubmit:()=>{Q({...q,offset:0,filters:{display_name:J}}),T([])}},[I.Z["roles-add-group-roles"].path]:{selectedRoles:oe,setSelectedRoles:ie,closeUrl:(0,N.zk)(I.Z.roles.link,q,$),addRolesToGroup:(e,t)=>L((0,U.Wj)(e,t)),afterSubmit:()=>{Q({...q,offset:0,filters:{display_name:J}}),ie([])}}}})))))}},38299:()=>{}}]);
//# sourceMappingURL=../sourcemaps/298.841357d4b6c3c2fdd27c45ebbf584b52.js.map