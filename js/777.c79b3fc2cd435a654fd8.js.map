{"version":3,"sources":["webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-role-wizard.scss","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/review.scss","webpack://insights-rbac-frontend/./src/smart-components/role/roles.scss","webpack://insights-rbac-frontend/./src/smart-components/role/role-table-helpers.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-permissions-template.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/review-step-buttons.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/validators.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-role-error.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/review-template.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-role-success.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/base-role-table.js","webpack://insights-rbac-frontend/./src/helpers/cost-management/cost-management-helper.js","webpack://insights-rbac-frontend/./src/redux/actions/cost-management-actions.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/DisabledRowWrapper.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-permissions.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/review.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/cost-resources.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-role-wizard.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/type-selector.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/schema.js","webpack://insights-rbac-frontend/./src/smart-components/role/role-resource-definitions-table-helpers.js","webpack://insights-rbac-frontend/./src/smart-components/role/ResourceDefinitionsFormTemplate.js","webpack://insights-rbac-frontend/./src/smart-components/role/edit-resource-definitions-modal.js","webpack://insights-rbac-frontend/./src/smart-components/role/role-resource-definitions.js","webpack://insights-rbac-frontend/./src/smart-components/role/roles.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/add-role-wizard.scss?cc05","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-new/review.scss?f0d7","webpack://insights-rbac-frontend/./src/smart-components/role/roles.scss?7b6c"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","id","createRows","data","reduce","acc","uuid","display_name","name","description","system","accessCount","groupsCount","groups_in_count","modified","cells","Fragment","key","Link","to","DateFormat","date","type","AddPermissionTemplate","formFields","formOptions","useFormApi","useState","getState","values","selectedPermissions","setSelectedPermissions","unresolvedSplats","applications","filter","app","find","includes","addPermissions","length","className","ChipGroup","categoryName","i","map","Chip","color","isTruncated","onClick","p","Title","headingLevel","size","TextContent","Text","Popover","headerContent","bodyContent","Button","variant","props","propTypes","PropTypes","NextButton","nextStep","valid","handleNext","nextLabel","handleSubmit","submitLabel","isDisabled","validating","string","function","stepMapper","get","when","selectNext","ReviewStepButtons","disableBack","handlePrev","buttonLabels","cancel","submit","back","next","useContext","AddRoleWizardContext","success","error","submitting","onCancel","isRequired","asyncValidator","roleName","undefined","fetchRoles","limit","offset","nameMatch","console","response","debouncedAsyncValidator","asyncDebounce","ValidatorReset","useEffect","setTimeout","change","jumpToStep","WizardContext","setWizardError","EmptyState","EmptyStateVariant","EmptyStateIcon","icon","ExclamationCircleIcon","EmptyStateBody","ReviewTemplate","then","Bullseye","Spinner","setHideForm","CheckCircleIcon","component","EmptyStateSecondaryActions","columns","title","transforms","sortable","selector","roleReducer","rolesForWizard","isLoading","roles","pagination","meta","costApi","getCostApi","getResourceDefinitions","apiProps","getResourceTypes","getResource","ActionTypes","payload","CostHelper","DisabledRowWrapper","row","disableSelection","Tooltip","content","href","exitDelay","entryDelay","RowWrapper","permissionReducer","permission","options","application","operation","resource","expandSplats","isLoadingExpandSplats","isRecordLoading","selectedRole","resourceTypes","costReducer","permissions","resource_type","verb","baseRole","applicationOptions","resourceOptions","operationOptions","expandedPermissions","AddPermissionsTable","dispatch","useDispatch","fetchData","listPermissions","fetchOptions","listPermissionOptions","useSelector","shallowEqual","input","useFieldApi","resources","operations","filters","setFilters","roleType","isToggled","setIsToggled","filterBy","setFilterBy","value","setValue","getResourceType","r","split","debounbcedGetApplicationOptions","useCallback","debouncePromise","field","join","resourceType","debounbcedGetResourceOptions","debounbcedGetOperationOptions","baseRoleUuid","fetchRole","resetExpandSplats","onChange","basePermissions","access","Set","patterns","replace","count","some","f","match","calculateSelected","curr","0","preparedFilterItems","item","label","res","op","emptyItem","filterItemOverflow","Object","keys","isSelectable","isCompact","borders","selected","Boolean","filterValue","noData","noDataDescription","setFilterValue","checkedRows","setCheckedItems","newSelection","titlePlural","titleSingular","showMoreTitle","onFilter","onShowMore","e","placeholder","groups","items","slice","isFilterable","rowWrapper","stickyTable","rows","Grid","col","GridItem","span","cell","loadingResources","isLoadingResources","reducer","state","action","prevState","isOpen","selection","option","filteredOptions","filtervalue","createContext","FormTemplate","showFormControls","Description","Content","rest","mapperExtension","fetchRolesForWizard","itemCount","orderBy","Alert","isInline","role","Radio","aria-label","ouiaId","isChecked","batch","config","mappedProps","filterPlaceholder","useReducer","dispatchLocaly","path","resourceDefinitions","entries","hasGutter","md","TextVariants","sm","FormGroup","Select","SelectVariant","typeAheadAriaLabel","onToggle","onSelect","event","selectAll","onClear","selections","target","aria-labelledby","placeholderText","hasInlineFilter","SelectOption","index","review","copyName","copyDescription","hasCostResources","resourceDefinitionsRows","Stack","StackItem","checked","setChecked","handleChange","val","AddRoleWizard","history","hideForm","wizardContextValue","setWizardContextValue","cancelWarningVisible","setCancelWarningVisible","container","useRef","document","createElement","schema","setSchema","fields","isDynamic","inModal","showTitles","copy","create","validate","condition","is","StepTemplate","every","buttons","schemaBuilder","current","hidden","addNotification","dismissDelay","dismissable","Provider","prev","setWizardSuccess","onModalCancel","onConfirmCancel","Wizard","onClose","steps","isFinishedStep","subscription","componentMapper","onSubmit","formData","roleData","attributeFilter","createRole","fetchRolesWithPolicies","ResourceDefinitionsFormTemplate","ModalProps","ModalFormTemplate","alert","initialState","changedResources","resourcesPath","loadingStateVisible","Error","createEditResourceDefinitionsSchema","componentTypes","leftTitle","rightTitle","filterOptionsTitle","filterValueTitle","validatorMapper","EditResourceDefinitionsModal","cancelRoute","routeMatch","useRouteMatch","paths","params","permissionId","roleId","useHistory","dispatchLocally","definedResources","flatten","a","handleCancel","createOptions","customTitle","customDescription","Modal","initialValues","newAccess","updateRole","defaultSettings","setConfig","useParams","filteredRows","definition","breadcrumbs","isActive","Level","LevelItem","PageHeader","PageHeaderTitle","routes","Route","exact","toolbarButtons","hideHeader","cellWidth","nowrap","userIdentity","identity","insights","chrome","appNavClick","secondaryNav","afterSubmit","actionResolver","_event","_rowId","user","is_org_admin","x","Switch","pageAction","render","Section","sortBy","direction","api","__esModule","default","update","locals","hot","invalidate","oldLocals","accept","b","isEqualLocals","dispose"],"mappings":"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","file":"js/777.c79b3fc2cd435a654fd8.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".pf-c-form .pf-c-form__group .pf-c-radio{padding-bottom:8px}.pf-c-form .pf-c-form__group .pf-c-radio:last-child{padding-bottom:0px}.pf-c-select__menu .ins-c-select__scrollable-section{max-height:365px;overflow:auto}.ins-c-rbac-add-permission-title{display:block}.pf-c-wizard__main-body .ins-c-rbac-seleted-chips{padding-bottom:var(--pf-global--spacer--md)}.pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group{background-color:var(--pf-global--BackgroundColor--100)}.pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip{background-color:var(--pf-global--palette--blue-50);border-radius:var(--pf-global--BorderRadius--lg)}.pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip .pf-c-chip__text{font-size:var(--pf-global--FontSize--sm)}.pf-c-wizard__main-body .ins-c-rbac-seleted-chips .pf-c-chip-group .pf-c-chip-group__list .pf-c-chip-group__list-item .pf-c-chip::before{border-style:none}@media only screen and (max-width: 815px){.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content{padding:0px}.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:30em}}@media only screen and (max-width: 895px){.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:32em}}@media only screen and (min-width: 992px){.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content{padding:0px}.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:25em}}@media only screen and (min-width: 1055px){.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:32em}}@media only screen and (min-width: 1150px){.ins-c-rbac-permissions-table .ins-c-primary-toolbar .pf-c-toolbar__content .pf-c-toolbar__content-section .pf-m-filter-group{max-width:35em}}.ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__input{display:none}.ins-c-rbac-cost-resource-select .pf-c-select__menu .pf-c-select__menu-item:nth-child(3) .pf-c-check__label{color:var(--pf-global--link--Color)}.ins-c-rbac-disabled-row{background-color:var(--pf-global--disabled-color--300)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-rbac__sticky .ins-c-rbac__sticky--title{margin-bottom:var(--pf-global--spacer--sm);border-bottom:1px solid var(--pf-global--palette--black-300)}.ins-c-rbac__sticky .ins-c-rbac__sticky--title .pf-l-grid__item{font-weight:var(--pf-global--FontWeight--bold);margin-bottom:var(--pf-global--spacer--sm) !important}.ins-c-rbac__sticky .ins-c-rbac__sticky--data{max-height:240px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.ins-c-rbac__sticky .data::-webkit-scrollbar{display:none}.ins-c-rbac__gutter-sm{margin-bottom:var(--pf-global--spacer--sm)}.ins-c-rbac__gutter-md{margin-bottom:var(--pf-global--spacer--md)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"@media only screen and (min-width: 769px){.ins-c-primary-toolbar__actions{display:none}}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import React, { Fragment } from 'react';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components';\nimport { Link } from 'react-router-dom';\n\nexport const createRows = (data) =>\n  data.reduce(\n    (acc, { uuid, display_name, name, description, system, accessCount, groups_in_count: groupsCount, modified }) => [\n      ...acc,\n      {\n        uuid,\n        system,\n        cells: [\n          <Fragment key={`${uuid}-name`}>\n            <Link to={`/roles/detail/${uuid}`}>{display_name || name}</Link>\n          </Fragment>,\n          description,\n          <Fragment key={`${uuid}-accessCount`}>\n            <Link to={`/roles/detail/${uuid}`}>{accessCount}</Link>\n          </Fragment>,\n          groupsCount,\n          <Fragment key={`${uuid}-modified`}>\n            <DateFormat date={modified} type=\"relative\" />\n          </Fragment>,\n        ],\n      },\n    ],\n    []\n  );\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Chip, ChipGroup, Text, TextContent, Title, Button, Popover } from '@patternfly/react-core';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport QuestionCircleIcon from '@patternfly/react-icons/dist/js/icons/outlined-question-circle-icon';\nimport './add-role-wizard.scss';\n\nconst AddPermissionTemplate = ({ formFields }) => {\n  const formOptions = useFormApi();\n  const [selectedPermissions, setSelectedPermissions] = useState(formOptions.getState().values['add-permissions-table'] || []);\n\n  const unresolvedSplats =\n    formOptions.getState().values?.['copy-base-role']?.applications?.filter((app) => !selectedPermissions?.find(({ uuid }) => uuid.includes(app))) ||\n    [];\n  const addPermissions = formFields[0][0];\n  return (\n    <React.Fragment>\n      {selectedPermissions.length > 0 ? (\n        <div className=\"ins-c-rbac-seleted-chips\">\n          <ChipGroup categoryName=\"Selected permissions\">\n            {/* immutable reverse */}\n            {selectedPermissions\n              .reduce((acc, i) => [i, ...acc], [])\n              .map(({ uuid }) => (\n                <Chip key={uuid} color=\"blue\" isTruncated onClick={() => setSelectedPermissions(selectedPermissions.filter((p) => p.uuid !== uuid))}>\n                  {uuid}\n                </Chip>\n              ))}\n          </ChipGroup>\n        </div>\n      ) : null}\n      <Title headingLevel=\"h1\" size=\"xl\" className=\"ins-c-rbac-add-permission-title\">\n        Add permissions\n      </Title>\n      <TextContent>\n        <Text>\n          Select permissions to add to your role\n          {unresolvedSplats.length !== 0 && (\n            <Popover\n              headerContent=\"Custom roles only support granular permissions\"\n              bodyContent=\"Wildcard permissions (for example, approval:*:*) aren’t included in this table and can’t be added to your custom role.\"\n            >\n              <Button variant=\"link\">\n                Why am I not seeing all of my permissions? <QuestionCircleIcon />\n              </Button>\n            </Popover>\n          )}\n        </Text>\n      </TextContent>\n      {[\n        [\n          {\n            ...addPermissions,\n            props: {\n              ...addPermissions.props,\n              selectedPermissions,\n              setSelectedPermissions,\n            },\n          },\n        ],\n      ]}\n    </React.Fragment>\n  );\n};\n\nAddPermissionTemplate.propTypes = {\n  formFields: PropTypes.array,\n};\n\nexport default AddPermissionTemplate;\n","import { Button } from '@patternfly/react-core';\nimport React, { Fragment, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { AddRoleWizardContext } from './add-role-wizard';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\n\nconst selectNext = (nextStep, getState) =>\n  ({\n    string: nextStep,\n    function: nextStep({ values: getState().values }),\n  }?.[typeof nextStep] || nextStep.stepMapper?.[get(getState().values, nextStep.when)]);\n\nconst NextButton = ({ nextStep, valid, handleNext, nextLabel, getState, handleSubmit, submitLabel }) => (\n  <Button\n    variant=\"primary\"\n    type=\"button\"\n    isDisabled={!valid || getState().validating}\n    onClick={() => (nextStep ? handleNext(selectNext(nextStep, getState)) : handleSubmit())}\n  >\n    {nextStep ? nextLabel : submitLabel}\n  </Button>\n);\n\nNextButton.propTypes = {\n  nextStep: PropTypes.oneOfType([PropTypes.string, PropTypes.func, PropTypes.object]),\n  handleSubmit: PropTypes.func.isRequired,\n  submitLabel: PropTypes.node.isRequired,\n  valid: PropTypes.bool,\n  handleNext: PropTypes.func.isRequired,\n  nextLabel: PropTypes.node.isRequired,\n  getState: PropTypes.func.isRequired,\n};\n\nconst ReviewStepButtons = ({ disableBack, handlePrev, nextStep, handleNext, buttonLabels: { cancel, submit, back, next } }) => {\n  const formOptions = useFormApi();\n  const { success, error, submitting } = useContext(AddRoleWizardContext);\n  if (success || typeof error === 'undefined' || error || submitting) {\n    return null;\n  }\n\n  return (\n    <Fragment>\n      <NextButton {...formOptions} handleNext={handleNext} nextStep={nextStep} nextLabel={next} submitLabel={submit} />\n      <Button type=\"button\" variant=\"secondary\" isDisabled={disableBack} onClick={handlePrev}>\n        {back}\n      </Button>\n      <Button type=\"button\" variant=\"link\" onClick={formOptions.onCancel}>\n        {cancel}\n      </Button>\n    </Fragment>\n  );\n};\n\nReviewStepButtons.propTypes = {\n  disableBack: PropTypes.bool,\n  handlePrev: PropTypes.func.isRequired,\n  handleNext: PropTypes.func.isRequired,\n  nextStep: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      when: PropTypes.string.isRequired,\n      stepMapper: PropTypes.object.isRequired,\n    }),\n    PropTypes.func,\n  ]),\n  buttonLabels: PropTypes.shape({\n    submit: PropTypes.node.isRequired,\n    cancel: PropTypes.node.isRequired,\n    back: PropTypes.node.isRequired,\n    next: PropTypes.node.isRequired,\n  }).isRequired,\n};\n\nexport default ReviewStepButtons;\n","import { useEffect } from 'react';\nimport { fetchRoles } from '../../../helpers/role/role-helper';\nimport asyncDebounce from '../../../utilities/async-debounce';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\n\nexport const asyncValidator = async (roleName) => {\n  if (!roleName) {\n    return undefined;\n  }\n\n  const response = await fetchRoles({ limit: 10, offset: 0, name: roleName, nameMatch: 'exact' }).catch((error) => {\n    console.error(error);\n    return undefined;\n  });\n\n  if (response?.data?.length > 0) {\n    throw 'Name has already been taken';\n  }\n\n  return undefined;\n};\n\nexport const debouncedAsyncValidator = asyncDebounce(asyncValidator);\n\nexport const ValidatorReset = ({ name }) => {\n  const formOptions = useFormApi();\n\n  useEffect(() => {\n    setTimeout(() => formOptions.change(name, '1'));\n\n    return () => formOptions.change(name, '');\n  }, []);\n\n  return null;\n};\n","import React, { useContext } from 'react';\nimport { Title, Button, EmptyState, EmptyStateVariant, EmptyStateIcon, EmptyStateBody } from '@patternfly/react-core';\nimport WizardContext from '@data-driven-forms/react-form-renderer/dist/esm/wizard-context';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport { AddRoleWizardContext } from './add-role-wizard';\n\nconst AddRoleError = () => {\n  const { jumpToStep } = useContext(WizardContext);\n  const { setWizardError } = useContext(AddRoleWizardContext);\n  return (\n    <EmptyState variant={EmptyStateVariant.large}>\n      <EmptyStateIcon color=\"red\" icon={ExclamationCircleIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        Role name already taken\n      </Title>\n      <EmptyStateBody>Please return to Step 1: Create role and choose a unique role name for your custom role.</EmptyStateBody>\n      <Button\n        onClick={() => {\n          setWizardError(undefined);\n          jumpToStep(0);\n        }}\n        variant=\"primary\"\n      >\n        Return to Step 1\n      </Button>\n    </EmptyState>\n  );\n};\n\nexport default AddRoleError;\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Bullseye, Spinner, Text, TextContent, Title } from '@patternfly/react-core';\nimport { AddRoleWizardContext } from './add-role-wizard';\nimport { asyncValidator } from './validators';\nimport './review.scss';\nimport AddRoleError from './add-role-error';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\n\nconst ReviewTemplate = ({ formFields }) => {\n  const { submitting, error, setWizardError } = useContext(AddRoleWizardContext);\n  const { getState } = useFormApi();\n  useEffect(() => {\n    setWizardError(undefined);\n    asyncValidator(getState().values['role-name'])\n      .then(() => setWizardError(false))\n      .catch(() => setWizardError(true));\n  }, []);\n\n  if (typeof error === 'undefined' || submitting) {\n    return (\n      <Bullseye>\n        <Spinner size=\"xl\" />\n      </Bullseye>\n    );\n  }\n\n  if (error === true) {\n    return <AddRoleError />;\n  }\n\n  return (\n    <React.Fragment>\n      <Title headingLevel=\"h1\" size=\"xl\" className=\"ins-c-rbac__gutter-sm\">\n        Review details\n      </Title>\n      <TextContent className=\"ins-c-rbac__gutter-md\">\n        <Text>Review and confirm the details for your role, or click Back to revise.</Text>\n      </TextContent>\n      {[[{ ...formFields?.[0]?.[0] }]]}\n    </React.Fragment>\n  );\n};\n\nReviewTemplate.propTypes = {\n  formFields: PropTypes.array,\n};\n\nexport default ReviewTemplate;\n","import React, { useContext } from 'react';\nimport { Title, Button, EmptyState, EmptyStateVariant, EmptyStateIcon, EmptyStateBody, EmptyStateSecondaryActions } from '@patternfly/react-core';\nimport { CheckCircleIcon } from '@patternfly/react-icons';\nimport { Link } from 'react-router-dom';\nimport { AddRoleWizardContext } from './add-role-wizard';\n\nconst AddRoleSuccess = () => {\n  const { setHideForm } = useContext(AddRoleWizardContext);\n  return (\n    <EmptyState variant={EmptyStateVariant.large}>\n      <EmptyStateIcon color=\"green\" icon={CheckCircleIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        You have successfully created a new role\n      </Title>\n      <EmptyStateBody></EmptyStateBody>\n      <Button component={(props) => <Link to=\"/roles\" {...props} />} variant=\"primary\">\n        Exit\n      </Button>\n      <EmptyStateSecondaryActions>\n        <Button\n          onClick={() => {\n            setHideForm(false);\n          }}\n          variant=\"link\"\n        >\n          Create another role\n        </Button>\n        <Button component={(props) => <Link to=\"/groups\" {...props} />} variant=\"link\">\n          Add role to group\n        </Button>\n      </EmptyStateSecondaryActions>\n    </EmptyState>\n  );\n};\n\nexport default AddRoleSuccess;\n","import React, { useState, useEffect } from 'react';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { Radio, Alert } from '@patternfly/react-core';\nimport { TableToolbarView } from '../../../presentational-components/shared/table-toolbar-view';\nimport { fetchRolesForWizard } from '../../../redux/actions/role-actions';\nimport { mappedProps } from '../../../helpers/shared/helpers';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/dist/esm/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport { sortable } from '@patternfly/react-table';\n\nconst columns = ['', { title: 'Name', key: 'display_name', transforms: [sortable] }, 'Description'];\nconst selector = ({ roleReducer: { rolesForWizard, isLoading } }) => ({\n  roles: rolesForWizard.data,\n  pagination: rolesForWizard.meta,\n  isLoading,\n});\n\nconst BaseRoleTable = (props) => {\n  const dispatch = useDispatch();\n  const fetchData = (options) => dispatch(fetchRolesForWizard(options));\n  const [filterValue, setFilterValue] = useState('');\n  const { roles, pagination } = useSelector(selector, shallowEqual);\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n\n  useEffect(() => {\n    fetchData({\n      limit: 50,\n      offset: 0,\n      itemCount: 0,\n      orderBy: 'display_name',\n    });\n  }, []);\n\n  const createRows = (roles) =>\n    roles.map((role) => ({\n      cells: [\n        {\n          title: (\n            <Radio\n              id={`${role.uuid}-radio`}\n              name={`${role.name}-radio`}\n              aria-label={`${role.name}-radio`}\n              ouiaId={`${role.name}-radio`}\n              value={role.uuid}\n              isChecked={input.value.uuid === role.uuid}\n              onChange={() => {\n                formOptions.batch(() => {\n                  input.onChange(role);\n                  formOptions.change('role-copy-name', `Copy of ${role.display_name || role.name}`);\n                  formOptions.change('role-copy-description', role.description);\n                  formOptions.change('add-permissions-table', []);\n                  formOptions.change('base-permissions-loaded', false);\n                });\n              }}\n            />\n          ),\n          props: { className: 'pf-c-table__check' },\n        },\n        role.display_name || role.name,\n        role.description,\n      ],\n    }));\n  return (\n    <div>\n      <Alert\n        variant=\"info\"\n        isInline\n        title={`Only granular permissions will be copied into a custom role \\\n        (for example, approval:requests:read). Wildcard permissions will not \\\n        be copied into a custom role (for example, approval:*:read).\n        `}\n      />\n      <TableToolbarView\n        columns={columns}\n        createRows={createRows}\n        data={roles}\n        fetchData={(config) => fetchData(mappedProps(config))}\n        filterValue={filterValue}\n        setFilterValue={({ name }) => setFilterValue(name)}\n        isLoading={false}\n        pagination={pagination}\n        titlePlural=\"roles\"\n        titleSingular=\"role\"\n        filterPlaceholder=\"role name\"\n        ouiaId=\"roles-table\"\n        isCompact\n      />\n    </div>\n  );\n};\n\nexport default BaseRoleTable;\n","import { getCostApi } from '../shared/user-login';\n\nconst costApi = getCostApi();\n\nexport async function getResourceDefinitions(apiProps) {\n  return await costApi.getResourceTypes(apiProps);\n}\n\nexport async function getResource(apiProps) {\n  return await costApi.getResource(apiProps);\n}\n","import * as ActionTypes from '../action-types';\nimport * as CostHelper from '../../helpers/cost-management/cost-management-helper';\n\nexport const getResourceDefinitions = (apiProps) => ({\n  type: ActionTypes.GET_RESOURCE_DEFINITIONS,\n  payload: CostHelper.getResourceDefinitions(apiProps),\n});\n\nexport const getResource = (apiProps) => ({\n  type: ActionTypes.GET_RESOURCE,\n  payload: CostHelper.getResource(apiProps),\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Tooltip } from '@patternfly/react-core';\nimport { RowWrapper } from '@patternfly/react-table';\n\nexport const DisabledRowWrapper = ({ row, ...props }) =>\n  row.disableSelection ? (\n    <Tooltip\n      content={\n        <div>\n          To add this permission to your role and define specific resources for it, at least one data source must be connected.{' '}\n          <a href=\"./settings/sources\">Configure sources for Cost Management</a>\n        </div>\n      }\n      exitDelay={1500}\n      entryDelay={1500}\n    >\n      <RowWrapper className=\"ins-c-rbac-disabled-row\" row={row} {...props} />\n    </Tooltip>\n  ) : (\n    <RowWrapper row={row} {...props} />\n  );\n\nDisabledRowWrapper.propTypes = {\n  props: PropTypes.object,\n  row: PropTypes.object,\n};\n","import React, { useCallback, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/dist/esm/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport debouncePromise from '@redhat-cloud-services/frontend-components-utilities/files/debounce';\nimport { TableToolbarView } from '../../../presentational-components/shared/table-toolbar-view';\nimport { listPermissions, listPermissionOptions, expandSplats, resetExpandSplats } from '../../../redux/actions/permission-action';\nimport { getResourceDefinitions } from '../../../redux/actions/cost-management-actions';\nimport { fetchRole } from '../../../redux/actions/role-actions';\nimport { DisabledRowWrapper } from './DisabledRowWrapper';\n\nconst columns = ['Application', 'Resource type', 'Operation'];\nconst selector = ({\n  permissionReducer: {\n    permission,\n    isLoading,\n    options: { application, operation, resource },\n    expandSplats,\n    isLoadingExpandSplats,\n  },\n  roleReducer: { isRecordLoading, selectedRole },\n  costReducer: { resourceTypes },\n}) => ({\n  permissions: permission.data.map(({ application, resource_type: resource, verb, permission } = {}) => ({\n    application,\n    resource,\n    operation: verb,\n    uuid: permission,\n  })),\n  pagination: permission.meta,\n  isLoading: isLoading || isRecordLoading,\n  baseRole: selectedRole,\n  applicationOptions: application.data.filter((app) => app !== '*'),\n  resourceOptions: resource.data.filter((app) => app !== '*'),\n  operationOptions: operation.data.filter((app) => app !== '*'),\n  expandedPermissions: expandSplats.data.map(({ permission }) => permission),\n  isLoadingExpandSplats,\n  resourceTypes: resourceTypes.data,\n});\n\nconst AddPermissionsTable = ({ selectedPermissions, setSelectedPermissions, ...props }) => {\n  const dispatch = useDispatch();\n  const fetchData = (apiProps) => dispatch(listPermissions(apiProps));\n  const fetchOptions = (apiProps) => dispatch(listPermissionOptions(apiProps));\n  const {\n    permissions,\n    isLoading,\n    pagination,\n    baseRole,\n    applicationOptions,\n    resourceOptions,\n    operationOptions,\n    expandedPermissions,\n    isLoadingExpandSplats,\n    resourceTypes,\n  } = useSelector(selector, shallowEqual);\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n  // TODO: use reducer when cleaning this code\n  const [filters, setFilters] = useState({ applications: [], resources: [], operations: [] });\n  const roleType = formOptions.getState().values['role-type']; // create/copy\n  const [isToggled, setIsToggled] = useState(false);\n  const [filterBy, setFilterBy] = useState('');\n  const [value, setValue] = useState();\n  const maxFilterItems = 10;\n\n  const getResourceType = (permission) => resourceTypes.find((r) => r.value === permission.split(':')?.[1]);\n  const createRows = (permissions) =>\n    permissions.map(({ application, resource, operation, uuid }) => ({\n      uuid: `${application}:${resource}:${operation}`,\n      cells: [\n        {\n          title: application,\n        },\n        resource,\n        operation,\n      ],\n      selected: Boolean(selectedPermissions && selectedPermissions.find((row) => row.uuid === uuid)),\n      disableSelection: application === 'cost-management' && (getResourceType(uuid) || { count: 0 }).count === 0,\n    }));\n\n  const debounbcedGetApplicationOptions = useCallback(\n    debouncePromise(\n      ({ applications, resources, operations }) =>\n        fetchOptions({\n          field: 'application',\n          limit: 50,\n          application: applications.join(),\n          resourceType: resources.join(),\n          verb: operations.join(),\n        }),\n      3000\n    ),\n    []\n  );\n  const debounbcedGetResourceOptions = useCallback(\n    debouncePromise(\n      ({ applications, resources, operations }) =>\n        fetchOptions({\n          field: 'resource_type',\n          limit: 50,\n          application: applications.join(),\n          resourceType: resources.join(),\n          verb: operations.join(),\n        }),\n      3000\n    ),\n    []\n  );\n  const debounbcedGetOperationOptions = useCallback(\n    debouncePromise(\n      ({ applications, resources, operations }) =>\n        fetchOptions({ field: 'verb', limit: 50, application: applications.join(), resourceType: resources.join(), verb: operations.join() }),\n      3000\n    ),\n    []\n  );\n\n  useEffect(() => {\n    const baseRoleUuid = formOptions.getState().values['copy-base-role']?.uuid;\n    if (roleType === 'copy' && baseRoleUuid) {\n      dispatch(fetchRole(baseRoleUuid));\n    }\n\n    dispatch(getResourceDefinitions());\n    formOptions.change('has-cost-resources', false);\n    fetchData(pagination);\n    fetchOptions({ field: 'application', limit: 50 });\n    fetchOptions({ field: 'resource_type', limit: 50 });\n    fetchOptions({ field: 'verb', limit: 50 });\n\n    return () => dispatch(resetExpandSplats());\n  }, []);\n\n  useEffect(() => {\n    debounbcedGetResourceOptions(filters);\n    debounbcedGetOperationOptions(filters);\n  }, [filters.applications]);\n\n  useEffect(() => {\n    debounbcedGetApplicationOptions(filters);\n    debounbcedGetOperationOptions(filters);\n  }, [filters.resources]);\n\n  useEffect(() => {\n    debounbcedGetApplicationOptions(filters);\n    debounbcedGetResourceOptions(filters);\n  }, [filters.operations]);\n\n  useEffect(() => {\n    input.onChange(selectedPermissions);\n  }, [selectedPermissions]);\n\n  useEffect(() => {\n    if (\n      !baseRole ||\n      roleType !== 'copy' ||\n      formOptions.getState().values['base-permissions-loaded'] ||\n      selectedPermissions.length > 0 ||\n      formOptions.getState().values['copy-base-role']?.uuid !== baseRole?.uuid ||\n      isLoadingExpandSplats ||\n      isLoading\n    ) {\n      return;\n    }\n\n    const basePermissions = baseRole?.access || [];\n    if (expandedPermissions.length === 0 && typeof isLoadingExpandSplats === 'undefined') {\n      const applications = [...new Set(basePermissions.map(({ permission }) => permission.split(':')[0]))];\n      dispatch(expandSplats({ application: applications.join() }));\n    } else {\n      const patterns = basePermissions.map(({ permission }) => permission.replace('*', '.*'));\n      setSelectedPermissions(() =>\n        expandedPermissions\n          .filter((p) => p.split(':')[0] !== 'cost-management' || (getResourceType(p) || { count: 0 }).count !== 0) // filter disabled rows\n          .filter((p) => patterns.some((f) => p.match(f))) // filter permissions with unresolved splats\n          .map((permission) => ({ uuid: permission }))\n      );\n      formOptions.change('base-permissions-loaded', true);\n    }\n  }, [permissions, baseRole]);\n\n  const setCheckedItems = (newSelection) => {\n    setSelectedPermissions(newSelection(selectedPermissions).map(({ uuid }) => ({ uuid })));\n  };\n\n  const calculateSelected = (filter) =>\n    filter.reduce(\n      (acc, curr) => ({\n        0: {\n          ...acc?.['0'],\n          [curr]: true,\n        },\n      }),\n      { 0: {} }\n    );\n\n  const preparedFilterItems = {\n    applications: [...applicationOptions].filter((item) => item.includes(filterBy)).map((app) => ({ label: app, value: app })),\n    resources: [...resourceOptions].filter((item) => item.includes(filterBy)).map((res) => ({ label: res, value: res })),\n    operations: [...operationOptions].filter((item) => item.includes(filterBy)).map((op) => ({ label: op, value: op })),\n  };\n\n  const emptyItem = {\n    label: <div> No results found</div>,\n    isDisabled: true,\n  };\n\n  const filterItemOverflow = preparedFilterItems[Object.keys(preparedFilterItems)[value ? value : 0]].length > maxFilterItems;\n  return (\n    <div className=\"ins-c-rbac-permissions-table\">\n      <TableToolbarView\n        columns={columns}\n        isSelectable={true}\n        isCompact={true}\n        borders={false}\n        createRows={createRows}\n        data={permissions}\n        filterValue={''}\n        noData={permissions?.length === 0}\n        noDataDescription={[\n          'Adjust your filters and try again. Note: Applications that only have wildcard \\\n          permissions (for example, patch:*:*) aren’t included in this table and can’t be \\\n          added to your custom role.',\n        ]}\n        fetchData={({ limit, offset, applications, resources, operations }) => {\n          fetchData({\n            limit,\n            offset,\n            application: (applications || filters.applications).join(),\n            resourceType: (resources || filters.resources).join(),\n            verb: (operations || filters.operations).join(),\n          });\n        }}\n        setFilterValue={({ applications, resources, operations }) => {\n          setFilters({\n            ...filters,\n            ...(applications ? { applications } : filters.applications),\n            ...(resources ? { resources } : filters.resources),\n            ...(operations ? { operations } : filters.operations),\n          });\n        }}\n        isLoading={isLoading || isLoadingExpandSplats}\n        pagination={{ ...pagination, count: pagination.count }}\n        checkedRows={selectedPermissions}\n        setCheckedItems={setCheckedItems}\n        titlePlural=\"permissions\"\n        titleSingular=\"permission\"\n        showMoreTitle={isToggled ? 'See less' : 'See more'}\n        onFilter={(filterBy) => setFilterBy(filterBy)}\n        onShowMore={\n          filterItemOverflow\n            ? () => {\n                setIsToggled(() => !isToggled);\n              }\n            : undefined\n        }\n        onChange={(e, value) => {\n          setFilterBy('');\n          setValue(value);\n        }}\n        value={value}\n        filters={[\n          {\n            key: 'applications',\n            value: filters.applications,\n            placeholder: 'Filter by application',\n            type: 'group',\n            selected: calculateSelected(filters.applications),\n            groups: [\n              {\n                type: preparedFilterItems.applications.length > 0 ? 'checkbox' : 'plain',\n                items:\n                  preparedFilterItems.applications.length > 0\n                    ? [...preparedFilterItems.applications].slice(0, isToggled ? undefined : maxFilterItems)\n                    : [emptyItem],\n              },\n            ],\n          },\n          {\n            key: 'resources',\n            value: filters.resources,\n            placeholder: 'Filter by resource type',\n            type: 'group',\n            selected: calculateSelected(filters.resources),\n            groups: [\n              {\n                type: preparedFilterItems.resources.length > 0 ? 'checkbox' : 'plain',\n                items:\n                  preparedFilterItems.resources.length > 0\n                    ? [...preparedFilterItems.resources].slice(0, isToggled ? undefined : maxFilterItems)\n                    : [emptyItem],\n              },\n            ],\n          },\n          {\n            key: 'operations',\n            value: filters.operations,\n            placeholder: 'Filter by operation',\n            type: 'group',\n            selected: calculateSelected(filters.operations),\n            groups: [\n              {\n                type: preparedFilterItems.operations.length > 0 ? 'checkbox' : 'plain',\n                items:\n                  preparedFilterItems.operations.length > 0\n                    ? [...preparedFilterItems.operations].slice(0, isToggled ? undefined : maxFilterItems)\n                    : [emptyItem],\n              },\n            ],\n          },\n        ]}\n        isFilterable={true}\n        rowWrapper={DisabledRowWrapper}\n        {...props}\n      />\n    </div>\n  );\n};\n\nAddPermissionsTable.propTypes = {\n  selectedPermissions: PropTypes.array,\n  setSelectedPermissions: PropTypes.func,\n};\n\nexport default AddPermissionsTable;\n","import React from 'react';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport { Stack, StackItem, Grid, GridItem, Text, TextVariants } from '@patternfly/react-core';\nimport './review.scss';\n\nconst stickyTable = (columns, rows) => (\n  <div className=\"ins-c-rbac__sticky\">\n    <Grid className=\"ins-c-rbac__sticky--title\">\n      {columns.map((col) => (\n        <GridItem span={12 / columns.length} key={col}>\n          {col}\n        </GridItem>\n      ))}\n    </Grid>\n    <Grid className=\"ins-c-rbac__sticky--data\">\n      {rows.map((row) =>\n        row.cells.map((cell) => (\n          <GridItem span={12 / columns.length} key={cell}>\n            {cell}\n          </GridItem>\n        ))\n      )}\n    </Grid>\n  </div>\n);\n\nconst ReviewStep = () => {\n  const formOptions = useFormApi();\n  const {\n    'role-name': name,\n    'role-description': description,\n    'role-copy-name': copyName,\n    'role-copy-description': copyDescription,\n    'add-permissions-table': permissions,\n    'resource-definitions': resourceDefinitions,\n    'has-cost-resources': hasCostResources,\n    'role-type': type,\n  } = formOptions.getState().values;\n  const columns = ['Application', 'Resource type', 'Operation'];\n  const rows = permissions.map((permission) => ({\n    cells: permission.uuid.split(':'),\n  }));\n\n  const resourceDefinitionsRows = (resourceDefinitions || []).map(({ permission, resources }) => ({\n    cells: [permission, resources.join(', ')],\n  }));\n\n  return (\n    <React.Fragment>\n      <Stack>\n        <StackItem className=\"ins-c-rbac__summary\">\n          <Grid>\n            <GridItem sm={12} md={2}>\n              <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n                Name\n              </Text>\n            </GridItem>\n            <GridItem sm={12} md={10}>\n              <Text component={TextVariants.p}>{type === 'create' ? name : copyName}</Text>\n            </GridItem>\n          </Grid>\n          <Grid>\n            <GridItem sm={12} md={2}>\n              <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n                Description\n              </Text>\n            </GridItem>\n            <GridItem sm={12} md={10}>\n              <Text component={TextVariants.p}>{type === 'create' ? description : copyDescription}</Text>\n            </GridItem>\n          </Grid>\n          <Grid>\n            <GridItem sm={12} md={2}>\n              <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n                Permissions\n              </Text>\n            </GridItem>\n            <GridItem sm={12} md={10}>\n              {stickyTable(columns, rows)}\n            </GridItem>\n          </Grid>\n          {hasCostResources && (\n            <Grid>\n              <GridItem sm={12} md={2}>\n                <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n                  Resource definitions\n                </Text>\n              </GridItem>\n              <GridItem sm={12} md={10}>\n                {stickyTable(['Permission', 'Resource definitions'], resourceDefinitionsRows)}\n              </GridItem>\n            </Grid>\n          )}\n        </StackItem>\n      </Stack>\n    </React.Fragment>\n  );\n};\n\nexport default ReviewStep;\n","import React, { useEffect, useReducer } from 'react';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { Select, SelectOption, SelectVariant, Grid, GridItem, Text, TextVariants, FormGroup } from '@patternfly/react-core';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/dist/esm/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport { getResourceDefinitions, getResource } from '../../../redux/actions/cost-management-actions';\n\nconst selector = ({ costReducer: { resourceTypes, isLoading, loadingResources, resources } }) => ({\n  resourceTypes: resourceTypes.data,\n  resources,\n  isLoading,\n  isLoadingResources: loadingResources > 0,\n});\n\nconst reducer = (state, action) => {\n  const prevState = state[action.key];\n  switch (action.type) {\n    case 'toggle':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          isOpen: !prevState.isOpen,\n        },\n      };\n    case 'select':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          selected: prevState.selected.includes(action.selection)\n            ? prevState.selected.filter((item) => item !== action.selection)\n            : [...prevState.selected, action.selection],\n        },\n      };\n    case 'selectAll':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          selected: prevState.options.map((option) => option.value),\n        },\n      };\n    case 'clear':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          selected: [],\n        },\n      };\n    case 'setOptions':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          options: action.options,\n          filteredOptions: action.options,\n        },\n      };\n    case 'setFilter':\n      return {\n        ...state,\n        [action.key]: {\n          ...prevState,\n          filteredOptions: prevState.options.filter(({ value }) => value.includes(action.filtervalue)),\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nconst CostResources = (props) => {\n  const dispatch = useDispatch();\n  const fetchData = (apiProps) => dispatch(getResourceDefinitions(apiProps));\n  const fetchResource = (apiProps) => dispatch(getResource(apiProps));\n  const { resourceTypes, isLoading, isLoadingResources, resources } = useSelector(selector, shallowEqual);\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n  const permissions = formOptions.getState().values['add-permissions-table'].filter(({ uuid }) => uuid.split(':')[0].includes('cost-management'));\n  const [state, dispatchLocaly] = useReducer(\n    reducer,\n    permissions.reduce(\n      (acc, permission) => ({\n        ...acc,\n        [permission.uuid]: {\n          selected: [],\n          options: [],\n          filteredOptions: [],\n          isOpen: false,\n        },\n      }),\n      {}\n    )\n  );\n  const onToggle = (key, isOpen) => dispatchLocaly({ type: 'toggle', key, isOpen });\n  const clearSelection = (key) => dispatchLocaly({ type: 'clear', key });\n  const onSelect = (event, selection, selectAll, key) =>\n    selectAll ? dispatchLocaly({ type: 'selectAll', selection, key }) : dispatchLocaly({ type: 'select', selection, key });\n\n  const permissionToResource = (permission) => resourceTypes.find((r) => r.value === permission.split(':')?.[1])?.path.split('/')?.[5];\n\n  useEffect(() => {\n    (formOptions.getState().values['resource-definitions'] || []).map(({ permission, resources }) =>\n      resources.map((resource) => permissions.includes(permission) && dispatchLocaly({ type: 'select', selection: resource, key: permission }))\n    );\n    fetchData();\n    formOptions.change('has-cost-resources', true);\n  }, []);\n\n  useEffect(() => {\n    if (!isLoading) {\n      const resourcePaths = [\n        ...new Set(permissions.map((permission) => resourceTypes.find((r) => r.value === permission.uuid.split(':')?.[1])?.path)),\n      ].filter((path) => path); // remove undefined\n      resourcePaths.map((path) => fetchResource(path));\n    }\n  }, [resourceTypes]);\n\n  useEffect(() => {\n    if (!isLoadingResources) {\n      permissions.map((p) => dispatchLocaly({ type: 'setOptions', key: p.uuid, options: resources[permissionToResource(p.uuid)] || [] }));\n    }\n  }, [isLoadingResources]);\n\n  useEffect(() => {\n    const resourceDefinitions = Object.entries(state).map(([permission, resources]) => ({ permission, resources: resources.selected }));\n    input.onChange(resourceDefinitions);\n    formOptions.change('resource-definitions', resourceDefinitions);\n  }, [state]);\n\n  // eslint-disable-next-line react/prop-types\n  const makeRow = ({ uuid: permission }) => {\n    const options = state[permission].filteredOptions;\n    return (\n      <React.Fragment>\n        <GridItem md={4} sm={12}>\n          <FormGroup label={permission} isRequired></FormGroup>\n        </GridItem>\n        <GridItem md={8} sm={12}>\n          <Select\n            className=\"ins-c-rbac-cost-resource-select\"\n            variant={SelectVariant.checkbox}\n            typeAheadAriaLabel=\"Select a state\"\n            onToggle={(isOpen) => {\n              dispatchLocaly({ type: 'setFilter', key: permission, filtervalue: '' });\n              onToggle(permission, isOpen);\n            }}\n            onSelect={(event, selection) => {\n              onSelect(event, selection, selection === `Select All (${options.length})`, permission);\n            }}\n            onClear={() => clearSelection(permission)}\n            selections={state[permission].selected}\n            isOpen={state[permission].isOpen}\n            onFilter={(e) => dispatchLocaly({ type: 'setFilter', key: permission, filtervalue: e.target.value })}\n            aria-labelledby={permission}\n            placeholderText=\"Select resources\"\n            hasInlineFilter\n          >\n            {[\n              <SelectOption key={0} value={`Select All (${options.length})`} />,\n              ...options.map((option, index) => <SelectOption key={index + 1} value={option.value} />),\n            ]}\n          </Select>\n        </GridItem>\n      </React.Fragment>\n    );\n  };\n\n  return (\n    <Grid hasGutter>\n      <GridItem md={4} className=\"ins-m-hide-on-sm\">\n        <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n          Cost management permissions\n        </Text>\n      </GridItem>\n      <GridItem md={8} className=\"ins-m-hide-on-sm\">\n        <Text component={TextVariants.h4} className=\"ins-c-rbac__bold-text\">\n          Resource definitions\n        </Text>\n      </GridItem>\n      {permissions.map(makeRow)}\n    </Grid>\n  );\n};\n\nexport default CostResources;\n","import React, { useState, useEffect, useRef, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport FormRenderer from '@data-driven-forms/react-form-renderer/dist/esm/form-renderer';\nimport Pf4FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/esm/form-template';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/dist/esm/component-mapper';\nimport { Wizard } from '@patternfly/react-core';\nimport schemaBuilder from './schema';\nimport { createRole, fetchRolesWithPolicies } from '../../../redux/actions/role-actions';\nimport { WarningModal } from '../../../smart-components/common/warningModal';\nimport AddRoleSuccess from './add-role-success';\nimport BaseRoleTable from './base-role-table';\nimport AddPermissionsTable from './add-permissions';\nimport ReviewStep from './review';\nimport CostResources from './cost-resources';\nimport TypeSelector from './type-selector';\nimport './add-role-wizard.scss';\n\nexport const AddRoleWizardContext = createContext({\n  success: false,\n  submitting: false,\n  error: undefined,\n});\n\nconst FormTemplate = (props) => <Pf4FormTemplate {...props} showFormControls={false} />;\n\nconst Description = ({ Content, ...rest }) => <Content {...rest} />;\nDescription.propTypes = {\n  Content: PropTypes.elementType.isRequired,\n};\n\nexport const mapperExtension = {\n  'base-role-table': BaseRoleTable,\n  'add-permissions-table': AddPermissionsTable,\n  'cost-resources': CostResources,\n  review: ReviewStep,\n  description: Description,\n  'type-selector': TypeSelector,\n};\n\nconst AddRoleWizard = ({ history: { push } }) => {\n  const dispatch = useDispatch();\n  const [wizardContextValue, setWizardContextValue] = useState({\n    success: false,\n    submitting: false,\n    error: undefined,\n    hideForm: false,\n  });\n  const [cancelWarningVisible, setCancelWarningVisible] = useState(false);\n  const container = useRef(document.createElement('div'));\n  const [schema, setSchema] = useState({});\n\n  useEffect(() => {\n    setSchema(schemaBuilder(container.current));\n  }, []);\n\n  useEffect(() => {\n    container.current.hidden = cancelWarningVisible;\n  }, [cancelWarningVisible]);\n\n  const onCancel = () => {\n    if (!wizardContextValue.success) {\n      dispatch(\n        addNotification({\n          variant: 'warning',\n          title: 'Creating role was canceled by the user',\n          dismissDelay: 8000,\n          dismissable: false,\n        })\n      );\n    }\n\n    push('/roles');\n  };\n\n  const setWizardError = (error) => setWizardContextValue((prev) => ({ ...prev, error }));\n  const setWizardSuccess = (success) => setWizardContextValue((prev) => ({ ...prev, success }));\n  const setHideForm = (hideForm) => setWizardContextValue((prev) => ({ ...prev, hideForm }));\n\n  const onSubmit = (formData) => {\n    const {\n      'role-name': name,\n      'role-description': description,\n      'role-copy-name': copyName,\n      'role-copy-description': copyDescription,\n      'add-permissions-table': permissions,\n      'cost-resources': resourceDefinitions,\n      'role-type': type,\n    } = formData;\n    setWizardContextValue((prev) => ({ ...prev, submitting: true }));\n    const roleData = {\n      applications: [...new Set(permissions.map(({ uuid: permission }) => permission.split(':')[0]))],\n      description: (type === 'create' ? description : copyDescription) || null,\n      name: type === 'create' ? name : copyName,\n      access: permissions.map(({ uuid: permission }) => ({\n        permission,\n        resourceDefinitions: resourceDefinitions?.find((r) => r.permission === permission)\n          ? [\n              {\n                attributeFilter: {\n                  key: `cost-management.${permission.split(':')[1]}`,\n                  operation: 'in',\n                  value: resourceDefinitions?.find((r) => r.permission === permission).resources,\n                },\n              },\n            ]\n          : [],\n      })),\n    };\n    return dispatch(createRole(roleData)).then(() => {\n      setWizardContextValue((prev) => ({ ...prev, submitting: false, success: true, hideForm: true }));\n      dispatch(fetchRolesWithPolicies());\n    });\n  };\n\n  return (\n    <AddRoleWizardContext.Provider value={{ ...wizardContextValue, setWizardError, setWizardSuccess, setHideForm }}>\n      <WarningModal type=\"role\" isOpen={cancelWarningVisible} onModalCancel={() => setCancelWarningVisible(false)} onConfirmCancel={onCancel} />\n      {wizardContextValue.hideForm ? (\n        <Wizard\n          title=\"Create role\"\n          isOpen\n          onClose={() => push('/roles')}\n          steps={[\n            {\n              name: 'success',\n              component: <AddRoleSuccess />,\n              isFinishedStep: true,\n            },\n          ]}\n        />\n      ) : (\n        <FormRenderer\n          schema={schema}\n          container={container}\n          subscription={{ values: true }}\n          FormTemplate={FormTemplate}\n          componentMapper={{ ...componentMapper, ...mapperExtension }}\n          onSubmit={onSubmit}\n          onCancel={(values) => {\n            const showWarning = Boolean((values && values['role-name']) || values['role-description'] || values['copy-base-role']);\n            if (showWarning) {\n              setCancelWarningVisible(true);\n            } else {\n              onCancel();\n            }\n          }}\n        />\n      )}\n    </AddRoleWizardContext.Provider>\n  );\n};\n\nAddRoleWizard.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default AddRoleWizard;\n","import React, { useState } from 'react';\nimport { Radio } from '@patternfly/react-core';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/dist/esm/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\n\nconst TypeSelector = (props) => {\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n  const [checked, setChecked] = useState(formOptions.getState().values['role-type']);\n  const handleChange = (val) => {\n    setChecked(val);\n    input.onChange(val);\n    formOptions.change('add-permissions-table', []);\n    formOptions.change('base-permissions-loaded', false);\n  };\n\n  return (\n    <div>\n      <Radio\n        isChecked={checked === 'create'}\n        name=\"role-type-create\"\n        onChange={() => handleChange('create')}\n        label=\"Create a role from scratch\"\n        id=\"role-type-create\"\n        value=\"create\"\n      />\n      <Radio\n        isChecked={checked === 'copy'}\n        name=\"role-type-copy\"\n        onChange={() => handleChange('copy')}\n        label=\"Copy an existing role\"\n        id=\"role-type-copy\"\n        value=\"copy\"\n      />\n    </div>\n  );\n};\n\nexport default TypeSelector;\n","import AddPermissionTemplate from './add-permissions-template';\nimport ReviewStepButtons from './review-step-buttons';\nimport React from 'react';\nimport ReviewTemplate from './review-template';\nimport { debouncedAsyncValidator, ValidatorReset } from './validators';\n\nexport default (container) => ({\n  fields: [\n    {\n      component: 'wizard',\n      name: 'wizzard',\n      isDynamic: true,\n      inModal: true,\n      showTitles: true,\n      title: 'Create role',\n      container,\n      fields: [\n        {\n          title: 'Create role',\n          name: 'step-1',\n          nextStep: {\n            when: 'role-type',\n            stepMapper: {\n              copy: 'name-and-description',\n              create: 'add-permissions',\n            },\n          },\n          fields: [\n            {\n              component: 'type-selector',\n              name: 'role-type',\n              isRequired: true,\n              validate: [\n                {\n                  type: 'required',\n                },\n              ],\n            },\n            {\n              component: 'text-field',\n              name: 'role-name',\n              type: 'text',\n              label: 'Role name',\n              isRequired: true,\n              condition: {\n                when: 'role-type',\n                is: 'create',\n              },\n              validate: [\n                debouncedAsyncValidator,\n                {\n                  type: 'required',\n                },\n              ],\n            },\n            {\n              component: 'text-field',\n              name: 'role-description',\n              type: 'text',\n              label: 'Role description',\n              condition: {\n                when: 'role-type',\n                is: 'create',\n              },\n            },\n            {\n              component: 'base-role-table',\n              name: 'copy-base-role',\n              label: 'Base role',\n              isRequired: true,\n              condition: {\n                when: 'role-type',\n                is: 'copy',\n              },\n              validate: [\n                {\n                  type: 'required',\n                },\n              ],\n            },\n            {\n              condition: {\n                when: 'role-type',\n                is: 'create',\n              },\n              component: 'description',\n              name: 'fixasyncvalidation',\n              Content: ValidatorReset,\n            },\n            {\n              condition: {\n                when: 'role-type',\n                is: 'copy',\n              },\n              component: 'description',\n              name: 'fixasyncvalidation2',\n              Content: ValidatorReset,\n            },\n          ],\n        },\n        {\n          title: 'Name and description',\n          name: 'name-and-description',\n          nextStep: 'add-permissions',\n          fields: [\n            {\n              component: 'text-field',\n              name: 'role-copy-name',\n              type: 'text',\n              label: 'Role name',\n              isRequired: true,\n              validate: [\n                debouncedAsyncValidator,\n                {\n                  type: 'required',\n                },\n              ],\n            },\n            {\n              component: 'text-field',\n              name: 'role-copy-description',\n              type: 'text',\n              label: 'Role description',\n            },\n          ],\n        },\n        {\n          name: 'add-permissions',\n          title: 'Add permissions',\n          StepTemplate: AddPermissionTemplate,\n          nextStep: ({ values }) =>\n            values &&\n            values['add-permissions-table'] &&\n            values['add-permissions-table'].some(({ uuid }) => uuid.split(':')[0].includes('cost-management'))\n              ? 'cost-resources-definition'\n              : 'review',\n          fields: [\n            {\n              component: 'add-permissions-table',\n              name: 'add-permissions-table',\n            },\n          ],\n        },\n        {\n          name: 'cost-resources-definition',\n          title: 'Define Cost Management resources',\n          nextStep: 'review',\n          fields: [\n            {\n              component: 'plain-text',\n              name: 'text-description',\n              label: <p>Specify where you would like to apply each cost permission selected in the previous step, using the dropdown below.</p>,\n            },\n            {\n              component: 'cost-resources',\n              name: 'cost-resources',\n              validate: [\n                (value = []) =>\n                  value.every((p) => p.resources.length > 0) ? undefined : 'You need to assign at least one resource to each permission.',\n              ],\n            },\n          ],\n        },\n        {\n          name: 'review',\n          title: 'Review details',\n          buttons: ReviewStepButtons,\n          StepTemplate: ReviewTemplate,\n          fields: [\n            {\n              component: 'review',\n              name: 'review',\n            },\n          ],\n        },\n      ],\n    },\n  ],\n});\n","export const createRows = (data) =>\n  data.reduce(\n    (acc, value) => [\n      ...acc,\n      {\n        cells: [value],\n      },\n    ],\n    []\n  );\n","import React from 'react';\nimport ModalFormTemplate from '../common/ModalFormTemplate';\nimport { Alert } from '@patternfly/react-core';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport PropTypes from 'prop-types';\nimport './role-permissions.scss';\n\nconst ResourceDefinitionsFormTemplate = ({ ModalProps, ...props }) => {\n  const formOptions = useFormApi();\n  const values = formOptions.getState().values;\n\n  return (\n    <ModalFormTemplate\n      {...props}\n      ModalProps={{\n        ...ModalProps,\n        onClose: () => ModalProps.onClose(values),\n      }}\n      alert={\n        values['dual-list-select']\n          ? undefined\n          : () => (\n              <div className=\"ins-m-resource-definitions\">\n                <Alert className=\"pf-c-modal__alert\" variant=\"danger\" isInline title=\"At least one resource must be defined for this permission\" />\n              </div>\n            )\n      }\n    />\n  );\n};\n\nResourceDefinitionsFormTemplate.propTypes = {\n  ModalProps: PropTypes.object,\n};\n\nexport default ResourceDefinitionsFormTemplate;\n","import React, { useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/esm/component-types';\nimport FormRenderer from '../common/form-renderer';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { updateRole, fetchRole } from '../../redux/actions/role-actions';\nimport { routes as paths } from '../../../package.json';\nimport { getResource, getResourceDefinitions } from '../../redux/actions/cost-management-actions';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/dist/esm/component-mapper';\nimport { WarningModal } from '../common/warningModal';\nimport { Spinner, Modal } from '@patternfly/react-core';\nimport ResourceDefinitionsFormTemplate from './ResourceDefinitionsFormTemplate';\nimport flatten from 'lodash/flattenDeep';\nimport './role-permissions.scss';\n\nconst createOptions = (resources) =>\n  Object.entries(resources).reduce(\n    (acc, [key, value]) => [\n      ...acc,\n      ...value.map((r) => ({\n        value: r.value,\n        path: key,\n        label: r.value,\n      })),\n    ],\n    []\n  );\n\nconst initialState = {\n  changedResources: undefined,\n  cancelWarningVisible: false,\n  resourcesPath: undefined,\n  loadingStateVisible: true,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'update':\n      return {\n        ...state,\n        ...action.payload,\n      };\n    default:\n      throw new Error();\n  }\n}\n\nconst createEditResourceDefinitionsSchema = (resources, resourcesPath, options) => ({\n  fields: [\n    {\n      component: componentTypes.DUAL_LIST_SELECT,\n      name: 'dual-list-select',\n      leftTitle: 'Resources available for the permission',\n      rightTitle: 'Resources defined for the permission',\n      filterOptionsTitle: 'Filter by resource...',\n      filterValueTitle: 'Filter by resource...',\n      options: [...(resourcesPath && resources ? options : [])],\n      validate: [{ type: 'validate-resources' }],\n    },\n  ],\n});\n\nconst selector = ({ costReducer: { resourceTypes, isLoading, loadingResources, resources } }, resourcesPath) => ({\n  resourceTypes: resourceTypes.data,\n  resources: resources[resourcesPath] ? { resourcesPath: resources[resourcesPath] } : resources,\n  isLoading,\n  isLoadingResources: loadingResources > 0,\n});\n\nconst validatorMapper = {\n  'validate-resources': () => (value) => (value && value.length > 0 ? undefined : 'At least one resource must be defined for this permission'),\n};\n\nconst EditResourceDefinitionsModal = ({ cancelRoute }) => {\n  const routeMatch = useRouteMatch(paths['role-detail-permission-edit']);\n  const {\n    params: { permissionId, roleId },\n  } = useRouteMatch(routeMatch);\n  const { replace, push } = useHistory();\n\n  const dispatch = useDispatch();\n  const fetchResourceDefinitions = () => dispatch(getResourceDefinitions());\n\n  const [state, dispatchLocally] = useReducer(reducer, initialState);\n\n  const { definedResources, role } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      definedResources: state.roleReducer.selectedRole?.access\n        ? flatten(\n            state.roleReducer.selectedRole.access\n              .filter((a) => a.permission === permissionId)\n              .map((access) => access.resourceDefinitions.map((resource) => resource.attributeFilter.value))\n          )\n        : [],\n      isRecordLoading: state.roleReducer.isRecordLoading,\n    }),\n    shallowEqual\n  );\n\n  const { resourceTypes, isLoading, isLoadingResources, resources } = useSelector((props) => selector(props, state.resourcesPath), shallowEqual);\n\n  useEffect(() => {\n    fetchResourceDefinitions();\n  }, [permissionId]);\n\n  useEffect(() => {\n    if (!isLoading) {\n      let path = resourceTypes.find((r) => r.value === permissionId.split(':')?.[1])?.path;\n      if (path) {\n        dispatchLocally({ type: 'update', payload: { resourcesPath: path.split('/')[5] } });\n        dispatch(getResource(path));\n      }\n    }\n  }, [resourceTypes]);\n\n  const onCancel = () => replace(cancelRoute);\n\n  const handleCancel = (data) => {\n    if (data['dual-list-select'] === definedResources) {\n      onCancel();\n    } else {\n      dispatchLocally({\n        type: 'update',\n        payload: {\n          changedResources: data['dual-list-select'],\n          cancelWarningVisible: true,\n        },\n      });\n    }\n  };\n\n  const handleSubmit = (data) => {\n    dispatchLocally({ type: 'update', payload: { changedResources: data['dual-list-select'] } });\n    const newAccess = {\n      permission: permissionId,\n      resourceDefinitions: [\n        {\n          attributeFilter: {\n            key: `cost-management.${permissionId.split(':')?.[1]}`,\n            operation: data['dual-list-select'].length === 1 ? 'equal' : 'in',\n            value: data['dual-list-select'].length === 1 ? data['dual-list-select'][0] : data['dual-list-select'],\n          },\n        },\n      ],\n    };\n    dispatch(updateRole(roleId, { ...role, access: [...role.access.filter((item) => item.permission !== permissionId), newAccess] }), true).then(\n      () => {\n        dispatch(fetchRole(roleId));\n        push(cancelRoute);\n      }\n    );\n  };\n\n  const options = createOptions(resources);\n\n  return (\n    <React.Fragment>\n      <WarningModal\n        customTitle=\"Exit edit resource definitions?\"\n        customDescription=\"All changes will be lost.\"\n        isOpen={state.cancelWarningVisible}\n        onModalCancel={() => dispatchLocally({ type: 'update', payload: { cancelWarningVisible: false } })}\n        onConfirmCancel={onCancel}\n      ></WarningModal>\n      {(isLoading || isLoadingResources) && state.loadingStateVisible ? (\n        <Modal\n          className=\"ins-m-resource-definitions\"\n          isOpen={true}\n          title=\"Edit resource definitions\"\n          onClose={() => {\n            dispatchLocally({ type: 'update', payload: { loadingStateVisible: false } });\n            onCancel();\n          }}\n        >\n          <Spinner />\n        </Modal>\n      ) : (\n        <FormRenderer\n          schema={createEditResourceDefinitionsSchema(resources, state.resourcesPath, options)}\n          componentMapper={componentMapper}\n          initialValues={{ 'dual-list-select': state.changedResources || definedResources || [] }}\n          onSubmit={handleSubmit}\n          onCancel={(data) => handleCancel(data)}\n          validatorMapper={validatorMapper}\n          FormTemplate={(props) => (\n            <ResourceDefinitionsFormTemplate\n              {...props}\n              ModalProps={{\n                onClose: handleCancel,\n                isOpen: !state.cancelWarningVisible,\n                variant: 'large',\n                title: 'Edit resource definitions',\n                description: 'Give or remove permissions to specific resources using the arrows below.',\n              }}\n            />\n          )}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nEditResourceDefinitionsModal.propTypes = {\n  routeMatch: PropTypes.string.isRequired,\n  cancelRoute: PropTypes.string.isRequired,\n  resources: PropTypes.array,\n  resourcesPath: PropTypes.string,\n};\n\nexport default EditResourceDefinitionsModal;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport { TextContent, Text, TextVariants, Level, LevelItem, Button } from '@patternfly/react-core';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { createRows } from './role-resource-definitions-table-helpers';\nimport { useParams, Link, Route } from 'react-router-dom';\nimport { TopToolbar } from '../../presentational-components/shared/top-toolbar';\nimport { PageHeaderTitle } from '@redhat-cloud-services/frontend-components/components/PageHeader';\nimport { ToolbarTitlePlaceholder } from '../../presentational-components/shared/loader-placeholders';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { fetchRole } from '../../redux/actions/role-actions';\nimport { routes as paths } from '../../../package.json';\nimport EditResourceDefinitionsModal from './edit-resource-definitions-modal';\nimport flatten from 'lodash/flatten';\nimport './role-permissions.scss';\n\nconst ResourceDefinitions = () => {\n  const [config, setConfig] = useState({\n    pagination: {\n      ...defaultSettings,\n      filter: '',\n    },\n  });\n\n  const { pagination, filter } = config;\n\n  const dispatch = useDispatch();\n\n  const { roleId, permissionId } = useParams();\n\n  const { role, permission, isRecordLoading } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      permission: state.roleReducer.selectedRole.access\n        ? {\n            ...state.roleReducer.selectedRole?.access.find((a) => a.permission === permissionId),\n          }\n        : {},\n      isRecordLoading: state.roleReducer.isRecordLoading,\n    }),\n    shallowEqual\n  );\n\n  const fetchData = () => {\n    dispatch(fetchRole(roleId));\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [roleId]);\n\n  useEffect(() => {\n    setConfig({\n      ...config,\n      pagination: {\n        ...config.pagination,\n        count: role.access ? role.access.length : 0,\n      },\n    });\n  }, [role]);\n\n  const filteredRows = permission.resourceDefinitions\n    ? flatten(permission.resourceDefinitions.map((definition) => definition.attributeFilter.value)).filter((value) =>\n        filter ? value.includes(filter) : true\n      )\n    : [];\n\n  const routes = () => (\n    <Fragment>\n      <Route exact path={paths['role-detail-permission-edit']}>\n        <EditResourceDefinitionsModal\n          cancelRoute={paths['role-detail-permission'].replace(':roleId', roleId).replace(':permissionId', permissionId)}\n        />\n      </Route>\n    </Fragment>\n  );\n\n  const toolbarButtons = () =>\n    !role.system\n      ? [\n          <Fragment key=\"edit-resource-definitions\">\n            <Link to={`/roles/detail/${roleId}/permission/${permissionId}/edit`}>\n              <Button variant=\"primary\" aria-label=\"Edit\">\n                Edit\n              </Button>\n            </Link>\n          </Fragment>,\n        ]\n      : [];\n\n  return (\n    <Fragment>\n      <TopToolbar\n        breadcrumbs={[\n          { title: 'Roles', to: '/roles' },\n          { title: isRecordLoading ? undefined : role && (role.display_name || role.name), to: `/roles/detail/${roleId}` },\n          { title: permissionId, isActive: true },\n        ]}\n      >\n        <Level>\n          <LevelItem>\n            <PageHeaderTitle title={permissionId || <ToolbarTitlePlaceholder />} className=\"ins-rbac-page-header__title\" />\n          </LevelItem>\n        </Level>\n      </TopToolbar>\n      <section className=\"pf-c-page__main-section ins-c-role__permissions\">\n        <TextContent>\n          <Text component={TextVariants.h1}>Defined resources</Text>\n        </TextContent>\n        <TableToolbarView\n          columns={[{}]}\n          createRows={createRows}\n          data={filteredRows.slice(pagination.offset, pagination.offset + pagination.limit)}\n          filterValue={filter}\n          fetchData={({ limit, offset, name }) =>\n            setConfig({\n              ...config,\n              filter: name,\n              pagination: {\n                ...config.pagination,\n                limit,\n                offset,\n              },\n            })\n          }\n          isCompact\n          routes={routes}\n          setFilterValue={({ name }) =>\n            setConfig({\n              ...config,\n              filter: name,\n            })\n          }\n          toolbarButtons={toolbarButtons}\n          isLoading={isRecordLoading}\n          pagination={{\n            ...pagination,\n            count: filteredRows.length,\n          }}\n          titlePlural=\"resources\"\n          titleSingular=\"resource\"\n          hideHeader\n        />\n      </section>\n    </Fragment>\n  );\n};\n\nexport default ResourceDefinitions;\n","import React, { Fragment, useState, useEffect } from 'react';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { Link, Route, Switch, useHistory } from 'react-router-dom';\nimport { cellWidth, nowrap, sortable } from '@patternfly/react-table';\nimport { Button, Stack, StackItem } from '@patternfly/react-core';\nimport { createRows } from './role-table-helpers';\nimport { mappedProps } from '../../helpers/shared/helpers';\nimport { fetchRolesWithPolicies } from '../../redux/actions/role-actions';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport AddRoleWizard from './add-role-new/add-role-wizard';\nimport RemoveRole from './remove-role-modal';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport Role from './role';\nimport { routes as paths } from '../../../package.json';\nimport EditRole from './edit-role-modal';\nimport './roles.scss';\nimport PageActionRoute from '../common/page-action-route';\nimport ResourceDefinitions from './role-resource-definitions';\n\nconst columns = [\n  { title: 'Name', key: 'display_name', transforms: [cellWidth(20), sortable] },\n  { title: 'Description' },\n  { title: 'Permissions', transforms: [nowrap] },\n  { title: 'Groups', transforms: [nowrap] },\n  { title: 'Last modified', key: 'modified', transforms: [nowrap, sortable] },\n];\n\nconst selector = ({ roleReducer: { roles, isLoading } }) => ({\n  roles: roles.data,\n  pagination: roles.meta,\n  userIdentity: roles.identity,\n  isLoading,\n});\n\nconst Roles = () => {\n  const [filterValue, setFilterValue] = useState('');\n  const dispatch = useDispatch();\n  const { push } = useHistory();\n  const { roles, isLoading, pagination, userIdentity } = useSelector(selector, shallowEqual);\n  const fetchData = (options) => dispatch(fetchRolesWithPolicies(options));\n\n  useEffect(() => {\n    insights.chrome.appNavClick({ id: 'roles', secondaryNav: true });\n    fetchData({ ...pagination, name: filterValue });\n  }, []);\n\n  const routes = () => (\n    <Fragment>\n      <Route exact path={paths['add-role']} component={AddRoleWizard} />\n      <Route exact path={paths['remove-role']}>\n        {!isLoading && (\n          <RemoveRole\n            routeMatch={paths['remove-role']}\n            cancelRoute={paths.roles}\n            afterSubmit={() => fetchData({ ...pagination, name: filterValue })}\n          />\n        )}\n      </Route>\n      <Route exact path={paths['edit-role']}>\n        {!isLoading && (\n          <EditRole afterSubmit={() => fetchData({ ...pagination, name: filterValue })} routeMatch={paths['edit-role']} cancelRoute={paths.roles} />\n        )}\n      </Route>\n    </Fragment>\n  );\n\n  const actionResolver = ({ system }) => {\n    return system\n      ? []\n      : [\n          {\n            title: 'Edit',\n            onClick: (_event, _rowId, role) => push(`/roles/edit/${role.uuid}`),\n          },\n          {\n            title: 'Delete',\n            onClick: (_event, _rowId, role) => push(`/roles/remove/${role.uuid}`),\n          },\n        ];\n  };\n\n  const toolbarButtons = () =>\n    [\n      <Fragment key=\"add-role\">\n        {userIdentity?.user?.is_org_admin ? (\n          <Link to={paths['add-role']}>\n            <Button ouiaId=\"create-role-button\" variant=\"primary\" aria-label=\"Create role\" className=\"pf-m-visible-on-md\">\n              Create role\n            </Button>\n          </Link>\n        ) : (\n          <Fragment />\n        )}\n      </Fragment>,\n      userIdentity?.user?.is_org_admin\n        ? {\n            label: 'Create role',\n            props: {\n              className: 'pf-m-hidden-on-md',\n            },\n            onClick: () => {\n              push(paths['add-role']);\n            },\n          }\n        : undefined,\n    ].filter((x) => x);\n\n  const renderRolesList = () => (\n    <Stack>\n      <StackItem>\n        <TopToolbar>\n          <TopToolbarTitle title=\"Roles\" />\n        </TopToolbar>\n      </StackItem>\n      <StackItem>\n        <Section type=\"content\" id={'tab-roles'}>\n          <TableToolbarView\n            actionResolver={actionResolver}\n            sortBy={{ index: 0, direction: 'asc' }}\n            columns={columns}\n            createRows={createRows}\n            data={roles}\n            filterValue={filterValue}\n            fetchData={(config) => fetchData(mappedProps(config))}\n            setFilterValue={({ name }) => setFilterValue(name)}\n            isLoading={isLoading}\n            pagination={pagination}\n            routes={routes}\n            ouiaId=\"roles-table\"\n            titlePlural=\"roles\"\n            titleSingular=\"role\"\n            toolbarButtons={toolbarButtons}\n            filterPlaceholder=\"name\"\n          />\n        </Section>\n      </StackItem>\n    </Stack>\n  );\n\n  return (\n    <Switch>\n      <PageActionRoute pageAction=\"role-detail-permission\" path={paths['role-detail-permission']}>\n        <ResourceDefinitions />\n      </PageActionRoute>\n      <PageActionRoute pageAction=\"role-detail\" path={paths['role-detail']}>\n        <Role />\n      </PageActionRoute>\n      <PageActionRoute pageAction=\"roles-list\" path={paths.roles} render={() => renderRolesList()} />\n    </Switch>\n  );\n};\n\nexport default Roles;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./add-role-wizard.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./add-role-wizard.scss\",\n      function () {\n        content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./add-role-wizard.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./review.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./review.scss\",\n      function () {\n        content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./review.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./roles.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./roles.scss\",\n      function () {\n        content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./roles.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};"],"sourceRoot":""}