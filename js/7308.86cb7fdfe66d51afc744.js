(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[7308,1789,1289,4076],{54282:(e,t,a)=>{"use strict";a.d(t,{NQ:()=>i,R1:()=>n,qK:()=>o,rP:()=>c});var s=a(93345),r=a(47931);const n={isManagedSidebar:!1,isSidebarOpen:!1,onSidebarToggle:()=>null,width:null,height:null,getBreakpoint:r._y,getVerticalBreakpoint:r.Yo},i=s.createContext(n),o=i.Provider,c=i.Consumer},67064:function(e,t,a){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},r=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(a[s[r]]=e[s[r]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Portal=t.NotificationPortal=t.NotificationPortalBase=void 0;var i=a(74848),o=a(69733),c=n(a(1701)),l=a(58274),u=a(54821);t.NotificationPortalBase=function(e){var t=e.clearNotifications,a=r(e,["clearNotifications"]),n=(0,o.useSelector)((function(e){return e.notifications})),u=(0,o.useDispatch)();return(0,i.jsx)(c.default,s({notifications:n,removeNotification:function(e){return u((0,l.removeNotification)(e))},onClearAll:t||function(){return u((0,l.clearNotifications)())}},a))},t.NotificationPortal=function(e){var a=e.silent,n=void 0===a||a,o=r(e,["silent"]);return(0,i.jsx)(u.ErrorBoundary,{headerTitle:"Notifications portal",silent:n,children:(0,i.jsx)(t.NotificationPortalBase,s({},o))})};var m=a(1701);Object.defineProperty(t,"Portal",{enumerable:!0,get:function(){return n(m).default}}),t.default=t.NotificationPortal},44717:function(e,t,a){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,s,r)}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),r=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||s(t,e,a)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67064);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(i).default}}),r(a(67064),t)},70763:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsMiddleware=t.clearNotifications=t.removeNotification=t.addNotification=t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=t.notificationsReducers=t.notifications=t.NotificationsPortal=void 0;var r=a(44717);Object.defineProperty(t,"NotificationsPortal",{enumerable:!0,get:function(){return s(r).default}});var n=a(53958);Object.defineProperty(t,"notifications",{enumerable:!0,get:function(){return s(n).default}}),Object.defineProperty(t,"notificationsReducers",{enumerable:!0,get:function(){return n.notificationsReducers}});var i=a(69778);Object.defineProperty(t,"ADD_NOTIFICATION",{enumerable:!0,get:function(){return i.ADD_NOTIFICATION}}),Object.defineProperty(t,"REMOVE_NOTIFICATION",{enumerable:!0,get:function(){return i.REMOVE_NOTIFICATION}}),Object.defineProperty(t,"CLEAR_NOTIFICATIONS",{enumerable:!0,get:function(){return i.CLEAR_NOTIFICATIONS}});var o=a(58274);Object.defineProperty(t,"addNotification",{enumerable:!0,get:function(){return o.addNotification}}),Object.defineProperty(t,"removeNotification",{enumerable:!0,get:function(){return o.removeNotification}}),Object.defineProperty(t,"clearNotifications",{enumerable:!0,get:function(){return o.clearNotifications}});var c=a(43655);Object.defineProperty(t,"notificationsMiddleware",{enumerable:!0,get:function(){return s(c).default}})},69778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=void 0;var a="@@INSIGHTS-CORE/NOTIFICATIONS/";t.ADD_NOTIFICATION="".concat(a,"ADD_NOTIFICATION"),t.REMOVE_NOTIFICATION="".concat(a,"REMOVE_NOTIFICATION"),t.CLEAR_NOTIFICATIONS="".concat(a,"CLEAR_NOTIFICATIONS"),t.default={ADD_NOTIFICATION:t.ADD_NOTIFICATION,REMOVE_NOTIFICATION:t.REMOVE_NOTIFICATION,CLEAR_NOTIFICATIONS:t.CLEAR_NOTIFICATIONS}},58274:function(e,t,a){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clearNotifications=t.removeNotification=t.addNotification=void 0;var r=a(69778);t.addNotification=function(e){return{type:r.ADD_NOTIFICATION,payload:s({id:"cloud-servicesnotification-"+(new Date).getTime()+Math.random().toString(36).slice(2)},e)}},t.removeNotification=function(e){return{type:r.REMOVE_NOTIFICATION,payload:e}},t.clearNotifications=function(){return{type:r.CLEAR_NOTIFICATIONS}},t.default={addNotification:t.addNotification,removeNotification:t.removeNotification,clearNotifications:t.clearNotifications}},53958:function(e,t,a){"use strict";var s=this&&this.__spreadArray||function(e,t,a){if(a||2===arguments.length)for(var s,r=0,n=t.length;r<n;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.notifications=t.notificationsReducers=t.defaultState=void 0;var r=a(69778);t.defaultState=[],t.notificationsReducers=function(e,a){switch(void 0===e&&(e=t.defaultState),a.type){case r.ADD_NOTIFICATION:return n=e,i=a.payload,s(s([],n,!0),[i],!1);case r.REMOVE_NOTIFICATION:return function(e,t){var a=t.payload,r=e.findIndex((function(e){return e.id===a}));return s(s([],e.slice(0,r),!0),e.slice(r+1),!0)}(e,a);case r.CLEAR_NOTIFICATIONS:return[];default:return e}var n,i},t.notifications=t.notificationsReducers,t.default=t.notifications},54821:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ErrorBoundary:()=>s.A,default:()=>s.A}),a(82262);var s=a(85117)},49420:(e,t,a)=>{"use strict";a.d(t,{D_:()=>s,G:()=>n,JI:()=>r});const s=(e,t,a,s={})=>{const r=new URLSearchParams(e.search);let n=a.reduce(((e,t)=>{const a=r.getAll(t);return{...e,[t]:a.length>1?a:a[0]}}),{});return Object.keys(s).forEach((e=>{const t=s[e];n={...n,[e]:Array.isArray(n[e])?[...new Set([...n[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||n[e]},Array.isArray(t)?t.forEach((t=>r.getAll(e).includes(t)||r.append(e,t))):r.get(e)||t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0}),n},r=(e,t)=>{const a=new URLSearchParams(e.search);return t.some((e=>a.get(e)))},n=(e,t,a)=>{const s=new URLSearchParams(e.search);Object.keys(a).forEach((e=>s.delete(e))),Object.keys(a).forEach((e=>{const t=a[e];Array.isArray(t)?t.forEach((t=>t&&s.append(e,t))):t&&s.set(e,t)})),t({pathname:e.pathname,search:s.toString()},{replace:!0})}},44419:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(49634),r=a(58471);const n=e=>{const t=(0,s.useNavigate)();return(a,s)=>t((0,r.o)(a,e),s)}},82258:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var s=a(93345),r=a.n(s),n=a(8604),i=a(5556),o=a.n(i),c=a(40748),l=a(18891),u=a.n(l),m=a(40262),d=a(40335),f=a(20881),p=a(63219);const g=({linkDescription:e,linkTitle:t})=>{const a=(0,n.tz)(),i=(0,f.A)(),o=i.getEnvironment(),l=i.isProd()?"":`${o}.`,{orgAdmin:g}=(0,s.useContext)(m.A);return!(0,p.useFlag)("platform.rbac.itless")&&g?r().createElement(c.Text,{className:"pf-v5-u-mt-0",component:c.TextVariants.h7},`${a.formatMessage(d.A.usersDescription)} `,e,r().createElement(c.Text,{component:c.TextVariants.a,href:`https://www.${l}redhat.com/wapps/ugc/protected/usermgt/userList.html`,target:"_blank",rel:"noopener noreferrer"},t,r().createElement(u(),null)),"."):r().createElement(c.Text,{className:"pf-v5-u-mt-0",component:c.TextVariants.h7},`${a.formatMessage(d.A.usersDescription)} `)};g.propTypes={linkDescription:o().node,linkTitle:o().node},g.defaultProps={linkDescription:"",linkTitle:" user management list "};const A=g},54774:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var s=a(93345),r=a.n(s),n=a(30133),i=a(5556),o=a.n(i),c=a(32485),l=a.n(c);const u=({row:e,...t})=>{const{status:a}=e,s=a?.props?.["data-is-active"];return r().createElement(n.S,{className:l()("rbac__user-row",{"ins-m-inactive":!s}),row:e,...t})};u.propTypes={row:o().shape({status:o().shape({props:o().shape({"data-is-active":o().bool,data:o().shape({isActive:o().bool})})})})};const m=u},30445:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(79994),r=a(93345),n=a.n(r),i=a(5556),o=a.n(i),c=(a(58156),a(81558));o().oneOfType([o().string,o().func,o().object]),o().func.isRequired,o().node.isRequired,o().bool,o().func.isRequired,o().node.isRequired,o().func.isRequired;const l=({renderNextButton:e,disableBack:t,handlePrev:a,buttonLabels:{cancel:i,back:o},context:l})=>{const u=(0,c.default)(),{success:m,error:d,submitting:f}=(0,r.useContext)(l);return m||void 0===d||d||f?null:n().createElement(r.Fragment,null,e(),n().createElement(s.Button,{type:"button",variant:"secondary",isDisabled:t,onClick:a},o),n().createElement(s.Button,{type:"button",variant:"link",onClick:u.onCancel},i))};l.propTypes={disableBack:o().bool,handlePrev:o().func.isRequired,handleNext:o().func.isRequired,nextStep:o().oneOfType([o().string,o().shape({when:o().string.isRequired,stepMapper:o().object.isRequired}),o().func]),buttonLabels:o().shape({submit:o().node.isRequired,cancel:o().node.isRequired,back:o().node.isRequired,next:o().node.isRequired}).isRequired,context:o().object.isRequired,renderNextButton:o().func};const u=l},43386:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var s=a(93345),r=a.n(s),n=a(79994),i=a(76347),o=a(8604),c=a(5556),l=a.n(c),u=a(40335),m=a(13282);const d=({context:e,title:t,text:a,customFooter:c})=>{const l=(0,o.tz)(),{jumpToStep:d}=(0,s.useContext)(i.default),{setWizardError:f}=(0,s.useContext)(e);return r().createElement(m.W5,{errorTitle:t,errorDescription:a,customFooter:c||r().createElement(n.Button,{onClick:()=>{f(void 0),d(0)},variant:n.ButtonVariant.primary},l.formatMessage(u.A.returnToStepNumber,{number:1}))})};d.propTypes={context:l().object.isRequired,title:l().string.isRequired,text:l().string.isRequired,customFooter:l().element};const f=d},83868:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AddGroupWizardContext:()=>de,default:()=>ye,mapperExtension:()=>ge,onCancel:()=>Ae});var s=a(93345),r=a.n(s),n=a(5556),i=a.n(n),o=a(69733),c=a(8604),l=a(67655),u=a(70763),m=a(79371),d=a(63537),f=a(42655),p=a(41939),g=a(95658),A=a(57502),v=a(81558),y=a(71436),E=a(79994),b=a(55086),h=a(53372),I=a(29068),M=a(7248),S=a(63281),O=a.n(S),N=a(13193),T=a(44419),k=a(43386),C=a(49573),x=a(40335);const _=({formFields:e})=>{const t=(0,c.tz)(),a=(0,T.A)(),{submittingGroup:n,submittingServiceAccounts:i,error:o,setWizardError:l}=(0,s.useContext)(de),{getState:u}=(0,v.default)();if((0,s.useEffect)((()=>{l(void 0),(0,N.x)(u().values["group-name"]).then((()=>l(!1))).catch((()=>l(!0)))}),[]),void 0===o||n&&!i)return r().createElement(y.Bullseye,null,r().createElement(I.Spinner,{className:"pf-v5-u-mt-xl",size:"xl"}));if(i&&!o){const e=n?1:i?2:3;return r().createElement(b.EmptyState,{variant:b.EmptyStateVariant.lg,"data-component-ouia-id":"wizard-progress",className:"rbac-add-group-progress"},r().createElement(b.EmptyStateHeader,{titleText:t.formatMessage(x.A.groupBeingCreated),icon:r().createElement(b.EmptyStateIcon,{className:"pf-v5-u-mt-xl",icon:O()}),headingLevel:"h4"}),r().createElement(h.Progress,{className:"pf-v5-u-mt-lg",style:{textAlign:"left"},min:0,max:3,value:e,label:(n?1:2)+" of 2",title:t.formatMessage(n?x.A.creatingGroup:x.A.associatingServiceAccounts)}))}return o?r().createElement(k.A,{context:de,title:n?t.formatMessage(x.A.groupNameTakenTitle):t.formatMessage(x.A.addGroupServiceAccountsErrorTitle,{count:u().values["service-accounts-list"].length}),text:n?t.formatMessage(x.A.groupNameTakenText):t.formatMessage(x.A.addNewGroupServiceAccountsErrorDescription,{count:u().values["service-accounts-list"].length}),customFooter:n?void 0:r().createElement(E.Button,{variant:E.ButtonVariant.primary,onClick:()=>a(C.A.groups.link)},t.formatMessage(x.A.close))}):r().createElement(r().Fragment,null,r().createElement(M.Title,{headingLevel:"h1",size:"xl",className:"pf-v5-u-mb-lg"},t.formatMessage(x.A.reviewDetails)),[[{...e?.[0]?.[0]}]])};_.propTypes={formFields:i().array};const R=_;var F=a(30445),w=a(25970),L=a(67169),D=a(99843),P=a(42134),B=a(13614),j=a(83484),U=a(79300),G=a(11522),q=a(55308),V=a(86662);const z=e=>{const t=(0,c.tz)(),{input:a}=(0,G.A)(e),n=(0,v.default)(),{"group-name":i,"group-description":o}=n.getState().values,[l,u]=(0,s.useState)(i||""),[m,d]=(0,s.useState)(),[f,p]=(0,s.useState)(o),g=e=>{const t=(0,P.KA)(e);a.onChange(void 0),(0,N.U)(t).then((()=>{a.onChange(t),d(void 0)})).catch((e=>{d(e),a.onChange(void 0)})),u(e)};(0,s.useEffect)((()=>{l?.length>0&&g(l)}),[]);const A=((e,t)=>void 0===e||t||e?.length>150?"error":"default")(l,m),y=(e=>e?.length>150?"error":"default")(f);return r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,{className:"rbac-l-stack__item-summary"},r().createElement(B.FormGroup,{label:t.formatMessage(x.A.groupName),isRequired:!0},r().createElement(q.TextInput,{value:l,type:"text",validated:A,onBlur:()=>""===l&&u(void 0),onChange:(e,t)=>g(t),"aria-label":"Group name"}),"error"===A&&r().createElement(B.FormHelperText,null,r().createElement(j.HelperText,null,r().createElement(j.HelperTextItem,{variant:A},l?m:t.formatMessage(x.A.required)))))),r().createElement(U.StackItem,null,r().createElement(B.FormGroup,{label:t.formatMessage(x.A.groupDescription)},r().createElement(V.TextArea,{value:f,validated:y,onChange:(e,t)=>{p(t),n.change("group-description",t)},"aria-label":"Group description",resizeOrientation:"vertical"}),"error"===y&&r().createElement(B.FormHelperText,null,r().createElement(j.HelperText,{variant:y},r().createElement(j.HelperTextItem,null,t.formatMessage(x.A.maxCharactersWarning,{number:150})))))))};z.propTypes={name:i().string,description:i().string,groups:i().array};const $=z;var W=a(40748),H=a(2644);const J=e=>{const t=(0,c.tz)(),[a,n]=(0,s.useState)([]),{input:i}=(0,G.A)(e),o=(0,v.default)();return(0,s.useEffect)((()=>{n(o.getState().values["roles-list"]||[])}),[]),(0,s.useEffect)((()=>{i.onChange(a),o.change("roles-list",a)}),[a]),r().createElement(s.Fragment,null,r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,null,r().createElement(W.TextContent,null,r().createElement(W.Text,null,t.formatMessage(x.A.selectRolesForGroupText)))),r().createElement(U.StackItem,null,r().createElement(B.FormGroup,{fieldId:"select-role"},r().createElement(H.A,{selectedRoles:a,setSelectedRoles:n,rolesExcluded:!1})))))};J.propTypes={selectedRoles:i().array,setSelectedRoles:i().func,title:i().string,description:i().string};const Y=J;var K=a(63219),X=a(22735),Z=a(52464),Q=a(82258);const ee=e=>{const[t,a]=(0,s.useState)([]),{input:n}=(0,G.A)(e),i=(0,c.tz)(),o=(0,v.default)(),l=(0,K.useFlag)("platform.rbac.itless");(0,s.useEffect)((()=>{a(o.getState().values["users-list"]||[])}),[]),(0,s.useEffect)((()=>{n.onChange(t),o.change("users-list",t)}),[t]);const u={...!l&&{linkDescription:i.formatMessage(x.A.toManageUsersText)}},m={selectedUsers:t,setSelectedUsers:a,displayNarrow:!0};return r().createElement(s.Fragment,null,r().createElement(B.Form,null,r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,null,r().createElement(W.TextContent,null,r().createElement(Q.A,{...u}))),r().createElement(U.StackItem,null,r().createElement(B.FormGroup,{fieldId:"select-user"},l?r().createElement(Z.A,{...m}):r().createElement(X.A,{...m}))))))};ee.propTypes={selectedUsers:i().array,setSelectedUsers:i().func,title:i().string,description:i().string};const te=ee;var ae=a(62448),se=a(58471),re=a(6939);var ne=a(76260),ie=a(20881);const oe=()=>{const e=(0,c.tz)(),t=(0,v.default)(),{isBeta:a}=(0,ie.A)(),{"group-name":s,"group-description":n,"users-list":i,"roles-list":o,"service-accounts-list":l}=t.getState().values,u=a()&&(0,K.useFlag)("platform.rbac.group-service-accounts")||!a()&&(0,K.useFlag)("platform.rbac.group-service-accounts.stable");return r().createElement("div",{className:"rbac"},r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,null,r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,{className:"rbac-l-stack__item-summary"},r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement(W.Text,{component:W.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.A.groupName))),r().createElement(ne.GridItem,{md:9},r().createElement(W.Text,{component:W.TextVariants.p},s))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement(W.Text,{component:W.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.A.groupDescription))),r().createElement(ne.GridItem,{md:9},r().createElement(W.Text,{component:W.TextVariants.p},n))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement(W.Text,{component:W.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.A.roles))),r().createElement(ne.GridItem,{md:9},o.map(((e,t)=>r().createElement(W.Text,{className:"pf-v5-u-mb-0",key:t},e.label))))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement(W.Text,{component:W.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.A.members))),r().createElement(ne.GridItem,{md:9},i.map(((e,t)=>r().createElement(W.Text,{className:"pf-v5-u-mb-0",key:t},e.label))))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement(W.Text,{component:W.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.A.serviceAccounts))),u&&r().createElement(ne.GridItem,{md:9},l?.map(((e,t)=>r().createElement(W.Text,{className:"pf-v5-u-mb-0",key:t},e.name))))))))))};oe.propTypes={name:i().string,description:i().string,groups:i().array};const ce=oe;var le=a(60123),ue=a.n(le);const me=({onClose:e})=>{const t=(0,c.tz)(),{setHideForm:a,setWizardSuccess:n}=(0,s.useContext)(de);return r().createElement(b.EmptyState,{variant:b.EmptyStateVariant.lg},r().createElement(b.EmptyStateHeader,{titleText:r().createElement(r().Fragment,null,t.formatMessage(x.A.groupCreatedSuccessfully)),icon:r().createElement(b.EmptyStateIcon,{className:"pf-v5-u-mt-xl",color:"green",icon:ue()}),headingLevel:"h4"}),r().createElement(b.EmptyStateFooter,null,r().createElement(E.Button,{onClick:e,variant:"primary"},t.formatMessage(x.A.exit)),r().createElement(b.EmptyStateActions,null,r().createElement(E.Button,{onClick:()=>{a(!1),n(!1)},variant:"link"},t.formatMessage(x.A.createAnotherGroup)))))},de=(0,s.createContext)({success:!1,submitting:!1,error:void 0,setHideForm:e=>null,setWizardSuccess:e=>null}),fe=e=>r().createElement(d.Ay,{...e,showFormControls:!1}),pe=({Content:e,...t})=>r().createElement(e,{...t});pe.propTypes={Content:i().elementType.isRequired};const ge={description:pe,"set-name":$,"set-roles":Y,"set-users":te,"set-service-accounts":({name:e})=>{const[t,a]=(0,s.useState)([]),{input:n}=(0,G.A)({name:e}),i=(0,c.tz)(),o=(0,v.default)();return(0,s.useEffect)((()=>{a(o.getState().values["service-accounts-list"]||[])}),[]),(0,s.useEffect)((()=>{n.onChange(t),o.change("service-accounts-list",t)}),[t]),r().createElement(s.Fragment,null,r().createElement(B.Form,null,r().createElement(U.Stack,{hasGutter:!0},r().createElement(U.StackItem,null,r().createElement(W.TextContent,null,i.formatMessage(x.A.addServiceAccountsToGroupDescription),r().createElement(ae.Alert,{className:"pf-v5-u-mt-sm rbac-service-accounts-alert",variant:"info",component:"span",isInline:!0,isPlain:!0,title:i.formatMessage(x.A.visitServiceAccountsPage,{link:r().createElement(se.A,{to:"/service-accounts",linkBasename:"/iam"},i.formatMessage(x.A.serviceAccountsPage))})}))),r().createElement(U.StackItem,null,r().createElement(B.FormGroup,{fieldId:"select-service-accounts"},r().createElement(re.A,{selected:t,setSelected:a}))))))},"summary-content":ce},Ae=(e,t,a)=>s=>{a(s),Object.keys(s).length>0?t(!0):e()},ve=({postMethod:e,pagination:t,filters:a,orderBy:n})=>{const i=(0,o.useDispatch)(),d=(0,c.tz)(),v=(0,s.useRef)(document.createElement("div")),{isBeta:y}=(0,ie.A)(),E=y()&&(0,K.useFlag)("platform.rbac.group-service-accounts")||!y()&&(0,K.useFlag)("platform.rbac.group-service-accounts.stable"),b=(0,s.useRef)(((e,t)=>{const a=(0,c.MT)(),s=(0,c.EY)({locale:w.H,messages:L},a);return{fields:[{component:"wizard",name:"wizard",className:"rbac",isDynamic:!0,inModal:!0,showTitles:!0,title:s.formatMessage(x.A.createGroup),container:e,fields:[{name:"name-and-description",nextStep:"add-roles",title:s.formatMessage(x.A.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:g.A.REQUIRED}]},{component:A.A.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:g.A.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:s.formatMessage(x.A.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:t?"add-service-accounts":"review",title:s.formatMessage(x.A.addMembers),fields:[{component:"set-users",name:"users-list"}]},...t?[{name:"add-service-accounts",nextStep:"review",title:s.formatMessage(x.A.addServiceAccounts),fields:[{component:"set-service-accounts",name:"service-accounts-list"}]}]:[],{name:"review",title:s.formatMessage(x.A.reviewDetails),buttons:e=>r().createElement(F.A,{...e,context:de}),StepTemplate:R,fields:[{component:"summary-content",name:"summary-content"}]}]}]}})(v.current,E)),h=(0,T.A)(),[I,M]=(0,s.useState)({}),[S,O]=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),N=()=>{i((0,u.addNotification)({variant:"warning",title:d.formatMessage(x.A.addingGroupTitle),dismissDelay:8e3,description:d.formatMessage(x.A.addingGroupCanceledDescription)})),h({pathname:C.A.groups.link,search:(0,P.pg)({page:1,per_page:t.limit,...a})})},k=e=>O((t=>({...t,error:e}))),_=e=>O((t=>({...t,canceled:e}))),B=()=>{O((e=>({...e,success:!1,hideForm:!1}))),e({limit:t.limit,offset:0,orderBy:n,filters:{}}),h({pathname:C.A.groups.link,search:(0,P.pg)({page:1,per_page:t.limit})})};return r().createElement(de.Provider,{value:{...S,setWizardError:k,setWizardSuccess:e=>O((t=>({...t,success:e}))),setHideForm:e=>O((t=>({...t,hideForm:e})))}},r().createElement(p.A,{title:d.formatMessage(x.A.exitItemCreation,{item:d.formatMessage(x.A.group).toLocaleLowerCase()}),isOpen:S.canceled,onClose:()=>{v.current.hidden=!1,_(!1)},confirmButtonLabel:d.formatMessage(x.A.discard),onConfirm:N},d.formatMessage(x.A.discardedInputsWarning)),S.hideForm?S.success?r().createElement(l.s,{isOpen:!0,title:d.formatMessage(x.A.createGroup),onClose:B,steps:[{name:"success",component:r().createElement(me,{onClose:B}),isFinishedStep:!0}]}):null:r().createElement(m.A,{schema:b.current,container:v,subscription:{values:!0},FormTemplate:fe,componentMapper:{...f.Ay,...ge},onSubmit:e=>{const t=e["service-accounts-list"]?.length>0;O((e=>({...e,submitting:!0,submittingGroup:!0,submittingServiceAccounts:t})));const a={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((e=>({username:e.label}))),roles_list:e["roles-list"].map((e=>e.uuid))};i((0,D.$)(a)).then((({value:a})=>{O((e=>({...e,submittingGroup:!1,success:!t,hideForm:!t,submitting:t}))),t&&i((0,D.Px)(a.uuid,e["service-accounts-list"])).then((()=>{O((e=>({...e,submitting:!1,submittingServiceAccounts:!1,success:!0,hideForm:!0})))})).catch((()=>k(!0)))}))},initialValues:I,onCancel:Ae(N,(()=>{v.current.hidden=!0,_(!0)}),M)}))};ve.propTypes={postMethod:i().func,pagination:i().shape({limit:i().number.isRequired}).isRequired,filters:i().object.isRequired,orderBy:i().string};const ye=ve},2644:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var s=a(93345),r=a.n(s),n=a(5556),i=a.n(n),o=a(8604),c=a(69733),l=a(73317),u=a(20881),m=a(61361),d=a(42134),f=a(38694),p=a(8582),g=a(99843),A=a(40335);const v=({selectedRoles:e,setSelectedRoles:t,rolesExcluded:a,groupId:n})=>{const i=(0,o.tz)(),v=(0,u.A)(),y=(0,c.useDispatch)(),E=(0,s.useRef)(null),{roles:b,pagination:h,isLoading:I,groupId:M,filters:S}=(0,c.useSelector)(a?({groupReducer:{selectedGroup:{addRoles:{roles:e,pagination:t,loaded:a},uuid:s}}})=>({roles:e,pagination:t||{...m.qp,count:e?.length},isLoading:!a,groupId:n||s}):({roleReducer:{roles:e,isLoading:t}})=>({roles:e.data,pagination:e.meta,isLoading:t,filters:e.filters}),c.shallowEqual),{current:O}=(0,s.useRef)([{title:i.formatMessage(A.A.name),key:"display_name",...a?{orderBy:"name"}:{transforms:[l.X]}},{title:i.formatMessage(A.A.description)}]),[N,T]=(0,s.useState)(""),[k,C]=(0,s.useState)({index:1,direction:"asc"}),x=(0,s.useCallback)(((e,t)=>y(a?(0,g.bf)(e,t):(0,p.ip)((0,d.YP)({...t,chrome:v})))),[a]),_=`${"desc"===k?.direction?"-":""}${O[k?.index].key}`,R=((e,t=[])=>e?e.reduce(((e,{uuid:a,display_name:s,name:r,description:n})=>[...e,{uuid:a,cells:[s||r,n],selected:Boolean(t&&t.find((e=>e.uuid===a)))}]),[]):[])(b,e);return(0,s.useEffect)((()=>{x(M,{...h,orderBy:_})}),[]),r().createElement(f.Z,{isSelectable:!0,isCompact:!0,borders:!1,columns:O,rows:R,sortBy:k,onSort:(e,t,a,s)=>{const r=`${"desc"===a?"-":""}${O[s?t-1:t].key}`;C({index:t,direction:a}),((e,t)=>{const{name:a,count:s,limit:r,offset:n,orderBy:i}=t;x(e,(0,d.YP)({count:s,limit:r,offset:n,orderBy:i,filters:{display_name:a}}))})(M,{...h,offset:0,orderBy:r,...S?.length>0?{...S.reduce(((e,t)=>({...e,[t.key]:t.value})),{})}:{name:N}})},data:b,filterValue:N,filterPlaceholder:i.formatMessage(A.A.roleName).toLowerCase(),fetchData:e=>x(M,{...e,filters:{display_name:e.name}}),setFilterValue:({name:e})=>T(e),isLoading:I,ouiaId:"roles-table",pagination:h,checkedRows:e,setCheckedItems:e=>{t((t=>e(t).map((({uuid:e,name:t,label:a})=>({uuid:e,label:a||t})))))},titlePlural:i.formatMessage(A.A.roles).toLowerCase(),titleSingular:i.formatMessage(A.A.role),tableId:"roles-list",textFilterRef:E})};v.propTypes={canSort:i().bool,setSelectedRoles:i().func.isRequired,selectedRoles:i().array,rolesExcluded:i().bool.isRequired,groupId:i().string},v.defaultProps={roles:[],pagination:m.qp,canSort:!0};const y=v},6939:(e,t,a)=>{"use strict";a.d(t,{q:()=>g,A:()=>A});var s=a(93345),r=a.n(s),n=a(94253),i=a(8604),o=a(42134),c=a(20881),l=a(63767),u=a(69733),m=a(38694),d=a(71966),f=a(40335);const p=({serviceAccountReducer:e})=>({serviceAccounts:e.serviceAccounts,status:e.status,isLoading:e.isLoading,limit:e.limit,offset:e.offset}),g=({selected:e,setSelected:t,groupId:a})=>{const{auth:g,getEnvironmentDetails:A}=(0,c.A)(),{serviceAccounts:v,status:y,limit:E,offset:b,isLoading:h}=(0,u.useSelector)(p),I=(0,u.useDispatch)(),M=(0,i.tz)(),S=(0,s.useCallback)((async e=>{const t=A(),s=await g.getToken();var r;I((r={limit:e?.limit??E,offset:e?.offset??b,token:s,sso:t?.sso,groupId:a},{type:d.M1,payload:n.mx(r),meta:r}))}),[E,b]);(0,s.useEffect)((()=>{S({limit:E,offset:0})}),[]);const O=[{title:M.formatMessage(f.A.name),orderBy:"name"},{title:M.formatMessage(f.A.description),orderBy:"description"},{title:M.formatMessage(f.A.clientId),orderBy:"clientId"},{title:M.formatMessage(f.A.owner),orderBy:"owner"},{title:M.formatMessage(f.A.timeCreated),orderBy:"timeCreated"}];return r().createElement(m.Z,{className:"rbac-service-accounts-list",columns:O,isSelectable:!0,rows:(N=v,T=e,N?.reduce(((e,t)=>[...e,{uuid:t.uuid,title:t.name,cells:[t.name,t.description,t.clientId,t.createdBy,r().createElement(s.Fragment,{key:`${t.name}-modified`},r().createElement(l.A,{date:t.createdAt,type:(0,o.eW)(t.createdAt)}))],selected:Boolean(T&&T.find((e=>e.uuid===t.uuid)))||t.assignedToSelectedGroup,disableSelection:t.assignedToSelectedGroup}]),[])),data:v,fetchData:S,isLoading:h,pagination:{limit:E,offset:b,...y===n.jt?{count:b+v.length}:{}},paginationProps:{toggleTemplate:({firstIndex:e,lastIndex:t})=>r().createElement(r().Fragment,null,r().createElement("b",null,e," - ",t)," ","of ",r().createElement("b",null,y===n.jt?b+v.length:"many")),isCompact:!0},checkedRows:e,setCheckedItems:t,titlePlural:M.formatMessage(f.A.serviceAccounts).toLowerCase(),titleSingular:M.formatMessage(f.A.serviceAccount),emptyProps:{title:M.formatMessage(f.A.noServiceAccountsFound),description:[M.formatMessage(f.A.contactServiceTeamForAccounts),""]},tableId:"group-add-accounts",ouiaId:"group-add-accounts"});var N,T},A=g},52464:(e,t,a)=>{"use strict";a.d(t,{A:()=>z});var s=a(93345),r=a.n(s),n=a(69733),i=a(92516),o=a.n(i),c=a(8604),l=a(5556),u=a.n(l),m=a(49634),d=a(38694),f=a(58471),p=a(44097),g=a(79994),A=a(32690),v=a(42932),y=a(20380),E=a(36966),b=a(25396),h=a(79300),I=a(99780),M=a(81855),S=a(5715),O=a(66181),N=a(73317),T=a(17115),k=a.n(T),C=a(58731),x=a.n(C),_=a(42134),R=a(54774),F=a(61361),w=a(49420),L=a(40335),D=a(40262),P=a(64367),B=a(36984),j=a(49573),U=a(20881);const G=({isOrgAdmin:e})=>{const t=(0,c.tz)();return e?r().createElement(s.Fragment,null,r().createElement(k(),{key:"yes-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"yes"},t.formatMessage(L.A.yes))):r().createElement(s.Fragment,null,r().createElement(x(),{key:"no-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"no"},t.formatMessage(L.A.no)))};G.propTypes={isOrgAdmin:u().bool};const q=({isOrgAdmin:e,userId:t,isDisabled:a,toggleUserIsOrgAdminStatus:n})=>{const[i,o]=(0,s.useState)(!1),l=(0,c.tz)(),u=[r().createElement(I.t,{key:`is-admin-dropdown-item-${t}`,componentID:"yes"},l.formatMessage(L.A.yes)),r().createElement(I.t,{key:`is-not-admin-dropdown-item-${t}`,componentID:"no"},l.formatMessage(L.A.no))];return r().createElement(M.m,{id:`is-admin-dropdown-${t}`,key:`is-admin-dropdown-${t}`,onSelect:e=>{n({yes:!0,no:!1}[e?.target?.id],null,{userId:t}),o(!1)},toggle:r().createElement(S.C,{id:`is-admin-dropdown-toggle-${t}`,key:`is-admin-dropdown-toggle-${t}`,isDisabled:a,onToggle:e=>{o(e)}},e?l.formatMessage(L.A.yes):l.formatMessage(L.A.no)),isOpen:i,dropdownItems:u})};q.propTypes={isOrgAdmin:u().bool,userId:u().string,isDisabled:u().bool,toggleUserIsOrgAdminStatus:u().func};const V=({selectedUsers:e,setSelectedUsers:t,userLinks:a,usesMetaInURL:i,displayNarrow:l,props:u})=>{const T=(0,c.tz)(),k=(0,m.useNavigate)(),C=(0,m.useLocation)(),x=(0,n.useDispatch)(),[V,z]=(0,s.useState)([]),[$,W]=(0,s.useState)(!1),[H,J]=(0,s.useState)(!1),[Y,K]=(0,s.useState)(!1),{orgAdmin:X}=(0,s.useContext)(D.A),Z=(0,P.A)(),Q=(0,s.useRef)(null),ee=X,te=(0,U.A)(),[ae,se]=(0,s.useState)({}),[re,ne]=(0,s.useState)("");let ie=(0,n.useSelector)((({userReducer:{users:e}})=>({limit:(i?e.pagination.limit:e.meta.limit)??(X?F.Ar:F.L6).limit,offset:(i?e.pagination.offset:e.meta.offset)??(X?F.Ar:F.L6).offset,count:i?e.pagination.count:e.meta.count,redirected:i&&e.pagination.redirected})));const{users:oe,isLoading:ce,stateFilters:le}=(0,n.useSelector)((({userReducer:{users:{data:e,filters:t={}},isUserDataLoading:a}})=>({users:e?.map?.((e=>({...e,uuid:e.external_source_id}))),isLoading:a,stateFilters:C.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}}))),ue=(0,s.useCallback)((e=>x((0,p.hU)(e))),[x]),me=(e,a,s={})=>{const{limit:r,offset:n}=(0,F.sJ)(C,k,ie),o=i?(0,w.D_)(C,k,["username","email","status"],ye):{status:ye.status},c={id:s.userId,is_org_admin:e};x((0,p.An)(c)).then((()=>{Ee(o),t?t([]):z([]),ue({...(0,_.YP)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))},de=(e,a,s=[])=>{const{limit:r,offset:n}=(0,F.sJ)(C,k,ie),o=i?(0,w.D_)(C,k,["username","email","status"],ye):{status:ye.status},c=s.map((t=>({id:t?.uuid||t?.external_source_id,is_active:e})));x((0,p.CK)(c)).then((()=>{Ee(o),t?t([]):z([]),ue({...(0,_.YP)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))};(0,s.useEffect)((()=>{te.auth.getUser().then((e=>se(e))),te.auth.getToken().then((e=>ne(e)))}),[]);const fe=e=>e!=ae?.identity?.internal?.account_id,pe=(0,s.useCallback)((e=>x((0,p.$q)(e))),[x]),ge=[{title:T.formatMessage(l?L.A.orgAdmin:L.A.orgAdministrator),key:"org-admin",transforms:[O.Ot]},{title:T.formatMessage(L.A.username),key:"username",transforms:[N.X]},{title:T.formatMessage(L.A.email)},{title:T.formatMessage(L.A.firstName),transforms:[O.Ot]},{title:T.formatMessage(L.A.lastName),transforms:[O.Ot]},{title:T.formatMessage(L.A.status),transforms:[O.Ot]}],[Ae,ve]=(0,s.useState)({index:1,direction:"asc"}),[ye,Ee]=(0,s.useState)(i?le:{username:"",email:"",status:[T.formatMessage(L.A.active)]});return(0,s.useEffect)((()=>{i&&(0,F.NJ)(C,k,ie.limit,ie.offset)}),[ie.offset,ie.limit,ie.count,ie.redirected]),(0,s.useEffect)((()=>{const{limit:e,offset:t}=i?(0,F.sJ)(C,k,ie):ie,a=i?(0,w.D_)(C,k,["username","email","status"],ye):{status:ye.status};Ee(a),ue({...(0,_.YP)({limit:e,offset:t,filters:a}),usesMetaInURL:i})}),[]),(0,s.useEffect)((()=>{i&&((0,F.Wq)(C)||(0,F.NJ)(C,k,ie.limit,ie.offset),Object.values(ye).some((e=>e?.length>0))&&!(0,w.JI)(C,Object.keys(ye))&&(0,w.D_)(C,k,Object.keys(ye),ye))})),r().createElement(r().Fragment,null,r().createElement(y.Modal,{title:T.formatMessage(L.A.deactivateUsersConfirmationModalTitle),titleIconVariant:"warning",description:T.formatMessage(L.A.deactivateUsersConfirmationModalDescription),variant:y.ModalVariant.medium,isOpen:$,footer:r().createElement(h.Stack,{hasGutter:!0},r().createElement(h.StackItem,null,r().createElement(b.Checkbox,{label:T.formatMessage(L.A.deactivateUsersConfirmationModalCheckboxText),isChecked:H,onChange:e=>{J(e)},id:"deactivateUsersConfirmationCheckbox",name:"deactivate-users-confirmation-checkbox"})),r().createElement(h.StackItem,null,r().createElement(g.Button,{key:"confirm-deactivate-users",ouiaId:"danger-confirm-deactivate-users-button",isDisabled:0===V.length||!H,variant:"danger",onClick:()=>{de(!1,0,V),W(!1),J(!1)}},T.formatMessage(L.A.deactivateUsersConfirmationButton)),r().createElement(g.Button,{id:"deactivate-users-confirmation-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:()=>{W(!1)}},T.formatMessage(L.A.cancel)))),onClose:()=>{W(!1)}},r().createElement(E.List,{isPlain:!0,isBordered:!0},V.map((e=>r().createElement(E.ListItem,{key:e.uuid},e.label))))),r().createElement(d.Z,{toolbarChildren:ee&&!l?()=>{const e=[r().createElement(I.t,{key:"activate-users-dropdown-item",componentID:"activate"},T.formatMessage(L.A.activateUsersButton)),r().createElement(I.t,{key:"deactivate-users-dropdown-item",componentID:"deactivate"},T.formatMessage(L.A.deactivateUsersButton))];return r().createElement(M.m,{onSelect:async e=>{"deactivate"===e?.target?.id?W(!0):de({activate:!0,deactivate:!1}[e?.target?.id],0,V),K(!1)},toggle:r().createElement(S.C,{id:"toolbar-dropdown-toggle",isDisabled:0===V.length,onToggle:e=>{K(e)}},T.formatMessage(L.A.activateUsersButton)),isOpen:Y,dropdownItems:e})}:()=>null,toolbarButtons:!ee||l||(0,_.l2)(re)?()=>[]:()=>[r().createElement(f.A,{to:j.A["invite-users"].link,key:"invite-users",className:"rbac-m-hide-on-sm"},r().createElement(g.Button,{ouiaId:"invite-users-button",variant:"primary","aria-label":"Invite users"},T.formatMessage(L.A.inviteUsers))),...(0,B.A)(Z)?[{label:T.formatMessage(L.A.inviteUsers),onClick:()=>{k((0,f.o)(j.A["invite-users"].link))}}]:[]],isCompact:!0,isSelectable:!0,borders:!1,columns:ge,rows:((e,t,a=[])=>t?t.reduce(((t,{external_source_id:s,username:n,is_active:i,email:c,first_name:u,last_name:m,is_org_admin:d})=>[...t,{uuid:s,cells:[{title:ee&&!l?r().createElement(q,{isOrgAdmin:d,userId:s,isDisabled:!ee||ae?.identity?.internal?.account_id==s,toggleUserIsOrgAdminStatus:me}):r().createElement(G,{isOrgAdmin:d}),props:{"data-is-active":d}},{title:e?r().createElement(f.A,{to:j.A["user-detail"].link.replace(":username",n)},n.toString()):l?r().createElement("span",{title:n},o()(n,{length:25})):n},{title:l?r().createElement("span",{title:c},o()(c,{length:25})):c},u,m,{title:ee&&!l?r().createElement(A.Switch,{key:"status",isDisabled:!ee||ae?.identity?.internal?.account_id==s,label:T.formatMessage(L.A.active),labelOff:T.formatMessage(L.A.inactive),isChecked:i,onChange:(e,t)=>{de(e,0,[{external_source_id:s,is_active:i}])}}):r().createElement(v.Label,{key:"status",color:i?"green":"grey"},T.formatMessage(i?L.A.active:L.A.inactive)),props:{"data-is-active":i}}],selected:Boolean(a?.find?.((({uuid:e})=>e===s))),disableSelection:l?void 0:!fe(s)}]),[]):[])(a,oe,e||V),sortBy:Ae,onSort:(e,t,a)=>{const s=`${"desc"===a?"-":""}${ge[t-1].key}`;ve({index:t,direction:a}),ue({...ie,filters:ye,usesMetaInURL:i,orderBy:s})},data:oe,ouiaId:"users-table",fetchData:e=>{const t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:ye.status,{username:a,email:s,count:r,limit:n,offset:o,orderBy:c}=e;ue({...(0,_.YP)({count:r,limit:n,offset:o,orderBy:c,filters:{username:a,email:s,status:t}}),usesMetaInURL:i}).then((()=>{Q?.current?.focus()})),i&&(0,w.G)(C,k,{username:a,email:s,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:({username:e,email:t,status:a})=>{var s;s={username:void 0===e?ye.username:e,email:void 0===t?ye.email:t,status:void 0===a||a===ye.status?ye.status:a},i&&pe(s),Ee({username:"",...s})},isLoading:ce,pagination:ie,checkedRows:e||V,setCheckedItems:e=>{t?t((t=>e(t).filter((e=>l?e:e?.uuid!=ae?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e}))))):z((t=>e(t).filter((e=>l?e:e?.uuid!=ae?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e})))))},rowWrapper:R.A,titlePlural:T.formatMessage(L.A.users).toLowerCase(),titleSingular:T.formatMessage(L.A.user),filters:[{key:"username",value:ye.username,placeholder:T.formatMessage(L.A.filterByKey,{key:T.formatMessage(L.A.username).toLowerCase()}),innerRef:Q},{key:"email",value:ye.email,placeholder:T.formatMessage(L.A.filterByKey,{key:T.formatMessage(L.A.email).toLowerCase()}),innerRef:Q},{key:"status",value:ye.status,label:T.formatMessage(L.A.status),type:"checkbox",items:[{label:T.formatMessage(L.A.active),value:"Active"},{label:T.formatMessage(L.A.inactive),value:"Inactive"}]}],tableId:"users-list",...u}),r().createElement(s.Suspense,null,r().createElement(m.Outlet,{context:{[j.A["invite-users"].path]:{fetchData:()=>ue({...ie,filters:ye,usesMetaInURL:i})}}})))};V.propTypes={displayNarrow:u().bool,users:u().array,searchFilter:u().string,setSelectedUsers:u().func,selectedUsers:u().array,userLinks:u().bool,props:u().object,usesMetaInURL:u().bool},V.defaultProps={displayNarrow:!1,users:[],userLinks:!1,usesMetaInURL:!1};const z=V},22735:(e,t,a)=>{"use strict";a.d(t,{A:()=>I});var s=a(93345),r=a.n(s),n=a(69733),i=a(5556),o=a.n(i),c=a(49634),l=a(8604),u=a(66181),m=a(73317),d=a(42134),f=a(44097),p=a(38694),g=a(54774),A=a(40262),v=a(61361),y=a(49420),E=a(40335),b=a(22272);const h=({selectedUsers:e,setSelectedUsers:t,userLinks:a,usesMetaInURL:i,displayNarrow:o,props:h})=>{const I=(0,l.tz)(),M=(0,c.useNavigate)(),S=(0,c.useLocation)(),O=(0,n.useDispatch)(),{orgAdmin:N}=(0,s.useContext)(A.A),T=(0,s.useRef)(null);let k=(0,n.useSelector)((({userReducer:{users:e}})=>({limit:(i?e.pagination.limit:e.meta.limit)??(N?v.Ar:v.L6).limit,offset:(i?e.pagination.offset:e.meta.offset)??(N?v.Ar:v.L6).offset,count:i?e.pagination.count:e.meta.count,redirected:i&&e.pagination.redirected})));const{users:C,isLoading:x,stateFilters:_}=(0,n.useSelector)((({userReducer:{users:{data:e,filters:t={}},isUserDataLoading:a}})=>({users:e?.map?.((e=>({...e,uuid:e.username}))),isLoading:a,stateFilters:S.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}}))),R=(0,s.useCallback)((e=>O((0,f.hU)(e))),[O]),F=(0,s.useCallback)((e=>O((0,f.$q)(e))),[O]),w=[{title:I.formatMessage(o?E.A.orgAdmin:E.A.orgAdministrator),key:"org-admin",transforms:[u.Ot]},{title:I.formatMessage(E.A.username),key:"username",transforms:[m.X]},{title:I.formatMessage(E.A.email)},{title:I.formatMessage(E.A.firstName),transforms:[u.Ot]},{title:I.formatMessage(E.A.lastName),transforms:[u.Ot]},{title:I.formatMessage(E.A.status),transforms:[u.Ot]}],[L,D]=(0,s.useState)({index:1,direction:"asc"}),[P,B]=(0,s.useState)(i?_:{username:"",email:"",status:[I.formatMessage(E.A.active)]});return(0,s.useEffect)((()=>{i&&(0,v.NJ)(S,M,k.limit,k.offset)}),[k.offset,k.limit,k.count,k.redirected]),(0,s.useEffect)((()=>{const{limit:e,offset:t}=(0,v.sJ)(S,M,k),a=i?(0,y.D_)(S,M,["username","email","status"],P):{status:P.status};B(a),R({...(0,d.YP)({limit:e,offset:t,filters:a}),usesMetaInURL:i})}),[]),(0,s.useEffect)((()=>{i&&((0,v.Wq)(S)||(0,v.NJ)(S,M,k.limit,k.offset),Object.values(P).some((e=>e?.length>0))&&!(0,y.JI)(S,Object.keys(P))&&(0,y.D_)(S,M,Object.keys(P),P))})),r().createElement(p.Z,{isCompact:!0,isSelectable:!0,borders:!1,columns:w,rows:(0,b.O)(a,C,I,e,!0),sortBy:L,onSort:(e,t,a)=>{const s=`${"desc"===a?"-":""}${w[t-1].key}`;D({index:t,direction:a}),R({...k,filters:P,usesMetaInURL:i,orderBy:s})},data:C,ouiaId:"users-table",fetchData:e=>{const t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:P.status,{username:a,email:s,count:r,limit:n,offset:o,orderBy:c}=e;R({...(0,d.YP)({count:r,limit:n,offset:o,orderBy:c,filters:{username:a,email:s,status:t}}),usesMetaInURL:i}).then((()=>{T?.current?.focus()})),i&&(0,y.G)(S,M,{username:a,email:s,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:({username:e,email:t,status:a})=>{var s;s={username:void 0===e?P.username:e,email:void 0===t?P.email:t,status:void 0===a||a===P.status?P.status:a},i&&F(s),B({username:"",...s})},isLoading:x,pagination:k,checkedRows:e,setCheckedItems:e=>{t((t=>e(t).map((({uuid:e,username:t})=>({uuid:e,label:t||e})))))},rowWrapper:g.A,titlePlural:I.formatMessage(E.A.users).toLowerCase(),titleSingular:I.formatMessage(E.A.user),filters:[{key:"username",value:P.username,placeholder:I.formatMessage(E.A.filterByKey,{key:I.formatMessage(E.A.username).toLowerCase()}),innerRef:T},{key:"email",value:P.email,placeholder:I.formatMessage(E.A.filterByKey,{key:I.formatMessage(E.A.email).toLowerCase()}),innerRef:T},{key:"status",value:P.status,label:I.formatMessage(E.A.status),type:"checkbox",items:[{label:I.formatMessage(E.A.active),value:"Active"},{label:I.formatMessage(E.A.inactive),value:"Inactive"}]}],tableId:"users-list",...h})};h.propTypes={displayNarrow:o().bool,users:o().array,searchFilter:o().string,setSelectedUsers:o().func.isRequired,selectedUsers:o().array,userLinks:o().bool,props:o().object,usesMetaInURL:o().bool},h.defaultProps={displayNarrow:!1,users:[],selectedUsers:[],setSelectedUsers:()=>{},userLinks:!1,usesMetaInURL:!1};const I=h},13193:(e,t,a)=>{"use strict";a.d(t,{U:()=>u,x:()=>l});var s=a(12927),r=a(73356),n=a(25970),i=a(8604),o=a(40335),c=a(67169);const l=async(e,t,a)=>{const r=(0,i.MT)(),l=(0,i.EY)({locale:n.H,messages:c},r);if(!e)return;if(e.length>150)throw l.formatMessage(o.A.maxCharactersWarning,{number:150});const u=await(0,s.pl)({limit:10,offset:0,filters:{name:e},nameMatch:"exact"}).catch((e=>{console.error(e)}));if(a?u?.data?.some((e=>e[t]!==a)):u?.data?.length>0)throw l.formatMessage(o.A.nameAlreadyTaken)},u=(0,r.A)(((e,t,a)=>l(e,t,a)))},22272:(e,t,a)=>{"use strict";a.d(t,{O:()=>f});var s=a(93345),r=a.n(s),n=a(42932),i=a(17115),o=a.n(i),c=a(58731),l=a.n(c),u=a(40335),m=a(49573),d=a(58471);const f=(e,t=[],a,i=[],c=!1)=>t?.reduce(((t,{username:f,is_active:p,email:g,first_name:A,last_name:v,is_org_admin:y})=>[...t,{uuid:f,cells:[y?r().createElement(s.Fragment,null,r().createElement(o(),{key:"yes-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"yes"},a.formatMessage(u.A.yes))):r().createElement(s.Fragment,null,r().createElement(l(),{key:"no-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"no"},a.formatMessage(u.A.no))),{title:e?r().createElement(d.A,{to:m.A["user-detail"].link.replace(":username",f)},f.toString()):f.toString()},g,A,v,{title:r().createElement(n.Label,{key:"status",color:p?"green":"grey"},a.formatMessage(p?u.A.active:u.A.inactive)),props:{"data-is-active":p}}],selected:!!c&&Boolean(i?.find?.((({uuid:e})=>e===f)))}]),[])},73356:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(10476);const r=(e,t=250,a={onlyResolvesLast:!1})=>(0,s.A)(e,t,a)},25823:()=>{},16369:()=>{},62275:()=>{},89205:()=>{},20681:()=>{},95067:()=>{},86893:()=>{},26078:()=>{},50545:()=>{},21289:()=>{},36752:()=>{},83696:()=>{}}]);