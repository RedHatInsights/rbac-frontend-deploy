(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[822],{39822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(4942),s=n(29439),a=n(92950),c=n.n(a),i=n(58788),l=n(39173),o=n(45697),u=n.n(o),m=function(e){var t=e.isOrgAdmin,n=e.isUserAccessAdmin,r=t?"Org. Administrator":"User Access Admin",s=t?c().createElement("span",null," You can manage other users' permissions with 'User access' "):c().createElement("span",null,"You were granted the User Access Administrator role by your Org. administrator and can now manage other User's permissions with 'User Access'");return t||n?c().createElement(i.Tooltip,{position:i.TooltipPosition.right,content:s},c().createElement(i.Label,{color:"purple"}," ",r," ")):c().createElement(c().Fragment,null)};m.propTypes={isOrgAdmin:u().bool,isUserAccessAdmin:u().bool};const p=m;var d=n(26794),b=n(334),f=n(94184),O=n.n(f),h=n(4682),g=[{entitlement:"application_services",title:"Application Services",apps:{"Streams for Apache Kafka (beta)":"/","API Management (beta)":"/","Data Science (private beta)":"/"}},{entitlement:"openshift",title:"OpenShift",apps:{clusters:"/",subscriptions:"/subscriptions","cost management":"/cost-management"},appsIds:["cost-management","subscriptions"]},{entitlement:"rhel",title:"Red Hat Enterprise Linux",apps:{advisor:"/advisor",compliance:"/compliance",drift:"/drift","image builder":"/image-builder",patch:"/patch",vulnerability:"/vulnerability",policies:"/policies",subscriptions:"/subscriptions"},appsIds:["dashboard","patch","advisor","drift","vulnerability","policies","compliance","inventory","notifications","image-builder","subscriptions"]},{entitlement:"ansible",title:"Ansible Automation Platform",apps:{"automation hub":"/automation-hub","automation services catalog":"/catalog",insights:"/automation-analytics"},appsIds:["catalog","approval","automation-analytics","automation-hub"]}];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=function(){for(var e=(0,b.useLocation)(),t=e.search,n=new URLSearchParams(t),s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.reduce((function(e,t){return v(v({},e),{},(0,r.Z)({},t,n.get(t)))}),{})};var _=function(e){var t=e.header,n=e.entitlements,r=e.isDisabled,a=E("bundle").bundle;return c().createElement(c().Fragment,null,t&&c().createElement(i.Title,{headingLevel:"h3",size:"xl"},t),c().createElement(i.Stack,{className:O()({"pf-u-mt-lg":!t}),hasGutter:!0},n&&(null==g?void 0:g.map((function(e){var t=n.find((function(t){var n=(0,s.Z)(t,1)[0];return e.entitlement===n})),l=e.entitlement;return t?c().createElement(i.StackItem,{key:l,className:"rbac-c-mua-cardWrapper"},c().createElement(b.NavLink,{className:O()("rbac-c-mua-bundles__cardlink",{"rbac-c-mua-bundles__cardlink--disabled":r}),to:{pathname:h.Z["my-user-access"],search:"bundle=".concat(l)}},c().createElement(i.Card,{key:e.title,isFlat:r||l!==a,isSelectable:!r,isSelected:!r&&l===a,className:O()("rbac-c-mua-bundles__card","rbac-c-mua-bundles__card--".concat(e.entitlement),{"rbac-c-mua-bundles__card--disabled":r})},c().createElement(i.CardTitle,{className:"rbac-c-mua-bundles__card--header"}," ",e.title),c().createElement(i.CardBody,null,c().createElement(i.Stack,{hasGutter:!0},c().createElement(i.StackItem,{className:"rbac-c-mua-bundles__card--applist"},Object.entries(e.apps||{}).map((function(e){var t=(0,s.Z)(e,1)[0];return c().createElement("span",{key:t}," ",t," ")})))))))):null})))))};_.propTypes={header:u().string,entitlements:u().array,isDisabled:u().bool};const j=_;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){return a.Fragment};const k=function(){var e=E("bundle").bundle,t=function(e){var t,n=(0,b.useHistory)(),r=n.replace,s=n.location.pathname;return"string"==typeof e&&0!==e.length&&["application_services","openshift","rhel","ansible"].includes(e)?(null===(t=g.find((function(t){return t.entitlement===e})))||void 0===t?void 0:t.appsIds)||[]:(r({to:s,search:"bundle=".concat(e="rhel")}),[])}(e),i=(0,a.useState)({}),l=(0,s.Z)(i,2),o=l[0],u=l[1];(0,a.useEffect)((function(){Object.prototype.hasOwnProperty.call(o,e)||n(19289)("./".concat(e)).then((function(t){return u((function(n){return w(w({},n),{},(0,r.Z)({},e,t.default))}))})).catch(console.log)}),[e]);var m=o[e]||P;return c().createElement(m,{key:e,apps:t})};var S=n(63053),U=function(e){var t,n=e.entitlements,r=e.isOrgAdmin,a=e.isUserAccessAdmin,l=Object.entries(n).filter((function(e){return(0,s.Z)(e,2)[1].is_entitled})),o=Object.entries(n).filter((function(e){return!(0,s.Z)(e,2)[1].is_entitled})),u=E("bundle").bundle,m=r||a;return c().createElement(S.Z.Provider,{value:m},c().createElement(i.Grid,null,c().createElement(i.GridItem,{className:"pf-m-3-col-on-md rbac-l-myUserAccess-section__cards rbac-m-hide-on-sm"},c().createElement(i.Stack,null,c().createElement(i.StackItem,{className:"rbac-l-myUserAccess-section__cards--entitled"},c().createElement(j,{entitlements:l})),o.length>0&&c().createElement(i.StackItem,{className:"rbac-l-myUserAccess-section__cards--unentitled"},c().createElement(j,{header:"Not subscribed",entitlements:o,isDisabled:!0})))),c().createElement(i.GridItem,{className:"pf-m-9-col-on-md rbac-l-myUserAccess-section__table"},"application_services"!==u&&c().createElement(i.Title,{headingLevel:"h3",size:"xl"},"Your ".concat(null===(t=g.find((function(e){return e.entitlement===u})))||void 0===t?void 0:t.title," ").concat(m?"roles":"permissions")),c().createElement(k,null))))};U.propTypes={entitlements:u().object,isOrgAdmin:u().bool,isUserAccessAdmin:u().bool};const D=U;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=function(){var e=(0,a.useState)({}),t=(0,s.Z)(e,2),n=t[0],r=t[1],o=(0,a.useContext)(d.Z);(0,a.useEffect)((function(){insights.chrome.auth.getUser().then((function(e){var t,n=e.identity,s=e.entitlements;return r({entitlements:s,isOrgAdmin:null==n||null===(t=n.user)||void 0===t?void 0:t.is_org_admin})}))}),[]);var u=Z(Z({},n.entitlements),{},{application_services:{is_entitled:!0,is_trial:!1}}),m=(0,a.useState)(!1),b=(0,s.Z)(m,2),f=b[0],O=b[1],h=[c().createElement(i.DropdownItem,{key:"test"},"test")];return c().createElement(c().Fragment,null,Object.prototype.hasOwnProperty.call(n,"entitlements")&&(Object.prototype.hasOwnProperty.call(n,"isOrgAdmin")||o)?c().createElement(c().Fragment,null,c().createElement(l.Z,{className:"rbac-p-myUserAccess--title sticky",title:c().createElement(c().Fragment,null,c().createElement("span",null," My User Access "),c().createElement(p,{isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:o}))}),c().createElement(i.Text,{component:"p",className:"rbac-p-myUserAccess--subtitle"},"Select applications to view your personal permissions."),c().createElement("div",{className:"rbac-p-myUserAccess--dropdown sticky"},c().createElement(i.Dropdown,{ouiaId:"mua-bundle-dropdown",toggle:c().createElement(i.DropdownToggle,{onToggle:function(){return O()},id:"mua-bundle-dropdown"},"Choose a subscription..."),dropdownItems:h,isOpen:f})),c().createElement("section",null,c().createElement(D,{entitlements:u,isOrgAdmin:n.isOrgAdmin,isUserAccessAdmin:o}))):c().createElement(i.Spinner,null))}},63053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(92950).createContext)(!1)},19289:(e,t,n)=>{var r={"./MUABundles":[35337,436,337],"./MUABundles.scss":[35337,436,337],"./__mocks__/rhel":[18348,348],"./__mocks__/rhel.js":[18348,348],"./ansible":[85039,410,252,736,28,180,877,657,250,39],"./ansible.js":[85039,410,252,736,28,180,877,657,250,39],"./application_services":[62997,410,436,997],"./application_services.js":[62997,410,436,997],"./openshift":[57416,410,252,736,28,180,877,657,250,436,416],"./openshift.js":[57416,410,252,736,28,180,877,657,250,436,416],"./rhel":[54250,410,252,736,28,180,877,657,250],"./rhel.js":[54250,410,252,736,28,180,877,657,250]};function s(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],s=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(s)))}s.keys=()=>Object.keys(r),s.id=19289,e.exports=s}}]);
//# sourceMappingURL=../sourcemaps/822.f0df7011a25b9e3fc491f21c020d606a.js.map