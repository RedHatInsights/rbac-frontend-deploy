"use strict";(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[5404,459],{41435:(e,t,o)=>{o.d(t,{Dl:()=>s,dw:()=>n,e4:()=>r,ir:()=>a});var a,n,l=o(28416);!function(e){e.right="right",e.left="left"}(a||(a={})),function(e){e.up="up",e.down="down"}(n||(n={}));const s=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),r=l.createContext({keyHandler:null,sendRef:null})},7876:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(85893),n=o(94184),l=o.n(n),s=function(){return s=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};const r=function(e){var t,o=e.type,n=e.children,r=e.className,i=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["type","children","className"]),u=l()(r,((t={})["ins-l-".concat(o)]=void 0!==o,t));return(0,a.jsxs)("section",s({},i,{className:u,children:[" ",n," "]}))}},84414:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(62012),n=o(64756);const l=e=>{const t=(0,a.useNavigate)();return(o,a)=>t((0,n.n)(o,e),a)}},34391:(e,t,o)=>{o.d(t,{Z:()=>C});var a=o(28416),n=o.n(a),l=o(25387),s=o(45697),r=o.n(s),i=o(2550),u=o(70214),c=o.n(u),d=o(31055),m=o(94269),p=o(94229),g=o(57043),f=o(23539),b=o(64380);const h=({title:e,text:t,onClose:o,onSubmit:s,isOpen:r,confirmButtonLabel:u,withCheckbox:h})=>{const C=(0,l.YB)(),[Z,y]=(0,a.useState)(!1);return n().createElement(p.Modal,{className:"rbac",title:n().createElement("div",null,n().createElement(c(),{className:"ins-m-alert rbac-c__delete-icon"})," ",e),isOpen:r,variant:p.ModalVariant.small,onClose:o,actions:[n().createElement(d.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:h&&!Z,variant:"danger",onClick:s},u),n().createElement(d.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:o},C.formatMessage(i.Z.cancel))]},n().createElement(g.Split,{hasGutter:!0},n().createElement(g.SplitItem,{isFilled:!0},n().createElement(f.Stack,{hasGutter:!0},n().createElement(b.TextContent,null,t)))),h?n().createElement(m.Checkbox,{isChecked:Z,onChange:()=>y(!Z),label:C.formatMessage(i.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-v5-u-mt-lg"}):null)};h.propTypes={text:r().any,title:r().string,confirmButtonLabel:r().string,onSubmit:r().func,onClose:r().func,isOpen:r().bool,withCheckbox:r().bool},h.defaultProps={withCheckbox:!1};const C=h},5839:(e,t,o)=>{o.d(t,{Z:()=>m});var a=o(28416),n=o.n(a),l=o(45697),s=o.n(l),r=o(64380),i=o(34391),u=o(25387),c=o(2550);const d=({isOpen:e,onClose:t,onSubmit:o})=>{const a=(0,u.YB)();return n().createElement(i.Z,{text:n().createElement(r.TextContent,null,n().createElement(r.Text,null,n().createElement(u._H,{...c.Z.defaultAccessGroupEditWarning,values:{b:e=>n().createElement("b",null,e)}}))),title:a.formatMessage(c.Z.warning),withCheckbox:!0,isOpen:e,confirmButtonLabel:a.formatMessage(c.Z.continue),onClose:t,onSubmit:o})};d.propTypes={onSubmit:s().func,onClose:s().func,isOpen:s().bool};const m=d},91670:(e,t,o)=>{o.r(t),o.d(t,{default:()=>T});var a=o(28416),n=o.n(a),l=o(86706),s=o(25387),r=o(45697),i=o.n(r),u=o(62012),c=o(31055),d=o(50247),m=o(55140),p=o(7876),g=o(62410),f=o(74982),b=o(97246),h=o(77044),C=o(5839),Z=o(34391);const y=({title:e,text:t,onClose:o,onSubmit:l,isOpen:s,confirmButtonLabel:r,isDefault:i,isChanged:u})=>{const[c,d]=(0,a.useState)(!1);return i&&!u&&c?n().createElement(C.Z,{isOpen:c&&s,onClose:()=>{o(),d(!1)},onSubmit:()=>{l()}}):n().createElement(Z.Z,{text:t,title:e,isOpen:s,confirmButtonLabel:r,onClose:()=>{o()},onSubmit:()=>{d(!0),(!i||u)&&l()}})};y.propTypes={text:i().node,title:i().node,confirmButtonLabel:i().string,onSubmit:i().func,onClose:i().func,isOpen:i().bool,isDefault:i().bool,isChanged:i().bool},y.defaultProps={isDefault:!1,isChanged:!1};const v=y;var k=o(29301),E=o(86601),R=o(64756),M=o(84414),S=o(75614),x=o(2550),O=o(14289);const B=(e,t,o=[])=>t?.reduce(((t,{uuid:l,display_name:s,name:r,description:i,modified:u})=>[...t,{uuid:l,title:s||r,cells:[n().createElement(a.Fragment,{key:`${l}-name`},n().createElement(R.Z,{to:O.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",l)},s||r)),i,n().createElement(a.Fragment,{key:`${l}-modified`},n().createElement(g.Z,{date:u,type:(0,k.mh)(u)}))],selected:Boolean(o&&o.find((e=>e.uuid===l)))}]),[])||[],D=e=>e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button",I=(e,t,o)=>{const a=(0,s.YB)(),l=n().createElement(c.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},a.formatMessage(x.Z.addRole));return e?n().createElement(d.Tooltip,{content:o||a.formatMessage(x.Z.allRolesAdded)},l):l},w=({groupReducer:{selectedGroup:e,systemGroup:t,groups:o}})=>({roles:e.roles?.data||[],pagination:e.pagination||{...f.he,count:e?.roles&&e.roles.length},groupsPagination:o.pagination||o.meta,groupsFilters:o.filters,isLoading:e.roles?.isLoading,isPlatformDefault:e.platform_default,isAdminDefault:e.admin_default,isChanged:!e.system,disableAddRoles:Object.keys(e.addRoles.pagination||{}).length>0?!(e.addRoles.pagination&&e.addRoles.pagination.count>0&&!e.admin_default):!!e.admin_default,systemGroupUuid:t?.uuid,group:e}),L=({onDefaultGroupChanged:e})=>{const t=(0,s.YB)(),o=(0,m.Z)(),r=(0,l.useDispatch)(),i=(0,M.Z)(),{groupId:c}=(0,u.useParams)(),[d,g]=(0,a.useState)(""),[f,C]=(0,a.useState)(""),[Z,y]=(0,a.useState)([]),[L,T]=(0,a.useState)([]),[P,G]=(0,a.useState)(!1),[A,N]=(0,a.useState)((()=>null)),[_,F]=(0,a.useState)({}),{userAccessAdministrator:j,orgAdmin:U}=(0,a.useContext)(E.Z),V=(0,a.useRef)(U||j),{roles:W,pagination:Y,groupsPagination:H,groupsFilters:Q,isLoading:$,group:q,isPlatformDefault:z,isAdminDefault:X,isChanged:J,disableAddRoles:K,systemGroupUuid:ee}=(0,l.useSelector)(w),te=(e,t)=>(e.payload.then(t),e),oe=e=>r((0,h.nr)(e,{},{})),ae=e=>r((0,h.yi)(e??c)),ne=()=>r((0,h.WD)({chrome:o})),le=(e,t,o)=>r(te((0,h.W3)(e,t),o)),se=e=>(t,o)=>r((0,h.nV)(t,e,o)),re=[{title:t.formatMessage(x.Z.name),orderBy:"name"},{title:t.formatMessage(x.Z.description)},{title:t.formatMessage(x.Z.lastModified)}];(0,a.useEffect)((()=>{c!==S.Cn?se(Y)(c):ee&&se(Y)(ee)}),[ee]),(0,a.useEffect)((()=>{W.length>0&&(c!==S.Cn?oe(c):ee&&oe(ee))}),[W]),(0,a.useEffect)((()=>{V.current=U||j}),[U,j]);const ie=(e,t,o)=>n().createElement("p",null,n().createElement(s._H,{...o?x.Z.removeRolesModalText:x.Z.removeRoleModalText,values:{b:e=>n().createElement("b",null,e),name:e,...o?{roles:t}:{role:t}}})),ue=c!==S.Cn?c:ee,ce=()=>{z?ne().then((({value:{data:e}})=>{se({...Y,offset:0})(e[0].uuid)})):se({...Y,offset:0})(c)};return n().createElement(n().Fragment,null,n().createElement(v,{text:_.text,title:_.title,isOpen:P,isChanged:J,isDefault:z||X,confirmButtonLabel:_.confirmButtonLabel,onClose:()=>G(!1),onSubmit:()=>{G(!1),A(),y([]),e(z&&!J)}}),n().createElement(p.Z,{type:"content",id:"tab-roles"},n().createElement(b.M,{columns:re,isSelectable:V.current&&!X,rows:B(c,W,Z),data:W,filterValue:f,fetchData:e=>{se(e)(ue)},emptyFilters:{name:"",description:""},setFilterValue:({name:e,description:t})=>{void 0!==e&&C(e),void 0!==t&&g(t)},isLoading:$,pagination:Y,checkedRows:Z,setCheckedItems:e=>{y((t=>e(t).map((({uuid:e,name:t,label:o})=>({uuid:e,label:o||t})))))},titlePlural:t.formatMessage(x.Z.roles).toLowerCase(),titleSingular:t.formatMessage(x.Z.role),toolbarButtons:()=>[...V.current&&!X?[n().createElement(R.Z,{className:`rbac-m-hide-on-sm rbac-c-button__add-role${K&&"-disabled"}`,to:O.Z["group-add-roles"].link.replace(":groupId",c),key:"add-to-group"},I(K,D(name||""),X&&t.formatMessage(x.Z.defaultGroupNotManually))),{label:t.formatMessage(x.Z.addRole),props:{isDisabled:K,className:"rbac-m-hide-on-md"},onClick:()=>i(O.Z["group-add-roles"].link.replace(":groupId",c))},{label:t.formatMessage(x.Z.remove),props:{isDisabled:!Z||!Z.length>0,variant:"danger"},onClick:()=>{const e=Z.length>1;N((()=>()=>le(ue,Z.map((e=>e.uuid)),ce))),F({title:t.formatMessage(e?x.Z.removeRolesQuestion:x.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(e?x.Z.removeRoles:x.Z.removeRole),text:ie(name,e?Z.length:W.find((e=>e.uuid===Z[0].uuid)).name,e)}),G(!0)}}]:[]],actionResolver:()=>[...V.current&&!X?[{title:t.formatMessage(x.Z.remove),onClick:(e,o,a)=>{N((()=>()=>le(ue,[a.uuid],ce))),F({title:t.formatMessage(x.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(x.Z.removeRole),text:ie(name,a.title,!1)}),G(!0)}}]:[]],ouiaId:"roles-table",emptyProps:{title:t.formatMessage(x.Z.noGroupRoles),description:[t.formatMessage(X?x.Z.contactServiceTeamForRoles:x.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:f},{key:"description",value:d}],tableId:"group-roles"})),n().createElement(a.Suspense,null,n().createElement(u.Outlet,{context:{[O.Z["group-roles-edit-group"].path]:{group:q,cancelRoute:O.Z["group-detail-roles"].link.replace(":groupId",c),postMethod:()=>r((0,h.yi)(ue))},[O.Z["group-roles-remove-group"].path]:{postMethod:()=>r((0,h.bt)({...H,offset:0,filters:Q,usesMetaInURL:!0,chrome:o})),cancelRoute:O.Z["group-detail-roles"].link.replace(":groupId",c),submitRoute:(0,k.zk)(O.Z.groups.link,{...H,offset:0},Q),groupsUuid:[q]},[O.Z["group-add-roles"].path]:{afterSubmit:()=>{z||X?ne().then((({value:{data:e}})=>{se(Y)(e[0].uuid),ae(e[0].uuid)})):(se(Y)(c),ae())},fetchUuid:ee,selectedRoles:L,setSelectedRoles:T,closeUrl:O.Z["group-detail"].link.replace(":groupId",z?S.Cn:c),addRolesToGroup:(e,t,o)=>r(te((0,h.Wj)(e,t),o)),groupName:q.name,isDefault:z||X,isChanged:J,onDefaultGroupChanged:e}}})))};L.propTypes={searchFilter:i().string,selectedRoles:i().array,pagination:i().shape({limit:i().number.isRequired,offset:i().number.isRequired,count:i().number}),onDefaultGroupChanged:i().func},L.defaultProps={pagination:f.eX,selectedRoles:[]};const T=L}}]);
//# sourceMappingURL=../sourcemaps/5404.38f3de32e2eca319aad28ad0d391d9d1.js.map