(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[5899],{23340:(e,t,s)=>{"use strict";s.d(t,{MS:()=>n,aX:()=>a,qF:()=>r});const a=(e,t,s,a={})=>{const r=new URLSearchParams(e.search);let n=s.reduce(((e,t)=>{const s=r.getAll(t);return{...e,[t]:s.length>1?s:s[0]}}),{});return Object.keys(a).forEach((e=>{const t=a[e];n={...n,[e]:Array.isArray(n[e])?[...new Set([...n[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||n[e]},Array.isArray(t)?t.forEach((t=>r.getAll(e).includes(t)||r.append(e,t))):r.get(e)||t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0}),n},r=(e,t)=>{const s=new URLSearchParams(e.search);return t.some((e=>s.get(e)))},n=(e,t,s)=>{const a=new URLSearchParams(e.search);Object.keys(s).forEach((e=>a.delete(e))),Object.keys(s).forEach((e=>{const t=s[e];Array.isArray(t)?t.forEach((t=>t&&a.append(e,t))):t&&a.set(e,t)})),t({pathname:e.pathname,search:a.toString()},{replace:!0})}},12:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var a=s(66029),r=s.n(a),n=s(25387),i=s(45697),o=s.n(i),l=s(68340),c=s(15265),m=s(86601),u=s(2550),d=s(55140),f=s(79083);const g=({linkDescription:e,linkTitle:t})=>{const s=(0,n.YB)(),i=(0,d.Z)(),o=i.getEnvironment(),g=i.isProd()?"":`${o}.`,{orgAdmin:p}=(0,a.useContext)(m.Z);return!(0,f.useFlag)("platform.rbac.itless")&&p?r().createElement(l.x,{className:"pf-v5-u-mt-0",component:l.q.h7},`${s.formatMessage(u.Z.usersDescription)} `,e,r().createElement(l.x,{component:l.q.a,href:`https://www.${g}redhat.com/wapps/ugc/protected/usermgt/userList.html`,target:"_blank",rel:"noopener noreferrer"},t,r().createElement(c.LA,null)),"."):r().createElement(l.x,{className:"pf-v5-u-mt-0",component:l.q.h7},`${s.formatMessage(u.Z.usersDescription)} `)};g.propTypes={linkDescription:o().node,linkTitle:o().node},g.defaultProps={linkDescription:"",linkTitle:" user management list "};const p=g},24869:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var a=s(66029),r=s.n(a),n=s(55573),i=s(45697),o=s.n(i),l=s(94184),c=s.n(l);const m=({row:e,...t})=>{const{status:s}=e,a=s?.props?.["data-is-active"];return r().createElement(n.e,{className:c()("rbac__user-row",{"ins-m-inactive":!a}),row:e,...t})};m.propTypes={row:o().shape({status:o().shape({props:o().shape({"data-is-active":o().bool,data:o().shape({isActive:o().bool})})})})};const u=m},68397:(e,t,s)=>{"use strict";s.d(t,{Z:()=>q});var a=s(66029),r=s.n(a),n=s(86706),i=s(39138),o=s.n(i),l=s(25387),c=s(45697),m=s.n(c),u=s(62012),d=s(97246),f=s(64756),g=s(60063),p=s(47173),y=s(51442),h=s(45488),v=s(80236),k=s(49739),Z=s(83826),E=s(93149),b=s(72936),M=s(49345),w=s(85044),I=s(79332),S=s(85998),U=s(46818),_=s(7732),C=s(98614),A=s(36438),L=s(29301),O=s(24869),D=s(74982),x=s(23340),B=s(2550),R=s(86601),j=s(78596),N=s(11549),T=s(14289),F=s(55140);const P=({isOrgAdmin:e})=>{const t=(0,l.YB)();return e?r().createElement(a.Fragment,null,r().createElement(C.CheckIcon,{key:"yes-icon",className:"pf-u-mr-sm"}),r().createElement("span",{key:"yes"},t.formatMessage(B.Z.yes))):r().createElement(a.Fragment,null,r().createElement(A.CloseIcon,{key:"no-icon",className:"pf-u-mr-sm"}),r().createElement("span",{key:"no"},t.formatMessage(B.Z.no)))};P.propTypes={isOrgAdmin:m().bool};const $=({isOrgAdmin:e,userId:t,isDisabled:s,toggleUserIsOrgAdminStatus:n})=>{const[i,o]=(0,a.useState)(!1),c=(0,l.YB)(),m=[r().createElement(w.h,{key:`is-admin-dropdown-item-${t}`,componentID:"yes"},c.formatMessage(B.Z.yes)),r().createElement(w.h,{key:`is-not-admin-dropdown-item-${t}`,componentID:"no"},c.formatMessage(B.Z.no))];return r().createElement(I.L,{id:`is-admin-dropdown-${t}`,key:`is-admin-dropdown-${t}`,onSelect:e=>{n({yes:!0,no:!1}[e?.target?.id],null,{userId:t}),o(!1)},toggle:r().createElement(S.Z,{id:`is-admin-dropdown-toggle-${t}`,key:`is-admin-dropdown-toggle-${t}`,isDisabled:s,onToggle:e=>{o(e)}},e?c.formatMessage(B.Z.yes):c.formatMessage(B.Z.no)),isOpen:i,dropdownItems:m})};$.propTypes={isOrgAdmin:m().bool,userId:m().string,isDisabled:m().bool,toggleUserIsOrgAdminStatus:m().func};const X=({selectedUsers:e,setSelectedUsers:t,userLinks:s,usesMetaInURL:i,displayNarrow:c,props:m})=>{const C=(0,l.YB)(),A=(0,u.useNavigate)(),X=(0,u.useLocation)(),q=(0,n.useDispatch)(),[H,Y]=(0,a.useState)([]),[z,G]=(0,a.useState)(!1),[K,V]=(0,a.useState)(!1),[W,J]=(0,a.useState)(!1),{orgAdmin:Q}=(0,a.useContext)(R.Z),ee=(0,j.Z)(),te=(0,a.useRef)(null),se=Q,ae=(0,F.Z)(),[re,ne]=(0,a.useState)({}),[ie,oe]=(0,a.useState)("");let le=(0,n.useSelector)((({userReducer:{users:e}})=>({limit:(i?e.pagination.limit:e.meta.limit)??(Q?D.HE:D.he).limit,offset:(i?e.pagination.offset:e.meta.offset)??(Q?D.HE:D.he).offset,count:i?e.pagination.count:e.meta.count,redirected:i&&e.pagination.redirected})));const{users:ce,isLoading:me,stateFilters:ue}=(0,n.useSelector)((({userReducer:{users:{data:e,filters:t={}},isUserDataLoading:s}})=>({users:e?.map?.((e=>({...e,uuid:e.external_source_id}))),isLoading:s,stateFilters:X.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}}))),de=(0,a.useCallback)((e=>q((0,g.uh)(e))),[q]),fe=(e,s,a={})=>{const{limit:r,offset:n}=(0,D.rj)(X,A,le),o=i?(0,x.aX)(X,A,["username","email","status"],Ze):{status:Ze.status},l={id:a.userId,is_org_admin:e};q((0,g.hO)(l)).then((()=>{Ee(o),t?t([]):Y([]),de({...(0,L.jl)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))},ge=(e,s,a=[])=>{const{limit:r,offset:n}=(0,D.rj)(X,A,le),o=i?(0,x.aX)(X,A,["username","email","status"],Ze):{status:Ze.status},l=a.map((t=>({id:t?.uuid||t?.external_source_id,is_active:e})));q((0,g.eD)(l)).then((()=>{Ee(o),t?t([]):Y([]),de({...(0,L.jl)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))};(0,a.useEffect)((()=>{ae.auth.getUser().then((e=>ne(e))),ae.auth.getToken().then((e=>oe(e)))}),[]);const pe=e=>e!=re?.identity?.internal?.account_id,ye=(0,a.useCallback)((e=>q((0,g.an)(e))),[q]),he=[{title:C.formatMessage(c?B.Z.orgAdmin:B.Z.orgAdministrator),key:"org-admin",transforms:[U.P8]},{title:C.formatMessage(B.Z.username),key:"username",transforms:[_.p]},{title:C.formatMessage(B.Z.email)},{title:C.formatMessage(B.Z.firstName),transforms:[U.P8]},{title:C.formatMessage(B.Z.lastName),transforms:[U.P8]},{title:C.formatMessage(B.Z.status),transforms:[U.P8]}],[ve,ke]=(0,a.useState)({index:1,direction:"asc"}),[Ze,Ee]=(0,a.useState)(i?ue:{username:"",email:"",status:[C.formatMessage(B.Z.active)]});return(0,a.useEffect)((()=>{i&&(0,D.oG)(X,A,le.limit,le.offset)}),[le.offset,le.limit,le.count,le.redirected]),(0,a.useEffect)((()=>{const{limit:e,offset:t}=i?(0,D.rj)(X,A,le):le,s=i?(0,x.aX)(X,A,["username","email","status"],Ze):{status:Ze.status};Ee(s),de({...(0,L.jl)({limit:e,offset:t,filters:s}),usesMetaInURL:i})}),[]),(0,a.useEffect)((()=>{i&&((0,D.Zc)(X)||(0,D.oG)(X,A,le.limit,le.offset),Object.values(Ze).some((e=>e?.length>0))&&!(0,x.qF)(X,Object.keys(Ze))&&(0,x.aX)(X,A,Object.keys(Ze),Ze))})),r().createElement(r().Fragment,null,r().createElement(v.u,{title:C.formatMessage(B.Z.deactivateUsersConfirmationModalTitle),titleIconVariant:"warning",description:C.formatMessage(B.Z.deactivateUsersConfirmationModalDescription),variant:v.v.medium,isOpen:z,footer:r().createElement(k.K,{hasGutter:!0},r().createElement(Z.v,null,r().createElement(E.X,{label:C.formatMessage(B.Z.deactivateUsersConfirmationModalCheckboxText),isChecked:K,onChange:e=>{V(e)},id:"deactivateUsersConfirmationCheckbox",name:"deactivate-users-confirmation-checkbox"})),r().createElement(Z.v,null,r().createElement(p.zx,{key:"confirm-deactivate-users",ouiaId:"danger-confirm-deactivate-users-button",isDisabled:0===H.length||!K,variant:"danger",onClick:()=>{ge(!1,0,H),G(!1),V(!1)}},C.formatMessage(B.Z.deactivateUsersConfirmationButton)),r().createElement(p.zx,{id:"deactivate-users-confirmation-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:()=>{G(!1)}},C.formatMessage(B.Z.cancel)))),onClose:()=>{G(!1)}},r().createElement(b.aV,{isPlain:!0,isBordered:!0},H.map((e=>r().createElement(M.H,{key:e.uuid},e.label))))),r().createElement(d.M,{toolbarChildren:se&&!c?()=>{const e=[r().createElement(w.h,{key:"activate-users-dropdown-item",componentID:"activate"},C.formatMessage(B.Z.activateUsersButton)),r().createElement(w.h,{key:"deactivate-users-dropdown-item",componentID:"deactivate"},C.formatMessage(B.Z.deactivateUsersButton))];return r().createElement(I.L,{onSelect:async e=>{"deactivate"===e?.target?.id?G(!0):ge({activate:!0,deactivate:!1}[e?.target?.id],0,H),J(!1)},toggle:r().createElement(S.Z,{id:"toolbar-dropdown-toggle",isDisabled:0===H.length,onToggle:e=>{J(e)}},C.formatMessage(B.Z.activateUsersButton)),isOpen:W,dropdownItems:e})}:()=>null,toolbarButtons:!se||c||(0,L.TU)(ie)?()=>[]:()=>[r().createElement(f.Z,{to:T.Z["invite-users"].link,key:"invite-users",className:"rbac-m-hide-on-sm"},r().createElement(p.zx,{ouiaId:"invite-users-button",variant:"primary","aria-label":"Invite users"},C.formatMessage(B.Z.inviteUsers))),...(0,N.Z)(ee)?[{label:C.formatMessage(B.Z.inviteUsers),onClick:()=>{A((0,f.n)(T.Z["invite-users"].link))}}]:[]],isCompact:!0,isSelectable:!0,borders:!1,columns:he,rows:((e,t,s=[])=>t?t.reduce(((t,{external_source_id:a,username:n,is_active:i,email:l,first_name:m,last_name:u,is_org_admin:d})=>[...t,{uuid:a,cells:[{title:se&&!c?r().createElement($,{isOrgAdmin:d,userId:a,isDisabled:!se||re?.identity?.internal?.account_id==a,toggleUserIsOrgAdminStatus:fe}):r().createElement(P,{isOrgAdmin:d}),props:{"data-is-active":d}},{title:e?r().createElement(f.Z,{to:T.Z["user-detail"].link.replace(":username",n)},n.toString()):c?r().createElement("span",{title:n},o()(n,{length:25})):n},{title:c?r().createElement("span",{title:l},o()(l,{length:25})):l},m,u,{title:se&&!c?r().createElement(y.r,{key:"status",isDisabled:!se||re?.identity?.internal?.account_id==a,label:C.formatMessage(B.Z.active),labelOff:C.formatMessage(B.Z.inactive),isChecked:i,onChange:(e,t)=>{ge(e,0,[{external_source_id:a,is_active:i}])}}):r().createElement(h._,{key:"status",color:i?"green":"grey"},C.formatMessage(i?B.Z.active:B.Z.inactive)),props:{"data-is-active":i}}],selected:Boolean(s?.find?.((({uuid:e})=>e===a))),disableSelection:c?void 0:!pe(a)}]),[]):[])(s,ce,e||H),sortBy:ve,onSort:(e,t,s)=>{const a=`${"desc"===s?"-":""}${he[t-1].key}`;ke({index:t,direction:s}),de({...le,filters:Ze,usesMetaInURL:i,orderBy:a})},data:ce,ouiaId:"users-table",fetchData:e=>{const t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:Ze.status,{username:s,email:a,count:r,limit:n,offset:o,orderBy:l}=e;de({...(0,L.jl)({count:r,limit:n,offset:o,orderBy:l,filters:{username:s,email:a,status:t}}),usesMetaInURL:i}).then((()=>{te?.current?.focus()})),i&&(0,x.MS)(X,A,{username:s,email:a,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:({username:e,email:t,status:s})=>{var a;a={username:void 0===e?Ze.username:e,email:void 0===t?Ze.email:t,status:void 0===s||s===Ze.status?Ze.status:s},i&&ye(a),Ee({username:"",...a})},isLoading:me,pagination:le,checkedRows:e||H,setCheckedItems:e=>{t?t((t=>e(t).filter((e=>c?e:e?.uuid!=re?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e}))))):Y((t=>e(t).filter((e=>c?e:e?.uuid!=re?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e})))))},rowWrapper:O.Z,titlePlural:C.formatMessage(B.Z.users).toLowerCase(),titleSingular:C.formatMessage(B.Z.user),filters:[{key:"username",value:Ze.username,placeholder:C.formatMessage(B.Z.filterByKey,{key:C.formatMessage(B.Z.username).toLowerCase()}),innerRef:te},{key:"email",value:Ze.email,placeholder:C.formatMessage(B.Z.filterByKey,{key:C.formatMessage(B.Z.email).toLowerCase()}),innerRef:te},{key:"status",value:Ze.status,label:C.formatMessage(B.Z.status),type:"checkbox",items:[{label:C.formatMessage(B.Z.active),value:"Active"},{label:C.formatMessage(B.Z.inactive),value:"Inactive"}]}],tableId:"users-list",...m}),r().createElement(a.Suspense,null,r().createElement(u.Outlet,{context:{[T.Z["invite-users"].path]:{fetchData:()=>de({...le,filters:Ze,usesMetaInURL:i})}}})))};X.propTypes={displayNarrow:m().bool,users:m().array,searchFilter:m().string,setSelectedUsers:m().func,selectedUsers:m().array,userLinks:m().bool,props:m().object,usesMetaInURL:m().bool},X.defaultProps={displayNarrow:!1,users:[],userLinks:!1,usesMetaInURL:!1};const q=X},39820:(e,t,s)=>{"use strict";s.d(t,{H:()=>u});var a=s(66029),r=s.n(a),n=s(45488),i=s(98614),o=s(36438),l=s(2550),c=s(14289),m=s(64756);const u=(e,t=[],s,u=[],d=!1)=>t?.reduce(((t,{username:f,is_active:g,email:p,first_name:y,last_name:h,is_org_admin:v})=>[...t,{uuid:f,cells:[v?r().createElement(a.Fragment,null,r().createElement(i.CheckIcon,{key:"yes-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"yes"},s.formatMessage(l.Z.yes))):r().createElement(a.Fragment,null,r().createElement(o.CloseIcon,{key:"no-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"no"},s.formatMessage(l.Z.no))),{title:e?r().createElement(m.Z,{to:c.Z["user-detail"].link.replace(":username",f)},f.toString()):f.toString()},p,y,h,{title:r().createElement(n._,{key:"status",color:g?"green":"grey"},s.formatMessage(g?l.Z.active:l.Z.inactive)),props:{"data-is-active":g}}],selected:!!d&&Boolean(u?.find?.((({uuid:e})=>e===f)))}]),[])},70347:()=>{},24620:()=>{},82014:()=>{},90776:()=>{},25238:()=>{},93661:()=>{}}]);
//# sourceMappingURL=../sourcemaps/5899.ba2386bed03a599a07bce0fc05e801a9.js.map