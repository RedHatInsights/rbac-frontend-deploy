(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[4480,8363,459,8631,209,9061],{60817:function(e,t,a){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},r=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(a[s[r]]=e[s[r]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Portal=t.NotificationPortal=t.NotificationPortalBase=void 0;var i=a(85893),o=a(86706),c=n(a(72837)),l=a(53446),u=a(79206);t.NotificationPortalBase=function(e){var t=e.clearNotifications,a=r(e,["clearNotifications"]),n=(0,o.useSelector)((function(e){return e.notifications})),u=(0,o.useDispatch)();return(0,i.jsx)(c.default,s({notifications:n,removeNotification:function(e){return u((0,l.removeNotification)(e))},onClearAll:t||function(){return u((0,l.clearNotifications)())}},a))},t.NotificationPortal=function(e){var a=e.silent,n=void 0===a||a,o=r(e,["silent"]);return(0,i.jsx)(u.ErrorBoundary,{headerTitle:"Notifications portal",silent:n,children:(0,i.jsx)(t.NotificationPortalBase,s({},o))})};var m=a(72837);Object.defineProperty(t,"Portal",{enumerable:!0,get:function(){return n(m).default}}),t.default=t.NotificationPortal},72871:function(e,t,a){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,s,r)}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),r=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||s(t,e,a)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(60817);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(i).default}}),r(a(60817),t)},71355:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsMiddleware=t.clearNotifications=t.removeNotification=t.addNotification=t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=t.notificationsReducers=t.notifications=t.NotificationsPortal=void 0;var r=a(72871);Object.defineProperty(t,"NotificationsPortal",{enumerable:!0,get:function(){return s(r).default}});var n=a(24778);Object.defineProperty(t,"notifications",{enumerable:!0,get:function(){return s(n).default}}),Object.defineProperty(t,"notificationsReducers",{enumerable:!0,get:function(){return n.notificationsReducers}});var i=a(68129);Object.defineProperty(t,"ADD_NOTIFICATION",{enumerable:!0,get:function(){return i.ADD_NOTIFICATION}}),Object.defineProperty(t,"REMOVE_NOTIFICATION",{enumerable:!0,get:function(){return i.REMOVE_NOTIFICATION}}),Object.defineProperty(t,"CLEAR_NOTIFICATIONS",{enumerable:!0,get:function(){return i.CLEAR_NOTIFICATIONS}});var o=a(53446);Object.defineProperty(t,"addNotification",{enumerable:!0,get:function(){return o.addNotification}}),Object.defineProperty(t,"removeNotification",{enumerable:!0,get:function(){return o.removeNotification}}),Object.defineProperty(t,"clearNotifications",{enumerable:!0,get:function(){return o.clearNotifications}});var c=a(84885);Object.defineProperty(t,"notificationsMiddleware",{enumerable:!0,get:function(){return s(c).default}})},68129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=void 0;var a="@@INSIGHTS-CORE/NOTIFICATIONS/";t.ADD_NOTIFICATION="".concat(a,"ADD_NOTIFICATION"),t.REMOVE_NOTIFICATION="".concat(a,"REMOVE_NOTIFICATION"),t.CLEAR_NOTIFICATIONS="".concat(a,"CLEAR_NOTIFICATIONS"),t.default={ADD_NOTIFICATION:t.ADD_NOTIFICATION,REMOVE_NOTIFICATION:t.REMOVE_NOTIFICATION,CLEAR_NOTIFICATIONS:t.CLEAR_NOTIFICATIONS}},53446:function(e,t,a){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clearNotifications=t.removeNotification=t.addNotification=void 0;var r=a(68129);t.addNotification=function(e){return{type:r.ADD_NOTIFICATION,payload:s({id:("notification","cloud-servicesnotification-"+(new Date).getTime()+Math.random().toString(36).slice(2))},e)}},t.removeNotification=function(e){return{type:r.REMOVE_NOTIFICATION,payload:e}},t.clearNotifications=function(){return{type:r.CLEAR_NOTIFICATIONS}},t.default={addNotification:t.addNotification,removeNotification:t.removeNotification,clearNotifications:t.clearNotifications}},24778:function(e,t,a){"use strict";var s=this&&this.__spreadArray||function(e,t,a){if(a||2===arguments.length)for(var s,r=0,n=t.length;r<n;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.notifications=t.notificationsReducers=t.defaultState=void 0;var r=a(68129);t.defaultState=[],t.notificationsReducers=function(e,a){switch(void 0===e&&(e=t.defaultState),a.type){case r.ADD_NOTIFICATION:return n=e,i=a.payload,s(s([],n,!0),[i],!1);case r.REMOVE_NOTIFICATION:return function(e,t){var a=t.payload,r=e.findIndex((function(e){return e.id===a}));return s(s([],e.slice(0,r),!0),e.slice(r+1),!0)}(e,a);case r.CLEAR_NOTIFICATIONS:return[];default:return e}var n,i},t.notifications=t.notificationsReducers,t.default=t.notifications},79206:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ErrorBoundary:()=>s.Z,default:()=>s.Z}),a(27351);var s=a(49314)},23340:(e,t,a)=>{"use strict";a.d(t,{MS:()=>n,aX:()=>s,qF:()=>r});const s=(e,t,a,s={})=>{const r=new URLSearchParams(e.search);let n=a.reduce(((e,t)=>{const a=r.getAll(t);return{...e,[t]:a.length>1?a:a[0]}}),{});return Object.keys(s).forEach((e=>{const t=s[e];n={...n,[e]:Array.isArray(n[e])?[...new Set([...n[e],...Array.isArray(t)?t:[t]])]:t?.length>0&&t||n[e]},Array.isArray(t)?t.forEach((t=>r.getAll(e).includes(t)||r.append(e,t))):r.get(e)||t&&r.set(e,t)})),t({pathname:e.pathname,search:r.toString()},{replace:!0}),n},r=(e,t)=>{const a=new URLSearchParams(e.search);return t.some((e=>a.get(e)))},n=(e,t,a)=>{const s=new URLSearchParams(e.search);Object.keys(a).forEach((e=>s.delete(e))),Object.keys(a).forEach((e=>{const t=a[e];Array.isArray(t)?t.forEach((t=>t&&s.append(e,t))):t&&s.set(e,t)})),t({pathname:e.pathname,search:s.toString()},{replace:!0})}},84414:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(62012),r=a(64756);const n=e=>{const t=(0,s.useNavigate)();return(a,s)=>t((0,r.n)(a,e),s)}},12:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(66029),r=a.n(s),n=a(25387),i=a(45697),o=a.n(i),c=a(64380),l=a(44282),u=a.n(l),m=a(86601),d=a(2550),f=a(55140),p=a(79083);const g=({linkDescription:e,linkTitle:t})=>{const a=(0,n.YB)(),i=(0,f.Z)(),o=i.getEnvironment(),l=i.isProd()?"":`${o}.`,{orgAdmin:g}=(0,s.useContext)(m.Z);return!(0,p.useFlag)("platform.rbac.itless")&&g?r().createElement(c.Text,{className:"pf-v5-u-mt-0",component:c.TextVariants.h7},`${a.formatMessage(d.Z.usersDescription)} `,e,r().createElement(c.Text,{component:c.TextVariants.a,href:`https://www.${l}redhat.com/wapps/ugc/protected/usermgt/userList.html`,target:"_blank",rel:"noopener noreferrer"},t,r().createElement(u(),null)),"."):r().createElement(c.Text,{className:"pf-v5-u-mt-0",component:c.TextVariants.h7},`${a.formatMessage(d.Z.usersDescription)} `)};g.propTypes={linkDescription:o().node,linkTitle:o().node},g.defaultProps={linkDescription:"",linkTitle:" user management list "};const v=g},24869:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var s=a(66029),r=a.n(s),n=a(55573),i=a(45697),o=a.n(i),c=a(94184),l=a.n(c);const u=({row:e,...t})=>{const{status:a}=e,s=a?.props?.["data-is-active"];return r().createElement(n.e,{className:l()("rbac__user-row",{"ins-m-inactive":!s}),row:e,...t})};u.propTypes={row:o().shape({status:o().shape({props:o().shape({"data-is-active":o().bool,data:o().shape({isActive:o().bool})})})})};const m=u},87767:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(31055),r=a(66029),n=a.n(r),i=a(45697),o=a.n(i),c=(a(27361),a(48880));o().oneOfType([o().string,o().func,o().object]),o().func.isRequired,o().node.isRequired,o().bool,o().func.isRequired,o().node.isRequired,o().func.isRequired;const l=({renderNextButton:e,disableBack:t,handlePrev:a,buttonLabels:{cancel:i,back:o},context:l})=>{const u=(0,c.default)(),{success:m,error:d,submitting:f}=(0,r.useContext)(l);return m||void 0===d||d||f?null:n().createElement(r.Fragment,null,e(),n().createElement(s.Button,{type:"button",variant:"secondary",isDisabled:t,onClick:a},o),n().createElement(s.Button,{type:"button",variant:"link",onClick:u.onCancel},i))};l.propTypes={disableBack:o().bool,handlePrev:o().func.isRequired,handleNext:o().func.isRequired,nextStep:o().oneOfType([o().string,o().shape({when:o().string.isRequired,stepMapper:o().object.isRequired}),o().func]),buttonLabels:o().shape({submit:o().node.isRequired,cancel:o().node.isRequired,back:o().node.isRequired,next:o().node.isRequired}).isRequired,context:o().object.isRequired,renderNextButton:o().func};const u=l},56640:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var s=a(66029),r=a.n(s),n=a(31055),i=a(70363),o=a(25387),c=a(45697),l=a.n(c),u=a(2550),m=a(44344);const d=({context:e,title:t,text:a,customFooter:c})=>{const l=(0,o.YB)(),{jumpToStep:d}=(0,s.useContext)(i.default),{setWizardError:f}=(0,s.useContext)(e);return r().createElement(m.Te,{errorTitle:t,errorDescription:a,customFooter:c||r().createElement(n.Button,{onClick:()=>{f(void 0),d(0)},variant:n.ButtonVariant.primary},l.formatMessage(u.Z.returnToStepNumber,{number:1}))})};d.propTypes={context:l().object.isRequired,title:l().string.isRequired,text:l().string.isRequired,customFooter:l().element};const f=d},110:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AddGroupWizardContext:()=>de,default:()=>Ee,mapperExtension:()=>ge,onCancel:()=>ve});var s=a(66029),r=a.n(s),n=a(45697),i=a.n(n),o=a(86706),c=a(25387),l=a(9820),u=a(71355),m=a(51912),d=a(67850),f=a(8340),p=a(55218),g=a(64124),v=a(96354),y=a(48880),E=a(74503),h=a(31055),b=a(95376),I=a(18962),Z=a(15950),M=a(72232),S=a(41944),T=a.n(S),N=a(95359),O=a(84414),k=a(56640),C=a(14289),x=a(2550);const A=({formFields:e})=>{const t=(0,c.YB)(),a=(0,O.Z)(),{submittingGroup:n,submittingServiceAccounts:i,error:o,setWizardError:l}=(0,s.useContext)(de),{getState:u}=(0,y.default)();if((0,s.useEffect)((()=>{l(void 0),(0,N.B)(u().values["group-name"]).then((()=>l(!1))).catch((()=>l(!0)))}),[]),void 0===o||n&&!i)return r().createElement(E.Bullseye,null,r().createElement(Z.Spinner,{className:"pf-v5-u-mt-xl",size:"xl"}));if(i&&!o){const e=n?1:i?2:3;return r().createElement(b.EmptyState,{variant:b.EmptyStateVariant.lg,"data-component-ouia-id":"wizard-progress",className:"rbac-add-group-progress"},r().createElement(b.EmptyStateHeader,{titleText:t.formatMessage(x.Z.groupBeingCreated),icon:r().createElement(b.EmptyStateIcon,{className:"pf-v5-u-mt-xl",icon:T()}),headingLevel:"h4"}),r().createElement(I.Progress,{className:"pf-v5-u-mt-lg",style:{textAlign:"left"},min:0,max:3,value:e,label:(n?1:2)+" of 2",title:t.formatMessage(n?x.Z.creatingGroup:x.Z.associatingServiceAccounts)}))}return o?r().createElement(k.Z,{context:de,title:n?t.formatMessage(x.Z.groupNameTakenTitle):t.formatMessage(x.Z.addGroupServiceAccountsErrorTitle,{count:u().values["service-accounts-list"].length}),text:n?t.formatMessage(x.Z.groupNameTakenText):t.formatMessage(x.Z.addNewGroupServiceAccountsErrorDescription,{count:u().values["service-accounts-list"].length}),customFooter:n?void 0:r().createElement(h.Button,{variant:h.ButtonVariant.primary,onClick:()=>a(C.Z.groups.link)},t.formatMessage(x.Z.close))}):r().createElement(r().Fragment,null,r().createElement(M.Title,{headingLevel:"h1",size:"xl",className:"pf-v5-u-mb-lg"},t.formatMessage(x.Z.reviewDetails)),[[{...e?.[0]?.[0]}]])};A.propTypes={formFields:i().array};const _=A;var R=a(87767),F=a(60167),w=a(2034),B=a(77044),L=a(29301),D=a(16987),P=a(56591),j=a(23539),G=a(81169),U=a(9294),q=a(45047);const V=e=>{const t=(0,c.YB)(),{input:a}=(0,G.Z)(e),n=(0,y.default)(),{"group-name":i,"group-description":o}=n.getState().values,[l,u]=(0,s.useState)(i||""),[m,d]=(0,s.useState)(),[f,p]=(0,s.useState)(o),g=e=>{const t=(0,L.vE)(e);a.onChange(void 0),(0,N.L)(t).then((()=>{a.onChange(t),d(void 0)})).catch((e=>{d(e),a.onChange(void 0)})),u(e)};(0,s.useEffect)((()=>{l?.length>0&&g(l)}),[]);const v=((e,t)=>void 0===e||t||e?.length>150?"error":"default")(l,m),E=(e=>e?.length>150?"error":"default")(f);return r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,{className:"rbac-l-stack__item-summary"},r().createElement(D.FormGroup,{label:t.formatMessage(x.Z.groupName),isRequired:!0},r().createElement(U.TextInput,{value:l,type:"text",validated:v,onBlur:()=>""===l&&u(void 0),onChange:(e,t)=>g(t),"aria-label":"Group name"}),"error"===v&&r().createElement(D.FormHelperText,null,r().createElement(P.HelperText,null,r().createElement(P.HelperTextItem,{variant:v},l?m:t.formatMessage(x.Z.required)))))),r().createElement(j.StackItem,null,r().createElement(D.FormGroup,{label:t.formatMessage(x.Z.groupDescription)},r().createElement(q.TextArea,{value:f,validated:E,onChange:(e,t)=>{p(t),n.change("group-description",t)},"aria-label":"Group description",resizeOrientation:"vertical"}),"error"===E&&r().createElement(D.FormHelperText,null,r().createElement(P.HelperText,{variant:E},r().createElement(P.HelperTextItem,null,t.formatMessage(x.Z.maxCharactersWarning,{number:150})))))))};V.propTypes={name:i().string,description:i().string,groups:i().array};const H=V;var $=a(64380),Y=a(87285);const z=e=>{const t=(0,c.YB)(),[a,n]=(0,s.useState)([]),{input:i}=(0,G.Z)(e),o=(0,y.default)();return(0,s.useEffect)((()=>{n(o.getState().values["roles-list"]||[])}),[]),(0,s.useEffect)((()=>{i.onChange(a),o.change("roles-list",a)}),[a]),r().createElement(s.Fragment,null,r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,null,r().createElement($.TextContent,null,r().createElement($.Text,null,t.formatMessage(x.Z.selectRolesForGroupText)))),r().createElement(j.StackItem,null,r().createElement(D.FormGroup,{fieldId:"select-role"},r().createElement(Y.Z,{selectedRoles:a,setSelectedRoles:n,rolesExcluded:!1})))))};z.propTypes={selectedRoles:i().array,setSelectedRoles:i().func,title:i().string,description:i().string};const X=z;var W=a(79083),K=a(10113),Q=a(68397),J=a(12);const ee=e=>{const[t,a]=(0,s.useState)([]),{input:n}=(0,G.Z)(e),i=(0,c.YB)(),o=(0,y.default)(),l=(0,W.useFlag)("platform.rbac.itless");(0,s.useEffect)((()=>{a(o.getState().values["users-list"]||[])}),[]),(0,s.useEffect)((()=>{n.onChange(t),o.change("users-list",t)}),[t]);const u={...!l&&{linkDescription:i.formatMessage(x.Z.toManageUsersText)}},m={selectedUsers:t,setSelectedUsers:a,displayNarrow:!0};return r().createElement(s.Fragment,null,r().createElement(D.Form,null,r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,null,r().createElement($.TextContent,null,r().createElement(J.Z,{...u}))),r().createElement(j.StackItem,null,r().createElement(D.FormGroup,{fieldId:"select-user"},l?r().createElement(Q.Z,{...m}):r().createElement(K.Z,{...m}))))))};ee.propTypes={selectedUsers:i().array,setSelectedUsers:i().func,title:i().string,description:i().string};const te=ee;var ae=a(5904),se=a(64756),re=a(83536);var ne=a(9545),ie=a(55140);const oe=()=>{const e=(0,c.YB)(),t=(0,y.default)(),{isBeta:a}=(0,ie.Z)(),{"group-name":s,"group-description":n,"users-list":i,"roles-list":o,"service-accounts-list":l}=t.getState().values,u=a()&&(0,W.useFlag)("platform.rbac.group-service-accounts")||!a()&&(0,W.useFlag)("platform.rbac.group-service-accounts.stable");return r().createElement("div",{className:"rbac"},r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,null,r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,{className:"rbac-l-stack__item-summary"},r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement($.Text,{component:$.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.Z.groupName))),r().createElement(ne.GridItem,{md:9},r().createElement($.Text,{component:$.TextVariants.p},s))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement($.Text,{component:$.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.Z.groupDescription))),r().createElement(ne.GridItem,{md:9},r().createElement($.Text,{component:$.TextVariants.p},n))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement($.Text,{component:$.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.Z.roles))),r().createElement(ne.GridItem,{md:9},o.map(((e,t)=>r().createElement($.Text,{className:"pf-v5-u-mb-0",key:t},e.label))))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement($.Text,{component:$.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.Z.members))),r().createElement(ne.GridItem,{md:9},i.map(((e,t)=>r().createElement($.Text,{className:"pf-v5-u-mb-0",key:t},e.label))))),r().createElement(ne.Grid,null,r().createElement(ne.GridItem,{md:3},r().createElement($.Text,{component:$.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(x.Z.serviceAccounts))),u&&r().createElement(ne.GridItem,{md:9},l?.map(((e,t)=>r().createElement($.Text,{className:"pf-v5-u-mb-0",key:t},e.name))))))))))};oe.propTypes={name:i().string,description:i().string,groups:i().array};const ce=oe;var le=a(71214),ue=a.n(le);const me=({onClose:e})=>{const t=(0,c.YB)(),{setHideForm:a,setWizardSuccess:n}=(0,s.useContext)(de);return r().createElement(b.EmptyState,{variant:b.EmptyStateVariant.lg},r().createElement(b.EmptyStateHeader,{titleText:r().createElement(r().Fragment,null,t.formatMessage(x.Z.groupCreatedSuccessfully)),icon:r().createElement(b.EmptyStateIcon,{className:"pf-v5-u-mt-xl",color:"green",icon:ue()}),headingLevel:"h4"}),r().createElement(b.EmptyStateFooter,null,r().createElement(h.Button,{onClick:e,variant:"primary"},t.formatMessage(x.Z.exit)),r().createElement(b.EmptyStateActions,null,r().createElement(h.Button,{onClick:()=>{a(!1),n(!1)},variant:"link"},t.formatMessage(x.Z.createAnotherGroup)))))},de=(0,s.createContext)({success:!1,submitting:!1,error:void 0,setHideForm:e=>null,setWizardSuccess:e=>null}),fe=e=>r().createElement(d.ZP,{...e,showFormControls:!1}),pe=({Content:e,...t})=>r().createElement(e,{...t});pe.propTypes={Content:i().elementType.isRequired};const ge={description:pe,"set-name":H,"set-roles":X,"set-users":te,"set-service-accounts":({name:e})=>{const[t,a]=(0,s.useState)([]),{input:n}=(0,G.Z)({name:e}),i=(0,c.YB)(),o=(0,y.default)();return(0,s.useEffect)((()=>{a(o.getState().values["service-accounts-list"]||[])}),[]),(0,s.useEffect)((()=>{n.onChange(t),o.change("service-accounts-list",t)}),[t]),r().createElement(s.Fragment,null,r().createElement(D.Form,null,r().createElement(j.Stack,{hasGutter:!0},r().createElement(j.StackItem,null,r().createElement($.TextContent,null,i.formatMessage(x.Z.addServiceAccountsToGroupDescription),r().createElement(ae.Alert,{className:"pf-v5-u-mt-sm rbac-service-accounts-alert",variant:"info",component:"span",isInline:!0,isPlain:!0,title:i.formatMessage(x.Z.visitServiceAccountsPage,{link:r().createElement(se.Z,{to:"/service-accounts",linkBasename:"/iam"},i.formatMessage(x.Z.serviceAccountsPage))})}))),r().createElement(j.StackItem,null,r().createElement(D.FormGroup,{fieldId:"select-service-accounts"},r().createElement(re.Z,{selected:t,setSelected:a}))))))},"summary-content":ce},ve=(e,t,a)=>s=>{a(s),Object.keys(s).length>0?t(!0):e()},ye=({postMethod:e,pagination:t,filters:a,orderBy:n})=>{const i=(0,o.useDispatch)(),d=(0,c.YB)(),y=(0,s.useRef)(document.createElement("div")),{isBeta:E}=(0,ie.Z)(),h=E()&&(0,W.useFlag)("platform.rbac.group-service-accounts")||!E()&&(0,W.useFlag)("platform.rbac.group-service-accounts.stable"),b=(0,s.useRef)(((e,t)=>{const a=(0,c.Sn)(),s=(0,c.dp)({locale:F.S,messages:w},a);return{fields:[{component:"wizard",name:"wizard",className:"rbac",isDynamic:!0,inModal:!0,showTitles:!0,title:s.formatMessage(x.Z.createGroup),container:e,fields:[{name:"name-and-description",nextStep:"add-roles",title:s.formatMessage(x.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:g.Z.REQUIRED}]},{component:v.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:g.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:s.formatMessage(x.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:t?"add-service-accounts":"review",title:s.formatMessage(x.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},...t?[{name:"add-service-accounts",nextStep:"review",title:s.formatMessage(x.Z.addServiceAccounts),fields:[{component:"set-service-accounts",name:"service-accounts-list"}]}]:[],{name:"review",title:s.formatMessage(x.Z.reviewDetails),buttons:e=>r().createElement(R.Z,{...e,context:de}),StepTemplate:_,fields:[{component:"summary-content",name:"summary-content"}]}]}]}})(y.current,h)),I=(0,O.Z)(),[Z,M]=(0,s.useState)({}),[S,T]=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),N=()=>{i((0,u.addNotification)({variant:"warning",title:d.formatMessage(x.Z.addingGroupTitle),dismissDelay:8e3,description:d.formatMessage(x.Z.addingGroupCanceledDescription)})),I({pathname:C.Z.groups.link,search:(0,L.GT)({page:1,per_page:t.limit,...a})})},k=e=>T((t=>({...t,error:e}))),A=e=>T((t=>({...t,canceled:e}))),D=()=>{T((e=>({...e,success:!1,hideForm:!1}))),e({limit:t.limit,offset:0,orderBy:n,filters:{}}),I({pathname:C.Z.groups.link,search:(0,L.GT)({page:1,per_page:t.limit})})};return r().createElement(de.Provider,{value:{...S,setWizardError:k,setWizardSuccess:e=>T((t=>({...t,success:e}))),setHideForm:e=>T((t=>({...t,hideForm:e})))}},r().createElement(p.Z,{title:d.formatMessage(x.Z.exitItemCreation,{item:d.formatMessage(x.Z.group).toLocaleLowerCase()}),isOpen:S.canceled,onClose:()=>{y.current.hidden=!1,A(!1)},confirmButtonLabel:d.formatMessage(x.Z.discard),onConfirm:N},d.formatMessage(x.Z.discardedInputsWarning)),S.hideForm?S.success?r().createElement(l.e,{isOpen:!0,title:d.formatMessage(x.Z.createGroup),onClose:D,steps:[{name:"success",component:r().createElement(me,{onClose:D}),isFinishedStep:!0}]}):null:r().createElement(m.Z,{schema:b.current,container:y,subscription:{values:!0},FormTemplate:fe,componentMapper:{...f.ZP,...ge},onSubmit:e=>{const t=e["service-accounts-list"]?.length>0;T((e=>({...e,submitting:!0,submittingGroup:!0,submittingServiceAccounts:t})));const a={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((e=>({username:e.label}))),roles_list:e["roles-list"].map((e=>e.uuid))};i((0,B.Rp)(a)).then((({value:a})=>{T((e=>({...e,submittingGroup:!1,success:!t,hideForm:!t,submitting:t}))),t&&i((0,B.w_)(a.uuid,e["service-accounts-list"])).then((()=>{T((e=>({...e,submitting:!1,submittingServiceAccounts:!1,success:!0,hideForm:!0})))})).catch((()=>k(!0)))}))},initialValues:Z,onCancel:ve(N,(()=>{y.current.hidden=!0,A(!0)}),M)}))};ye.propTypes={postMethod:i().func,pagination:i().shape({limit:i().number.isRequired}).isRequired,filters:i().object.isRequired,orderBy:i().string};const Ee=ye},87285:(e,t,a)=>{"use strict";a.d(t,{Z:()=>E});var s=a(66029),r=a.n(s),n=a(45697),i=a.n(n),o=a(25387),c=a(86706),l=a(7732),u=a(55140),m=a(74982),d=a(29301),f=a(97246),p=a(13563),g=a(77044),v=a(2550);const y=({selectedRoles:e,setSelectedRoles:t,rolesExcluded:a,groupId:n})=>{const i=(0,o.YB)(),y=(0,u.Z)(),E=(0,c.useDispatch)(),h=(0,s.useRef)(null),{roles:b,pagination:I,isLoading:Z,groupId:M,filters:S}=(0,c.useSelector)(a?({groupReducer:{selectedGroup:{addRoles:{roles:e,pagination:t,loaded:a},uuid:s}}})=>({roles:e,pagination:t||{...m.eX,count:e?.length},isLoading:!a,groupId:n||s}):({roleReducer:{roles:e,isLoading:t}})=>({roles:e.data,pagination:e.meta,isLoading:t,filters:e.filters}),c.shallowEqual),{current:T}=(0,s.useRef)([{title:i.formatMessage(v.Z.name),key:"display_name",...a?{orderBy:"name"}:{transforms:[l.p]}},{title:i.formatMessage(v.Z.description)}]),[N,O]=(0,s.useState)(""),[k,C]=(0,s.useState)({index:1,direction:"asc"}),x=(0,s.useCallback)(((e,t)=>E(a?(0,g.nr)(e,t):(0,p.Kt)((0,d.jl)({...t,chrome:y})))),[a]),A=`${"desc"===k?.direction?"-":""}${T[k?.index].key}`,_=((e,t=[])=>e?e.reduce(((e,{uuid:a,display_name:s,name:r,description:n})=>[...e,{uuid:a,cells:[s||r,n],selected:Boolean(t&&t.find((e=>e.uuid===a)))}]),[]):[])(b,e);return(0,s.useEffect)((()=>{x(M,{...I,orderBy:A})}),[]),r().createElement(f.M,{isSelectable:!0,isCompact:!0,borders:!1,columns:T,rows:_,sortBy:k,onSort:(e,t,a,s)=>{const r=`${"desc"===a?"-":""}${T[s?t-1:t].key}`;C({index:t,direction:a}),((e,t)=>{const{name:a,count:s,limit:r,offset:n,orderBy:i}=t;x(e,(0,d.jl)({count:s,limit:r,offset:n,orderBy:i,filters:{display_name:a}}))})(M,{...I,offset:0,orderBy:r,...S?.length>0?{...S.reduce(((e,t)=>({...e,[t.key]:t.value})),{})}:{name:N}})},data:b,filterValue:N,filterPlaceholder:i.formatMessage(v.Z.roleName).toLowerCase(),fetchData:e=>x(M,{...e,filters:{display_name:e.name}}),setFilterValue:({name:e})=>O(e),isLoading:Z,ouiaId:"roles-table",pagination:I,checkedRows:e,setCheckedItems:e=>{t((t=>e(t).map((({uuid:e,name:t,label:a})=>({uuid:e,label:a||t})))))},titlePlural:i.formatMessage(v.Z.roles).toLowerCase(),titleSingular:i.formatMessage(v.Z.role),tableId:"roles-list",textFilterRef:h})};y.propTypes={canSort:i().bool,setSelectedRoles:i().func.isRequired,selectedRoles:i().array,rolesExcluded:i().bool.isRequired,groupId:i().string},y.defaultProps={roles:[],pagination:m.eX,canSort:!0};const E=y},83536:(e,t,a)=>{"use strict";a.d(t,{K:()=>g,Z:()=>v});var s=a(66029),r=a.n(s),n=a(40575),i=a(25387),o=a(29301),c=a(55140),l=a(62410),u=a(86706),m=a(97246),d=a(71079),f=a(2550);const p=({serviceAccountReducer:e})=>({serviceAccounts:e.serviceAccounts,status:e.status,isLoading:e.isLoading,limit:e.limit,offset:e.offset}),g=({selected:e,setSelected:t,groupId:a})=>{const{auth:g,getEnvironmentDetails:v}=(0,c.Z)(),{serviceAccounts:y,status:E,limit:h,offset:b,isLoading:I}=(0,u.useSelector)(p),Z=(0,u.useDispatch)(),M=(0,i.YB)(),S=(0,s.useCallback)((async e=>{const t=v(),s=await g.getToken();var r;Z((r={limit:e?.limit??h,offset:e?.offset??b,token:s,sso:t?.sso,groupId:a},{type:d.t5,payload:n.Sx(r),meta:r}))}),[h,b]);(0,s.useEffect)((()=>{S({limit:h,offset:0})}),[]);const T=[{title:M.formatMessage(f.Z.name),orderBy:"name"},{title:M.formatMessage(f.Z.description),orderBy:"description"},{title:M.formatMessage(f.Z.clientId),orderBy:"clientId"},{title:M.formatMessage(f.Z.owner),orderBy:"owner"},{title:M.formatMessage(f.Z.timeCreated),orderBy:"timeCreated"}];return r().createElement(m.M,{className:"rbac-service-accounts-list",columns:T,isSelectable:!0,rows:(N=y,O=e,N?.reduce(((e,t)=>[...e,{uuid:t.uuid,title:t.name,cells:[t.name,t.description,t.clientId,t.createdBy,r().createElement(s.Fragment,{key:`${t.name}-modified`},r().createElement(l.Z,{date:t.createdAt,type:(0,o.mh)(t.createdAt)}))],selected:Boolean(O&&O.find((e=>e.uuid===t.uuid)))||t.assignedToSelectedGroup,disableSelection:t.assignedToSelectedGroup}]),[])),data:y,fetchData:S,isLoading:I,pagination:{limit:h,offset:b,...E===n.Xu?{count:b+y.length}:{}},paginationProps:{toggleTemplate:({firstIndex:e,lastIndex:t})=>r().createElement(r().Fragment,null,r().createElement("b",null,e," - ",t)," ","of ",r().createElement("b",null,E===n.Xu?b+y.length:"many")),isCompact:!0},checkedRows:e,setCheckedItems:t,titlePlural:M.formatMessage(f.Z.serviceAccounts).toLowerCase(),titleSingular:M.formatMessage(f.Z.serviceAccount),emptyProps:{title:M.formatMessage(f.Z.noServiceAccountsFound),description:[M.formatMessage(f.Z.contactServiceTeamForAccounts),""]},tableId:"group-add-accounts",ouiaId:"group-add-accounts"});var N,O},v=g},68397:(e,t,a)=>{"use strict";a.d(t,{Z:()=>V});var s=a(66029),r=a.n(s),n=a(86706),i=a(39138),o=a.n(i),c=a(25387),l=a(45697),u=a.n(l),m=a(62012),d=a(97246),f=a(64756),p=a(60063),g=a(31055),v=a(81599),y=a(78173),E=a(94229),h=a(79222),b=a(94269),I=a(23539),Z=a(85044),M=a(79332),S=a(85998),T=a(46818),N=a(7732),O=a(91693),k=a.n(O),C=a(77029),x=a.n(C),A=a(29301),_=a(24869),R=a(74982),F=a(23340),w=a(2550),B=a(86601),L=a(78596),D=a(11549),P=a(14289),j=a(55140);const G=({isOrgAdmin:e})=>{const t=(0,c.YB)();return e?r().createElement(s.Fragment,null,r().createElement(k(),{key:"yes-icon",className:"pf-u-mr-sm"}),r().createElement("span",{key:"yes"},t.formatMessage(w.Z.yes))):r().createElement(s.Fragment,null,r().createElement(x(),{key:"no-icon",className:"pf-u-mr-sm"}),r().createElement("span",{key:"no"},t.formatMessage(w.Z.no)))};G.propTypes={isOrgAdmin:u().bool};const U=({isOrgAdmin:e,userId:t,isDisabled:a,toggleUserIsOrgAdminStatus:n})=>{const[i,o]=(0,s.useState)(!1),l=(0,c.YB)(),u=[r().createElement(Z.h,{key:`is-admin-dropdown-item-${t}`,componentID:"yes"},l.formatMessage(w.Z.yes)),r().createElement(Z.h,{key:`is-not-admin-dropdown-item-${t}`,componentID:"no"},l.formatMessage(w.Z.no))];return r().createElement(M.L,{id:`is-admin-dropdown-${t}`,key:`is-admin-dropdown-${t}`,onSelect:e=>{n({yes:!0,no:!1}[e?.target?.id],null,{userId:t}),o(!1)},toggle:r().createElement(S.Z,{id:`is-admin-dropdown-toggle-${t}`,key:`is-admin-dropdown-toggle-${t}`,isDisabled:a,onToggle:e=>{o(e)}},e?l.formatMessage(w.Z.yes):l.formatMessage(w.Z.no)),isOpen:i,dropdownItems:u})};U.propTypes={isOrgAdmin:u().bool,userId:u().string,isDisabled:u().bool,toggleUserIsOrgAdminStatus:u().func};const q=({selectedUsers:e,setSelectedUsers:t,userLinks:a,usesMetaInURL:i,displayNarrow:l,props:u})=>{const O=(0,c.YB)(),k=(0,m.useNavigate)(),C=(0,m.useLocation)(),x=(0,n.useDispatch)(),[q,V]=(0,s.useState)([]),[H,$]=(0,s.useState)(!1),[Y,z]=(0,s.useState)(!1),[X,W]=(0,s.useState)(!1),{orgAdmin:K}=(0,s.useContext)(B.Z),Q=(0,L.Z)(),J=(0,s.useRef)(null),ee=K,te=(0,j.Z)(),[ae,se]=(0,s.useState)({}),[re,ne]=(0,s.useState)("");let ie=(0,n.useSelector)((({userReducer:{users:e}})=>({limit:(i?e.pagination.limit:e.meta.limit)??(K?R.HE:R.he).limit,offset:(i?e.pagination.offset:e.meta.offset)??(K?R.HE:R.he).offset,count:i?e.pagination.count:e.meta.count,redirected:i&&e.pagination.redirected})));const{users:oe,isLoading:ce,stateFilters:le}=(0,n.useSelector)((({userReducer:{users:{data:e,filters:t={}},isUserDataLoading:a}})=>({users:e?.map?.((e=>({...e,uuid:e.external_source_id}))),isLoading:a,stateFilters:C.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}}))),ue=(0,s.useCallback)((e=>x((0,p.uh)(e))),[x]),me=(e,a,s={})=>{const{limit:r,offset:n}=(0,R.rj)(C,k,ie),o=i?(0,F.aX)(C,k,["username","email","status"],Ee):{status:Ee.status},c={id:s.userId,is_org_admin:e};x((0,p.hO)(c)).then((()=>{he(o),t?t([]):V([]),ue({...(0,A.jl)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))},de=(e,a,s=[])=>{const{limit:r,offset:n}=(0,R.rj)(C,k,ie),o=i?(0,F.aX)(C,k,["username","email","status"],Ee):{status:Ee.status},c=s.map((t=>({id:t?.uuid||t?.external_source_id,is_active:e})));x((0,p.eD)(c)).then((()=>{he(o),t?t([]):V([]),ue({...(0,A.jl)({limit:r,offset:n,filters:o}),usesMetaInURL:i})})).catch((e=>{console.error(e)}))};(0,s.useEffect)((()=>{te.auth.getUser().then((e=>se(e))),te.auth.getToken().then((e=>ne(e)))}),[]);const fe=e=>e!=ae?.identity?.internal?.account_id,pe=(0,s.useCallback)((e=>x((0,p.an)(e))),[x]),ge=[{title:O.formatMessage(l?w.Z.orgAdmin:w.Z.orgAdministrator),key:"org-admin",transforms:[T.P8]},{title:O.formatMessage(w.Z.username),key:"username",transforms:[N.p]},{title:O.formatMessage(w.Z.email)},{title:O.formatMessage(w.Z.firstName),transforms:[T.P8]},{title:O.formatMessage(w.Z.lastName),transforms:[T.P8]},{title:O.formatMessage(w.Z.status),transforms:[T.P8]}],[ve,ye]=(0,s.useState)({index:1,direction:"asc"}),[Ee,he]=(0,s.useState)(i?le:{username:"",email:"",status:[O.formatMessage(w.Z.active)]});return(0,s.useEffect)((()=>{i&&(0,R.oG)(C,k,ie.limit,ie.offset)}),[ie.offset,ie.limit,ie.count,ie.redirected]),(0,s.useEffect)((()=>{const{limit:e,offset:t}=i?(0,R.rj)(C,k,ie):ie,a=i?(0,F.aX)(C,k,["username","email","status"],Ee):{status:Ee.status};he(a),ue({...(0,A.jl)({limit:e,offset:t,filters:a}),usesMetaInURL:i})}),[]),(0,s.useEffect)((()=>{i&&((0,R.Zc)(C)||(0,R.oG)(C,k,ie.limit,ie.offset),Object.values(Ee).some((e=>e?.length>0))&&!(0,F.qF)(C,Object.keys(Ee))&&(0,F.aX)(C,k,Object.keys(Ee),Ee))})),r().createElement(r().Fragment,null,r().createElement(E.Modal,{title:O.formatMessage(w.Z.deactivateUsersConfirmationModalTitle),titleIconVariant:"warning",description:O.formatMessage(w.Z.deactivateUsersConfirmationModalDescription),variant:E.ModalVariant.medium,isOpen:H,footer:r().createElement(I.Stack,{hasGutter:!0},r().createElement(I.StackItem,null,r().createElement(b.Checkbox,{label:O.formatMessage(w.Z.deactivateUsersConfirmationModalCheckboxText),isChecked:Y,onChange:e=>{z(e)},id:"deactivateUsersConfirmationCheckbox",name:"deactivate-users-confirmation-checkbox"})),r().createElement(I.StackItem,null,r().createElement(g.Button,{key:"confirm-deactivate-users",ouiaId:"danger-confirm-deactivate-users-button",isDisabled:0===q.length||!Y,variant:"danger",onClick:()=>{de(!1,0,q),$(!1),z(!1)}},O.formatMessage(w.Z.deactivateUsersConfirmationButton)),r().createElement(g.Button,{id:"deactivate-users-confirmation-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:()=>{$(!1)}},O.formatMessage(w.Z.cancel)))),onClose:()=>{$(!1)}},r().createElement(h.List,{isPlain:!0,isBordered:!0},q.map((e=>r().createElement(h.ListItem,{key:e.uuid},e.label))))),r().createElement(d.M,{toolbarChildren:ee&&!l?()=>{const e=[r().createElement(Z.h,{key:"activate-users-dropdown-item",componentID:"activate"},O.formatMessage(w.Z.activateUsersButton)),r().createElement(Z.h,{key:"deactivate-users-dropdown-item",componentID:"deactivate"},O.formatMessage(w.Z.deactivateUsersButton))];return r().createElement(M.L,{onSelect:async e=>{"deactivate"===e?.target?.id?$(!0):de({activate:!0,deactivate:!1}[e?.target?.id],0,q),W(!1)},toggle:r().createElement(S.Z,{id:"toolbar-dropdown-toggle",isDisabled:0===q.length,onToggle:e=>{W(e)}},O.formatMessage(w.Z.activateUsersButton)),isOpen:X,dropdownItems:e})}:()=>null,toolbarButtons:!ee||l||(0,A.TU)(re)?()=>[]:()=>[r().createElement(f.Z,{to:P.Z["invite-users"].link,key:"invite-users",className:"rbac-m-hide-on-sm"},r().createElement(g.Button,{ouiaId:"invite-users-button",variant:"primary","aria-label":"Invite users"},O.formatMessage(w.Z.inviteUsers))),...(0,D.Z)(Q)?[{label:O.formatMessage(w.Z.inviteUsers),onClick:()=>{k((0,f.n)(P.Z["invite-users"].link))}}]:[]],isCompact:!0,isSelectable:!0,borders:!1,columns:ge,rows:((e,t,a=[])=>t?t.reduce(((t,{external_source_id:s,username:n,is_active:i,email:c,first_name:u,last_name:m,is_org_admin:d})=>[...t,{uuid:s,cells:[{title:ee&&!l?r().createElement(U,{isOrgAdmin:d,userId:s,isDisabled:!ee||ae?.identity?.internal?.account_id==s,toggleUserIsOrgAdminStatus:me}):r().createElement(G,{isOrgAdmin:d}),props:{"data-is-active":d}},{title:e?r().createElement(f.Z,{to:P.Z["user-detail"].link.replace(":username",n)},n.toString()):l?r().createElement("span",{title:n},o()(n,{length:25})):n},{title:l?r().createElement("span",{title:c},o()(c,{length:25})):c},u,m,{title:ee&&!l?r().createElement(v.Switch,{key:"status",isDisabled:!ee||ae?.identity?.internal?.account_id==s,label:O.formatMessage(w.Z.active),labelOff:O.formatMessage(w.Z.inactive),isChecked:i,onChange:(e,t)=>{de(e,0,[{external_source_id:s,is_active:i}])}}):r().createElement(y.Label,{key:"status",color:i?"green":"grey"},O.formatMessage(i?w.Z.active:w.Z.inactive)),props:{"data-is-active":i}}],selected:Boolean(a?.find?.((({uuid:e})=>e===s))),disableSelection:l?void 0:!fe(s)}]),[]):[])(a,oe,e||q),sortBy:ve,onSort:(e,t,a)=>{const s=`${"desc"===a?"-":""}${ge[t-1].key}`;ye({index:t,direction:a}),ue({...ie,filters:Ee,usesMetaInURL:i,orderBy:s})},data:oe,ouiaId:"users-table",fetchData:e=>{const t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:Ee.status,{username:a,email:s,count:r,limit:n,offset:o,orderBy:c}=e;ue({...(0,A.jl)({count:r,limit:n,offset:o,orderBy:c,filters:{username:a,email:s,status:t}}),usesMetaInURL:i}).then((()=>{J?.current?.focus()})),i&&(0,F.MS)(C,k,{username:a,email:s,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:({username:e,email:t,status:a})=>{var s;s={username:void 0===e?Ee.username:e,email:void 0===t?Ee.email:t,status:void 0===a||a===Ee.status?Ee.status:a},i&&pe(s),he({username:"",...s})},isLoading:ce,pagination:ie,checkedRows:e||q,setCheckedItems:e=>{t?t((t=>e(t).filter((e=>l?e:e?.uuid!=ae?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e}))))):V((t=>e(t).filter((e=>l?e:e?.uuid!=ae?.identity?.internal?.account_id)).map((({uuid:e,username:t})=>({uuid:e,label:t||e})))))},rowWrapper:_.Z,titlePlural:O.formatMessage(w.Z.users).toLowerCase(),titleSingular:O.formatMessage(w.Z.user),filters:[{key:"username",value:Ee.username,placeholder:O.formatMessage(w.Z.filterByKey,{key:O.formatMessage(w.Z.username).toLowerCase()}),innerRef:J},{key:"email",value:Ee.email,placeholder:O.formatMessage(w.Z.filterByKey,{key:O.formatMessage(w.Z.email).toLowerCase()}),innerRef:J},{key:"status",value:Ee.status,label:O.formatMessage(w.Z.status),type:"checkbox",items:[{label:O.formatMessage(w.Z.active),value:"Active"},{label:O.formatMessage(w.Z.inactive),value:"Inactive"}]}],tableId:"users-list",...u}),r().createElement(s.Suspense,null,r().createElement(m.Outlet,{context:{[P.Z["invite-users"].path]:{fetchData:()=>ue({...ie,filters:Ee,usesMetaInURL:i})}}})))};q.propTypes={displayNarrow:u().bool,users:u().array,searchFilter:u().string,setSelectedUsers:u().func,selectedUsers:u().array,userLinks:u().bool,props:u().object,usesMetaInURL:u().bool},q.defaultProps={displayNarrow:!1,users:[],userLinks:!1,usesMetaInURL:!1};const V=q},10113:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Z});var s=a(66029),r=a.n(s),n=a(86706),i=a(45697),o=a.n(i),c=a(62012),l=a(25387),u=a(46818),m=a(7732),d=a(29301),f=a(60063),p=a(97246),g=a(24869),v=a(86601),y=a(74982),E=a(23340),h=a(2550),b=a(39820);const I=({selectedUsers:e,setSelectedUsers:t,userLinks:a,usesMetaInURL:i,displayNarrow:o,props:I})=>{const Z=(0,l.YB)(),M=(0,c.useNavigate)(),S=(0,c.useLocation)(),T=(0,n.useDispatch)(),{orgAdmin:N}=(0,s.useContext)(v.Z),O=(0,s.useRef)(null);let k=(0,n.useSelector)((({userReducer:{users:e}})=>({limit:(i?e.pagination.limit:e.meta.limit)??(N?y.HE:y.he).limit,offset:(i?e.pagination.offset:e.meta.offset)??(N?y.HE:y.he).offset,count:i?e.pagination.count:e.meta.count,redirected:i&&e.pagination.redirected})));const{users:C,isLoading:x,stateFilters:A}=(0,n.useSelector)((({userReducer:{users:{data:e,filters:t={}},isUserDataLoading:a}})=>({users:e?.map?.((e=>({...e,uuid:e.username}))),isLoading:a,stateFilters:S.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}}))),_=(0,s.useCallback)((e=>T((0,f.uh)(e))),[T]),R=(0,s.useCallback)((e=>T((0,f.an)(e))),[T]),F=[{title:Z.formatMessage(o?h.Z.orgAdmin:h.Z.orgAdministrator),key:"org-admin",transforms:[u.P8]},{title:Z.formatMessage(h.Z.username),key:"username",transforms:[m.p]},{title:Z.formatMessage(h.Z.email)},{title:Z.formatMessage(h.Z.firstName),transforms:[u.P8]},{title:Z.formatMessage(h.Z.lastName),transforms:[u.P8]},{title:Z.formatMessage(h.Z.status),transforms:[u.P8]}],[w,B]=(0,s.useState)({index:1,direction:"asc"}),[L,D]=(0,s.useState)(i?A:{username:"",email:"",status:[Z.formatMessage(h.Z.active)]});return(0,s.useEffect)((()=>{i&&(0,y.oG)(S,M,k.limit,k.offset)}),[k.offset,k.limit,k.count,k.redirected]),(0,s.useEffect)((()=>{const{limit:e,offset:t}=(0,y.rj)(S,M,k),a=i?(0,E.aX)(S,M,["username","email","status"],L):{status:L.status};D(a),_({...(0,d.jl)({limit:e,offset:t,filters:a}),usesMetaInURL:i})}),[]),(0,s.useEffect)((()=>{i&&((0,y.Zc)(S)||(0,y.oG)(S,M,k.limit,k.offset),Object.values(L).some((e=>e?.length>0))&&!(0,E.qF)(S,Object.keys(L))&&(0,E.aX)(S,M,Object.keys(L),L))})),r().createElement(p.M,{isCompact:!0,isSelectable:!0,borders:!1,columns:F,rows:(0,b.H)(a,C,Z,e,!0),sortBy:w,onSort:(e,t,a)=>{const s=`${"desc"===a?"-":""}${F[t-1].key}`;B({index:t,direction:a}),_({...k,filters:L,usesMetaInURL:i,orderBy:s})},data:C,ouiaId:"users-table",fetchData:e=>{const t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:L.status,{username:a,email:s,count:r,limit:n,offset:o,orderBy:c}=e;_({...(0,d.jl)({count:r,limit:n,offset:o,orderBy:c,filters:{username:a,email:s,status:t}}),usesMetaInURL:i}).then((()=>{O?.current?.focus()})),i&&(0,E.MS)(S,M,{username:a,email:s,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:({username:e,email:t,status:a})=>{var s;s={username:void 0===e?L.username:e,email:void 0===t?L.email:t,status:void 0===a||a===L.status?L.status:a},i&&R(s),D({username:"",...s})},isLoading:x,pagination:k,checkedRows:e,setCheckedItems:e=>{t((t=>e(t).map((({uuid:e,username:t})=>({uuid:e,label:t||e})))))},rowWrapper:g.Z,titlePlural:Z.formatMessage(h.Z.users).toLowerCase(),titleSingular:Z.formatMessage(h.Z.user),filters:[{key:"username",value:L.username,placeholder:Z.formatMessage(h.Z.filterByKey,{key:Z.formatMessage(h.Z.username).toLowerCase()}),innerRef:O},{key:"email",value:L.email,placeholder:Z.formatMessage(h.Z.filterByKey,{key:Z.formatMessage(h.Z.email).toLowerCase()}),innerRef:O},{key:"status",value:L.status,label:Z.formatMessage(h.Z.status),type:"checkbox",items:[{label:Z.formatMessage(h.Z.active),value:"Active"},{label:Z.formatMessage(h.Z.inactive),value:"Inactive"}]}],tableId:"users-list",...I})};I.propTypes={displayNarrow:o().bool,users:o().array,searchFilter:o().string,setSelectedUsers:o().func.isRequired,selectedUsers:o().array,userLinks:o().bool,props:o().object,usesMetaInURL:o().bool},I.defaultProps={displayNarrow:!1,users:[],selectedUsers:[],setSelectedUsers:()=>{},userLinks:!1,usesMetaInURL:!1};const Z=I},95359:(e,t,a)=>{"use strict";a.d(t,{B:()=>l,L:()=>u});var s=a(94504),r=a(47625),n=a(60167),i=a(25387),o=a(2550),c=a(2034);const l=async(e,t,a)=>{const r=(0,i.Sn)(),l=(0,i.dp)({locale:n.S,messages:c},r);if(!e)return;if(e.length>150)throw l.formatMessage(o.Z.maxCharactersWarning,{number:150});const u=await(0,s.bt)({limit:10,offset:0,filters:{name:e},nameMatch:"exact"}).catch((e=>{console.error(e)}));if(a?u?.data?.some((e=>e[t]!==a)):u?.data?.length>0)throw l.formatMessage(o.Z.nameAlreadyTaken)},u=(0,r.Z)(((e,t,a)=>l(e,t,a)))},39820:(e,t,a)=>{"use strict";a.d(t,{H:()=>f});var s=a(66029),r=a.n(s),n=a(78173),i=a(91693),o=a.n(i),c=a(77029),l=a.n(c),u=a(2550),m=a(14289),d=a(64756);const f=(e,t=[],a,i=[],c=!1)=>t?.reduce(((t,{username:f,is_active:p,email:g,first_name:v,last_name:y,is_org_admin:E})=>[...t,{uuid:f,cells:[E?r().createElement(s.Fragment,null,r().createElement(o(),{key:"yes-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"yes"},a.formatMessage(u.Z.yes))):r().createElement(s.Fragment,null,r().createElement(l(),{key:"no-icon",className:"pf-v5-u-mr-sm"}),r().createElement("span",{key:"no"},a.formatMessage(u.Z.no))),{title:e?r().createElement(d.Z,{to:m.Z["user-detail"].link.replace(":username",f)},f.toString()):f.toString()},g,v,y,{title:r().createElement(n.Label,{key:"status",color:p?"green":"grey"},a.formatMessage(p?u.Z.active:u.Z.inactive)),props:{"data-is-active":p}}],selected:!!c&&Boolean(i?.find?.((({uuid:e})=>e===f)))}]),[])},47625:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(99166);const r=(e,t=250,a={onlyResolvesLast:!1})=>(0,s.Z)(e,t,a)},82472:()=>{},97890:()=>{},17657:()=>{},22972:()=>{},43389:()=>{},70347:()=>{},80598:()=>{},80897:()=>{},25238:()=>{},92084:()=>{},99624:()=>{},40209:()=>{},38299:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/4480.e7d141f1a3560441ec54cd2b4eeedb1e.js.map