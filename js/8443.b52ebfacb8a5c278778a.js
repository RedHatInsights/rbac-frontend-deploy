(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[8443,459],{35224:(e,t,a)=>{"use strict";a.d(t,{u:()=>f,D:()=>u});var r=a(65353),n=a(28416),o=a(86478),s=a(38296);const i=e=>{var{className:t,children:a,isLeftAligned:i}=e,l=(0,r.__rest)(e,["className","children","isLeftAligned"]);return n.createElement("div",Object.assign({className:(0,s.css)(o.default.tooltipContent,i&&o.default.modifiers.textAlignLeft,t)},l),a)};i.displayName="TooltipContent";const l=e=>{var{className:t}=e,a=(0,r.__rest)(e,["className"]);return n.createElement("div",Object.assign({className:(0,s.css)(o.default.tooltipArrow,t)},a))};l.displayName="TooltipArrow";var c=a(1774);const m={name:"--pf-v5-c-tooltip--MaxWidth",value:"18.75rem",var:"var(--pf-v5-c-tooltip--MaxWidth)"};var u,p=a(69121);!function(e){e.auto="auto",e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.topStart="top-start",e.topEnd="top-end",e.bottomStart="bottom-start",e.bottomEnd="bottom-end",e.leftStart="left-start",e.leftEnd="left-end",e.rightStart="right-start",e.rightEnd="right-end"}(u||(u={}));let d=1;const f=e=>{var{content:t,position:a="top",trigger:u="mouseenter focus",isVisible:f=!1,isContentLeftAligned:g=!1,enableFlip:b=!0,className:v="",entryDelay:h=300,exitDelay:y=300,appendTo:E=(()=>document.body),zIndex:x=9999,minWidth:T,maxWidth:Z=m.value,distance:N=15,aria:O="describedby",flipBehavior:M=["top","right","bottom","left","top","right","bottom"],id:C="pf-tooltip-"+d++,children:k,animationDuration:_=300,triggerRef:w,"aria-live":S=(w?"polite":"off"),onTooltipHidden:L=(()=>{})}=e,j=(0,r.__rest)(e,["content","position","trigger","isVisible","isContentLeftAligned","enableFlip","className","entryDelay","exitDelay","appendTo","zIndex","minWidth","maxWidth","distance","aria","flipBehavior","id","children","animationDuration","triggerRef","aria-live","onTooltipHidden"]);const I=u.includes("mouseenter"),A=u.includes("focus"),P=u.includes("click"),R="manual"===u,[B,D]=n.useState(!1),F=n.createRef();n.useEffect((()=>{f?W():V()}),[f]);const W=()=>{D(!0)},V=()=>{D(!1)},$={top:o.default.modifiers.top,bottom:o.default.modifiers.bottom,left:o.default.modifiers.left,right:o.default.modifiers.right,"top-start":o.default.modifiers.topLeft,"top-end":o.default.modifiers.topRight,"bottom-start":o.default.modifiers.bottomLeft,"bottom-end":o.default.modifiers.bottomRight,"left-start":o.default.modifiers.leftTop,"left-end":o.default.modifiers.leftBottom,"right-start":o.default.modifiers.rightTop,"right-end":o.default.modifiers.rightBottom},G=Z!==m.value,z=n.createElement("div",Object.assign({"aria-live":S,className:(0,s.css)(o.default.tooltip,v),role:"tooltip",id:C,style:{maxWidth:G?Z:null},ref:F},j),n.createElement(l,null),n.createElement(i,{isLeftAligned:g},t));return n.createElement(p.Popper,{trigger:"none"!==O&&B?"describedby"===O&&k&&k.props&&!k.props["aria-describedby"]?n.cloneElement(k,{"aria-describedby":C}):"labelledby"===O&&k.props&&!k.props["aria-labelledby"]?n.cloneElement(k,{"aria-labelledby":C}):k:k,triggerRef:w,popper:z,popperRef:F,minWidth:void 0!==T?T:"revert",appendTo:E,isVisible:B,positionModifiers:$,distance:N,placement:a,onMouseEnter:I&&W,onMouseLeave:I&&V,onPopperMouseEnter:I&&W,onPopperMouseLeave:I&&V,onFocus:A&&W,onBlur:A&&V,onDocumentClick:P&&((e,t)=>{B?V():e.target===t&&W()}),onDocumentKeyDown:R?null:e=>{R||e.key===c.yu.Escape&&B&&V()},onTriggerEnter:R?null:e=>{e.key===c.yu.Enter&&(B?V():W())},enableFlip:b,zIndex:x,flipBehavior:M,animationDuration:_,entryDelay:h,exitDelay:y,onHidden:L})};f.displayName="Tooltip"},41435:(e,t,a)=>{"use strict";a.d(t,{Dl:()=>s,dw:()=>n,e4:()=>i,ir:()=>r});var r,n,o=a(28416);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const s=o.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),i=o.createContext({keyHandler:null,sendRef:null})},86478:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r}),a(49854);const r={modifiers:{top:"pf-m-top",topLeft:"pf-m-top-left",topRight:"pf-m-top-right",bottom:"pf-m-bottom",bottomLeft:"pf-m-bottom-left",bottomRight:"pf-m-bottom-right",left:"pf-m-left",leftTop:"pf-m-left-top",leftBottom:"pf-m-left-bottom",right:"pf-m-right",rightTop:"pf-m-right-top",rightBottom:"pf-m-right-bottom",textAlignLeft:"pf-m-text-align-left"},themeDark:"pf-v5-theme-dark",tooltip:"pf-v5-c-tooltip",tooltipArrow:"pf-v5-c-tooltip__arrow",tooltipContent:"pf-v5-c-tooltip__content"}},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(85893),n=a(94184),o=a.n(n),s=a(78956);const i=function(e){var t=e.className,a=e.title,n=o()(t);return(0,r.jsx)(s.Title,{headingLevel:"h1",size:"2xl",className:n,"widget-type":"InsightsPageHeaderTitle",children:a})}},7876:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(85893),n=a(94184),o=a.n(n),s=function(){return s=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};const i=function(e){var t,a=e.type,n=e.children,i=e.className,l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["type","children","className"]),c=o()(i,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",s({},l,{className:c,children:[" ",n," "]}))}},27561:(e,t,a)=>{var r=a(67990),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},67990:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},23279:(e,t,a)=>{var r=a(13218),n=a(7771),o=a(14841),s=Math.max,i=Math.min;e.exports=function(e,t,a){var l,c,m,u,p,d,f=0,g=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var a=l,r=c;return l=c=void 0,f=t,u=e.apply(r,a)}function y(e){var a=e-d;return void 0===d||a>=t||a<0||b&&e-f>=m}function E(){var e=n();if(y(e))return x(e);p=setTimeout(E,function(e){var a=t-(e-d);return b?i(a,m-(e-f)):a}(e))}function x(e){return p=void 0,v&&l?h(e):(l=c=void 0,u)}function T(){var e=n(),a=y(e);if(l=arguments,c=this,d=e,a){if(void 0===p)return function(e){return f=e,p=setTimeout(E,t),g?h(e):u}(d);if(b)return clearTimeout(p),p=setTimeout(E,t),h(d)}return void 0===p&&(p=setTimeout(E,t)),u}return t=o(t)||0,r(a)&&(g=!!a.leading,m=(b="maxWait"in a)?s(o(a.maxWait)||0,t):m,v="trailing"in a?!!a.trailing:v),T.cancel=function(){void 0!==p&&clearTimeout(p),f=0,l=d=c=p=void 0},T.flush=function(){return void 0===p?u:x(n())},T}},7771:(e,t,a)=>{var r=a(55639);e.exports=function(){return r.Date.now()}},14841:(e,t,a)=>{var r=a(27561),n=a(13218),o=a(33448),s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=i.test(e);return a||l.test(e)?c(e.slice(2),a?2:8):s.test(e)?NaN:+e}},84414:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(62012),n=a(64756);const o=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,n.n)(a,e),r)}},82617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(28416),n=a.n(r),o=a(45697),s=a.n(o),i=a(62012),l=a(75629),c=a(12849);const m=e=>e?n().createElement(l.Breadcrumb,null,Object.values(e).map(((e,t)=>e.title?n().createElement(l.BreadcrumbItem,{key:e.title,isActive:e.isActive},e.to&&n().createElement(i.NavLink,{end:!0,to:e.to},e.title)||e.title):n().createElement(c.Vj,{key:t})))):null;m.propTypes={breadcrumbs:s().object};const u=m},13851:(e,t,a)=>{"use strict";a.d(t,{Q:()=>h,y:()=>y});var r=a(28416),n=a.n(r),o=a(45697),s=a.n(o),i=a(64380),l=a(86304),c=a(12849),m=a(82617),u=a(85893),p=a(94184),d=a.n(p);const f=n().createContext("light");var g=function(){return g=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},g.apply(this,arguments)};const b=function(e){var t=e.className,a=e.children,r=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["className","children"]),n=d()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section");return(0,u.jsx)(f.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var s=d()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,u.jsx)("section",g({},r,{className:"".concat(n," ").concat(s),"widget-type":"InsightsPageHeader",children:a}))}})};var v=a(39173);const h=({children:e,breadcrumbs:t})=>n().createElement(r.Fragment,null,t&&n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb"},n().createElement(m.Z,{...t})),n().createElement(b,{className:"rbac-page-header"},e));h.propTypes={children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired,breadcrumbs:s().array,paddingBottom:s().bool},h.defaultProps={paddingBottom:!1};const y=({title:e,renderTitleTag:t,description:a,children:o})=>n().createElement(r.Fragment,null,n().createElement(l.Flex,null,n().createElement(l.FlexItem,{className:"pf-v5-u-mb-sm"},n().createElement(v.Z,{title:e||n().createElement(c.h2,null),className:"rbac-page-header__title"})),n().createElement(l.FlexItem,{alignSelf:{modifier:"alignSelfCenter"}},t&&t())),a&&n().createElement(i.TextContent,{className:"rbac-page-header__description"},"string"==typeof a?n().createElement(i.Text,{component:i.TextVariants.p},a):a),o);y.propTypes={title:s().node,renderTitleTag:s().func,description:s().node,children:s().oneOfType([s().node,s().arrayOf(s().node)])}},27997:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var r=a(28416),n=a.n(r),o=a(86706),s=a(62012),i=a(25387),l=a(31055),c=a(78173),m=a(23539),u=a(64380),p=a(56869),d=a(75863),f=a(21081),g=a(49004),b=a(34844),v=a(91693),h=a.n(v),y=a(77029),E=a.n(y),x=a(55140),T=a(23279),Z=a.n(T),N=a(7876),O=a(62410),M=a(32819),C=a(84414),k=a(64756),_=a(82617),w=a(66180),S=a(86601),L=a(2550),j=a(14289),I=a(12849),A=a(97246),P=a(13851),R=a(13563),B=a(2981),D=a(29301),F=a(77044),W=a(74982);let V;const $=()=>{const e=(0,i.YB)(),t=(0,C.Z)(),a=(0,o.useDispatch)(),{username:v}=(0,s.useParams)(),[y,T]=(0,r.useState)(""),[$,G]=(0,r.useState)({}),[z,U]=(0,r.useState)(!1),[H,Q]=(0,r.useState)([]),q=(0,x.Z)(),{roles:K,isLoadingRoles:Y,rolesWithAccess:J,user:X,isLoadingUsers:ee,userExists:te,adminGroup:ae}=(0,o.useSelector)((({roleReducer:{error:e,roles:t,isLoading:a,rolesWithAccess:r},userReducer:{users:{data:n},isUserDataLoading:o},groupReducer:{adminGroup:s}})=>({adminGroup:s,roles:t,isLoadingRoles:a,rolesWithAccess:r,user:n&&n.filter((e=>e.username===v))[0],isLoadingUsers:o,userExists:e!==D.VG}))),{orgAdmin:re,userAccessAdministrator:ne}=(0,r.useContext)(S.Z),oe=re||ne,se=e=>a((0,R.vd)(e));(0,r.useEffect)((()=>(q.appObjectId(v),a((0,F.fB)({chrome:q})),a((0,B.u)({...W.he,limit:0,filters:{username:v}})),se({limit:20,offset:0,username:v}),U(!0),se({limit:20,offset:0,addFields:["groups_in"],username:v}).then((()=>U(!1))),V=Z()(((e,t,a,r,n)=>se({limit:e,offset:t,displayName:a,addFields:r,username:n})),500),()=>q.appObjectId(void 0))),[]);const ie=[e.formatMessage(L.Z.roles),{title:e.formatMessage(L.Z.groups),cellTransforms:[p.z]},{title:e.formatMessage(L.Z.permissions),cellTransforms:[p.z]},{title:e.formatMessage(L.Z.lastModified)}],le=[{title:e.formatMessage(L.Z.users),to:(0,k.n)(j.Z.users.link)},{title:te?v:e.formatMessage(L.Z.invalidUser),isActive:!0}];return n().createElement(r.Fragment,null,te?n().createElement(m.Stack,null,n().createElement(m.StackItem,null,n().createElement(P.Q,{breadcrumbs:le},n().createElement(P.y,{title:v,renderTitleTag:()=>ee?n().createElement(M.Z,{size:"xs",className:"rbac-c-user__label-skeleton"}):n().createElement(c.Label,{color:X?.is_active&&"green"},e.formatMessage(X?.is_active?L.Z.active:L.Z.inactive))},!ee&&X?n().createElement(r.Fragment,null,n().createElement(u.TextContent,null,`${e.formatMessage(L.Z.orgAdministrator)}: `,X?.is_org_admin?n().createElement(h(),{key:"yes-icon",className:"pf-v5-u-mx-sm"}):n().createElement(E(),{key:"no-icon",className:"pf-v5-u-mx-sm"}),e.formatMessage(X?.is_org_admin?L.Z.yes:L.Z.no)),X?.email&&n().createElement(u.Text,{component:u.TextVariants.p},`${e.formatMessage(L.Z.email)}: ${X.email}`),X?.username&&n().createElement(u.TextContent,null,n().createElement(u.Text,{component:u.TextVariants.p},`${e.formatMessage(L.Z.username)}: ${X.username}`))):null))),n().createElement(m.StackItem,null,n().createElement(N.Z,{type:"content",className:"rbac-c-user-roles"},n().createElement(A.M,{columns:ie,isExpandable:!0,onExpand:(e,t,r,n,o)=>{n?G({...$,[o.uuid]:-1}):(G({...$,[o.uuid]:r}),2===r&&a((0,R.sv)(o.uuid)))},rows:((t,a,r)=>t?t.reduce(((t,{uuid:o,display_name:s,groups_in:i=[],modified:l,accessCount:c},m)=>[...t,{uuid:o,cells:[{title:s,props:{component:"th",isOpen:!1}},{title:z?n().createElement(M.Z,{size:M.i.xs}):i.length,props:{isOpen:1===$[o]}},{title:c,props:{isOpen:2===$[o]}},{title:n().createElement(O.Z,{type:(0,D.mh)(l),date:l})}]},{uuid:`${o}-groups`,parent:3*m,compoundParent:1,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:i?.length>0?n().createElement(f.i,{ouiaId:"groups-in-role-nested-table","aria-label":"Simple Table",variant:d.B.compact,cells:[e.formatMessage(L.Z.name),e.formatMessage(L.Z.description)," "],rows:i.map((t=>({cells:[{title:n().createElement(k.Z,{to:j.Z["group-detail"].link.replace(":groupId",t.uuid)},t.name)},t.description,{title:r.uuid===t.uuid?null:n().createElement(k.Z,{to:j.Z["user-add-group-roles"].link.replace(":username",a).replace(":groupId",t.uuid),state:{name:t.name}},e.formatMessage(L.Z.addRoleToThisGroup)),props:{className:"pf-v5-u-text-align-right"}}]})))},n().createElement(g.x,null),n().createElement(b.R,null)):n().createElement(u.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},z?e.formatMessage(L.Z.loading):e.formatMessage(L.Z.noGroups))}]},{uuid:`${o}-groups`,parent:3*m,compoundParent:2,cells:[{props:{colSpan:4,className:"pf-m-no-padding"},title:J&&J[o]?J[o].access?.length>0?n().createElement(f.i,{"aria-label":"Simple Table",ouiaId:"permissions-in-role-nested-table",variant:d.B.compact,cells:[e.formatMessage(L.Z.application),e.formatMessage(L.Z.resourceType),e.formatMessage(L.Z.operation)],rows:J[o].access.map((e=>({cells:e.permission.split(":")})))},n().createElement(g.x,null),n().createElement(b.R,null)):n().createElement(u.Text,{className:"pf-v5-u-mx-lg pf-v5-u-my-sm"},e.formatMessage(L.Z.noPermissions)):n().createElement(I.Wi,{items:3,isCompact:!0})}]}]),[]):[])(K.data,v,ae),data:K.data,filterValue:y,ouiaId:"user-details-table",fetchData:({limit:e,offset:t,name:a})=>{V(e,t,a,["groups_in"],v)},setFilterValue:({name:e})=>T(e),isLoading:Y,toolbarButtons:()=>[...oe?[n().createElement(k.Z,{to:j.Z["add-user-to-group"].link.replace(":username",v),key:"add-user-to-group",className:"rbac-m-hide-on-sm"},n().createElement(l.Button,{ouiaId:"add-user-to-group-button",variant:"primary","aria-label":"Add user to a group"},e.formatMessage(L.Z.addUserToGroup))),{label:e.formatMessage(L.Z.addUserToGroup),onClick:()=>{t(j.Z["add-user-to-group"].link.replace(":username",v))}}]:[]],pagination:K.meta,filterPlaceholder:e.formatMessage(L.Z.roleName).toLowerCase(),titlePlural:e.formatMessage(L.Z.roles).toLowerCase(),titleSingular:e.formatMessage(L.Z.role).toLowerCase(),tableId:"user"}),n().createElement(r.Suspense,null,n().createElement(s.Outlet,{context:{username:v,selectedRoles:H,setSelectedRoles:Q,closeUrl:j.Z["user-detail"].link.replace(":username",v),addRolesToGroup:(e,t)=>a((0,F.Wj)(e,t))}}))))):n().createElement(r.Fragment,null,n().createElement("section",{className:"pf-v5-c-page__main-breadcrumb pf-v5-u-pb-md"},n().createElement(_.Z,{...le})),n().createElement(w.Z,{title:e.formatMessage(L.Z.userNotFound),description:[e.formatMessage(L.Z.userNotFoundDescription,{username:v})],actions:[n().createElement(l.Button,{key:"back-button",className:"pf-v5-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:()=>t(-1)},e.formatMessage(L.Z.backToPreviousPage))]})))}}}]);
//# sourceMappingURL=../sourcemaps/8443.757de01eba2de5bc77a06e94286340f2.js.map