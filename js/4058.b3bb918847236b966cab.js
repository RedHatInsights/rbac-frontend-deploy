"use strict";(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[4058,459],{41435:(e,t,a)=>{a.d(t,{Dl:()=>o,dw:()=>n,e4:()=>c,ir:()=>r});var r,n,s=a(28416);!function(e){e.right="right",e.left="left"}(r||(r={})),function(e){e.up="up",e.down="down"}(n||(n={}));const o=s.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),c=s.createContext({keyHandler:null,sendRef:null})},7876:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(85893),n=a(94184),s=a.n(n),o=function(){return o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};const c=function(e){var t,a=e.type,n=e.children,c=e.className,l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["type","children","className"]),i=s()(c,((t={})["ins-l-".concat(a)]=void 0!==a,t));return(0,r.jsxs)("section",o({},l,{className:i,children:[" ",n," "]}))}},84414:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(62012),n=a(64756);const s=e=>{const t=(0,r.useNavigate)();return(a,r)=>t((0,n.n)(a,e),r)}},92057:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(28416),n=a.n(r),s=a(86706),o=a(25387),c=a(62012),l=a(5904),i=a(74503),u=a(31055),d=a(88094),m=a(64380),p=a(7876),g=a(62410),f=a(74982),v=a(97246),h=a(77044),Z=a(29301),b=a(75614),C=a(86601),y=a(64756),A=a(84414),k=a(2550),E=a(14289);const I=(e=[],t=[])=>e?.reduce(((e,{uuid:a,name:s,clientID:o,owner:c,time_created:l})=>[...e,{uuid:a,title:s,cells:[s,o,c,n().createElement(r.Fragment,{key:`${s}-modified`},n().createElement(g.Z,{date:l,type:(0,Z.mh)(l)}))],selected:Boolean(t&&t.find((e=>e.uuid===a)))}]),[]),M=({groupReducer:{selectedGroup:e,systemGroup:t,groups:a}})=>({serviceAccounts:e.serviceAccounts?.data||[],pagination:{...f.he,...e?.serviceAccounts?.meta||{}},groupsPagination:a.pagination||a.meta,groupsFilters:a.filters,isLoading:e.serviceAccounts.isLoading,isAdminDefault:e.admin_default,systemGroupUuid:t?.uuid,group:e,platformDefault:e.platform_default}),S=()=>{const e=(0,o.YB)(),t=(0,s.useDispatch)(),a=(0,A.Z)(),{groupId:g}=(0,c.useParams)(),[f,Z]=(0,r.useState)(""),[S,w]=(0,r.useState)([]),{userAccessAdministrator:O,orgAdmin:P}=(0,r.useContext)(C.Z),x=(0,r.useRef)(P||O),{serviceAccounts:D,pagination:T,isLoading:N,isAdminDefault:j,systemGroupUuid:B,platformDefault:F}=(0,s.useSelector)(M),G=(e,a)=>t((0,h.Gr)(e,a)),L=[{title:e.formatMessage(k.Z.name)},{title:e.formatMessage(k.Z.clientId)},{title:e.formatMessage(k.Z.owner)},{title:e.formatMessage(k.Z.timeCreated)}],R=(0,r.useCallback)((()=>{g!==b.Cn?G(g,T):B&&G(B,T)}),[B,g]);return(0,r.useEffect)((()=>{R()}),[B]),(0,r.useEffect)((()=>{x.current=P||O}),[P,O]),n().createElement(n().Fragment,null,n().createElement(p.Z,{type:"content",id:"tab-service-accounts"},F?n().createElement(d.Card,null,n().createElement(d.CardBody,null,n().createElement(i.Bullseye,null,n().createElement(m.TextContent,null,n().createElement(m.Text,{component:m.TextVariants.h1},e.formatMessage(k.Z.noAccountsInDefaultAccess)))))):n().createElement(n().Fragment,null,n().createElement(l.Alert,{className:"rbac-service-accounts-alert",variant:"info",isInline:!0,isPlain:!0,title:e.formatMessage(k.Z.visitServiceAccountsPage,{link:n().createElement(y.Z,{to:"/service-accounts",linkBasename:"/iam"},e.formatMessage(k.Z.serviceAccountsPage))})}),n().createElement(v.M,{columns:L,isSelectable:!0,rows:I(D,S),data:D,filterValue:f,fetchData:e=>G(g,e),emptyFilters:{description:""},setFilterValue:({clientID:e})=>{void 0!==e&&Z(e)},isLoading:N,pagination:T,checkedRows:S,setCheckedItems:w,titlePlural:e.formatMessage(k.Z.serviceAccounts).toLowerCase(),titleSingular:e.formatMessage(k.Z.serviceAccount),toolbarButtons:()=>[n().createElement(y.Z,{className:"rbac-m-hide-on-sm",to:E.Z["group-add-service-account"].link.replace(":groupId",g),key:"add-to-group"},n().createElement(u.Button,{ouiaId:"add-service-account-button",variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add service account to group"},e.formatMessage(k.Z.addServiceAccount))),{label:e.formatMessage(k.Z.remove),props:{isDisabled:0===S.length},onClick:()=>{const e=(0,c.createSearchParams)();S.forEach((({name:t})=>e.append("name",t))),a({pathname:E.Z["group-service-accounts-remove-group"].link.replace(":groupId",g),search:e.toString()})}},{label:e.formatMessage(k.Z.addServiceAccount),props:{className:"rbac-m-hide-on-md"},onClick:()=>a(E.Z["group-add-service-account"].link.replace(":groupId",g))}],actionResolver:({uuid:t})=>[...x.current&&!j?[{title:e.formatMessage(k.Z.remove),onClick:()=>a({pathname:E.Z["group-service-accounts-remove-group"].link.replace(":groupId",g),search:(0,c.createSearchParams)({name:t}).toString()})}]:[]],emptyProps:{title:e.formatMessage(k.Z.noGroupAccounts),description:[e.formatMessage(j?k.Z.contactServiceTeamForAccounts:k.Z.addAccountsToThisGroup),""]},filters:[{key:"clientID",value:f}],tableId:"group-accounts",ouiaId:"group-accounts"}))),F?null:n().createElement(r.Suspense,null,n().createElement(c.Outlet,{context:{[E.Z["group-service-accounts-remove-group"].path]:{postMethod:e=>{w([]),a(E.Z["group-detail-service-accounts"].link.replace(":groupId",g)),e&&e.then?.(R)}},[E.Z["group-add-service-account"].path]:{postMethod:e=>{a(E.Z["group-detail-service-accounts"].link.replace(":groupId",g)),e&&e.then?.(R)}}}})))}}}]);
//# sourceMappingURL=../sourcemaps/4058.6c35c27abce6a5de9c8066874e615329.js.map