{"version":3,"sources":["webpack://insights-rbac-frontend/./src/presentational-components/shared/RemoveModal.scss","webpack://insights-rbac-frontend/./src/smart-components/common/warningModal.scss","webpack://insights-rbac-frontend/./src/smart-components/role/role-permissions.scss","webpack://insights-rbac-frontend/./src/smart-components/role/role.scss","webpack://insights-rbac-frontend/./src/helpers/group/group-helper.js","webpack://insights-rbac-frontend/./src/hooks/useIsMounted.js","webpack://insights-rbac-frontend/./src/presentational-components/shared/RemoveModal.js","webpack://insights-rbac-frontend/./src/redux/actions/group-actions.js","webpack://insights-rbac-frontend/./src/helpers/permission/permission-helper.js","webpack://insights-rbac-frontend/./src/redux/actions/permission-action.js","webpack://insights-rbac-frontend/./src/smart-components/common/ModalFormTemplate.js","webpack://insights-rbac-frontend/./src/presentational-components/shared/pf4-select-wrapper.js","webpack://insights-rbac-frontend/./src/smart-components/common/FormButtons.js","webpack://insights-rbac-frontend/./src/smart-components/common/form-renderer.js","webpack://insights-rbac-frontend/./src/smart-components/common/warningModal.js","webpack://insights-rbac-frontend/./src/smart-components/role/edit-role-modal.js","webpack://insights-rbac-frontend/./src/smart-components/role/remove-role-modal.js","webpack://insights-rbac-frontend/./src/smart-components/role/role-selectors.js","webpack://insights-rbac-frontend/./src/smart-components/role/role-permissions-table-helpers.js","webpack://insights-rbac-frontend/./src/smart-components/role/remove-permissions-modal.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-permissions/add-role-permission-view.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-permissions/add-role-permissions-summary-content.js","webpack://insights-rbac-frontend/./src/smart-components/role/add-role-permissions/add-role-permission-wizard.js","webpack://insights-rbac-frontend/./src/smart-components/role/role-permissions.js","webpack://insights-rbac-frontend/./src/smart-components/role/role.js","webpack://insights-rbac-frontend/./src/utilities/async-debounce.js","webpack://insights-rbac-frontend/./src/presentational-components/shared/RemoveModal.scss?6da9","webpack://insights-rbac-frontend/./src/smart-components/common/warningModal.scss?b4c8","webpack://insights-rbac-frontend/./src/smart-components/role/role-permissions.scss?1fa0","webpack://insights-rbac-frontend/./src/smart-components/role/role.scss?f8a1"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","id","groupApi","getGroupApi","fetchGroups","limit","offset","name","nameMatch","scope","username","uuid","roleNames","roleDiscriminator","orderBy","options","Promise","all","listGroups","insights","chrome","auth","getUser","groups","fetchGroup","getGroup","updateGroup","data","addGroup","createGroup","newGroup","ret","user_list","length","addPrincipalToGroup","principals","roles_list","addRoleToGroup","roles","removeGroups","uuids","map","deleteGroup","deletePrincipalsFromGroup","groupId","users","deletePrincipalFromGroup","join","addPrincipalsToGroup","fetchRolesForGroup","excluded","description","listRolesForGroup","undefined","deleteRolesFromGroup","deleteRoleFromGroup","addRolesToGroup","fetchPrincipalsForGroup","usernames","getPrincipalsFromGroup","query","isMounted","useRef","useEffect","current","RemoveModal","title","text","onClose","onSubmit","isOpen","confirmButtonLabel","withCheckbox","useState","checked","setChecked","className","variant","ModalVariant","actions","key","ouiaId","isDisabled","onClick","hasGutter","isFilled","isChecked","onChange","label","propTypes","PropTypes","defaultProps","type","ActionTypes","payload","GroupHelper","fetchSystemGroup","filterValue","apiProps","groupData","err","error","errors","status","source","message","detail","meta","notifications","fulfilled","dismissDelay","dismissable","rejected","addMembersToGroup","members","removeMembersFromGroup","pagination","fetchMembersForGroup","fetchAddRolesForGroup","removeRolesFromGroup","accessApi","getPermissionApi","listPermissions","application","resourceType","verb","permission","listPermissionOptions","field","exclude_globals","PermissionsHelper","fieldToAction","resource_type","expandSplats","resetExpandSplats","MODAL_FORM_IDENTIFIER","CustomFormWrapper","props","CustomButtons","saveLabel","cancelLabel","onCancel","useFormApi","pristine","invalid","validating","submitting","Button","form","ModalFormTemplate","ModalProps","alert","Modal","footer","showFormControls","FormWrapper","Select","input","isReadOnly","isRequired","rest","FormSelect","inputValue","selectOptions","find","value","createOptions","FormSelectOption","toString","FieldProvider","Pf4SelectWrapper","helperText","hideLabel","showError","touched","FormGroup","fieldId","isValid","helperTextInvalid","TextContent","Text","component","TextVariants","componentType","FormButtons","dirtyFieldsSinceLastSubmit","submitSucceeded","noChanges","ActionGroup","formProps","subscription","FormRenderer","formTemplateProps","componentMapper","componentTypes","TextField","Textarea","FormTemplate","WarningModal","onModalCancel","onConfirmCancel","customTitle","customDescription","size","validationPromise","idKey","fetchRoles","then","some","item","createEditRoleSchema","fields","validate","uniqueNameValidator","asyncDebounce","reject","EditRoleModal","routeMatch","cancelRoute","afterSubmit","useIsMounted","useRouteMatch","params","useHistory","replace","dispatch","useDispatch","validatorMapper","role","useSelector","state","roleSelector","initialValues","setInitialValues","addNotification","fetchRole","schema","updateRole","display_name","RemoveRoleModal","roleName","roleNameSelector","setIsDisabled","internalRoleName","setInternalRoleName","aria-label","header","style","fill","removeRole","prev","roleId","roleReducer","selectedRole","rolePermissionsReducerInitialState","defaultSettings","selectedPermissions","showRemoveModal","confirmDelete","deleteInfo","filters","applications","resources","operations","isToggled","SET_PAGINATION","SELECT_PERMISSIONS","SHOW_REMOVE_MODAL","SUBMIT_REMOVE_MODAL","INITIATE_REMOVE_PERMISSION","SET_FILTERS","SET_TOGGLED","INITIALIZE_ROLE","reducerHandlers","selection","count","rolePermissionsReducer","action","RemovePermissionsModal","columns","selector","permissionReducer","isLoading","operation","resource","isRecordLoading","permissions","baseRole","applicationOptions","resourceOptions","operationOptions","AddRolePermissionView","setSelectedRolePermissions","shallowEqual","fetchData","fetchOptions","batch","isCompact","borders","createRows","expanded","checkedRows","cells","selected","row","titlePlural","titleSingular","setCheckedItems","newSelection","isSelectable","AddRolePermissionSummaryContent","Stack","StackItem","Title","headingLevel","classnem","Grid","GridItem","span","index","AddRolePermissionWizard","setSelectedPermissions","cancelWarningVisible","setCancelWarningVisible","currentRoleID","setCurrentRoleID","history","steps","nextButtonText","cleanPermissions","resourceDefinitions","roleData","access","accessCount","goBack","Wizard","onSave","info","popover","ariaLabel","popoverProps","maxWidth","minWidth","transforms","cellWidth","removeModalText","plural","useReducer","internalDispatch","showResourceDefinitions","setShowResourceDefinitions","Object","keys","entries","reduce","split","includes","acc","a","showResDefinitions","filteredRows","filter","modified","removePermissions","permissionsToRemove","curr","removeRolePermissions","calculateSelected","0","emptyItem","sanitizedRole","filterItemOverflow","values","c","opened","selectedRows","appName","Fragment","Link","to","flatten","definition","attributeFilter","DateFormat","date","Boolean","actionResolver","system","_event","_rowId","slice","onShowMore","setFilterValue","toolbarButtons","multiplePermissionsSelected","routes","Route","exact","path","paths","placeholder","items","isDropdownOpen","setDropdownOpen","useParams","groupUuid","group","groupReducer","selectedGroup","appObjectId","dropdownItems","DropdownItem","breadcrumbs","loaded","isActive","Level","LevelItem","PageHeader","PageHeaderTitle","Dropdown","toggle","KebabToggle","onToggle","isPlain","position","fetchRolesWithPolicies","asyncFunction","debounceTime","onlyResolvesLast","awesomeDebouncePromise","api","content","__esModule","default","update","locals","hot","invalidate","oldLocals","accept","b","p","isEqualLocals","dispose"],"mappings":"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","file":"js/537.c86e9b9699d707a9c430.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-rbac__dialog--warning .ins-c-rbac__delete-icon{color:var(--pf-global--warning-color--100)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-wizard__cancel-warning-header{display:flex;align-items:center}.ins-c-wizard__cancel-warning-header--icon{fill:var(--pf-global--warning-color--100);margin-right:var(--pf-global--spacer--md)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-role__permissions .pf-c-content{padding-bottom:var(--pf-global--spacer--sm)}.ins-c-role__permissions .pf-c-content h1{font-weight:lighter}.ins-c-role__permissions .ins-c-text__disabled{color:var(--pf-global--Color--200)}.ins-m-resource-definitions .pf-c-modal-box__body{text-align:center;padding-top:var(--pf-global--spacer--4xl);padding-bottom:7rem}.ins-m-resource-definitions .pf-c-modal__alert{margin-bottom:var(--pf-global--spacer--sm)}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-role__action a{color:inherit;text-decoration:none}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { getGroupApi } from '../shared/user-login';\n\nconst groupApi = getGroupApi();\n\nexport async function fetchGroups({ limit, offset, name, nameMatch, scope, username, uuid, roleNames, roleDiscriminator, orderBy, options }) {\n  const [groups, auth] = await Promise.all([\n    groupApi.listGroups(limit, offset, name, nameMatch, scope, username, uuid, roleNames, roleDiscriminator, orderBy, options),\n    insights.chrome.auth.getUser(),\n  ]);\n  return {\n    ...groups,\n    ...auth,\n  };\n}\n\nexport async function fetchGroup(uuid) {\n  return await groupApi.getGroup(uuid);\n}\n\nexport async function updateGroup(data) {\n  await groupApi.updateGroup(data.uuid, data);\n}\n\nexport async function addGroup(data) {\n  let newGroup = await groupApi.createGroup(data);\n  let ret = newGroup;\n\n  if (data.user_list && data.user_list.length > 0) {\n    ret = groupApi.addPrincipalToGroup(newGroup.uuid, { principals: data.user_list });\n  }\n\n  if (data.roles_list && data.roles_list.length > 0) {\n    ret = groupApi.addRoleToGroup(newGroup.uuid, { roles: data.roles_list });\n  }\n\n  return ret;\n}\n\nexport async function removeGroups(uuids) {\n  return await Promise.all(uuids.map((uuid) => groupApi.deleteGroup(uuid)));\n}\n\nexport async function deletePrincipalsFromGroup(groupId, users) {\n  return await groupApi.deletePrincipalFromGroup(groupId, users.join(','));\n}\n\nexport async function addPrincipalsToGroup(groupId, users) {\n  return await groupApi.addPrincipalToGroup(groupId, { principals: users });\n}\n\nexport async function fetchRolesForGroup(groupId, excluded, { limit, offset, name, description }, options = {}) {\n  return await groupApi.listRolesForGroup(groupId, excluded, undefined, name, description, limit, offset, 'display_name', options);\n}\n\nexport async function deleteRolesFromGroup(groupId, roles) {\n  return await groupApi.deleteRoleFromGroup(groupId, roles.join(','));\n}\n\nexport async function addRolesToGroup(groupId, roles) {\n  return await groupApi.addRoleToGroup(groupId, { roles });\n}\n\nexport async function fetchPrincipalsForGroup(groupId, usernames, options = {}) {\n  return await groupApi.getPrincipalsFromGroup(groupId, usernames, undefined, {\n    query: {\n      ...options,\n    },\n  });\n}\n","import { useEffect, useRef } from 'react';\n\nconst useIsMounted = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nexport default useIsMounted;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { Button, Checkbox, Modal, ModalVariant, Split, SplitItem, Stack, TextContent } from '@patternfly/react-core';\nimport './RemoveModal.scss';\n\nconst RemoveModal = ({ title, text, onClose, onSubmit, isOpen, confirmButtonLabel, withCheckbox }) => {\n  const [checked, setChecked] = useState(false);\n\n  return (\n    <Modal\n      className=\"ins-c-rbac__dialog--warning\"\n      title={\n        <div>\n          <ExclamationTriangleIcon className=\"ins-m-alert ins-c-rbac__delete-icon\" /> {title}\n        </div>\n      }\n      isOpen={isOpen}\n      variant={ModalVariant.small}\n      onClose={onClose}\n      actions={[\n        <Button key=\"confirm\" ouiaId=\"primary-confirm-button\" isDisabled={withCheckbox && !checked} variant=\"danger\" onClick={onSubmit}>\n          {confirmButtonLabel}\n        </Button>,\n        <Button key=\"cancel\" ouiaId=\"secondary-cancel-button\" variant=\"link\" onClick={onClose}>\n          Cancel\n        </Button>,\n      ]}\n    >\n      <Split hasGutter>\n        <SplitItem isFilled>\n          <Stack hasGutter>\n            <TextContent>{text}</TextContent>\n          </Stack>\n        </SplitItem>\n      </Split>\n      {withCheckbox ? (\n        <Checkbox\n          isChecked={checked}\n          onChange={() => setChecked(!checked)}\n          label=\"I understand, and I want to continue.\"\n          id=\"remove-modal-check\"\n          className=\"pf-u-mt-lg\"\n        />\n      ) : null}\n    </Modal>\n  );\n};\n\nRemoveModal.propTypes = {\n  text: PropTypes.any,\n  title: PropTypes.string,\n  confirmButtonLabel: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func,\n  isOpen: PropTypes.bool,\n  withCheckbox: PropTypes.bool,\n};\n\nRemoveModal.defaultProps = {\n  withCheckbox: false,\n};\n\nexport default RemoveModal;\n","import * as ActionTypes from '../action-types';\nimport * as GroupHelper from '../../helpers/group/group-helper';\n\nexport const fetchGroups = (options = {}) => ({\n  type: ActionTypes.FETCH_GROUPS,\n  payload: GroupHelper.fetchGroups(options),\n});\n\nexport const fetchSystemGroup = (filterValue) => ({\n  type: ActionTypes.FETCH_SYSTEM_GROUP,\n  payload: GroupHelper.fetchGroups({\n    limit: 1,\n    name: filterValue || 'default',\n    nameMatch: 'partial',\n  }),\n});\n\nexport const fetchGroup = (apiProps) => ({\n  type: ActionTypes.FETCH_GROUP,\n  payload: GroupHelper.fetchGroup(apiProps),\n});\n\nexport const addGroup = (groupData) => ({\n  type: ActionTypes.ADD_GROUP,\n  payload: GroupHelper.addGroup(groupData).catch((err) => {\n    const error = err?.errors?.[0] || {};\n    if (error.status === '400' && error.source === 'name') {\n      return {\n        error: true,\n      };\n    }\n\n    /**\n     * Convert any other API error response to not crash notifications.\n     * It has different format than other API requests.\n     */\n    throw {\n      message: error.detail,\n      description: error.source,\n    };\n  }),\n});\n\nexport const updateGroup = (groupData) => ({\n  type: ActionTypes.UPDATE_GROUP,\n  payload: GroupHelper.updateGroup(groupData),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success updating group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The group was updated successfully.',\n      },\n      rejected: {\n        variant: 'danger',\n        title: 'Failed updating group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The group was not updated successfuly.',\n      },\n    },\n  },\n});\n\nexport const removeGroups = (uuids) => ({\n  type: ActionTypes.REMOVE_GROUPS,\n  payload: GroupHelper.removeGroups(uuids),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        dismissDelay: 8000,\n        dismissable: false,\n        title: uuids.length > 1 ? 'Groups deleted successfully' : 'Group deleted successfully',\n      },\n      rejected: {\n        variant: 'danger',\n        dismissDelay: 8000,\n        dismissable: false,\n        title:\n          uuids.length > 1 ? 'There was an error deleting the groups. Please try again.' : 'There was an error deleting the group. Please try again.',\n      },\n    },\n  },\n});\n\nexport const resetSelectedGroup = () => ({\n  type: ActionTypes.RESET_SELECTED_GROUP,\n});\n\nexport const addMembersToGroup = (groupId, members) => ({\n  type: ActionTypes.ADD_MEMBERS_TO_GROUP,\n  payload: GroupHelper.addPrincipalsToGroup(groupId, members),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success adding members to group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The members were successfully added to the group.',\n      },\n      rejected: {\n        variant: 'danger',\n        title: 'Failed adding members to group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The members were not added successfully.',\n      },\n    },\n  },\n});\n\nexport const removeMembersFromGroup = (groupId, members) => ({\n  type: ActionTypes.REMOVE_MEMBERS_FROM_GROUP,\n  payload: GroupHelper.deletePrincipalsFromGroup(groupId, members),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success removing members from group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The members were successfully removed from the group.',\n      },\n      rejected: {\n        variant: 'danger',\n        title: 'Failed removing members from group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The members were not removed successfully.',\n      },\n    },\n  },\n});\n\nexport const fetchRolesForGroup = (groupId, pagination, options) => ({\n  type: ActionTypes.FETCH_ROLES_FOR_GROUP,\n  payload: GroupHelper.fetchRolesForGroup(groupId, false, pagination, options),\n});\n\nexport const fetchMembersForGroup = (groupId, usernames, options) => ({\n  type: ActionTypes.FETCH_MEMBERS_FOR_GROUP,\n  payload: GroupHelper.fetchPrincipalsForGroup(groupId, usernames, options),\n});\n\nexport const fetchAddRolesForGroup = (groupId, pagination, options) => ({\n  type: ActionTypes.FETCH_ADD_ROLES_FOR_GROUP,\n  payload: GroupHelper.fetchRolesForGroup(groupId, true, pagination, options),\n});\n\nexport const addRolesToGroup = (groupId, roles) => ({\n  type: ActionTypes.ADD_ROLES_TO_GROUP,\n  payload: GroupHelper.addRolesToGroup(groupId, roles),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success adding roles to group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The roles were successfully added to the group.',\n      },\n      rejected: {\n        variant: 'danger',\n        title: 'Failed adding roles to group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The roles were not added successfully.',\n      },\n    },\n  },\n});\n\nexport const removeRolesFromGroup = (groupId, roles) => ({\n  type: ActionTypes.REMOVE_ROLES_FROM_GROUP,\n  payload: GroupHelper.deleteRolesFromGroup(groupId, roles),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success removing roles from group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The roles were successfully removed from the group.',\n      },\n      rejected: {\n        variant: 'danger',\n        title: 'Failed removing roles from group',\n        dismissDelay: 8000,\n        dismissable: false,\n        description: 'The roles were not removed successfully.',\n      },\n    },\n  },\n});\n","import { getPermissionApi } from '../shared/user-login';\n\nconst accessApi = getPermissionApi();\n\nexport async function listPermissions(limit, offset, orderBy, application, resourceType, verb, permission, options) {\n  return await accessApi.listPermissions(limit, offset, orderBy, application, resourceType, verb, permission, options);\n}\n\nexport async function listPermissionOptions(field, limit, offset, application, resourceType, verb, options) {\n  return await accessApi.listPermissionOptions(field, limit, offset, application, resourceType, verb, options);\n}\n","import * as ActionTypes from '../action-types';\nimport * as PermissionsHelper from '../../helpers/permission/permission-helper';\n\nexport const listPermissions = ({ limit, offset, orderBy, application, resourceType, verb, permission, exclude_globals = true, options }) => ({\n  type: ActionTypes.LIST_PERMISSIONS,\n  payload: PermissionsHelper.listPermissions(limit, offset, orderBy, application, resourceType, verb, permission, exclude_globals, options),\n});\n\nconst fieldToAction = {\n  application: ActionTypes.LIST_APPLICATION_OPTIONS,\n  resource_type: ActionTypes.LIST_RESOURCE_OPTIONS,\n  verb: ActionTypes.LIST_OPERATION_OPTIONS,\n};\n\nexport const listPermissionOptions = ({ field, limit, offset, application, resourceType, verb, options }) => ({\n  type: fieldToAction[field],\n  payload: PermissionsHelper.listPermissionOptions(field, limit, offset, application, resourceType, verb, options),\n});\n\nexport const expandSplats = ({\n  limit = 1000,\n  offset = 0,\n  orderBy,\n  application,\n  resourceType,\n  verb,\n  permission,\n  exclude_globals = true,\n  options,\n}) => ({\n  type: ActionTypes.EXPAND_SPLATS,\n  payload: PermissionsHelper.listPermissions(limit, offset, orderBy, application, resourceType, verb, permission, exclude_globals, options),\n});\n\nexport const resetExpandSplats = () => ({\n  type: ActionTypes.RESET_EXPAND_SPLATS,\n  payload: {\n    data: [],\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FormSpy from '@data-driven-forms/react-form-renderer/dist/esm/form-spy';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/esm/form-template';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\n\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal';\nimport { ActionGroup } from '@patternfly/react-core/dist/js/components/Form/ActionGroup';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button';\nimport { Form } from '@patternfly/react-core/dist/js/components/Form/Form';\n\n/**\n * This id is requried to submit form by a byttoun outside of the form element\n */\nconst MODAL_FORM_IDENTIFIER = 'modal-form';\nconst CustomFormWrapper = (props) => <Form {...props} id={MODAL_FORM_IDENTIFIER} />;\n\nconst CustomButtons = ({ saveLabel, cancelLabel }) => {\n  const { onCancel } = useFormApi();\n\n  return (\n    <FormSpy>\n      {({ pristine, invalid, validating, submitting }) => (\n        <div className=\"pf-c-form\">\n          <ActionGroup className=\"pf-u-mt-0\">\n            <Button\n              ouiaId=\"primary-save-button\"\n              variant=\"primary\"\n              form={MODAL_FORM_IDENTIFIER}\n              type=\"submit\"\n              isDisabled={pristine || validating || submitting || invalid}\n            >\n              {saveLabel}\n            </Button>\n            <Button ouiaId=\"secondary-cancel-button\" variant=\"link\" onClick={onCancel} id=\"cancel-modal\">\n              {cancelLabel}\n            </Button>\n          </ActionGroup>\n        </div>\n      )}\n    </FormSpy>\n  );\n};\n\nCustomButtons.propTypes = {\n  saveLabel: PropTypes.node,\n  cancelLabel: PropTypes.node,\n};\n\nCustomButtons.defaultProps = {\n  saveLabel: 'Save',\n  cancelLabel: 'Cancel',\n};\n\nconst ModalFormTemplate = ({ ModalProps, saveLabel, cancelLabel, alert, ...props }) => (\n  <Modal {...ModalProps} footer={<CustomButtons saveLabel={saveLabel} cancelLabel={cancelLabel} />}>\n    {alert?.()}\n    <FormTemplate {...props} showFormControls={false} FormWrapper={CustomFormWrapper} />\n  </Modal>\n);\n\nModalFormTemplate.propTypes = {\n  ModalProps: PropTypes.object,\n  ...CustomButtons.propTypes,\n};\n\nexport default ModalFormTemplate;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormSelect, FormSelectOption, FormGroup, TextContent, Text, TextVariants } from '@patternfly/react-core';\n\nconst createOptions = (options, inputValue, isRequired) => {\n  if (inputValue && isRequired) {\n    return options;\n  }\n\n  let selectOptions = [...options];\n  return selectOptions.find(({ value }) => value === undefined)\n    ? [...selectOptions]\n    : [{ label: isRequired ? 'Please choose' : 'None' }, ...selectOptions];\n};\n\nconst Select = ({ input, options, isReadOnly, isDisabled, isRequired, ...rest }) => (\n  <FormSelect {...input} {...rest} isDisabled={isDisabled || isReadOnly}>\n    {createOptions(options, input.value, isRequired).map((props) => (\n      <FormSelectOption key={props.value || props.label} {...props} label={props.label.toString()} /> // eslint-disable-line react/prop-types\n    ))}\n  </FormSelect>\n);\n\nSelect.propTypes = {\n  input: PropTypes.object.isRequired,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.any,\n      label: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  isReadOnly: PropTypes.bool,\n  isDisabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  FieldProvider: PropTypes.any,\n};\n\nconst Pf4SelectWrapper = ({ label, isRequired, helperText, meta, description, hideLabel, ...rest }) => {\n  const { error, touched } = meta;\n  const showError = touched && error;\n\n  return (\n    <FormGroup\n      isRequired={isRequired}\n      label={!hideLabel && label}\n      fieldId={rest.id}\n      isValid={!showError}\n      helperText={helperText}\n      helperTextInvalid={meta.error}\n    >\n      {description && (\n        <TextContent>\n          <Text component={TextVariants.small}>{description}</Text>\n        </TextContent>\n      )}\n      <Select label={label} isValid={!showError} isRequired={isRequired} {...rest} />\n    </FormGroup>\n  );\n};\n\nPf4SelectWrapper.propTypes = {\n  componentType: PropTypes.string,\n  label: PropTypes.string,\n  isRequired: PropTypes.bool,\n  helperText: PropTypes.string,\n  meta: PropTypes.object,\n  description: PropTypes.string,\n  hideLabel: PropTypes.bool,\n};\n\nexport default Pf4SelectWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ActionGroup, Button } from '@patternfly/react-core';\nimport { isEmpty } from 'lodash';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/esm/use-form-api';\nimport FormSpy from '@data-driven-forms/react-form-renderer/dist/esm/form-spy';\n\nconst FormButtons = ({ dirtyFieldsSinceLastSubmit, submitSucceeded, pristine }) => {\n  const { onCancel } = useFormApi();\n  const noChanges = isEmpty(dirtyFieldsSinceLastSubmit) || (!submitSucceeded && pristine);\n  return (\n    <ActionGroup className=\"pf-u-mt-0\">\n      <Button ouiaId=\"primary-submit-button\" type=\"submit\" isDisabled={noChanges} variant=\"primary\">\n        Save\n      </Button>\n      <Button ouiaId=\"secondary-cancel-button\" variant=\"link\" onClick={() => onCancel()}>\n        Cancel\n      </Button>\n    </ActionGroup>\n  );\n};\n\nFormButtons.propTypes = {\n  dirtyFieldsSinceLastSubmit: PropTypes.shape({\n    [PropTypes.string]: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  }),\n  submitSucceeded: PropTypes.bool,\n  pristine: PropTypes.bool,\n  onCancel: PropTypes.func,\n};\n\nconst FormButtonWithSpies = (formProps) => (\n  <FormSpy\n    subscription={{\n      pristine: true,\n      submitSucceeded: true,\n      dirtyFieldsSinceLastSubmit: true,\n    }}\n  >\n    {(props) => <FormButtons {...props} {...formProps} />}\n  </FormSpy>\n);\n\nexport default FormButtonWithSpies;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Pf4SelectWrapper from '../../presentational-components/shared/pf4-select-wrapper';\nimport FormButtons from './FormButtons';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/esm/form-template';\nimport TextField from '@data-driven-forms/pf4-component-mapper/dist/esm/text-field';\nimport Textarea from '@data-driven-forms/pf4-component-mapper/dist/esm/textarea';\nimport ReactFormRender from '@data-driven-forms/react-form-renderer/dist/esm/form-renderer';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/esm/component-types';\n\nconst FormRenderer = ({ formTemplateProps, ...props }) => (\n  <ReactFormRender\n    componentMapper={{\n      [componentTypes.TEXT_FIELD]: TextField,\n      [componentTypes.TEXTAREA]: Textarea,\n      [componentTypes.SELECT]: Pf4SelectWrapper,\n    }}\n    FormTemplate={(props) => <FormTemplate {...formTemplateProps} {...props} FormButtons={FormButtons} />}\n    {...props}\n  />\n);\n\nFormRenderer.propTypes = {\n  formTemplateProps: PropTypes.object,\n};\n\nexport default FormRenderer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalVariant, Button } from '@patternfly/react-core';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport './warningModal.scss';\n\nexport const WarningModal = ({ type, isOpen, onModalCancel, onConfirmCancel, customTitle, customDescription }) => (\n  <Modal\n    title={\n      <span className=\"ins-c-wizard__cancel-warning-header\">\n        <ExclamationTriangleIcon size=\"md\" className=\"ins-c-wizard__cancel-warning-header--icon\" />\n        {customTitle || `Exit ${type} creation?`}\n      </span>\n    }\n    variant={ModalVariant.small}\n    className=\"ins-c-wizard__cancel-warning\"\n    isOpen={isOpen}\n    onClose={onModalCancel}\n    actions={[\n      <Button ouiaId=\"primary-exit-button\" key=\"confirm\" variant=\"primary\" onClick={onConfirmCancel}>\n        Exit\n      </Button>,\n      <Button ouiaId=\"secondary-cancel-button\" key=\"cancel\" variant=\"link\" onClick={onModalCancel}>\n        Stay\n      </Button>,\n    ]}\n  >\n    <span>{customDescription || 'All inputs will be discarded.'} </span>\n  </Modal>\n);\n\nWarningModal.propTypes = {\n  type: PropTypes.string,\n  customTitle: PropTypes.node,\n  customDescription: PropTypes.node,\n  isOpen: PropTypes.bool,\n  onModalCancel: PropTypes.func,\n  onConfirmCancel: PropTypes.func,\n};\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/esm/component-types';\n\nimport ModalFormTemplate from '../common/ModalFormTemplate';\nimport FormRenderer from '../common/form-renderer';\nimport useIsMounted from '../../hooks/useIsMounted';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { roleSelector } from './role-selectors';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport { fetchRole, fetchRoles } from '../../helpers/role/role-helper';\nimport asyncDebounce from '../../utilities/async-debounce';\nimport { updateRole } from '../../redux/actions/role-actions';\n\nconst validationPromise = (name, idKey, id) =>\n  fetchRoles({ name }).then(({ data }) => {\n    if (data.length === 0) {\n      return undefined;\n    }\n\n    const taken = data.some((item) => item[idKey] !== id && item.name === name);\n    if (taken) {\n      throw 'Role with this name already exists.';\n    }\n  });\n\nconst createEditRoleSchema = (id) => ({\n  fields: [\n    {\n      name: 'name',\n      component: componentTypes.TEXT_FIELD,\n      label: 'Name',\n      isRequired: true,\n      validate: [{ type: 'validate-role-name', id, idKey: 'uuid', validationPromise }],\n    },\n    {\n      name: 'description',\n      component: componentTypes.TEXTAREA,\n      label: 'Description',\n    },\n  ],\n});\n\nconst uniqueNameValidator = asyncDebounce((value, idKey, id, validationPromise) => {\n  if (!value || value.length === 0) {\n    return Promise.reject('Required');\n  }\n\n  return validationPromise(value, idKey, id);\n});\n\nconst EditRoleModal = ({ routeMatch, cancelRoute, afterSubmit }) => {\n  const isMounted = useIsMounted();\n  const {\n    params: { id },\n  } = useRouteMatch(routeMatch);\n  const { replace, push } = useHistory();\n  const dispatch = useDispatch();\n\n  const validatorMapper = {\n    'validate-role-name': ({ idKey, id, validationPromise }) => (value) => uniqueNameValidator(value, idKey, id, validationPromise),\n  };\n\n  const role = useSelector((state) => roleSelector(state, id));\n  const [initialValues, setInitialValues] = useState(role);\n\n  const onCancel = () => {\n    dispatch(\n      addNotification({\n        variant: 'warning',\n        dismissDelay: 8000,\n        dismissable: false,\n        title: 'Editing role',\n        description: 'Edit role was canceled by the user.',\n      })\n    );\n    replace(cancelRoute);\n  };\n\n  const handleSubmit = (data) =>\n    dispatch(updateRole(id, { ...data, display_name: data.name })).then(() => {\n      afterSubmit();\n      push(cancelRoute);\n    });\n\n  useEffect(() => {\n    !initialValues &&\n      fetchRole(id).then((role) => {\n        if (isMounted.current) {\n          setInitialValues(role);\n        }\n      });\n  }, [id]);\n  if (!initialValues) {\n    return null;\n  }\n\n  return (\n    <FormRenderer\n      schema={createEditRoleSchema(id)}\n      initialValues={initialValues}\n      onSubmit={handleSubmit}\n      onCancel={onCancel}\n      validatorMapper={validatorMapper}\n      FormTemplate={(props) => (\n        <ModalFormTemplate {...props} ModalProps={{ onClose: onCancel, isOpen: true, variant: 'small', title: 'Edit role information' }} />\n      )}\n    />\n  );\n};\n\nEditRoleModal.propTypes = {\n  routeMatch: PropTypes.string.isRequired,\n  cancelRoute: PropTypes.string.isRequired,\n  afterSubmit: PropTypes.func.isRequired,\n};\n\nexport default EditRoleModal;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { Button, Checkbox, Modal, Text, TextContent, TextVariants, Split, SplitItem } from '@patternfly/react-core';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/cjs/actions';\nimport { removeRole } from '../../redux/actions/role-actions';\nimport { fetchRole } from '../../helpers/role/role-helper';\nimport useIsMounted from '../../hooks/useIsMounted';\nimport { roleNameSelector } from './role-selectors';\n\nconst RemoveRoleModal = ({ routeMatch, cancelRoute, afterSubmit }) => {\n  const isMounted = useIsMounted();\n  const {\n    params: { id },\n  } = useRouteMatch(routeMatch);\n  const roleName = useSelector((state) => roleNameSelector(state, id));\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [internalRoleName, setInternalRoleName] = useState(roleName);\n  const dispatch = useDispatch();\n  const { push, replace } = useHistory();\n\n  useEffect(() => {\n    !internalRoleName &&\n      fetchRole(id)\n        .then((role) => {\n          if (isMounted.current) {\n            setInternalRoleName(role.name);\n          }\n        })\n        .catch((error) => dispatch(addNotification({ variant: 'danger', title: 'Could not get role', description: error?.errors?.[0]?.detail })));\n  }, []);\n\n  const onSubmit = () =>\n    dispatch(removeRole(id)).then(() => {\n      push('/roles');\n      return afterSubmit();\n    });\n\n  const onCancel = () => replace(cancelRoute);\n  if (!internalRoleName) {\n    return null;\n  }\n\n  return (\n    <Modal\n      aria-label=\"remove-role\"\n      header={\n        <TextContent>\n          <Split hasGutter>\n            <SplitItem>\n              <ExclamationTriangleIcon size=\"lg\" style={{ fill: '#f0ab00' }} />\n            </SplitItem>\n            <SplitItem>\n              <Text component=\"h1\">Delete role?</Text>\n            </SplitItem>\n          </Split>\n        </TextContent>\n      }\n      isOpen\n      variant=\"small\"\n      onClose={onCancel}\n      actions={[\n        <Button isDisabled={isDisabled} key=\"submit\" variant=\"danger\" type=\"button\" id=\"confirm-delete-portfolio\" onClick={onSubmit}>\n          Confirm\n        </Button>,\n        <Button key=\"cancel\" variant=\"link\" type=\"button\" onClick={onCancel}>\n          Cancel\n        </Button>,\n      ]}\n    >\n      <TextContent>\n        <Text component={TextVariants.p}>\n          The <strong>{internalRoleName}</strong> role will be removed from any group it’s in, and members in the groups will no longer be granted the\n          permissions in the role.\n        </Text>\n        <Checkbox\n          id=\"remove-role-checkbox\"\n          label=\"I understand that this action cannot be undone.\"\n          isChecked={!isDisabled}\n          onChange={() => setIsDisabled((prev) => !prev)}\n        />\n      </TextContent>\n    </Modal>\n  );\n};\n\nRemoveRoleModal.propTypes = {\n  routeMatch: PropTypes.string.isRequired,\n  cancelRoute: PropTypes.string.isRequired,\n  afterSubmit: PropTypes.func.isRequired,\n};\n\nexport default RemoveRoleModal;\n","export const roleSelector = (state, roleId) => {\n  const {\n    roleReducer: { roles = { data: [] }, selectedRole },\n  } = state;\n  if (selectedRole?.uuid === roleId) {\n    return selectedRole;\n  }\n\n  return roles.data.find(({ uuid }) => uuid === roleId);\n};\n\nexport const roleNameSelector = (state, roleId) => roleSelector(state, roleId)?.name;\n","import React, { Fragment } from 'react';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { Link } from 'react-router-dom';\nimport flatten from 'lodash/flatten';\n\nexport const createRows = (showResDefinitions, uuid) => (data, opened, selectedRows = []) =>\n  data.reduce((acc, { resourceDefinitions, permission, modified }) => {\n    const [appName, type, operation] = permission.split(':');\n    return [\n      ...acc,\n      {\n        uuid: permission,\n        cells: [\n          appName,\n          type,\n          operation,\n          ...(showResDefinitions\n            ? [\n                permission.includes('cost-management') && resourceDefinitions.length > 0 ? (\n                  <Fragment key=\"resource-definitions\">\n                    <Link to={`/roles/detail/${uuid}/permission/${permission}`}>\n                      {flatten(resourceDefinitions.map((definition) => definition.attributeFilter.value)).length}\n                    </Link>\n                  </Fragment>\n                ) : (\n                  <span className=\"ins-c-text__disabled\">N/A</span>\n                ),\n              ]\n            : []),\n          <Fragment key={`${appName}-modified`}>\n            <DateFormat date={modified} type=\"relative\" />\n          </Fragment>,\n        ],\n        selected: Boolean(selectedRows?.find(({ uuid }) => uuid === permission)),\n      },\n    ];\n  }, []);\n\nexport const rolePermissionsReducerInitialState = {\n  pagination: defaultSettings,\n  selectedPermissions: [],\n  showRemoveModal: false,\n  confirmDelete: () => null,\n  deleteInfo: {},\n  filters: {\n    applications: [],\n    resources: [],\n    operations: [],\n  },\n  isToggled: false,\n  resources: [],\n  operations: [],\n};\nexport const SET_PAGINATION = 'SET_PAGINATION';\nexport const SELECT_PERMISSIONS = 'SELECT_PERMISSIONS';\nexport const SHOW_REMOVE_MODAL = 'SHOW_REMOVE_MODAL';\nexport const SUBMIT_REMOVE_MODAL = 'SUBMIT_REMOVE_MODAL';\nexport const INITIATE_REMOVE_PERMISSION = 'INITIATE_REMOVE_PERMISSION';\nexport const SET_FILTERS = 'SET_FILTERS';\nexport const SET_TOGGLED = 'SET_TOGGLED';\nexport const SET_FILTER_OPTIONS = 'SET_FILTER_OPTIONS';\nexport const INITIALIZE_ROLE = 'INITIALIZE_ROLE';\nconst reducerHandlers = {\n  [SET_PAGINATION]: (state, pagination) => ({ ...state, pagination: { ...state.pagination, ...pagination } }),\n  [SELECT_PERMISSIONS]: (state, { selection }) => ({ ...state, selectedPermissions: selection }),\n  [SHOW_REMOVE_MODAL]: (state, { showRemoveModal }) => ({ ...state, showRemoveModal }),\n  [SUBMIT_REMOVE_MODAL]: (state) => ({ ...state, selectedPermissions: [], showRemoveModal: false }),\n  [INITIATE_REMOVE_PERMISSION]: (state, { confirmDelete, deleteInfo }) => ({ ...state, confirmDelete, showRemoveModal: true, deleteInfo }),\n  [SET_FILTERS]: (state, filters) => ({ ...state, filters: { ...state.filters, ...filters } }),\n  [SET_TOGGLED]: (state) => ({ ...state, isToggled: !state.isToggled }),\n  [INITIALIZE_ROLE]: (state, { count, ...options }) => ({ ...state, ...options, pagination: { ...state.pagination, count } }),\n};\nexport const rolePermissionsReducer = (state, { type, ...action }) => {\n  if (!reducerHandlers[type]) {\n    return state;\n  }\n\n  return reducerHandlers[type](state, action);\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RemoveModal from '../../presentational-components/shared/RemoveModal';\n\nconst RemovePermissionsModal = ({ title, text, onClose, onSubmit, isOpen, confirmButtonLabel }) => (\n  <RemoveModal text={text} title={title} isOpen={isOpen} confirmButtonLabel={confirmButtonLabel} onClose={onClose} onSubmit={onSubmit} />\n);\n\nRemovePermissionsModal.propTypes = {\n  text: PropTypes.any,\n  title: PropTypes.string,\n  confirmButtonLabel: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onClose: PropTypes.func,\n  isOpen: PropTypes.bool,\n};\n\nexport default RemovePermissionsModal;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useSelector, useDispatch, batch } from 'react-redux';\nimport { listPermissions, listPermissionOptions } from '../../../redux/actions/permission-action';\nimport { TableToolbarView } from '../../../presentational-components/shared/table-toolbar-view';\n\nconst columns = ['Application', 'Resource type', 'Operation'];\nconst selector = ({\n  permissionReducer: {\n    permission,\n    isLoading,\n    options: { application, operation, resource },\n  },\n  roleReducer: { isRecordLoading, selectedRole },\n}) => ({\n  permissions: permission.data.map(({ application, resource_type: resource, verb, permission } = {}) => ({\n    application,\n    resource,\n    operation: verb,\n    uuid: permission,\n  })),\n  pagination: permission.meta,\n  isLoading: isLoading || isRecordLoading,\n  baseRole: selectedRole,\n  applicationOptions: application.data,\n  resourceOptions: resource.data,\n  operationOptions: operation.data,\n});\n\nconst AddRolePermissionView = ({ selectedPermissions, setSelectedRolePermissions }) => {\n  const dispatch = useDispatch();\n  const { permissions, isLoading, pagination } = useSelector(selector, shallowEqual);\n  const fetchData = (apiProps) => dispatch(listPermissions(apiProps));\n  const fetchOptions = (apiProps) => dispatch(listPermissionOptions(apiProps));\n\n  const createRows = (permissions, expanded, checkedRows = []) =>\n    permissions.map(({ application, resource, operation, uuid }) => ({\n      uuid: `${application}:${resource}:${operation}`,\n      cells: [application, resource, operation],\n      selected: checkedRows?.some((row) => row.uuid === uuid),\n    }));\n\n  useEffect(() => {\n    batch(() => {\n      fetchData(pagination);\n      fetchOptions({ field: 'application', limit: 50 });\n      fetchOptions({ field: 'resource_type', limit: 50 });\n      fetchOptions({ field: 'verb', limit: 50 });\n    });\n  }, []);\n\n  const setCheckedItems = (newSelection) => {\n    setSelectedRolePermissions((permissions) => {\n      return newSelection(permissions).map(({ uuid }) => ({ uuid }));\n    });\n  };\n\n  return (\n    <div className=\"ins-c-rbac-permissions-table\">\n      <TableToolbarView\n        columns={columns}\n        isCompact={true}\n        borders={false}\n        createRows={createRows}\n        data={permissions}\n        fetchData={({ limit, offset, applications, resources, operations }) => {\n          fetchData({\n            limit,\n            offset,\n            application: applications,\n            resourceType: resources,\n            verb: operations,\n          });\n        }}\n        isLoading={isLoading}\n        pagination={{ ...pagination, count: pagination.count }}\n        titlePlural=\"permissions\"\n        titleSingular=\"permission\"\n        setCheckedItems={setCheckedItems}\n        checkedRows={selectedPermissions}\n        isSelectable\n      />\n    </div>\n  );\n};\n\nAddRolePermissionView.defaultProps = {\n  selectedPermissions: [],\n  role: {},\n};\n\nAddRolePermissionView.propTypes = {\n  selectedPermissions: PropTypes.arrayOf({\n    uuid: PropTypes.string.isRequired,\n  }).isRequired,\n  setSelectedRolePermissions: PropTypes.func.isRequired,\n  role: PropTypes.object,\n};\n\nexport default AddRolePermissionView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Grid, GridItem, Stack, StackItem, Text, TextContent, TextVariants, Title } from '@patternfly/react-core';\n\nconst AddRolePermissionSummaryContent = ({ selectedPermissions = [], role = {} }) => {\n  const { display_name: name, description } = role;\n\n  return (\n    <Stack hasGutter>\n      <StackItem>\n        <TextContent>\n          <Title headingLevel=\"h4\" size=\"xl\">\n            Review Details\n          </Title>\n        </TextContent>\n      </StackItem>\n      <StackItem classnem=\"ins-c-rbac__summary\">\n        <Grid hasGutter>\n          <GridItem span={3}>\n            <Text className=\"pf-c-title\" component={TextVariants.h6}>\n              Role Name:\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <Text component={TextVariants.p}>{name}</Text>\n          </GridItem>\n          <GridItem span={3}>\n            <Text className=\"pf-c-title\" component={TextVariants.h6}>\n              Role Description:\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <Text component={TextVariants.p}>{description}</Text>\n          </GridItem>\n          <GridItem span={3}>\n            <Text className=\"pf-c-title\" component={TextVariants.h6}>\n              Adding Permissions:\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <Text component={TextVariants.p}>\n              {selectedPermissions.map((permission, index) => (\n                <Text key={index}> {permission.uuid} </Text>\n              ))}\n            </Text>\n          </GridItem>\n        </Grid>\n      </StackItem>\n    </Stack>\n  );\n};\n\nAddRolePermissionSummaryContent.propTypes = {\n  role: PropTypes.shape,\n  selectedPermissions: PropTypes.array,\n};\n\nexport default AddRolePermissionSummaryContent;\n","import React, { useState, useEffect } from 'react';\nimport AddRolePermissionView from './add-role-permission-view';\nimport AddRolePermissionSummaryContent from './add-role-permissions-summary-content';\nimport PropTypes from 'prop-types';\nimport { WarningModal } from '../../common/warningModal';\nimport { useHistory } from 'react-router-dom';\nimport { Wizard } from '@patternfly/react-core';\nimport { updateRole } from '../../../helpers/role/role-helper';\n\nconst AddRolePermissionWizard = ({ role }) => {\n  const [selectedPermissions, setSelectedPermissions] = useState([]);\n  const [cancelWarningVisible, setCancelWarningVisible] = useState(false);\n  const [currentRoleID, setCurrentRoleID] = useState('');\n  const history = useHistory();\n\n  useEffect(() => {\n    setCurrentRoleID(role.uuid);\n  }, [role]);\n\n  const setSelectedRolePermissions = (selected) => {\n    setSelectedPermissions(selected);\n  };\n\n  const steps = [\n    {\n      id: 1,\n      name: 'Add Permissions',\n      component: new AddRolePermissionView({ selectedPermissions, setSelectedRolePermissions, role }),\n    },\n    {\n      id: 2,\n      name: 'Review Details',\n      component: new AddRolePermissionSummaryContent({ selectedPermissions, role }),\n      nextButtonText: 'Confirm',\n    },\n  ];\n\n  const handleWizardCancel = () => {\n    setCancelWarningVisible(true);\n  };\n\n  const handleConfirmCancel = () => {\n    history.goBack();\n  };\n\n  const onSubmit = async () => {\n    const cleanPermissions = selectedPermissions.map((permission) => {\n      // don't have info on how we populate resourceDefinitions\n      return { resourceDefinitions: [], permission: permission.uuid };\n    });\n\n    const roleData = {\n      ...role,\n      access: [...role.access, ...cleanPermissions],\n      accessCount: role.accessCount + selectedPermissions.length,\n    };\n\n    try {\n      await updateRole(currentRoleID, roleData);\n      history.goBack();\n    } catch (e) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <>\n      <Wizard\n        title=\"Add Permission\"\n        description=\"Adding permissions to roles\"\n        steps={steps}\n        isOpen={true}\n        onClose={handleWizardCancel}\n        onSave={onSubmit}\n      />\n      <WarningModal\n        type=\"Permission\"\n        isOpen={cancelWarningVisible}\n        onModalCancel={() => setCancelWarningVisible(false)}\n        onConfirmCancel={handleConfirmCancel}\n      />\n    </>\n  );\n};\n\nAddRolePermissionWizard.defaultProps = {\n  role: {},\n};\n\nAddRolePermissionWizard.propTypes = {\n  role: PropTypes.object,\n};\n\nexport default AddRolePermissionWizard;\n","import React, { useEffect, useReducer, useState } from 'react';\nimport { TextContent, Text, TextVariants } from '@patternfly/react-core';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport {\n  createRows,\n  INITIALIZE_ROLE,\n  INITIATE_REMOVE_PERMISSION,\n  rolePermissionsReducer,\n  rolePermissionsReducerInitialState,\n  SELECT_PERMISSIONS,\n  SET_FILTERS,\n  SET_PAGINATION,\n  SET_TOGGLED,\n  SHOW_REMOVE_MODAL,\n  SUBMIT_REMOVE_MODAL,\n} from './role-permissions-table-helpers';\nimport { cellWidth } from '@patternfly/react-table';\nimport './role-permissions.scss';\nimport RemovePermissionsModal from './remove-permissions-modal';\nimport { removeRolePermissions, fetchRole } from '../../redux/actions/role-actions';\nimport { Link, Route, useHistory } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\nimport AddRolePermissionWizard from './add-role-permissions/add-role-permission-wizard';\nimport { routes as paths } from '../../../package.json';\n\nconst maxFilterItems = 10;\n\nconst columns = [\n  { title: 'Application' },\n  { title: 'Resource type' },\n  { title: 'Operation' },\n  {\n    title: 'Resource definitions',\n    header: {\n      info: {\n        popover: 'Resource definitions only apply to Cost Management permissions',\n        ariaLabel: 'Resource definitions only apply to Cost Management permissions',\n        popoverProps: {\n          maxWidth: '19rem',\n          minWidth: '19rem',\n        },\n      },\n    },\n    transforms: [cellWidth(20)],\n  },\n  { title: 'Last commit', transforms: [cellWidth(15)] },\n];\n\nconst removeModalText = (permissions, role, plural) =>\n  plural ? (\n    <p>\n      The <b> {`${permissions}`}</b> selected permissions will no longer be granted through the <b>{`${role.name}`}</b> role.\n    </p>\n  ) : (\n    <p>\n      The <b>{`${permissions}`}</b> permission will no longer be granted through the <b> {`${role.name}`}</b> role.\n    </p>\n  );\n\nconst Permissions = () => {\n  const { role, isRecordLoading } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      isRecordLoading: state.roleReducer.isRecordLoading,\n    }),\n    shallowEqual\n  );\n\n  const history = useHistory();\n  const [\n    { pagination, selectedPermissions, showRemoveModal, confirmDelete, deleteInfo, filters, isToggled, resources, operations },\n    internalDispatch,\n  ] = useReducer(rolePermissionsReducer, rolePermissionsReducerInitialState);\n\n  const [showResourceDefinitions, setShowResourceDefinitions] = useState(true);\n\n  const dispatch = useDispatch();\n\n  const setCheckedItems = (newSelection) => {\n    internalDispatch({ type: SELECT_PERMISSIONS, selection: newSelection(selectedPermissions).map(({ uuid }) => ({ uuid })) });\n  };\n\n  useEffect(() => {\n    if (Object.keys(role).length > 0) {\n      const { resources, operations } = Object.entries(\n        role.access.reduce(\n          ({ resources, operations }, { permission }) => {\n            const [, resource, operation] = permission.split(':');\n            return {\n              resources: resources.includes(resource) ? resources : [...resources, resource],\n              operations: operations.includes(operation) ? operations : [...operations, operation],\n            };\n          },\n          { resources: [], operations: [] }\n        )\n      ).reduce((acc, [key, value]) => ({ ...acc, [key]: value.map((item) => ({ label: item, value: item })) }), {});\n      internalDispatch({ type: INITIALIZE_ROLE, resources, operations, count: role.access ? role.access.length : 0 });\n    }\n\n    setShowResourceDefinitions(role?.access?.find((a) => a.permission.includes('cost-management')));\n  }, [role]);\n\n  const filteredRows =\n    role && role.access\n      ? (role.access || [])\n          .filter(({ permission }) => {\n            const [application, resource, operation] = permission.split(':');\n            const { applications, resources, operations } = filters;\n            return (\n              (applications.length > 0 ? applications.includes(application) : true) &&\n              (resources.length > 0 ? resources.includes(resource) : true) &&\n              (operations.length > 0 ? operations.includes(operation) : true)\n            );\n          })\n          .map((acc) => ({ uuid: acc.permission, ...acc, modified: role.modified }))\n      : [];\n\n  const removePermissions = (permissions) => {\n    const permissionsToRemove = permissions.reduce((acc, curr) => [...acc, curr.uuid], []);\n    return dispatch(removeRolePermissions(role, permissionsToRemove)).then(() => {\n      dispatch(fetchRole(role.uuid));\n      internalDispatch({ type: SELECT_PERMISSIONS, selection: [] });\n    });\n  };\n\n  const actionResolver = () => [\n    {\n      title: 'Remove',\n      onClick: (_event, _rowId, permission) =>\n        internalDispatch({\n          type: INITIATE_REMOVE_PERMISSION,\n          confirmDelete: () => removePermissions([permission]),\n          deleteInfo: {\n            title: 'Remove permission?',\n            text: removeModalText(permission.uuid, role, false),\n            confirmButtonLabel: 'Remove permission',\n          },\n        }),\n    },\n  ];\n\n  const toolbarButtons = () => [\n    ...[\n      // eslint-disable-next-line react/jsx-key\n      <Link to={`/roles/detail/${role.uuid}/role-add-permission`} key=\"role-add-permission\" className=\"pf-m-visible-on-md\">\n        <Button variant=\"primary\" aria-label=\"Add Permission\">\n          Add Permission\n        </Button>\n      </Link>,\n      {\n        label: 'Add Permission',\n        props: {\n          className: 'pf-m-hidden-on-md',\n        },\n        onClick: () => {\n          history.push(`/roles/detail/${role.uuid}/role-add-permission`);\n        },\n      },\n      {\n        label: 'Remove',\n        props: {\n          isDisabled: !selectedPermissions.length > 0,\n        },\n        onClick: () => {\n          const multiplePermissionsSelected = selectedPermissions.length > 1;\n          internalDispatch({\n            type: INITIATE_REMOVE_PERMISSION,\n            confirmDelete: () => () => removePermissions([...selectedPermissions]),\n            deleteInfo: {\n              title: multiplePermissionsSelected ? 'Remove permissions?' : 'Remove permission?',\n              text: removeModalText(\n                multiplePermissionsSelected ? selectedPermissions.length : selectedPermissions[0].uuid,\n                role,\n                selectedPermissions.length > 1\n              ),\n              confirmButtonLabel: multiplePermissionsSelected ? 'Remove permissions' : 'Remove permission',\n            },\n          });\n        },\n      },\n    ],\n  ];\n\n  const routes = () => (\n    <Route exact path={paths['role-add-permission']}>\n      <AddRolePermissionWizard isOpen={true} role={role} />\n    </Route>\n  );\n\n  const calculateSelected = (filter) =>\n    filter.reduce(\n      (acc, curr) => ({\n        0: {\n          ...acc?.['0'],\n          [curr]: true,\n        },\n      }),\n      { 0: {} }\n    );\n\n  const emptyItem = {\n    label: <div> No results found</div>,\n    isDisabled: true,\n  };\n\n  const sanitizedRole = {\n    access: [],\n    applications: [],\n    ...role,\n  };\n\n  const filterItemOverflow = Object.values({ applications: sanitizedRole.applications, operations, resources }).find(\n    (value) => value.length > maxFilterItems\n  );\n\n  return (\n    <section className=\"pf-c-page__main-section ins-c-role__permissions\">\n      {showRemoveModal && (\n        <RemovePermissionsModal\n          text={deleteInfo.text}\n          title={deleteInfo.title}\n          isOpen={showRemoveModal}\n          confirmButtonLabel={deleteInfo.confirmButtonLabel}\n          onClose={() => internalDispatch({ type: SHOW_REMOVE_MODAL, showRemoveModal: false })}\n          onSubmit={() => {\n            confirmDelete();\n            internalDispatch({ type: SUBMIT_REMOVE_MODAL });\n          }}\n        />\n      )}\n      <TextContent>\n        <Text component={TextVariants.h1}>Permissions</Text>\n      </TextContent>\n      <TableToolbarView\n        columns={showResourceDefinitions ? columns : columns.filter((c) => c.title !== 'Resource definitions')}\n        createRows={createRows(showResourceDefinitions, role?.uuid)}\n        actionResolver={role.system ? undefined : actionResolver}\n        data={filteredRows.slice(pagination.offset, pagination.offset + pagination.limit)}\n        filterValue=\"\"\n        ouiaId=\"role-permissions-table\"\n        fetchData={({ limit, offset }) => internalDispatch({ type: SET_PAGINATION, limit, offset })}\n        isSelectable={!role.system}\n        setCheckedItems={setCheckedItems}\n        checkedRows={selectedPermissions}\n        onShowMore={\n          filterItemOverflow\n            ? () => {\n                internalDispatch({ type: SET_TOGGLED });\n              }\n            : undefined\n        }\n        setFilterValue={({ applications, resources, operations }) => {\n          internalDispatch({\n            type: SET_FILTERS,\n            ...(applications ? { applications } : filters.applications),\n            ...(resources ? { resources } : filters.resources),\n            ...(operations ? { operations } : filters.operations),\n          });\n        }}\n        toolbarButtons={toolbarButtons}\n        isLoading={isRecordLoading}\n        pagination={{\n          ...pagination,\n          count: filteredRows.length,\n        }}\n        titlePlural=\"permissions\"\n        titleSingular=\"permission\"\n        routes={routes}\n        filters={[\n          {\n            key: 'applications',\n            value: filters.applications,\n            placeholder: 'Filter by application',\n            type: 'group',\n            selected: calculateSelected(filters.applications),\n            groups: [\n              {\n                type: sanitizedRole.applications.length > 0 ? 'checkbox' : 'plain',\n                items:\n                  sanitizedRole.applications.length > 0\n                    ? sanitizedRole.applications.slice(0, isToggled ? undefined : maxFilterItems).map((item) => ({ label: item, value: item }))\n                    : [emptyItem],\n              },\n            ],\n          },\n          {\n            key: 'resources',\n            value: filters.resources,\n            placeholder: 'Filter by resource type',\n            type: 'group',\n            selected: calculateSelected(filters.resources),\n            groups: [\n              {\n                type: resources.length > 0 ? 'checkbox' : 'plain',\n                items: resources.length > 0 ? resources.slice(0, isToggled ? undefined : maxFilterItems) : [emptyItem],\n              },\n            ],\n          },\n          {\n            key: 'operations',\n            value: filters.operations,\n            placeholder: 'Filter by operation',\n            type: 'group',\n            selected: calculateSelected(filters.operations),\n            groups: [\n              {\n                type: operations.length > 0 ? 'checkbox' : 'plain',\n                items: operations.length > 0 ? operations.slice(0, isToggled ? undefined : maxFilterItems) : [emptyItem],\n              },\n            ],\n          },\n        ]}\n      />\n    </section>\n  );\n};\n\nexport default Permissions;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport { Link, Route, useParams } from 'react-router-dom';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { Dropdown, DropdownItem, KebabToggle, Level, LevelItem, Text, TextContent } from '@patternfly/react-core';\nimport { PageHeaderTitle } from '@redhat-cloud-services/frontend-components/components/PageHeader';\nimport { routes } from '../../../package.json';\nimport { fetchRole, fetchRolesWithPolicies } from '../../redux/actions/role-actions';\nimport { TopToolbar } from '../../presentational-components/shared/top-toolbar';\nimport { ListLoader } from '../../presentational-components/shared/loader-placeholders';\nimport Permissions from './role-permissions';\nimport { fetchGroup } from '../../redux/actions/group-actions';\nimport { ToolbarTitlePlaceholder } from '../../presentational-components/shared/loader-placeholders';\nimport RemoveRoleModal from './remove-role-modal';\nimport EditRoleModal from './edit-role-modal';\nimport './role.scss';\n\nconst Role = () => {\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\n  const { uuid, groupUuid } = useParams();\n  const { role, group, isRecordLoading } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      isRecordLoading: state.roleReducer.isRecordLoading,\n      ...(groupUuid && { group: state.groupReducer.selectedGroup }),\n    }),\n    shallowEqual\n  );\n  const dispatch = useDispatch();\n  const fetchData = () => {\n    dispatch(fetchRole(uuid));\n    groupUuid && dispatch(fetchGroup(groupUuid));\n  };\n\n  useEffect(() => {\n    fetchData();\n    insights.chrome.appObjectId(uuid);\n    return () => insights.chrome.appObjectId(undefined);\n  }, [uuid, groupUuid]);\n\n  const title = !isRecordLoading && role ? role.display_name || role.name : undefined;\n  const description = !isRecordLoading && role ? role.description : undefined;\n  const dropdownItems = [\n    <DropdownItem component={<Link to={routes['role-detail-edit'].replace(':id', uuid)}>Edit</Link>} key=\"edit-role\" />,\n    <DropdownItem\n      component={<Link to={routes['role-detail-remove'].replace(':id', uuid)}>Delete</Link>}\n      className=\"ins-c-role__action\"\n      key=\"delete-role\"\n    />,\n  ];\n\n  return (\n    <Fragment>\n      <TopToolbar\n        breadcrumbs={[\n          ...[groupUuid ? { title: 'Groups', to: '/groups' } : { title: 'Roles', to: '/roles' }],\n          ...(groupUuid\n            ? [\n                {\n                  title: group && group.name,\n                  to: `/groups/detail/${groupUuid}/roles`,\n                  isLoading: group && group.loaded,\n                },\n              ]\n            : []),\n          { title: isRecordLoading ? undefined : role && (role.display_name || role.name), isActive: true },\n        ]}\n      >\n        <Level>\n          <LevelItem>\n            <PageHeaderTitle title={title || <ToolbarTitlePlaceholder />} className=\"ins-rbac-page-header__title\" />\n          </LevelItem>\n          {!isRecordLoading && role && !role.system && (\n            <LevelItem>\n              <Dropdown\n                ouiaId=\"role-title-actions-dropdown\"\n                toggle={<KebabToggle onToggle={(isOpen) => setDropdownOpen(isOpen)} id=\"role-actions-dropdown\" />}\n                isOpen={isDropdownOpen}\n                isPlain\n                position=\"right\"\n                dropdownItems={dropdownItems}\n              />\n            </LevelItem>\n          )}\n        </Level>\n        {description && (\n          <TextContent className=\"ins-rbac-page-header__description\">\n            <Text component=\"p\">{description}</Text>\n          </TextContent>\n        )}\n      </TopToolbar>\n      {isRecordLoading || !role ? <ListLoader /> : <Permissions />}\n      <Route path={routes['role-detail-remove']}>\n        {!isRecordLoading && (\n          <RemoveRoleModal\n            afterSubmit={() => dispatch(fetchRolesWithPolicies())}\n            cancelRoute={routes['role-detail'].replace(':uuid', uuid)}\n            routeMatch={routes['role-detail-remove']}\n          />\n        )}\n      </Route>\n      <Route path={routes['role-detail-edit']}>\n        {!isRecordLoading && (\n          <EditRoleModal afterSubmit={fetchData} cancelRoute={routes['role-detail'].replace(':uuid', uuid)} routeMatch={routes['role-detail-edit']} />\n        )}\n      </Route>\n    </Fragment>\n  );\n};\n\nexport default Role;\n","import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (asyncFunction, debounceTime = 250, options = { onlyResolvesLast: false }) =>\n  awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./RemoveModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./RemoveModal.scss\",\n      function () {\n        content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./RemoveModal.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./warningModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./warningModal.scss\",\n      function () {\n        content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./warningModal.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role-permissions.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role-permissions.scss\",\n      function () {\n        content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role-permissions.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role.scss\",\n      function () {\n        content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./role.scss\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};"],"sourceRoot":""}