(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[4457],{74178:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>G});var n=a(66029),o=a.n(n),r=a(25387),s=a(34685),l=a(91397),i=a(25701),c=a(2550),u=a(86706),m=a(16623),g=a(78357),p=a(16503),d=a(22479),b=a(66828),E=a(93297),P=a(55656),S=a(60063),f=a(29301),v=a(62012);const C=["Username","Email","First name","Last name","Status","Org admin"],h=[{title:"Add to user group",onClick:()=>console.log("ADD TO USER GROUP")},{title:"Remove from user group",onClick:()=>console.log("REMOVE FROM USER GROUP")}],R=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],U="iam-users-table",D=()=>{const e=(0,u.useDispatch)(),{users:t,totalCount:a}=(0,u.useSelector)((e=>({users:e.userReducer.users.data||[],totalCount:e.userReducer.users.meta.count}))),[r,s]=(0,v.useSearchParams)(),l=(0,m.p8)({perPage:20,searchParams:r,setSearchParams:s}),{page:i,perPage:c,onSetPage:D,onPerPageSelect:T}=l,k=(0,m.aJ)({matchOption:(e,t)=>e[0]===t[0]}),{selected:y,onSelect:I,isSelected:O}=k,L=(0,n.useCallback)((t=>{const{count:a,limit:n,offset:o,orderBy:r}=t;e((0,S.uh)({...(0,f.jl)({count:a,limit:n,offset:o,orderBy:r}),usesMetaInURL:!0}))}),[e]);(0,n.useEffect)((()=>{L({limit:c,offset:(i-1)*c,orderBy:"username",count:a||0})}),[L,i,c]);const A=t.map((e=>[e.username,e.email,e.first_name,e.last_name,e.is_active?"Active":"Inactive",e.is_org_admin?"Yes":"No",{cell:o().createElement(P.k,{items:h}),props:{isActionCell:!0}}])),w=A.length>0&&A.every(O),G=!w&&A.some(O),M=o().createElement(E.Pagination,{perPageOptions:R,itemCount:a,page:i,perPage:c,onSetPage:D,onPerPageSelect:T});return o().createElement(p.VO,{ouiaId:U,selection:k},o().createElement(d.u,{ouiaId:`${U}-header-toolbar`,bulkSelect:o().createElement(g.Wt,{isDataPaginated:!0,pageCount:t.length,selectedCount:y.length,totalCount:a,pageSelected:w,pagePartiallySelected:G,onSelect:e=>{e===g.DR.none?I(!1):e===g.DR.page?I(!0,A):e===g.DR.nonePage&&I(!1,A)}}),pagination:o().cloneElement(M,{isCompact:!0})}),o().createElement(b.H9,{variant:"compact","aria-label":"Users Table",ouiaId:`${U}-table`,columns:C,rows:A}),o().createElement(d.u,{ouiaId:`${U}-footer-toolbar`,pagination:M}))};var T=a(50247),k=a(77044),y=a(11506);const I=["User group name","Description","Users","Service accounts","Roles","Workspaces","Last modified"],O=[{title:"Edit user group",onClick:()=>console.log("EDIT USER GROUP")},{title:"Delete user group",onClick:()=>console.log("DELETE USER GROUP")}],L=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],A="iam-user-groups-table",w=()=>{const e=(0,u.useDispatch)(),{groups:t,totalCount:a}=(0,u.useSelector)((e=>({groups:e.groupReducer?.groups?.data||[],totalCount:e.groupReducer?.groups?.meta.count||0}))),[r,s]=(0,v.useSearchParams)(),l=(0,m.p8)({perPage:20,searchParams:r,setSearchParams:s}),{page:i,perPage:c,onSetPage:S,onPerPageSelect:C}=l,h=(0,m.aJ)({matchOption:(e,t)=>e[0]===t[0]}),{selected:R,onSelect:U,isSelected:D}=h,w=(0,n.useCallback)((t=>{const{count:a,limit:n,offset:o,orderBy:r}=t;e((0,k.bt)({...(0,f.jl)({count:a,limit:n,offset:o,orderBy:r}),usesMetaInURL:!0}))}),[e]);(0,n.useEffect)((()=>{w({limit:c,offset:(i-1)*c,orderBy:"name",count:a||0})}),[w,i,c]);const G=t.map((e=>[e.name,e.description?o().createElement(T.Tooltip,{isContentLeftAligned:!0,content:e.description},o().createElement("span",null,e.description.length>23?e.description.slice(0,20)+"...":e.description)):o().createElement("div",{className:"pf-v5-u-color-400"},"No description"),e.principalCount,e.serviceAccounts||"?",e.roleCount,e.workspaces||"?",(0,y.Z)(new Date(e.modified),{addSuffix:!0}),{cell:o().createElement(P.k,{items:O}),props:{isActionCell:!0}}])),M=G.length>0&&G.every(D),B=!M&&G.some(D),N=o().createElement(E.Pagination,{perPageOptions:L,itemCount:a,page:i,perPage:c,onSetPage:S,onPerPageSelect:C});return o().createElement(p.VO,{ouiaId:A,selection:h},o().createElement(d.u,{ouiaId:`${A}-header-toolbar`,bulkSelect:o().createElement(g.Wt,{isDataPaginated:!0,pageCount:t.length,selectedCount:R.length,totalCount:a,pageSelected:M,pagePartiallySelected:B,onSelect:e=>{e===g.DR.none?U(!1):e===g.DR.page?U(!0,G):e===g.DR.nonePage&&U(!1,G)}}),pagination:o().cloneElement(N,{isCompact:!0})}),o().createElement(b.H9,{variant:"compact","aria-label":"Users Table",ouiaId:`${A}-table`,columns:I,rows:G}),o().createElement(d.u,{ouiaId:`${A}-footer-toolbar`,pagination:N}))},G=()=>{const e=(0,r.YB)(),[t,a]=o().useState(0),u=o().createRef(),m=o().createRef(),g=(0,v.useNavigate)(),p=(0,v.useLocation)();return(0,n.useEffect)((()=>{const e=new URLSearchParams(p.search).get("activeTab");e&&a(Number(e))}),[p.search]),o().createElement(o().Fragment,null,o().createElement(i.Z,{title:e.formatMessage(c.Z.usersAndUserGroups),subtitle:e.formatMessage(c.Z.usersAndUserGroupsDescription)}),o().createElement(s.PageSection,{type:"tabs",variant:s.PageSectionVariants.light,isWidthLimited:!0},o().createElement(l.Tabs,{activeKey:t,onSelect:(e,t)=>{const n=Number(t);a(n),(e=>{const t=new URLSearchParams(p.search);t.set("activeTab",e.toString()),g({search:t.toString()})})(n)},inset:{default:"insetNone",md:"insetSm",xl:"insetLg","2xl":"inset2xl"},role:"region"},o().createElement(l.Tab,{eventKey:0,title:e.formatMessage(c.Z.users),tabContentId:"usersTab",tabContentRef:u,ouiaId:"users-tab-button"}),o().createElement(l.Tab,{eventKey:1,title:e.formatMessage(c.Z.userGroups),tabContentId:"groupsTab",tabContentRef:m,ouiaId:"user-groups-tab-button"}))),o().createElement(s.PageSection,null,o().createElement(l.TabContent,{eventKey:0,id:"usersTab",ref:u,"aria-label":"Users tab"},o().createElement(D,null)),o().createElement(l.TabContent,{eventKey:1,id:"groupsTab",ref:m,"aria-label":"Groups tab",hidden:!0},o().createElement(w,null))))}},92084:()=>{},97236:()=>{},38299:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/4457.2b2e1566b2437a5a93422ef816972791.js.map