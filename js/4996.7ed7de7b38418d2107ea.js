"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[4996,7664],{69957:(e,t,n)=>{n.d(t,{LP:()=>i,RI:()=>r,ZP:()=>a});var o=n(40400);const r={name:"ExclamationTriangleIcon",height:512,width:576,svgPath:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},i=(0,o.IU)(r),a=i},60817:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Portal=t.NotificationPortal=void 0;var r=n(50533),i=o(n(72837)),a=n(53446);t.NotificationPortal=(0,r.connect)((function(e,t){var n=e.notifications;return{notifications:t.notifications||n}}),(function(e,t){return{removeNotification:t.removeNotification?t.removeNotification:function(t){return e((0,a.removeNotification)(t))},onClearAll:t.clearNotifications?t.clearNotifications:function(){return e((0,a.clearNotifications)())}}}))(i.default);var c=n(72837);Object.defineProperty(t,"Portal",{enumerable:!0,get:function(){return o(c).default}}),t.default=t.NotificationPortal},72871:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(60817);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(a).default}}),r(n(60817),t)},71355:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsMiddleware=t.clearNotifications=t.removeNotification=t.addNotification=t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=t.notificationsReducers=t.notifications=t.NotificationsPortal=void 0;var r=n(72871);Object.defineProperty(t,"NotificationsPortal",{enumerable:!0,get:function(){return o(r).default}});var i=n(24778);Object.defineProperty(t,"notifications",{enumerable:!0,get:function(){return o(i).default}}),Object.defineProperty(t,"notificationsReducers",{enumerable:!0,get:function(){return i.notificationsReducers}});var a=n(68129);Object.defineProperty(t,"ADD_NOTIFICATION",{enumerable:!0,get:function(){return a.ADD_NOTIFICATION}}),Object.defineProperty(t,"REMOVE_NOTIFICATION",{enumerable:!0,get:function(){return a.REMOVE_NOTIFICATION}}),Object.defineProperty(t,"CLEAR_NOTIFICATIONS",{enumerable:!0,get:function(){return a.CLEAR_NOTIFICATIONS}});var c=n(53446);Object.defineProperty(t,"addNotification",{enumerable:!0,get:function(){return c.addNotification}}),Object.defineProperty(t,"removeNotification",{enumerable:!0,get:function(){return c.removeNotification}}),Object.defineProperty(t,"clearNotifications",{enumerable:!0,get:function(){return c.clearNotifications}});var l=n(84885);Object.defineProperty(t,"notificationsMiddleware",{enumerable:!0,get:function(){return o(l).default}})},68129:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_NOTIFICATIONS=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=void 0;var n="@@INSIGHTS-CORE/NOTIFICATIONS/";t.ADD_NOTIFICATION="".concat(n,"ADD_NOTIFICATION"),t.REMOVE_NOTIFICATION="".concat(n,"REMOVE_NOTIFICATION"),t.CLEAR_NOTIFICATIONS="".concat(n,"CLEAR_NOTIFICATIONS"),t.default={ADD_NOTIFICATION:t.ADD_NOTIFICATION,REMOVE_NOTIFICATION:t.REMOVE_NOTIFICATION,CLEAR_NOTIFICATIONS:t.CLEAR_NOTIFICATIONS}},53446:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clearNotifications=t.removeNotification=t.addNotification=void 0;var r=n(68129);t.addNotification=function(e){return{type:r.ADD_NOTIFICATION,payload:o({id:("notification","cloud-servicesnotification-"+(new Date).getTime()+Math.random().toString(36).slice(2))},e)}},t.removeNotification=function(e){return{type:r.REMOVE_NOTIFICATION,payload:e}},t.clearNotifications=function(){return{type:r.CLEAR_NOTIFICATIONS}},t.default={addNotification:t.addNotification,removeNotification:t.removeNotification,clearNotifications:t.clearNotifications}},24778:function(e,t,n){var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.notifications=t.notificationsReducers=t.defaultState=void 0;var r=n(68129);t.defaultState=[],t.notificationsReducers=function(e,n){switch(void 0===e&&(e=t.defaultState),n.type){case r.ADD_NOTIFICATION:return i=e,a=n.payload,o(o([],i,!0),[a],!1);case r.REMOVE_NOTIFICATION:return function(e,t){var n=t.payload,r=e.findIndex((function(e){return e.id===n}));return o(o([],e.slice(0,r),!0),e.slice(r+1),!0)}(e,n);case r.CLEAR_NOTIFICATIONS:return[];default:return e}var i,a},t.notifications=t.notificationsReducers,t.default=t.notifications},93736:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(46801),r=n(65126);const i=function(e){var t=(0,o.useNavigate)();return function(n,o){return t((0,r.n)(n,e),o)}}},1227:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(29439),r=n(92950),i=n.n(r),a=n(86896),c=n(45697),l=n.n(c),u=n(30893),s=n(69957),f=n(25864),d=function(e){var t=e.title,n=e.text,c=e.onClose,l=e.onSubmit,d=e.isOpen,m=e.confirmButtonLabel,p=e.withCheckbox,O=(0,a.Z)(),I=(0,r.useState)(!1),g=(0,o.Z)(I,2),v=g[0],N=g[1];return i().createElement(f.Modal,{className:"rbac",title:i().createElement("div",null,i().createElement(s.ZP,{className:"ins-m-alert rbac-c__delete-icon"})," ",t),isOpen:d,variant:f.ModalVariant.small,onClose:c,actions:[i().createElement(f.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:p&&!v,variant:"danger",onClick:l},m),i().createElement(f.Button,{key:"cancel",ouiaId:"secondary-cancel-button",variant:"link",onClick:c},O.formatMessage(u.Z.cancel))]},i().createElement(f.Split,{hasGutter:!0},i().createElement(f.SplitItem,{isFilled:!0},i().createElement(f.Stack,{hasGutter:!0},i().createElement(f.TextContent,null,n)))),p?i().createElement(f.Checkbox,{isChecked:v,onChange:function(){return N(!v)},label:O.formatMessage(u.Z.confirmCheckMessage),id:"remove-modal-check",className:"pf-u-mt-lg"}):null)};d.propTypes={text:l().any,title:l().string,confirmButtonLabel:l().string,onSubmit:l().func,onClose:l().func,isOpen:l().bool,withCheckbox:l().bool},d.defaultProps={withCheckbox:!1};const m=d},97384:(e,t,n)=>{n.d(t,{Z:()=>T});var o=n(29439),r=n(4942),i=n(93433),a=n(92950),c=n.n(a),l=n(45697),u=n.n(l),s=n(86896),f=n(50533),d=n(1936),m=n(55140),p=n(65916),O=n(11107),I=n(30060),g=n(28090),v=n(19756),N=n(30893);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.selectedRoles,n=e.setSelectedRoles,l=e.rolesExcluded,u=e.groupId,b=(0,s.Z)(),C=(0,m.Z)(),T=(0,f.useDispatch)(),_=(0,a.useRef)(null),h=(0,f.useSelector)(l?function(e){var t=e.groupReducer.selectedGroup,n=t.addRoles,o=n.roles,r=n.pagination,i=n.loaded,a=t.uuid;return{roles:o,pagination:r||y(y({},p.eX),{},{count:null==o?void 0:o.length}),isLoading:!i,groupId:u||a}}:function(e){var t=e.roleReducer,n=t.roles,o=t.isLoading;return{roles:n.data,pagination:n.meta,isLoading:o,filters:n.filters}},f.shallowEqual),E=h.roles,A=h.pagination,R=h.isLoading,S=h.groupId,M=h.filters,P=(0,a.useRef)([y({title:b.formatMessage(N.Z.name),key:"display_name"},l?{orderBy:"name"}:{transforms:[d.sortable]}),{title:b.formatMessage(N.Z.description)}]).current,Z=(0,a.useState)(""),D=(0,o.Z)(Z,2),F=D[0],j=D[1],k=(0,a.useState)({index:1,direction:"asc"}),w=(0,o.Z)(k,2),L=w[0],x=w[1],G=(0,a.useCallback)((function(e,t){return T(l?(0,v.nr)(e,t):(0,g.Kt)((0,O.jl)(y(y({},t),{},{chrome:C}))))}),[l]),B="".concat("desc"===(null==L?void 0:L.direction)?"-":"").concat(P[null==L?void 0:L.index].key),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.reduce((function(e,n){var o=n.uuid,r=n.display_name,a=n.name,c=n.description;return[].concat((0,i.Z)(e),[{uuid:o,cells:[r||a,c],selected:Boolean(t&&t.find((function(e){return e.uuid===o})))}])}),[]):[]}(E,t);return(0,a.useEffect)((function(){G(S,y(y({},A),{},{orderBy:B}))}),[]),c().createElement(I.M,{isSelectable:!0,isCompact:!0,borders:!1,columns:P,rows:V,sortBy:L,onSort:function(e,t,n,o){var i="".concat("desc"===n?"-":"").concat(P[o?t-1:t].key);x({index:t,direction:n}),function(e,t){var n=t.name,o=t.count,r=t.limit,i=t.offset,a=t.orderBy;G(e,(0,O.jl)({count:o,limit:r,offset:i,orderBy:a,filters:{display_name:n}}))}(S,y(y({},A),{},{offset:0,orderBy:i},(null==M?void 0:M.length)>0?y({},M.reduce((function(e,t){return y(y({},e),{},(0,r.Z)({},t.key,t.value))}),{})):{name:F}))},data:E,filterValue:F,filterPlaceholder:b.formatMessage(N.Z.roleName).toLowerCase(),fetchData:function(e){return G(S,y(y({},e),{},{filters:{display_name:e.name}}))},setFilterValue:function(e){var t=e.name;return j(t)},isLoading:R,ouiaId:"roles-table",pagination:A,checkedRows:t,setCheckedItems:function(e){n((function(t){return e(t).map((function(e){var t=e.uuid,n=e.name;return{uuid:t,label:e.label||n}}))}))},titlePlural:b.formatMessage(N.Z.roles).toLowerCase(),titleSingular:b.formatMessage(N.Z.role),tableId:"roles-list",textFilterRef:_})};C.propTypes={canSort:u().bool,setSelectedRoles:u().func.isRequired,selectedRoles:u().array,rolesExcluded:u().bool.isRequired,groupId:u().string},C.defaultProps={roles:[],pagination:p.eX,canSort:!0};const T=C},57486:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(29439),r=n(92950),i=n.n(r),a=n(45697),c=n.n(a),l=n(86896),u=n(25864),s=n(46801),f=n(50533),d=n(35664),m=n(71355),p=n(19756),O=n(93736),I=n(97384),g=n(25924),v=n(30893),N=function(e){var t=e.afterSubmit,n=e.fetchUuid,a=e.selectedRoles,c=e.setSelectedRoles,N=e.title,b=e.closeUrl,y=e.addRolesToGroup,C=e.groupName,T=e.isDefault,_=e.isChanged,h=e.onDefaultGroupChanged,E=(0,l.Z)(),A=(0,f.useDispatch)(),R=(0,s.useLocation)().state,S=(0,s.useParams)().groupId,M=T&&n?n:S,P=(0,O.Z)(),Z=(0,r.useState)(!1),D=(0,o.Z)(Z,2),F=D[0],j=D[1],k=(0,f.useSelector)((function(e){var t=e.groupReducer,n=t.selectedGroup,o=t.isRecordLoading;return{groupName:C||(null==R?void 0:R.name)||n.name,isRecordLoading:o}})),w=k.groupName,L=k.isRecordLoading;(0,r.useEffect)((function(){w||A((0,p.yi)(M))}),[]);var x=function(){c&&c([]),A((0,m.addNotification)({variant:"warning",title:E.formatMessage(v.Z.addingGroupRolesTitle),dismissDelay:8e3,description:E.formatMessage(v.Z.addingGroupRolesCancelled)})),P(b)},G=function(){var e=a.map((function(e){return e.uuid}));return y(M,e).then(t),c([]),T&&!_&&h(!0),P(b)};return T&&!_&&F?i().createElement(g.Z,{isOpen:F,onClose:x,onSubmit:G}):i().createElement(u.Modal,{className:"rbac",title:E.formatMessage(v.Z.addRolesToGroup,{name:L?i().createElement(d.Z,{size:d.i.xs,className:"rbac-c-skeleton__add-role-to-group"}):w}),variant:u.ModalVariant.medium,isOpen:!0,onClose:function(){x(),j(!0)},actions:[i().createElement(u.Button,{"aria-label":"Save",ouiaId:"primary-save-button",variant:"primary",key:"confirm",isDisabled:0===a.length,onClick:function(){j(!0),(!T||_)&&G()}},E.formatMessage(v.Z.addToGroup)),i().createElement(u.Button,{"aria-label":"Cancel",ouiaId:"secondary-cancel-button",variant:"link",key:"cancel",onClick:x},E.formatMessage(v.Z.cancel))]},i().createElement(u.Stack,{hasGutter:!0},N&&i().createElement(u.StackItem,null,i().createElement(u.Title,{headingLevel:"h4",size:"xl"},N)),i().createElement(u.StackItem,null,i().createElement(u.Alert,{variant:"info",isInline:!0,isPlain:!0,title:E.formatMessage(v.Z.onlyGroupRolesVisible)})),i().createElement(u.StackItem,null,i().createElement(I.Z,{selectedRoles:a,setSelectedRoles:c,rolesExcluded:!0,groupId:M}))))};N.propTypes={afterSubmit:c().func,selectedRoles:c().array,setSelectedRoles:c().func,addRolesToGroup:c().func,closeUrl:c().string,title:c().string,groupName:c().string,fetchUuid:c().string,isDefault:c().bool,isChanged:c().bool,onDefaultGroupChanged:c().func};const b=N},25924:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(87462),r=n(92950),i=n.n(r),a=n(45697),c=n.n(a),l=n(25864),u=n(1227),s=n(86896),f=n(44012),d=n(30893),m=function(e){var t=e.isOpen,n=e.onClose,r=e.onSubmit,a=(0,s.Z)();return i().createElement(u.Z,{text:i().createElement(l.TextContent,null,i().createElement(l.Text,null,i().createElement(f.Z,(0,o.Z)({},d.Z.defaultAccessGroupEditWarning,{values:{b:function(e){return i().createElement("b",null,e)}}})))),title:a.formatMessage(d.Z.warning),withCheckbox:!0,isOpen:t,confirmButtonLabel:a.formatMessage(d.Z.continue),onClose:n,onSubmit:r})};m.propTypes={onSubmit:c().func,onClose:c().func,isOpen:c().bool};const p=m},44012:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(70655),r=n(92950),i=n(86896),a=n(680);function c(e){var t=(0,i.Z)(),n=t.formatMessage,o=t.textComponent,a=void 0===o?r.Fragment:o,c=e.id,l=e.description,u=e.defaultMessage,s=e.values,f=e.children,d=e.tagName,m=void 0===d?a:d,p=n({id:c,description:l,defaultMessage:u},s,{ignoreTag:e.ignoreTag});return"function"==typeof f?f(Array.isArray(p)?p:[p]):m?r.createElement(m,null,r.Children.toArray(p)):r.createElement(r.Fragment,null,p)}c.displayName="FormattedMessage";var l=r.memo(c,(function(e,t){var n=e.values,r=(0,o.__rest)(e,["values"]),i=t.values,c=(0,o.__rest)(t,["values"]);return(0,a.wU)(i,n)&&(0,a.wU)(r,c)}));l.displayName="MemoizedFormattedMessage";const u=l}}]);
//# sourceMappingURL=../sourcemaps/4996.c7be4c54430929e5577b08e150afc1e2.js.map