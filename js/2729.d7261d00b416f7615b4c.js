(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[2729],{96219:(e,t,a)=>{"use strict";a.d(t,{rT:()=>p,oG:()=>d});var n=a(93345),l=a.n(n),i=a(71902),o=a(47441),s=a(17661),r=a(59028),c=a(87413);const d={all:"all",none:"none",page:"page",nonePage:"nonePage"},p=e=>{var{isDataPaginated:t=!0,canSelectAll:a,pageSelected:p,pagePartiallySelected:m,pageCount:g,selectedCount:u=0,totalCount:f=0,ouiaId:h="BulkSelect",onSelect:b,menuToggleCheckboxProps:v}=e,k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a}(e,["isDataPaginated","canSelectAll","pageSelected","pagePartiallySelected","pageCount","selectedCount","totalCount","ouiaId","onSelect","menuToggleCheckboxProps"]);const[E,y]=(0,n.useState)(!1),_=(0,n.useMemo)((()=>l().createElement(l().Fragment,null,l().createElement(i.t,{ouiaId:`${h}-select-none`,value:d.none,key:d.none},"Select none (0)"),t&&l().createElement(i.t,{ouiaId:`${h}-select-page`,value:d.page,key:d.page},"Select page"+(g?` (${g})`:"")),a&&l().createElement(i.t,{ouiaId:`${h}-select-all`,value:d.all,key:d.all},"Select all"+(f?` (${f})`:"")))),[t,a,h,g,f]),S=t?d.page:d.all,w=t?d.nonePage:d.none,C=()=>y(!E);return l().createElement(o.m,Object.assign({shouldFocusToggleOnSelect:!0,ouiaId:`${h}-dropdown`,onSelect:(e,t)=>{y(!E),null==b||b(t)},isOpen:E,onOpenChange:e=>y(e),toggle:e=>l().createElement(s.S,{ref:e,isExpanded:E,onClick:C,"aria-label":"Bulk select toggle","data-ouia-component-id":`${h}-toggle`,splitButtonOptions:{items:[l().createElement(r.l,Object.assign({ouiaId:`${h}-checkbox`,id:`${h}-checkbox`,key:"bulk-select-checkbox","aria-label":`Select ${S}`,isChecked:t&&m||!t&&u>0&&u<f?null:p||u===f,onChange:e=>null==b?void 0:b(e&&null!==e?S:w)},v)),u>0?l().createElement("span",{onClick:C,"data-ouia-component-id":`${h}-text`,key:"bulk-select-text"},`${u} selected`):null]}})},k),l().createElement(c.Q,null,_))}},60281:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(93345),l=a.n(n),i=a(63802),o=a(96998),s=a(96553),r=a(15322),c=a(30666),d=a(93973),p=a(51976),m=a(22069),g=a(72583),u=a(40167);const f=(0,a(23313).MA)({iconMinWidth:{minWidth:"48px"}}),h=({title:e,subtitle:t,linkProps:a,icon:n,label:h,breadcrumbs:b=null,actionMenu:v,ouiaId:k="ContentHeader"})=>{const E=f();return l().createElement(i.d8,{variant:"light"},b&&l().createElement("div",{className:"pf-v5-u-mb-md"},b),l().createElement(o.s,null,n&&l().createElement(l().Fragment,null,l().createElement(s.Z,{alignSelf:{default:"alignSelfCenter"},className:`${E.iconMinWidth}`},n),l().createElement(r.c,{orientation:{default:"vertical"}})),l().createElement(s.Z,{flex:{default:"flex_1"}},l().createElement(c.B,{hasGutter:!0},l().createElement(d.o,null,l().createElement(p.n,null,l().createElement(m.E,{className:"pf-v5-u-mb-sm",component:"h1",ouiaId:`${k}-title`},e))),h&&l().createElement(d.o,null,h),l().createElement(d.o,{isFilled:!0}),v&&l().createElement(d.o,null,v)),l().createElement(p.n,null,l().createElement(m.E,{component:"p",ouiaId:`${k}-subtitle`},t),a&&l().createElement(g.$n,Object.assign({variant:g.Ak.link,ouiaId:`${k}-link-button`,isInline:!0,icon:a.isExternal?l().createElement(u.ExternalLinkAltIcon,null):null,iconPosition:"end"},a),a.label)))))}},59028:(e,t,a)=>{"use strict";a.d(t,{l:()=>r});var n=a(8674),l=a(93345),i=a(48280),o=a(33774),s=a(31398);class r extends l.Component{constructor(e){super(e),this.handleChange=e=>{this.props.onChange(e.target.checked,e)},this.calculateChecked=()=>{const{isChecked:e,defaultChecked:t}=this.props;return null!==e&&(void 0!==e?e:t)},this.state={ouiaStateId:(0,s.getDefaultOUIAId)(r.displayName)}}render(){const e=this.props,{className:t,isValid:a,isDisabled:c,isChecked:d,children:p,ouiaId:m,ouiaSafe:g,onChange:u,defaultChecked:f,id:h}=e,b=(0,n.__rest)(e,["className","isValid","isDisabled","isChecked","children","ouiaId","ouiaSafe","onChange","defaultChecked","id"]),v=p&&l.createElement("span",{className:(0,o.css)(i.A.checkLabel,t),"aria-hidden":"true",id:h},p);return l.createElement("label",{className:(0,o.css)(i.A.check,!p&&i.A.modifiers.standalone,t)},l.createElement("input",Object.assign({className:(0,o.css)(i.A.checkInput)},void 0!==this.calculateChecked()&&{onChange:this.handleChange},{name:h,type:"checkbox",ref:e=>e&&(e.indeterminate=null===d),"aria-invalid":!a,disabled:c},void 0!==f?{defaultChecked:f}:{checked:this.calculateChecked()},(0,s.getOUIAProps)(r.displayName,void 0!==m?m:this.state.ouiaStateId,g),b)),v)}}r.displayName="MenuToggleCheckbox",r.defaultProps={isValid:!0,isDisabled:!1,onChange:()=>{}}},63802:(e,t,a)=>{"use strict";a.d(t,{d8:()=>g,yp:()=>l,zC:()=>n});var n,l,i=a(8674),o=a(93345),s=a(73408),r=a(33774),c=a(47931),d=a(54282);!function(e){e.default="default",e.light="light",e.dark="dark",e.darker="darker"}(n||(n={})),function(e){e.default="default",e.nav="nav",e.subNav="subnav",e.breadcrumb="breadcrumb",e.tabs="tabs",e.wizard="wizard"}(l||(l={}));const p={[l.default]:s.A.pageMainSection,[l.nav]:s.A.pageMainNav,[l.subNav]:s.A.pageMainSubnav,[l.breadcrumb]:s.A.pageMainBreadcrumb,[l.tabs]:s.A.pageMainTabs,[l.wizard]:s.A.pageMainWizard},m={[n.default]:"",[n.light]:s.A.modifiers.light,[n.dark]:s.A.modifiers.dark_200,[n.darker]:s.A.modifiers.dark_100},g=e=>{var{className:t="",children:a,variant:n="default",type:g="default",padding:u,isFilled:f,isWidthLimited:h=!1,isCenterAligned:b=!1,stickyOnBreakpoint:v,hasShadowTop:k=!1,hasShadowBottom:E=!1,hasOverflowScroll:y=!1,"aria-label":_,component:S="section"}=e,w=(0,i.__rest)(e,["className","children","variant","type","padding","isFilled","isWidthLimited","isCenterAligned","stickyOnBreakpoint","hasShadowTop","hasShadowBottom","hasOverflowScroll","aria-label","component"]);const{height:C,getVerticalBreakpoint:O}=o.useContext(d.NQ);o.useEffect((()=>{y&&!_&&console.warn("PageSection: An accessible aria-label is required when hasOverflowScroll is set to true.")}),[y,_]);const A=S;return o.createElement(A,Object.assign({},w,{className:(0,r.css)(p[g],(0,c.ay)(u,s.A),(0,c.ay)(v,s.A,"sticky-",O(C),!0),m[n],!1===f&&s.A.modifiers.noFill,!0===f&&s.A.modifiers.fill,h&&s.A.modifiers.limitWidth,h&&b&&g!==l.subNav&&s.A.modifiers.alignCenter,k&&s.A.modifiers.shadowTop,E&&s.A.modifiers.shadowBottom,y&&s.A.modifiers.overflowScroll,t)},y&&{tabIndex:0},{"aria-label":_}),h&&o.createElement("div",{className:(0,r.css)(s.A.pageMainBody)},a),!h&&a)};g.displayName="PageSection"},51976:(e,t,a)=>{"use strict";a.d(t,{n:()=>s});var n=a(8674),l=a(93345),i=a(3056),o=a(33774);const s=e=>{var{children:t,className:a="",isVisited:s=!1}=e,r=(0,n.__rest)(e,["children","className","isVisited"]);return l.createElement("div",Object.assign({},r,{className:(0,o.css)(i.A.content,s&&i.A.modifiers.visited,a)}),t)};s.displayName="TextContent"},30666:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});var n=a(8674),l=a(93345),i=a(53209),o=a(33774);const s=e=>{var{hasGutter:t=!1,isWrappable:a=!1,className:s="",children:r=null,component:c="div"}=e,d=(0,n.__rest)(e,["hasGutter","isWrappable","className","children","component"]);const p=c;return l.createElement(p,Object.assign({},d,{className:(0,o.css)(i.A.split,t&&i.A.modifiers.gutter,a&&i.A.modifiers.wrap,s)}),r)};s.displayName="Split"},93973:(e,t,a)=>{"use strict";a.d(t,{o:()=>s});var n=a(8674),l=a(93345),i=a(53209),o=a(33774);const s=e=>{var{isFilled:t=!1,className:a="",children:s=null}=e,r=(0,n.__rest)(e,["isFilled","className","children"]);return l.createElement("div",Object.assign({},r,{className:(0,o.css)(i.A.splitItem,t&&i.A.modifiers.fill,a)}),s)};s.displayName="SplitItem"},33968:(e,t,a)=>{"use strict";a.d(t,{Ed:()=>s,wf:()=>i,xD:()=>r});var n=a(93345),l=a.n(n);const i={rowClick:"rowClick"},o=(0,n.createContext)({subscribe:()=>()=>null,trigger:()=>null}),s=({children:e})=>{const[t,a]=(0,n.useState)({[i.rowClick]:{}}),s=(0,n.useCallback)(((e,...a)=>{Object.values(t[e]).forEach((e=>{e(...a)}))}),[t]);return l().createElement(o.Provider,{value:{subscribe:(e,t)=>{const n=crypto.randomUUID();return a((a=>Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),{[n]:t})}))),()=>{a((t=>{const a=Object.assign({},t);return delete a[e][n],a}))}},trigger:s}},e)},r=()=>(0,n.useContext)(o)},29460:(e,t,a)=>{"use strict";a.d(t,{Jk:()=>n.Jk,U$:()=>o.Ay,Ub:()=>l.Ay,wf:()=>i.wf,xD:()=>i.xD}),a(75500);var n=a(59622),l=(a(13692),a(53781),a(71604),a(608),a(6271)),i=a(33968),o=a(52453)},73408:(e,t,a)=>{"use strict";a.d(t,{A:()=>n}),a(50545);const n={avatar:"pf-v5-c-avatar",brand:"pf-v5-c-brand",button:"pf-v5-c-button",contextSelector:"pf-v5-c-context-selector",dirRtl:"pf-v5-m-dir-rtl",drawer:"pf-v5-c-drawer",masthead:"pf-v5-c-masthead",modifiers:{light:"pf-m-light",menu:"pf-m-menu",hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",read:"pf-m-read",selected:"pf-m-selected",unread:"pf-m-unread",attention:"pf-m-attention",expanded:"pf-m-expanded",collapsed:"pf-m-collapsed",pageInsets:"pf-m-page-insets",insetNone:"pf-m-inset-none",fill:"pf-m-fill",noFill:"pf-m-no-fill",limitWidth:"pf-m-limit-width",alignCenter:"pf-m-align-center",overflowScroll:"pf-m-overflow-scroll",shadowBottom:"pf-m-shadow-bottom",shadowTop:"pf-m-shadow-top",stickyTop:"pf-m-sticky-top",stickyBottom:"pf-m-sticky-bottom",stickyTopOnSmHeight:"pf-m-sticky-top-on-sm-height",stickyBottomOnSmHeight:"pf-m-sticky-bottom-on-sm-height",stickyTopOnMdHeight:"pf-m-sticky-top-on-md-height",stickyBottomOnMdHeight:"pf-m-sticky-bottom-on-md-height",stickyTopOnLgHeight:"pf-m-sticky-top-on-lg-height",stickyBottomOnLgHeight:"pf-m-sticky-bottom-on-lg-height",stickyTopOnXlHeight:"pf-m-sticky-top-on-xl-height",stickyBottomOnXlHeight:"pf-m-sticky-bottom-on-xl-height",stickyTopOn_2xlHeight:"pf-m-sticky-top-on-2xl-height",stickyBottomOn_2xlHeight:"pf-m-sticky-bottom-on-2xl-height",light_100:"pf-m-light-100",dark_100:"pf-m-dark-100",dark_200:"pf-m-dark-200",padding:"pf-m-padding",noPadding:"pf-m-no-padding",paddingOnSm:"pf-m-padding-on-sm",noPaddingOnSm:"pf-m-no-padding-on-sm",paddingOnMd:"pf-m-padding-on-md",noPaddingOnMd:"pf-m-no-padding-on-md",paddingOnLg:"pf-m-padding-on-lg",noPaddingOnLg:"pf-m-no-padding-on-lg",paddingOnXl:"pf-m-padding-on-xl",noPaddingOnXl:"pf-m-no-padding-on-xl",paddingOn_2xl:"pf-m-padding-on-2xl",noPaddingOn_2xl:"pf-m-no-padding-on-2xl",light_200:"pf-m-light-200"},nav:"pf-v5-c-nav",notificationBadge:"pf-v5-c-notification-badge",page:"pf-v5-c-page",pageDrawer:"pf-v5-c-page__drawer",pageHeader:"pf-v5-c-page__header",pageHeaderBrand:"pf-v5-c-page__header-brand",pageHeaderBrandLink:"pf-v5-c-page__header-brand-link",pageHeaderBrandToggle:"pf-v5-c-page__header-brand-toggle",pageHeaderNav:"pf-v5-c-page__header-nav",pageHeaderTools:"pf-v5-c-page__header-tools",pageHeaderToolsGroup:"pf-v5-c-page__header-tools-group",pageHeaderToolsItem:"pf-v5-c-page__header-tools-item",pageMain:"pf-v5-c-page__main",pageMainBody:"pf-v5-c-page__main-body",pageMainBreadcrumb:"pf-v5-c-page__main-breadcrumb",pageMainDrawer:"pf-v5-c-page__main-drawer",pageMainGroup:"pf-v5-c-page__main-group",pageMainNav:"pf-v5-c-page__main-nav",pageMainSection:"pf-v5-c-page__main-section",pageMainSubnav:"pf-v5-c-page__main-subnav",pageMainTabs:"pf-v5-c-page__main-tabs",pageMainWizard:"pf-v5-c-page__main-wizard",pageSidebar:"pf-v5-c-page__sidebar",pageSidebarBody:"pf-v5-c-page__sidebar-body",themeDark:"pf-v5-theme-dark"}},53209:(e,t,a)=>{"use strict";a.d(t,{A:()=>n}),a(83696);const n={modifiers:{wrap:"pf-m-wrap",fill:"pf-m-fill",gutter:"pf-m-gutter"},split:"pf-v5-l-split",splitItem:"pf-v5-l-split__item"}},2674:(e,t,a)=>{"use strict";a.r(t),a.d(t,{RolesPage:()=>D,default:()=>R});var n=a(93345),l=a.n(n),i=a(69733),o=a(59622),s=a(96219),r=a(52453),c=a(13692),d=a(6271),p=a(33968),m=a(80868),g=a(17228),u=a(58510),f=a(52577),h=a(60281),b=a(8582),v=a(8604),k=a(40335),E=a(42134),y=a(49634),_=a(46428),S=a(7248),w=a(49646),C=a(29460),O=a(73963),A=a.n(O);const x=({viewedRole:e})=>{const t=(0,v.tz)(),a=[t.formatMessage(k.A.application),t.formatMessage(k.A.resourceType),t.formatMessage(k.A.operation)],i=(0,n.useMemo)((()=>(e?.access??[]).map((e=>(e=>{const[t,a,n]=e.permission.split(":");return[t,a,n]})(e)))),[e?.access]);return l().createElement(r.U$,{ouiaId:"role-permissions-table"},l().createElement(d.Ub,{columns:a,rows:i}))},P=({viewedRole:e})=>{const t=(0,v.tz)(),a=[t.formatMessage(k.A.userGroup),t.formatMessage(k.A.workspaceAssignment)],i=(0,n.useMemo)((()=>(e?.groups_in??[]).map((e=>[e.name,"TBD"]))),[e?.groups_in]);return l().createElement(r.U$,{ouiaId:"assigned-usergroups-table"},l().createElement(d.Ub,{columns:a,rows:i}))},M="RolesTable",I=({selectedRole:e,setSelectedRole:t})=>{const[a,i]=l().useState(0),o=(0,C.xD)(),s=(0,v.tz)();(0,n.useEffect)((()=>{const e=o.subscribe(C.wf.rowClick,(e=>{t(e)}));return()=>e()}),[]);const r=l().createElement(_.Popover,{triggerAction:"hover",headerContent:s.formatMessage(k.A.assignedUserGroupsTooltipHeader),bodyContent:s.formatMessage(k.A.assignedUserGroupsTooltipBody)},l().createElement(A(),null));return l().createElement(m.DrawerPanelContent,{minSize:"600px"},l().createElement(m.DrawerHead,null,l().createElement(S.Title,{className:"pf-v5-u-mb-md",headingLevel:"h2",ouiaId:`${M}-drawer-title`},e?.display_name),l().createElement(m.DrawerActions,null,l().createElement(m.DrawerCloseButton,{onClick:()=>t(void 0),"data-ouia-component-id":`${M}-drawer-close-button`}))),l().createElement(w.Tabs,{activeKey:a,onSelect:(e,t)=>{i(t)},ouiaId:`${M}-drawer-tabs`},l().createElement(w.Tab,{eventKey:0,title:l().createElement(w.TabTitleText,null,"Permissions"),ouiaId:`${M}-permissions-tab`},l().createElement(x,{viewedRole:e})),l().createElement(w.Tab,{eventKey:1,title:l().createElement(w.TabTitleText,null,"Assigned user groups ",r),ouiaId:`${M}-assigned-groups-tab`},l().createElement(P,{viewedRole:e}))))},T=[{title:"Edit role",onClick:()=>console.log("Editing role")},{title:"Delete role",onClick:()=>console.log("Removing role")}],N=[{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50},{title:"100",value:100}],B="RolesTable",$=({selectedRole:e})=>{const{roles:t,totalCount:a}=(0,i.useSelector)((e=>({roles:e.roleReducer.roles.data||[],totalCount:e.roleReducer.roles.meta.count}))),{trigger:m}=(0,p.xD)(),_=(0,v.tz)(),S=[_.formatMessage(k.A.name),_.formatMessage(k.A.description),_.formatMessage(k.A.permissions),_.formatMessage(k.A.workspaces),_.formatMessage(k.A.userGroups),_.formatMessage(k.A.lastModified)],w=(0,i.useDispatch)(),[C,O]=(0,y.useSearchParams)(),A=(0,o.Vs)({perPage:20,searchParams:C,setSearchParams:O}),{page:x,perPage:P,onSetPage:M,onPerPageSelect:I}=A,$=(0,o.Jk)({matchOption:(e,t)=>e[0]===t[0]}),{selected:D,onSelect:R,isSelected:H}=$,j=(0,n.useCallback)((e=>{const{count:t,limit:a,offset:n,orderBy:l}=e;w((0,b.ip)({...(0,E.YP)({count:t,limit:a,offset:n,orderBy:l})}))}),[w]);(0,n.useEffect)((()=>{j({limit:P,offset:(x-1)*P,orderBy:"display_name",count:a||0})}),[j,x,P]);const G=t.map((t=>({row:Object.values({display_name:t.display_name,description:t.description,permissions:t.accessCount,workspaces:"",user_groups:"",last_modified:t.modified,rowActions:{cell:l().createElement(f.G,{items:T}),props:{isActionCell:!0}}}),props:{isClickable:!0,onRowClick:()=>(e=>{m(p.wf.rowClick,e)})(e?.display_name===t.display_name?void 0:t),isRowSelected:e?.name===t.name}}))),U=G.length>0&&G.every(H),L=!U&&G.some(H);return l().createElement(l().Fragment,null,l().createElement(h.A,{title:"Roles",subtitle:""}),l().createElement(g.PageSection,{isWidthLimited:!0},l().createElement(r.U$,{ouiaId:B,selection:$},l().createElement(c.R,{ouiaId:`${B}-header-toolbar`,bulkSelect:l().createElement(s.rT,{isDataPaginated:!0,pageCount:t.length,totalCount:a,selectedCount:D.length,pageSelected:U,pagePartiallySelected:L,onSelect:e=>{e===s.oG.none&&R(!1),e===s.oG.all&&R(!0,t),e===s.oG.nonePage&&R(!1,G),e===s.oG.page&&R(!0,G)}}),pagination:l().createElement(u.Pagination,{perPageOptions:N,itemCount:a,page:x,perPage:P,onSetPage:M,onPerPageSelect:I})}),l().createElement(d.Ub,{columns:S,rows:G,ouiaId:`${B}-table`}),l().createElement(c.R,{ouiaId:`${B}-footer-toolbar`,pagination:l().createElement(u.Pagination,{perPageOptions:N,itemCount:a,page:x,perPage:P,onSetPage:M,onPerPageSelect:I})}))))},D=()=>{const[e,t]=(0,n.useState)(),a=(0,n.useRef)(null);return l().createElement(p.Ed,null,l().createElement(m.Drawer,{isExpanded:Boolean(e),onExpand:()=>a.current?.focus(),"data-ouia-component-id":`${B}-detail-drawer`},l().createElement(m.DrawerContent,{panelContent:l().createElement(I,{selectedRole:e,setSelectedRole:t})},l().createElement(m.DrawerContentBody,null,l().createElement($,{selectedRole:e})))))},R=D},50545:()=>{},81117:()=>{},36752:()=>{},83696:()=>{}}]);