/*! For license information please see 7426.78026311ad8079d7f132.js.LICENSE.txt */
"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[7426,7664],{91290:(e,t,n)=>{n.d(t,{ZP:()=>i,iC:()=>o,sN:()=>a});var r=n(40400);const a={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},o=(0,r.IU)(a),i=o},46441:(e,t,n)=>{n.d(t,{Z:()=>c});n(71002);var r=n(76857),a=n(92950),o=n.n(a),i=n(45697),l=n.n(i),u=(n(27361),n(48880));l().oneOfType([l().string,l().func,l().object]),l().func.isRequired,l().node.isRequired,l().bool,l().func.isRequired,l().node.isRequired,l().func.isRequired;var s=function(e){var t=e.renderNextButton,n=e.disableBack,i=e.handlePrev,l=e.buttonLabels,s=l.cancel,c=l.back,m=e.context,d=(0,u.default)(),f=(0,a.useContext)(m),p=f.success,g=f.error,h=f.submitting;return p||void 0===g||g||h?null:o().createElement(a.Fragment,null,t(),o().createElement(r.Button,{type:"button",variant:"secondary",isDisabled:n,onClick:i},c),o().createElement(r.Button,{type:"button",variant:"link",onClick:d.onCancel},s))};s.propTypes={disableBack:l().bool,handlePrev:l().func.isRequired,handleNext:l().func.isRequired,nextStep:l().oneOfType([l().string,l().shape({when:l().string.isRequired,stepMapper:l().object.isRequired}),l().func]),buttonLabels:l().shape({submit:l().node.isRequired,cancel:l().node.isRequired,back:l().node.isRequired,next:l().node.isRequired}).isRequired,context:l().object.isRequired,renderNextButton:l().func};const c=s},65731:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(92950),a=n.n(r),o=n(76857),i=n(70363),l=n(43047),u=n(86896),s=n(45697),c=n.n(s),m=n(30893),d=function(e){var t=e.context,n=e.title,s=e.text,c=(0,u.Z)(),d=(0,r.useContext)(i.default).jumpToStep,f=(0,r.useContext)(t).setWizardError;return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.large},a().createElement(o.EmptyStateIcon,{color:"red",icon:l.ZP}),a().createElement(o.Title,{headingLevel:"h4",size:"lg"},n),a().createElement(o.EmptyStateBody,null,s),a().createElement(o.Button,{onClick:function(){f(void 0),d(0)},variant:"primary"},c.formatMessage(m.Z.returnToStepNumber,{number:1})))};d.propTypes={context:c().object.isRequired,title:c().string.isRequired,text:c().string.isRequired};const f=d},55748:(e,t,n)=>{n.r(t),n.d(t,{default:()=>kt});var r=n(93433),a=n(29439),o=n(4942),i=n(92950),l=n.n(i),u=n(46801),s=n(1936),c=n(76857),m=n(86896),d=n(44873),f=n(45987),p=n(87462),g=n(45697),h=n.n(g),v=n(50533),b=n(71355),Z=n(93025),y=n(67850),E=n(47836),M=n(73943),O=n(64124),k=n(96354),R=n(48880),w=n(71002),S=n(15861),x=n(89168),C=n(40639),T=n(28412),D=n(82644),P=n(29558),j=n(30893),G=n(2034);function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new O(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=y(i,n);if(l){if(l===c)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function m(){}function d(){}function f(){}var p={};l(p,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(k([])));h&&h!==t&&n.call(h,a)&&(p=h);var v=f.prototype=m.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function Z(e,t){function r(a,o,i,l){var u=s(e[a],e,o);if("throw"!==u.type){var c=u.arg,m=c.value;return m&&"object"==(0,w.Z)(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(m).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,l)}))}l(u.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=f,l(v,"constructor",f),l(f,"constructor",d),d.displayName=l(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(Z.prototype),l(Z.prototype,o,(function(){return this})),e.AsyncIterator=Z,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new Z(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),l(v,i,"Generator"),l(v,a,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}var L=function(){var e=(0,S.Z)(I().mark((function e(t,n,r){var a,o,i,l,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,D.Sn)(),l=(0,P.d)({locale:T.S,messages:G},i),t){e.next=4;break}return e.abrupt("return",void 0);case 4:if(!(t.length>150)){e.next=6;break}throw l.formatMessage(j.Z.maxCharactersWarning,{number:150});case 6:return e.next=8,(0,x.bt)({limit:10,offset:0,filters:{name:t},nameMatch:"exact"}).catch((function(e){console.error(e)}));case 8:if(u=e.sent,!(r?null==u||null===(a=u.data)||void 0===a?void 0:a.some((function(e){return e[n]!==r})):(null==u||null===(o=u.data)||void 0===o?void 0:o.length)>0)){e.next=11;break}throw l.formatMessage(j.Z.nameAlreadyTaken);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=(0,C.Z)((function(e,t,n){return L(e,t,n)})),_=n(65731);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t,n=e.formFields,r=(0,m.Z)(),a=(0,i.useContext)(pe),o=a.submitting,u=a.error,s=a.setWizardError,d=(0,R.default)().getState;return(0,i.useEffect)((function(){s(void 0),L(d().values["group-name"]).then((function(){return s(!1)})).catch((function(){return s(!0)}))}),[]),void 0===u||o?l().createElement(c.Bullseye,null,l().createElement(c.Spinner,{size:"xl"})):!0===u?l().createElement(_.Z,{context:pe,title:r.formatMessage(j.Z.groupNameTakenTitle),text:r.formatMessage(j.Z.groupNameTakenText)}):l().createElement(l().Fragment,null,l().createElement(c.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},r.formatMessage(j.Z.reviewDetails)),[[A({},null==n||null===(t=n[0])||void 0===t?void 0:t[0])]])};q.propTypes={formFields:h().array};const F=q;var U=n(46441),V=n(19756),z=n(93736),W=n(41693),Q=n(92607),K=n(23393),H=n(59775),X=function(e,t){return void 0===e||t?"error":"default"},Y=function(e){return(null==e?void 0:e.length)>150?"error":"default"},J=function(e){var t=(0,m.Z)(),n=(0,W.Z)(e).input,r=(0,R.default)(),o=r.getState().values,u=o["group-name"],s=o["group-description"],d=(0,i.useState)(u||""),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=(0,i.useState)(),v=(0,a.Z)(h,2),b=v[0],Z=v[1],y=(0,i.useState)(s),E=(0,a.Z)(y,2),M=E[0],O=E[1],k=function(e){n.onChange(void 0),N(e).then((function(){n.onChange(e),Z(void 0)})).catch((function(e){Z(e)})),g(e)};return(0,i.useEffect)((function(){(null==p?void 0:p.length)>0&&k(p)}),[]),l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},l().createElement(H.c,{label:t.formatMessage(j.Z.groupName),helperTextInvalid:p?b:t.formatMessage(j.Z.required),isRequired:!0,validated:X(p,b)},l().createElement(Q.oi,{value:p,type:"text",validated:X(p,b),onBlur:function(){return""===p&&g(void 0)},onChange:function(e){return k(e)},"aria-label":"Group name"}))),l().createElement(c.StackItem,null,l().createElement(H.c,{label:t.formatMessage(j.Z.groupDescription),helperTextInvalid:t.formatMessage(j.Z.maxCharactersWarning,{number:150}),validated:Y(M)},l().createElement(K.Kx,{value:M,validated:Y(M),onChange:function(e){O(e),r.change("group-description",e)},"aria-label":"Group description",resizeOrientation:"vertical"}))))};J.propTypes={name:h().string,description:h().string,groups:h().array};const $=J;var ee=n(97384),te=function(e){var t=(0,m.Z)(),n=(0,i.useState)([]),r=(0,a.Z)(n,2),o=r[0],u=r[1],s=(0,W.Z)(e).input,d=(0,R.default)();return(0,i.useEffect)((function(){u(d.getState().values["roles-list"]||[])}),[]),(0,i.useEffect)((function(){s.onChange(o),d.change("roles-list",o)}),[o]),l().createElement(i.Fragment,null,l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,null,l().createElement(c.TextContent,null,l().createElement(c.Text,null,t.formatMessage(j.Z.selectRolesForGroupText)))),l().createElement(c.StackItem,null,l().createElement(c.FormGroup,{fieldId:"select-role"},l().createElement(ee.Z,{selectedRoles:o,setSelectedRoles:u,rolesExcluded:!1})))))};te.propTypes={selectedRoles:h().array,setSelectedRoles:h().func,title:h().string,description:h().string};const ne=te;var re=n(98033),ae=n(82916),oe=function(e){var t=(0,i.useState)([]),n=(0,a.Z)(t,2),r=n[0],o=n[1],u=(0,W.Z)(e).input,s=(0,m.Z)(),d=(0,R.default)();return(0,i.useEffect)((function(){o(d.getState().values["users-list"]||[])}),[]),(0,i.useEffect)((function(){u.onChange(r),d.change("users-list",r)}),[r]),l().createElement(i.Fragment,null,l().createElement(c.Form,null,l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,null,l().createElement(c.TextContent,null,l().createElement(ae.Z,{linkDescription:s.formatMessage(j.Z.toManageUsersText)}))),l().createElement(c.StackItem,null,l().createElement(c.FormGroup,{fieldId:"select-user"},l().createElement(c.Card,null,l().createElement(re.Z,{selectedUsers:r,setSelectedUsers:o,displayNarrow:!0})))))))};oe.propTypes={selectedUsers:h().array,setSelectedUsers:h().func,title:h().string,description:h().string};const ie=oe;var le=function(){var e=(0,m.Z)(),t=(0,R.default)().getState().values,n=t["group-name"],r=t["group-description"],a=t["users-list"],o=t["roles-list"];return l().createElement("div",{className:"rbac"},l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,null,l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,{className:"rbac-l-stack__item-summary"},l().createElement(c.Grid,null,l().createElement(c.GridItem,{md:3},l().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.groupName))),l().createElement(c.GridItem,{md:9},l().createElement(c.Text,{component:c.TextVariants.p},n))),l().createElement(c.Grid,null,l().createElement(c.GridItem,{md:3},l().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.groupDescription))),l().createElement(c.GridItem,{md:9},l().createElement(c.Text,{component:c.TextVariants.p},r))),l().createElement(c.Grid,null,l().createElement(c.GridItem,{md:3},l().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.roles))),l().createElement(c.GridItem,{md:9},l().createElement(c.Text,{component:c.TextVariants.p},o.map((function(e,t){return l().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))),l().createElement(c.Grid,null,l().createElement(c.GridItem,{md:3},l().createElement(c.Text,{component:c.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.members))),l().createElement(c.GridItem,{md:9},l().createElement(c.Text,{component:c.TextVariants.p},a.map((function(e,t){return l().createElement(c.Text,{className:"pf-u-mb-0",key:t},e.label)}))))))))))};le.propTypes={name:h().string,description:h().string,groups:h().array};const ue=le;var se=n(11107),ce=n(4682),me=["Content"];function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=(0,i.createContext)({success:!1,submitting:!1,error:void 0}),ge=function(e){return l().createElement(y.ZP,(0,p.Z)({},e,{showFormControls:!1}))},he=function(e){var t=e.Content,n=(0,f.Z)(e,me);return l().createElement(t,n)};he.propTypes={Content:h().elementType.isRequired};var ve={description:he,"set-name":$,"set-roles":ne,"set-users":ie,"summary-content":ue},be=function(e,t,n){return function(r){n(r),Object.keys(r).length>0?t(!0):e()}},Ze=function(e){var t=e.postMethod,n=e.pagination,r=e.filters,o=e.orderBy,u=(0,v.useDispatch)(),s=(0,m.Z)(),c=(0,i.useRef)(function(){var e=(0,D.Sn)(),t=(0,P.d)({locale:T.S,messages:G},e);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:t.formatMessage(j.Z.createGroup),fields:[{name:"name-and-description",nextStep:"add-roles",title:t.formatMessage(j.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:O.Z.REQUIRED}]},{component:k.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:O.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:t.formatMessage(j.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:"review",title:t.formatMessage(j.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},{name:"review",title:t.formatMessage(j.Z.reviewDetails),buttons:function(e){return l().createElement(U.Z,(0,p.Z)({},e,{context:pe}))},StepTemplate:F,fields:[{component:"summary-content",name:"summary-content"}]}]}]}}()),d=(0,z.Z)(),f=(0,i.useState)(!1),g=(0,a.Z)(f,2),h=g[0],y=g[1],R=(0,i.useState)({}),w=(0,a.Z)(R,2),S=w[0],x=w[1],C=(0,i.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),I=(0,a.Z)(C,2),L=I[0],N=I[1],_=function(){u((0,b.addNotification)({variant:"warning",title:s.formatMessage(j.Z.addingGroupTitle),dismissDelay:8e3,description:s.formatMessage(j.Z.addingGroupCanceledDescription)})),d({pathname:ce.Z.groups.link,search:(0,se.GT)(fe({page:1,per_page:n.limit},r))})};return h?l().createElement(M.R,{type:"group",isOpen:h,onModalCancel:function(){return y(!1)},onConfirmCancel:_}):l().createElement(pe.Provider,{value:fe(fe({},L),{},{setWizardError:function(e){return N((function(t){return fe(fe({},t),{},{error:e})}))},setWizardSuccess:function(e){return N((function(t){return fe(fe({},t),{},{success:e})}))},setHideForm:function(e){return N((function(t){return fe(fe({},t),{},{hideForm:e})}))}})},l().createElement(Z.Z,{schema:c.current,subscription:{values:!0},FormTemplate:ge,componentMapper:fe(fe({},E.ZP),ve),onSubmit:function(e){var r={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((function(e){return{username:e.label}})),roles_list:e["roles-list"].map((function(e){return e.uuid}))};d({pathname:ce.Z.groups.link,search:(0,se.GT)({page:1,per_page:n.limit})}),u((0,V.Rp)(r)).then((function(){return t({limit:n.limit,offset:0,orderBy:o,filters:{}})})).then((function(){u((0,b.addNotification)({variant:"success",title:s.formatMessage(j.Z.addGroupSuccessTitle),dismissDelay:8e3,description:s.formatMessage(j.Z.addGroupSuccessDescription)}))}))},initialValues:S,onCancel:be(_,y,x)}))};Ze.propTypes={postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,orderBy:h().string};const ye=Ze;var Ee=n(40483),Me=n(36457);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(e){var t=e.postMethod,n=e.pagination,r=e.filters,o=e.cancelRoute,s=e.submitRoute,d=void 0===s?o:s,f=e.group,g=e.onClose,h=(0,m.Z)(),Z=(0,i.useState)(void 0),y=(0,a.Z)(Z,2),M=y[0],R=y[1],w=(0,u.useNavigate)(),S=(0,u.useParams)().groupId,x=function(e){R(e)},C=(0,v.useDispatch)();(0,i.useEffect)((function(){S&&(0,V.yi)(S).payload.then((function(e){return x(e)})).catch((function(){return x(void 0)}))}),[]),(0,i.useEffect)((function(){R(f)}),[f]);var T=function(){C((0,b.addNotification)({variant:"warning",dismissDelay:8e3,title:h.formatMessage(M?j.Z.editingGroupTitle:j.Z.addingGroupTitle),description:h.formatMessage(M?j.Z.editGroupCanceledDescription:j.Z.addingGroupCanceledDescription)})),g(),w(o)},D={fields:[ke(ke({name:"name",label:h.formatMessage(j.Z.name),component:M?k.Z.TEXT_FIELD:"skeleton"},M?{validateOnMount:!0}:{}),{},{validate:[{type:"validate-group-name",id:null!=S?S:f.uuid,idKey:"uuid"},{type:O.Z.REQUIRED}]}),{name:"description",label:h.formatMessage(j.Z.description),component:M?k.Z.TEXTAREA:"skeleton",validate:[{type:O.Z.MAX_LENGTH,threshold:150}]}]},P={"validate-group-name":function(e){var t=e.idKey,n=e.id;return function(e){return N(e,t,n)}}};return l().createElement(Me.Z,{schema:D,componentMapper:ke(ke({},E.ZP),{},{skeleton:c.Skeleton}),onCancel:T,onSubmit:function(e){var a={uuid:e.uuid,description:e.description||null,name:e.name};t?C((0,V.mD)(a)).then((function(){return t({limit:null==n?void 0:n.limit,filters:r})})).then(w(d)):C((0,V.mD)(a)).then((function(){w(d)}))},validatorMapper:P,initialValues:ke({},M),FormTemplate:function(e){return l().createElement(Ee.Z,(0,p.Z)({},e,{ModalProps:{onClose:T,isOpen:!0,variant:"medium",title:h.formatMessage(j.Z.editGroupInfo)}}))}})};Re.defaultProps={cancelRoute:ce.Z.groups.path,onClose:function(){return null}},Re.propTypes={postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,cancelRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),submitRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),group:h().object,onClose:h().func};const we=Re;var Se=n(44012),xe=n(69957),Ce=n(19571),Te=function(e){var t=e.groupsUuid,n=e.isModalOpen,r=e.postMethod,o=e.pagination,s=e.filters,d=e.cancelRoute,f=e.submitRoute,g=void 0===f?d:f,h=(0,m.Z)(),b=(0,v.useSelector)((function(e){var t=e.groupReducer.selectedGroup;return{group:t,isLoading:!t.loaded}}),v.shallowEqual),Z=b.group,y=b.isLoading,E=(0,v.useDispatch)();(0,i.useEffect)((function(){1===t.length&&E((0,V.yi)(t[0].uuid))}),[]);var M=(0,u.useNavigate)(),O=(0,i.useState)(!1),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=t.length>1,x=function(){return M(d)};return l().createElement(c.Modal,{className:"rbac",isOpen:n,variant:c.ModalVariant.small,title:l().createElement(c.Text,null,l().createElement(xe.ZP,{className:"delete-group-warning-icon"}),"  ",h.formatMessage(S?j.Z.deleteGroupsQuestion:j.Z.deleteGroupQuestion)),onClose:x,actions:[l().createElement(c.Button,{key:"submit",isDisabled:!R,variant:"danger",type:"button",onClick:function(){var e=t.map((function(e){return e.uuid}));E((0,V.gg)(e)).then((function(){return r(e,{limit:null==o?void 0:o.limit,filters:s})})).then(M(g))}},h.formatMessage(S?j.Z.deleteGroups:j.Z.deleteGroup)),l().createElement(c.Button,{key:"cancel",variant:"link",type:"button",onClick:x},h.formatMessage(j.Z.cancel))]},l().createElement(c.TextContent,null,S?l().createElement(c.Text,null,l().createElement(Se.Z,(0,p.Z)({},j.Z.deletingGroupsRemovesRoles,{values:{b:function(e){return l().createElement("b",null,e)},count:t.length}}))):y?l().createElement(Ce.Z0,null):l().createElement(c.Text,null,l().createElement(Se.Z,(0,p.Z)({},j.Z.deletingGroupRemovesRoles,{values:{b:function(e){return l().createElement("b",null,e)},name:Z.name}}))))," ",l().createElement(c.Checkbox,{isChecked:R,onChange:function(){return w(!R)},label:h.formatMessage(j.Z.understandActionIrreversible),id:"delete-group-check"}))};Te.defaultProps={groupsUuid:[],isModalOpen:!1,cancelUrl:ce.Z.groups.path},Te.propTypes={groupsUuid:h().array.isRequired,isModalOpen:h().bool,postMethod:h().func,pagination:h().shape({limit:h().number.isRequired}).isRequired,filters:h().object.isRequired,cancelRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})]),submitRoute:h().oneOfType([h().string,h().shape({pathname:h().string.isRequired,search:h().string,hash:h().string})])};const De=Te;var Pe=n(41800),je=n(91290),Ge=n(94184),Ie=n.n(Ge),Le=n(62410),Ne=n(94496),_e=function(e){var t=e.id,n=e.uuid,r=e.bodyContent,o=(0,i.useState)(!1),u=(0,a.Z)(o,2),s=u[0],m=u[1],d=(0,i.useRef)(null);return l().createElement("span",{ref:d,key:"".concat(n,"-popover"),id:t},l().createElement(c.Popover,{zIndex:"110",position:"right",isVisible:s,shouldClose:function(){return m(!1)},hideOnOutsideClick:!0,bodyContent:r,appendTo:d.current},l().createElement(je.ZP,{onClick:function(){return m(!s)},className:Ie()("pf-c-question-circle-icon",{"icon-active":s})})))};_e.propTypes={id:h().string.isRequired,uuid:h().string.isRequired,bodyContent:h().string.isRequired};var Be=n(38376),Ae=n(55140),qe=function(e){var t=e.tabItems,n=e.isHeader,r=(0,u.useLocation)().pathname,a=(0,u.useNavigate)(),o=t.find((function(e){var t=e.name;return r.includes(t)}));return l().createElement(c.Tabs,{className:n?"rbac-page-header__tabs":"",activeKey:o?o.eventKey:0,onSelect:function(e,n){return a(t[n].to)}},t.map((function(e){return l().createElement(c.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};qe.propTypes={tabItems:h().array.isRequired,isHeader:h().bool};const Fe=qe;var Ue=function(e){var t=e.closeUrl,n=(0,m.Z)(),r=(0,z.Z)(),o=(0,u.useParams)().groupId,s=(0,v.useDispatch)(),d=(0,i.useState)([]),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=function(){s((0,b.addNotification)({variant:"warning",title:n.formatMessage(p.length>1?j.Z.addingGroupMembersTitle:j.Z.addingGroupMemberTitle),dismissDelay:8e3,description:n.formatMessage(p.length>1?j.Z.addingGroupMembersCancelled:j.Z.addingGroupMemberCancelled)})),r(t)};return l().createElement(c.Modal,{title:n.formatMessage(j.Z.addMembers),variant:c.ModalVariant.medium,isOpen:!0,actions:[l().createElement(c.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:0===p.length,variant:"primary",onClick:function(){var e=p.map((function(e){return{username:e.label}}));e.length>0&&(s((0,b.addNotification)({variant:"info",title:n.formatMessage(e.length>1?j.Z.addingGroupMembersTitle:j.Z.addingGroupMemberTitle),dismissDelay:8e3,description:n.formatMessage(e.length>1?j.Z.addingGroupMembersDescription:j.Z.addingGroupMemberDescription)})),s((0,V.dy)(o,e)).then((function(){s((0,V.nd)(o)),s((0,V.bt)({usesMetaInURL:!0}))}))),r(t)}},n.formatMessage(j.Z.addToGroup)),l().createElement(c.Button,{id:"add-groups-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:h},n.formatMessage(j.Z.cancel))],onClose:h},l().createElement(c.Stack,{hasGutter:!0},l().createElement(c.StackItem,null,l().createElement(c.TextContent,null,l().createElement(ae.Z,{linkDescription:n.formatMessage(j.Z.toManageUsersText)}))),l().createElement(c.StackItem,null,l().createElement(re.Z,{selectedUsers:p,setSelectedUsers:g,displayNarrow:!0}))))};Ue.defaultProps={closeUrl:ce.Z.groups.link},Ue.propTypes={closeUrl:h().string};const Ve=Ue;var ze=n(1227),We=n(88093),Qe=n(26794);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=function(e){var t=e.groupReducer.selectedGroup;return{members:t.members.data,pagination:t.members.meta,groupName:t.name,admin_default:t.admin_default,platform_default:t.platform_default,isLoading:t.members.isLoading}},Ye=function(e,t,n){return l().createElement(Se.Z,(0,p.Z)({},n?j.Z.removeMembersText:j.Z.removeMemberText,{values:{b:function(e){return l().createElement("b",null,e)},name:e,group:t}}))};const Je=function(){var e=(0,m.Z)(),t=(0,i.useState)(""),n=(0,a.Z)(t,2),o=n[0],f=n[1],p=(0,i.useState)([]),g=(0,a.Z)(p,2),h=g[0],b=g[1],Z=(0,i.useState)(!1),y=(0,a.Z)(Z,2),E=y[0],M=y[1],O=(0,i.useState)((function(){return null})),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=(0,i.useState)({}),x=(0,a.Z)(S,2),C=x[0],T=x[1],D=(0,u.useParams)().groupId,P=(0,v.useSelector)(Xe,v.shallowEqual),G=P.members,I=P.pagination,L=P.groupName,N=P.isLoading,_=P.admin_default,B=P.platform_default,A=(0,i.useContext)(Qe.Z),q=A.userAccessAdministrator,F=A.orgAdmin,U=(0,i.useRef)(F||q),W=[{title:e.formatMessage(j.Z.status),transforms:[s.nowrap]},{title:e.formatMessage(j.Z.username)},{title:e.formatMessage(j.Z.email)},{title:e.formatMessage(j.Z.lastName)},{title:e.formatMessage(j.Z.firstName)}],Q=(0,v.useDispatch)(),K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;Q((0,V.nd)(D,e,t))};(0,i.useEffect)((function(){K()}),[]),(0,i.useEffect)((function(){U.current=F||q}),[F,q]);var H=function(e){return Q((0,V.tz)(D,e)).then((function(){b([]),K(void 0,He(He({},I),{},{offset:0})),Q((0,V.bt)({usesMetaInURL:!0}))}))},X=((0,z.Z)(),(G||[]).map((function(e){return He(He({},e),{},{uuid:e.username})}))),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,m.Z)();return e.reduce((function(e,a){var o=a.is_active,i=a.username,u=a.email,s=a.first_name,m=a.last_name;return[].concat((0,r.Z)(e),[{uuid:i,username:i,cells:[{title:l().createElement(c.Label,{color:o&&"green"},n.formatMessage(o?j.Z.active:j.Z.inactive)),props:{data:{isActive:o}}},i,u,m,s],selected:t.find((function(e){return e.uuid===i}))}])}),[])}(X,h);return l().createElement(i.Fragment,null,l().createElement(ze.Z,{text:C.text,title:C.title,confirmButtonLabel:C.confirmButtonLabel,isOpen:E,onClose:function(){return M(!1)},onSubmit:function(){M(!1),R()}}),l().createElement(d.Z,{type:"content",id:"tab-principals"},B||_?l().createElement(c.Card,null,l().createElement(c.CardBody,null,l().createElement(c.Bullseye,null,l().createElement(c.TextContent,null,l().createElement(c.Text,{component:c.TextVariants.h1},e.formatMessage(_?j.Z.allOrgAdminsAreMembers:j.Z.allUsersAreMembers)))))):l().createElement(Pe.M,{data:X,isSelectable:U.current,rows:Y,columns:W,routes:function(){return l().createElement(u.Routes,null,l().createElement(u.Route,{path:ce.Z["group-add-members"].path,element:l().createElement(Ve,{fetchData:K,closeUrl:"../"})}))},actionResolver:function(){return U.current?[{title:e.formatMessage(j.Z.remove),onClick:function(t,n,r){w((function(){return function(){return H([r.username.title])}})),T({title:e.formatMessage(j.Z.removeMemberQuestion),text:Ye(r.username.title,L,!1),confirmButtonLabel:e.formatMessage(j.Z.removeMember)}),M(!0)}}]:null},filterPlaceholder:e.formatMessage(j.Z.username).toLowerCase(),titlePlural:e.formatMessage(j.Z.members).toLowerCase(),titleSingular:e.formatMessage(j.Z.member),ouiaId:"members-table",pagination:I,filterValue:o,fetchData:function(e){var t=e.limit,n=e.offset,r=e.name;return K(r,{limit:t,offset:n})},setFilterValue:function(e){var t=e.name;return f(t)},checkedRows:h,isLoading:N,rowWrapper:We.Z,setCheckedItems:function(e){b((function(t){return e(t)}))},toolbarButtons:function(){return(0,r.Z)(U.current?[l().createElement(Ne.Z,{to:ce.Z["group-add-members"].link,key:"remove-from-group",className:"rbac-m-hide-on-sm"},l().createElement(c.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(j.Z.addMember))),{label:e.formatMessage(j.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){}},{label:e.formatMessage(j.Z.remove),props:{isDisabled:!h||!h.length>0,variant:"danger"},onClick:function(){var t=h.length>1,n=e.formatMessage(t?j.Z.removeMembersQuestion:j.Z.removeMemberQuestion);w((function(){return function(){return H(h.map((function(e){return e.uuid})))}})),T({title:n,confirmButtonLabel:n,text:Ye(t?h.length:h[0].uuid,L,t)}),M(!0)}}]:[])},emptyProps:{title:e.formatMessage(j.Z.noGroupMembers),description:[e.formatMessage(j.Z.addUserToConfigure),""]},tableId:"group-members"})),l().createElement(u.Outlet,null))};var $e=n(61338),et=n(57486),tt=n(25924),nt=function(e){var t=e.title,n=e.text,r=e.onClose,o=e.onSubmit,u=e.isOpen,s=e.confirmButtonLabel,c=e.isDefault,m=e.isChanged,d=(0,i.useState)(!1),f=(0,a.Z)(d,2),p=f[0],g=f[1];return c&&!m&&p?l().createElement(tt.Z,{isOpen:p&&u,onClose:function(){r(),g(!1)},onSubmit:function(){o()}}):l().createElement(ze.Z,{text:n,title:t,isOpen:u,confirmButtonLabel:s,onClose:function(){r()},onSubmit:function(){g(!0),(!c||m)&&o()}})};nt.propTypes={text:h().node,title:h().node,confirmButtonLabel:h().string,onSubmit:h().func,onClose:h().func,isOpen:h().bool,isDefault:h().bool,isChanged:h().bool},nt.defaultProps={isDefault:!1,isChanged:!1};const rt=nt;function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null==t?void 0:t.reduce((function(t,a){var o=a.uuid,u=a.display_name,s=a.name,c=a.description,m=a.modified;return[].concat((0,r.Z)(t),[{uuid:o,title:u||s,cells:[l().createElement(i.Fragment,{key:"".concat(o,"-name")},l().createElement(Ne.Z,{to:ce.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",o)},u||s)),c,l().createElement(i.Fragment,{key:"".concat(o,"-modified")},l().createElement(Le.Z,{date:m,type:(0,se.mh)(m)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===o})))}])}),[]))||[]},lt=function(e){return e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button"},ut=function(e,t,n){var r=(0,m.Z)(),a=l().createElement(c.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},r.formatMessage(j.Z.addRole));return e?l().createElement(c.Tooltip,{content:n||r.formatMessage(j.Z.allRolesAdded)},a):a},st=function(e){var t=e.groupReducer,n=t.selectedGroup,r=t.systemGroup;return{roles:n.roles,pagination:n.pagination||ot(ot({},$e.he),{},{count:(null==n?void 0:n.roles)&&n.roles.length}),isLoading:!n.loaded,name:n.name,isPlatformDefault:n.platform_default,isAdminDefault:n.admin_default,isChanged:!n.system,disableAddRoles:Object.keys(n.addRoles.pagination||{}).length>0?!(n.addRoles.pagination&&n.addRoles.pagination.count>0&&!n.admin_default):!!n.admin_default,systemGroupUuid:null==r?void 0:r.uuid}},ct=function(e){var t=e.onDefaultGroupChanged,n=(0,m.Z)(),o=(0,v.useDispatch)(),s=(0,z.Z)(),c=(0,u.useParams)().groupId,f=(0,i.useState)(""),g=(0,a.Z)(f,2),h=g[0],b=g[1],Z=(0,i.useState)(""),y=(0,a.Z)(Z,2),E=y[0],M=y[1],O=(0,i.useState)([]),k=(0,a.Z)(O,2),R=k[0],w=k[1],S=(0,i.useState)([]),x=(0,a.Z)(S,2),C=x[0],T=x[1],D=(0,i.useState)(!1),P=(0,a.Z)(D,2),G=P[0],I=P[1],L=(0,i.useState)((function(){return null})),N=(0,a.Z)(L,2),_=N[0],B=N[1],A=(0,i.useState)({}),q=(0,a.Z)(A,2),F=q[0],U=q[1],W=(0,i.useContext)(Qe.Z),Q=W.userAccessAdministrator,K=W.orgAdmin,H=(0,i.useRef)(K||Q),X=(0,v.useSelector)(st),Y=X.roles,J=X.pagination,$=X.isLoading,ee=X.name,te=X.isPlatformDefault,ne=X.isAdminDefault,re=X.isChanged,ae=X.disableAddRoles,oe=X.systemGroupUuid,ie=function(e,t){return e.payload.then(t),e},le=function(e){return o((0,V.nr)(e,{},{}))},ue=function(e){return o((0,V.yi)(null!=e?e:c))},se=function(){return o((0,V.WD)())},me=function(e,t,n){return o(ie((0,V.W3)(e,t),n))},de=function(e){return function(t,n){return o((0,V.nV)(t,e,n))}},fe=[{title:n.formatMessage(j.Z.name),orderBy:"name"},{title:n.formatMessage(j.Z.description)},{title:n.formatMessage(j.Z.lastModified)}];(0,i.useEffect)((function(){"default-access"!==c?de(J)(c):oe&&de(J)(oe)}),[oe]),(0,i.useEffect)((function(){(null==Y?void 0:Y.length)>0&&("default-access"!==c?le(c):oe&&le(oe))}),[Y]),(0,i.useEffect)((function(){H.current=K||Q}),[K,Q]);var pe=function(e,t,n){return l().createElement("p",null,l().createElement(Se.Z,(0,p.Z)({},n?j.Z.removeRolesModalText:j.Z.removeRoleModalText,{values:ot({b:function(e){return l().createElement("b",null,e)},name:e},n?{roles:t}:{role:t})})))},ge="default-access"!==c?c:oe,he=function(){te?se().then((function(e){var t=e.value.data;de(ot(ot({},J),{},{offset:0}))(t[0].uuid)})):de(ot(ot({},J),{},{offset:0}))(c)};return l().createElement(l().Fragment,null,l().createElement(rt,{text:F.text,title:F.title,isOpen:G,isChanged:re,isDefault:te||ne,confirmButtonLabel:F.confirmButtonLabel,onClose:function(){return I(!1)},onSubmit:function(){I(!1),_(),w([]),t(te&&!re)}}),l().createElement(d.Z,{type:"content",id:"tab-roles"},l().createElement(Pe.M,{columns:fe,isSelectable:H.current&&!ne,rows:it(c,Y,R),data:Y,filterValue:E,fetchData:function(e){de(e)(ge)},emptyFilters:{name:"",description:""},setFilterValue:function(e){var t=e.name,n=e.description;void 0!==t&&M(t),void 0!==n&&b(n)},isLoading:$,pagination:J,checkedRows:R,setCheckedItems:function(e){w((function(t){return e(t).map((function(e){var t=e.uuid,n=e.name;return{uuid:t,label:e.label||n}}))}))},titlePlural:n.formatMessage(j.Z.roles).toLowerCase(),titleSingular:n.formatMessage(j.Z.role),toolbarButtons:function(){return(0,r.Z)(H.current&&!ne?[l().createElement(Ne.Z,{className:"rbac-m-hide-on-sm rbac-c-button__add-role".concat(ae&&"-disabled"),to:ce.Z["group-add-roles"].link.replace(":groupId",c),key:"add-to-group"},ut(ae,lt(ee||""),ne&&n.formatMessage(j.Z.defaultGroupNotManually))),{label:n.formatMessage(j.Z.addRole),props:{isDisabled:ae,className:"rbac-m-hide-on-md"},onClick:function(){return s(ce.Z["group-add-roles"].link.replace(":groupId",c))}},{label:n.formatMessage(j.Z.remove),props:{isDisabled:!R||!R.length>0,variant:"danger"},onClick:function(){var e=R.length>1;B((function(){return function(){return me(ge,R.map((function(e){return e.uuid})),he)}})),U({title:n.formatMessage(e?j.Z.removeRolesQuestion:j.Z.removeRoleQuestion),confirmButtonLabel:n.formatMessage(e?j.Z.removeRoles:j.Z.removeRole),text:pe(ee,e?R.length:Y.find((function(e){return e.uuid===R[0].uuid})).name,e)}),I(!0)}}]:[])},actionResolver:function(){return(0,r.Z)(H.current&&!ne?[{title:n.formatMessage(j.Z.remove),onClick:function(e,t,r){B((function(){return function(){return me(ge,[r.uuid],he)}})),U({title:n.formatMessage(j.Z.removeRoleQuestion),confirmButtonLabel:n.formatMessage(j.Z.removeRole),text:pe(ee,r.title,!1)}),I(!0)}}]:[])},routes:function(){return l().createElement(u.Routes,null,l().createElement(u.Route,{path:ce.Z["group-add-roles"].path,element:l().createElement(et.Z,{afterSubmit:function(){te||ne?se().then((function(e){var t=e.value.data;de(J)(t[0].uuid),ue(t[0].uuid)})):(de(J)(c),ue())},fetchUuid:oe,selectedRoles:C,setSelectedRoles:T,closeUrl:ce.Z["group-detail"].link.replace(":groupId",te?"default-access":c),addRolesToGroup:function(e,t,n){return o(ie((0,V.Wj)(e,t),n))},groupName:ee,isDefault:te||ne,isChanged:re,onDefaultGroupChanged:t})}))},ouiaId:"roles-table",emptyProps:{title:n.formatMessage(j.Z.noGroupRoles),description:[n.formatMessage(ne?j.Z.contactServiceTeamForRoles:j.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:E},{key:"description",value:h}],tableId:"group-roles"})),l().createElement(u.Outlet,null))};ct.propTypes={searchFilter:h().string,selectedRoles:h().array,pagination:h().shape({limit:h().number.isRequired,offset:h().number.isRequired,count:h().number}),onDefaultGroupChanged:h().func},ct.defaultProps={pagination:$e.eX,selectedRoles:[]};const mt=ct;var dt=n(67643),ft=n(76137);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=function(e){var t=e.onDelete,n=(0,m.Z)(),r=(0,v.useDispatch)(),o=(0,z.Z)(),s=(0,u.useLocation)(),d=(0,Ae.Z)(),f=(0,u.useParams)().groupId,g="default-access"===f,h=[{eventKey:0,title:"Roles",name:ce.Z["group-detail-roles"].link.replace(":groupId",f),to:"roles"},{eventKey:1,title:"Members",name:ce.Z["group-detail-members"].link.replace(":groupId",f),to:"members"}],b=(0,v.useSelector)((function(e){var t=e.groupReducer,n=t.groups,r=t.error,a=t.systemGroup;return{pagination:n.pagination||n.meta,filters:n.filters,groupExists:r!==se.VG,systemGroupUuid:null==a?void 0:a.uuid}}),v.shallowEqual),Z=b.pagination,y=b.filters,E=b.groupExists,O=b.systemGroupUuid,k=(0,v.useSelector)((function(e){var t=e.groupReducer,n=t.selectedGroup,r=t.isRecordLoading,a=t.isRecordRolesLoading;return{group:n,isFetching:r||a}}),v.shallowEqual),R=k.group,w=k.isFetching,S=(0,i.useState)(!1),x=(0,a.Z)(S,2),C=x[0],T=x[1],D=(0,i.useState)(!1),P=(0,a.Z)(D,2),G=P[0],I=P[1],L=(0,i.useState)(!1),N=(0,a.Z)(L,2),_=N[0],B=N[1];(0,i.useEffect)((function(){r((0,V.WD)());var e=g?O:f;return e&&(r((0,V.yi)(e)),d.appObjectId(e)),function(){return d.appObjectId(void 0)}}),[f,O]);var A,q=function(){return[{title:n.formatMessage(j.Z.groups),to:(0,se.zk)((0,Ne.n)(ce.Z.groups.link),Z,y)},E?{title:w?void 0:R.name,isActive:!0}:{title:n.formatMessage(j.Z.invalidGroup),isActive:!0}]},F=[l().createElement(c.DropdownItem,{component:l().createElement(Ne.Z,{onClick:function(){return I(!1)},to:(s.pathname.includes("members")?ce.Z["group-detail-members-edit"]:ce.Z["group-detail-roles-edit"]).link.replace(":groupId",g?"default-access":f)},n.formatMessage(j.Z.edit)),key:"edit-group"}),l().createElement(c.DropdownItem,{component:l().createElement(Ne.Z,{onClick:function(){return t(f)},to:(s.pathname.includes("members")?ce.Z["group-detail-members-remove"]:ce.Z["group-detail-roles-remove"]).link.replace(":groupId",f)},n.formatMessage(j.Z.delete)),className:"rbac-c-group__action",key:"delete-group"})],U=g?O:f;return l().createElement(i.Fragment,null,C&&l().createElement(M.R,{type:"group",isOpen:C,customTitle:l().createElement("div",null,n.formatMessage(j.Z.restoreDefaultAccessQuestion)),customDescription:l().createElement(Se.Z,(0,p.Z)({},j.Z.restoreDefaultAccessDescription,{values:{b:function(e){return l().createElement("b",null,e)}}})),customPrimaryButtonTitle:n.formatMessage(j.Z.continue),customSecondaryButtonTitle:n.formatMessage(j.Z.cancel),onModalCancel:function(){return T(!1)},onConfirmCancel:function(){r((0,V.gg)([O])).then((function(){return r((0,V.WD)()).then((function(){B(!1)}))})),T(!1),o(ce.Z["group-detail-roles"].link).replace(":groupId","default-access")}}),E?l().createElement(i.Fragment,null,l().createElement(Be.Q,{breadcrumbs:q()},l().createElement(c.Split,{hasGutter:!0},l().createElement(c.SplitItem,{isFilled:!0},l().createElement(Be.y,{title:!w&&R?l().createElement(i.Fragment,null,R.platform_default&&!R.system?(A=R.name,l().createElement("div",{style:{display:"inline-flex"}},A,l().createElement("div",{className:"pf-u-ml-sm"},l().createElement(c.Popover,{"aria-label":"default-group-icon",bodyContent:l().createElement(Se.Z,(0,p.Z)({},j.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return l().createElement("b",null,e)}}}))},l().createElement(je.ZP,{className:"rbac-default-group-info-icon"}))))):R.name):void 0,description:!w&&R?R.description:void 0})),R.platform_default&&!R.system?l().createElement(c.SplitItem,null,l().createElement("div",{className:"rbac-default-group-reset-btn"},l().createElement(c.Button,{variant:"link",onClick:function(){return T(!0)}},n.formatMessage(j.Z.restoreToDefault)),l().createElement(c.Popover,{"aria-label":"default-group-icon",position:c.PopoverPosition.bottomEnd,bodyContent:l().createElement(Se.Z,(0,p.Z)({},j.Z.restoreDefaultAccessInfo,{values:{b:function(e){return l().createElement("b",null,e)}}}))},l().createElement(je.ZP,{className:"rbac-default-group-info-icon pf-u-mt-sm"})))):null,l().createElement(c.SplitItem,null,R.platform_default||R.admin_default?null:l().createElement(c.Dropdown,{ouiaId:"group-title-actions-dropdown",toggle:l().createElement(c.KebabToggle,{onToggle:function(e){return I(e)},id:"group-actions-dropdown"}),isOpen:G,isPlain:!0,position:"right",dropdownItems:F}))),_?l().createElement(c.Alert,{variant:"info",isInline:!0,title:n.formatMessage(j.Z.defaultAccessGroupChanged),action:l().createElement(c.AlertActionCloseButton,{onClose:function(){return B(!1)}}),className:"pf-u-mb-lg pf-u-mt-sm"},l().createElement(Se.Z,(0,p.Z)({},j.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return l().createElement("b",null,e)}}}))):null),l().createElement(Fe,{isHeader:!0,tabItems:h}),l().createElement(u.Routes,null,l().createElement(u.Route,{path:ce.Z["group-detail-roles"].path,element:l().createElement(mt,{onDefaultGroupChanged:B})},l().createElement(u.Route,{path:ce.Z["group-detail-roles-remove"].path,element:l().createElement(De,{postMethod:function(){return r((0,V.bt)(gt(gt({},Z),{},{offset:0,filters:y,usesMetaInURL:!0})))},cancelRoute:(0,Ne.n)(ce.Z["group-detail-roles"].link.replace(":groupId",f)),submitRoute:(0,se.zk)((0,Ne.n)(ce.Z.groups.link),gt(gt({},Z),{},{offset:0}),y),isModalOpen:!0,groupsUuid:[R]})}),l().createElement(u.Route,{path:ce.Z["group-detail-roles-edit"].path,element:l().createElement(we,{group:R,cancelRoute:(0,Ne.n)(ce.Z["group-detail-roles"].link.replace(":groupId",f)),postMethod:function(){return r((0,V.yi)(U))}})})),l().createElement(u.Route,{path:ce.Z["group-detail-members"].path,element:l().createElement(Je,null)},l().createElement(u.Route,{path:ce.Z["group-detail-members-remove"].path,element:l().createElement(De,{postMethod:function(){return r((0,V.bt)(gt(gt({},Z),{},{offset:0,filters:y,usesMetaInURL:!0})))},cancelRoute:(0,Ne.n)(ce.Z["group-detail-members"].link.replace(":groupId",f)),submitRoute:(0,se.zk)((0,Ne.n)(ce.Z.groups.link),gt(gt({},Z),{},{offset:0}),y),isModalOpen:!0,groupsUuid:[R]})}),l().createElement(u.Route,{path:ce.Z["group-detail-members-edit"].path,element:l().createElement(we,{group:R,cancelRoute:(0,Ne.n)(ce.Z["group-detail-members"].link.replace(":groupId",f)),postMethod:function(){return r((0,V.yi)(U))}})})),l().createElement(u.Route,{path:"/*",element:l().createElement(mt,{onDefaultGroupChanged:B})})),!R&&l().createElement(Ce.Wi,null)):l().createElement(i.Fragment,null,l().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},l().createElement(ft.Z,q())),l().createElement(dt.Z,{title:n.formatMessage(j.Z.groupNotFound),description:[n.formatMessage(j.Z.groupDoesNotExist,{id:f})],actions:[l().createElement(c.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return o(-1)}},n.formatMessage(j.Z.backToPreviousPage))]})))};ht.propTypes={onDelete:h().func};const vt=ht;var bt=n(15608),Zt=n(93351),yt=n(93327),Et=n(92758);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kt=function(){var e=(0,m.Z)(),t=(0,v.useDispatch)(),n=(0,u.useNavigate)(),o=(0,u.useLocation)(),f=function(e){return t((0,V.bt)(Ot(Ot({},e),{},{usesMetaInURL:!0})))},p=(0,i.useContext)(Qe.Z),g=p.orgAdmin,h=p.userAccessAdministrator,b=g||h,Z=(0,i.useRef)(null),y=[{title:e.formatMessage(j.Z.name),key:"name",transforms:[s.sortable]},{title:e.formatMessage(j.Z.roles)},{title:e.formatMessage(j.Z.members)},{title:e.formatMessage(j.Z.lastModified),key:"modified",transforms:[s.sortable]}],E=(0,i.useState)({index:Number(b),direction:"asc"}),M=(0,a.Z)(E,2),O=M[0],k=M[1],R="".concat("desc"===(null==O?void 0:O.direction)?"-":"").concat(y[(null==O?void 0:O.index)-Number(b)].key),w=(0,v.useSelector)((function(e){var t,n,a,o,i=e.groupReducer,l=i.groups,u=l.data,s=l.filters,c=l.pagination,m=i.isLoading,d=i.adminGroup,f=i.systemGroup;return{groups:[].concat((0,r.Z)(null!=d&&null!==(t=d.name)&&void 0!==t&&t.match(new RegExp(s.name,"i"))?[d]:[]),(0,r.Z)(null!=f&&null!==(n=f.name)&&void 0!==n&&n.match(new RegExp(s.name,"i"))?[f]:[]),(0,r.Z)((null==u?void 0:u.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.platform_default,n=e.admin_default;return!(t||n)})))||[])),pagination:{limit:null!==(a=null==c?void 0:c.limit)&&void 0!==a?a:(g?$e.HE:$e.he).limit,offset:null!==(o=null==c?void 0:c.offset)&&void 0!==o?o:(g?$e.HE:$e.he).offset,count:null==c?void 0:c.count,redirected:null==c?void 0:c.redirected},filters:s,isLoading:m,systemGroup:f}}),v.shallowEqual),S=w.groups,x=w.pagination,C=w.filters,T=w.isLoading,D=w.systemGroup,P=(0,i.useState)((null==C?void 0:C.name)||""),G=(0,a.Z)(P,2),I=G[0],L=G[1],N=(0,i.useState)([]),_=(0,a.Z)(N,2),B=_[0],A=_[1],q=(0,i.useState)([]),F=(0,a.Z)(q,2),U=F[0],z=F[1];(0,i.useEffect)((function(){(0,$e.oG)(o,n,x.limit,x.offset)}),[x.offset,x.limit,x.count,x.redirected]),(0,i.useEffect)((function(){var e=(0,$e.rj)(o,n,x),r=e.limit,a=e.offset,i=(0,Et.aX)(o,n,["name"],{name:I}).name;L(i),insights.chrome.appNavClick({id:"groups",secondaryNav:!0}),f({limit:r,offset:a,orderBy:R,filters:{name:i}}),t((0,V.fB)(i)),t((0,V.WD)(i))}),[]),(0,i.useEffect)((function(){o.pathname.includes("detail")?(0,se.Gw)(o,n):((0,$e.Zc)(o)||(0,$e.oG)(o,n,x.limit,x.offset),(null==I?void 0:I.length)>0&&!(0,Et.qF)(o,["name"])&&(0,Et.aX)(o,n,["name"],{name:I}))}),[o.pathname]);var W=S.map((function(e){return e.platform_default||e.admin_default?Ot(Ot({},e),{},{principalCount:"All".concat(e.admin_default?" org admins":"")}):e})),Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,m.Z)();return t.reduce((function(t,o){var u=o.uuid,s=o.name,c=o.roleCount,m=o.principalCount,d=o.modified,f=o.platform_default,p=o.admin_default;return[].concat((0,r.Z)(t),[{uuid:u,isAdminDefault:p,isPlatformDefault:f,cells:[l().createElement(i.Fragment,{key:u},l().createElement("div",{className:"pf-m-inline-flex"},e?l().createElement(Ne.Z,{key:"".concat(u,"-link"),state:{uuid:u},to:ce.Z["group-detail"].link.replace(":groupId",f?"default-access":u)},s):s,(f||p)&&l().createElement(_e,{id:"default".concat(p?"-admin":"","-group-popover"),uuid:u,key:"".concat(u,"-popover"),bodyContent:a.formatMessage(p?j.Z.orgAdminInheritedRoles:j.Z.usersInheritedRoles)}))),c,m,l().createElement(i.Fragment,{key:"".concat(u,"-modified")},l().createElement(Le.Z,{date:d,type:(0,se.mh)(d)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===u})))}])}),[])}(b,W,B);return l().createElement(u.Routes,null,l().createElement(u.Route,{path:ce.Z["group-detail-role-detail"].path,element:l().createElement(yt.Z,{pageAction:"role-detail"},l().createElement(bt.Z,null))}),l().createElement(u.Route,{path:ce.Z["group-detail"].path,element:l().createElement(yt.Z,{pageAction:"group-detail"},l().createElement(vt,{defaultUuid:null==D?void 0:D.uuid,onDelete:function(e){L(""),A(B.filter((function(t){return t.uuid!=e})))}}))}),l().createElement(u.Route,{path:"/*",element:l().createElement(yt.Z,{pageAction:"group-list"},l().createElement(c.Stack,{className:"rbac-c-groups"},l().createElement(c.StackItem,null,l().createElement(Be.Q,{paddingBottom:!0},l().createElement(Be.y,{title:e.formatMessage(j.Z.groups)}))),l().createElement(c.StackItem,null,l().createElement(d.Z,{type:"content",id:"tab-groups"},l().createElement(Pe.M,{data:S,rows:Q,sortBy:O,onSort:function(e,t,r){var a="".concat("desc"===r?"-":"").concat(y[t-Number(b)].key);k({index:t,direction:r}),(0,Et.MS)(o,n,{name:I}),f(Ot(Ot({},x),{},{orderBy:a,filters:{name:I}}))},columns:y,isSelectable:b,checkedRows:B,setCheckedItems:function(e){A((function(t){return e(t).filter((function(e){var t=e.platform_default,n=e.admin_default;return!(t||n)})).map((function(e){return{uuid:e.uuid,label:e.name}}))}))},routes:function(){return l().createElement(u.Routes,null,l().createElement(u.Route,{path:ce.Z["add-group"].path,element:l().createElement(ye,{pagination:x,filters:C,orderBy:R,postMethod:function(e){L(""),f(e)}})}),l().createElement(u.Route,{path:ce.Z["edit-group"].path,element:l().createElement(we,{pagination:x,filters:C,postMethod:function(e){L(""),f(Ot(Ot({},e),{},{orderBy:R}))},cancelRoute:(0,se.zk)("../",x,C),submitRoute:(0,se.zk)("../",Ot(Ot({},x),{},{offset:0}),C)})}),l().createElement(u.Route,{path:ce.Z["remove-group"].path,element:l().createElement(De,{pagination:x,filters:C,postMethod:function(e,t){f(Ot(Ot({},t),{},{orderBy:R})),L(""),A(B.filter((function(t){return!e.includes(t.uuid)})))},cancelRoute:(0,se.zk)("../",x,C),submitRoute:(0,se.zk)("../",Ot(Ot({},x),{},{offset:0}),C),isModalOpen:!0,groupsUuid:U})}))},actionResolver:function(t){var r=t.isPlatformDefault,a=t.isAdminDefault;return r||a||!b?null:[{title:e.formatMessage(j.Z.edit),onClick:function(e,t,r){return n((0,Ne.n)(ce.Z["edit-group"].link).replace(":groupId",r.uuid))}},{title:e.formatMessage(j.Z.delete),onClick:function(e,t,r){z([r]),n((0,Ne.n)(ce.Z["remove-group"].link))}}]},titlePlural:e.formatMessage(j.Z.groups).toLowerCase(),titleSingular:e.formatMessage(j.Z.group).toLowerCase(),ouiaId:"groups-table",pagination:x,filterValue:I,fetchData:function(e){var t=e.name,r=e.count,a=e.limit,i=e.offset,l=e.orderBy;return(0,Et.MS)(o,n,{name:t}),f({count:r,limit:a,offset:i,orderBy:l,filters:{name:t}})},setFilterValue:function(e){var t=e.name;return L(void 0===t?"":t)},toolbarButtons:function(){return(0,r.Z)(b?[l().createElement(Ne.Z,{to:ce.Z["add-group"].link,key:"add-group",className:"rbac-m-hide-on-sm"},l().createElement(c.Button,{ouiaId:"create-group-button",variant:"primary","aria-label":"Create group"},e.formatMessage(j.Z.createGroup))),{label:e.formatMessage(j.Z.createGroup),props:{className:"rbac-m-hide-on-md"},onClick:function(){return n((0,Ne.n)(ce.Z["add-group"].link))}},{label:e.formatMessage(j.Z.edit),props:{isDisabled:!(1===B.length)},onClick:function(){return n((0,Ne.n)(ce.Z["edit-group"].link.replace(":groupId",B[0].uuid)))}},{label:e.formatMessage(j.Z.delete),props:{isDisabled:!B.length>0},onClick:function(){z(B),n((0,Ne.n)(ce.Z["remove-group"].link))}}]:[])},isLoading:!T&&0===(null==S?void 0:S.length)&&0===(null==I?void 0:I.length)||T,filterPlaceholder:e.formatMessage(j.Z.name).toLowerCase(),rowWrapper:Zt.Z,tableId:"groups",textFilterRef:Z})))))}))}}}]);
//# sourceMappingURL=../sourcemaps/7426.b565c79a31e58d56cf8ccd08e055daa1.js.map