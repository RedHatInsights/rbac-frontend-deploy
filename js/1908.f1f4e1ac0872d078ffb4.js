(self.webpackChunkrbac=self.webpackChunkrbac||[]).push([[1908,459],{55218:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var a=o(66029),n=o.n(a),l=o(80236),s=o(47173),r=o(93149);const i=e=>{var{isOpen:t,onConfirm:o,onClose:i,children:c,confirmButtonLabel:u="Confirm",cancelButtonLabel:d="Cancel",variant:m=l.v.small,titleIconVariant:p="warning",withCheckbox:f=!1,checkboxLabel:g="I understand that this action cannot be undone",confirmButtonVariant:b=s.Wu.primary,ouiaId:h="WarningModal"}=e,v=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["isOpen","onConfirm","onClose","children","confirmButtonLabel","cancelButtonLabel","variant","titleIconVariant","withCheckbox","checkboxLabel","confirmButtonVariant","ouiaId"]);const[C,y]=(0,a.useState)(!1);return n().createElement(l.u,Object.assign({variant:m,isOpen:t,onClose:i,onEscapePress:i,titleIconVariant:p,actions:[n().createElement(s.zx,{ouiaId:`${h}-confirm-button`,key:"confirm",variant:b,onClick:()=>{null==o||o(),y(!1)},isDisabled:f&&!C},u),n().createElement(s.zx,{ouiaId:`${h}-cancel-button`,key:"cancel",variant:s.Wu.link,onClick:i},d)],ouiaId:h},v),c,f?n().createElement(r.X,{isChecked:C,onChange:(e,t)=>y(t),label:g,id:"warning-modal-check",className:"pf-v5-u-mt-lg",ouiaId:`${h}-confirm-checkbox`}):null)}},68774:(e,t,o)=>{"use strict";o.d(t,{D:()=>r});var a=o(65353),n=o(66029),l=o(62873),s=o(38296);const r=e=>{var{children:t,className:o="",isVisited:r=!1}=e,i=(0,a.__rest)(e,["children","className","isVisited"]);return n.createElement("div",Object.assign({},i,{className:(0,s.css)(l.Z.content,r&&l.Z.modifiers.visited,o)}),t)};r.displayName="TextContent"},41435:(e,t,o)=>{"use strict";o.d(t,{Dl:()=>s,dw:()=>n,e4:()=>r,ir:()=>a});var a,n,l=o(66029);!function(e){e.right="right",e.left="left"}(a||(a={})),function(e){e.up="up",e.down="down"}(n||(n={}));const s=l.createContext({onSelect:e=>{},id:"",toggleIndicatorClass:"",toggleIconClass:"",toggleTextClass:"",menuClass:"",itemClass:"",toggleClass:"",baseClass:"",baseComponent:"div",sectionClass:"",sectionTitleClass:"",sectionComponent:"section",disabledClass:"",plainTextClass:"",menuComponent:"ul"}),r=l.createContext({keyHandler:null,sendRef:null})},19993:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(70347);const a={backdrop:"pf-v5-c-backdrop",backdropOpen:"pf-v5-c-backdrop__open"}},62702:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a}),o(25238);const a={button:"pf-v5-c-button",modalBox:"pf-v5-c-modal-box",modalBoxBody:"pf-v5-c-modal-box__body",modalBoxClose:"pf-v5-c-modal-box__close",modalBoxDescription:"pf-v5-c-modal-box__description",modalBoxFooter:"pf-v5-c-modal-box__footer",modalBoxHeader:"pf-v5-c-modal-box__header",modalBoxHeaderMain:"pf-v5-c-modal-box__header-main",modalBoxTitle:"pf-v5-c-modal-box__title",modalBoxTitleIcon:"pf-v5-c-modal-box__title-icon",modalBoxTitleText:"pf-v5-c-modal-box__title-text",modifiers:{sm:"pf-m-sm",md:"pf-m-md",lg:"pf-m-lg",alignTop:"pf-m-align-top",danger:"pf-m-danger",warning:"pf-m-warning",success:"pf-m-success",custom:"pf-m-custom",info:"pf-m-info",help:"pf-m-help",icon:"pf-m-icon"},themeDark:"pf-v5-theme-dark"}},7876:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var a=o(85893),n=o(94184),l=o.n(n),s=function(){return s=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};const r=function(e){var t,o=e.type,n=e.children,r=e.className,i=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,["type","children","className"]),c=l()(r,((t={})["ins-l-".concat(o)]=void 0!==o,t));return(0,a.jsxs)("section",s({},i,{className:c,children:[" ",n," "]}))}},84414:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var a=o(62012),n=o(64756);const l=e=>{const t=(0,a.useNavigate)();return(o,a)=>t((0,n.n)(o,e),a)}},5839:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var a=o(66029),n=o.n(a),l=o(45697),s=o.n(l),r=o(68774),i=o(68340),c=o(55218),u=o(25387),d=o(2550);const m=({isOpen:e,onClose:t,onSubmit:o})=>{const a=(0,u.YB)();return n().createElement(c.Z,{withCheckbox:!0,isOpen:e,title:a.formatMessage(d.Z.warning),checkboxLabel:a.formatMessage(d.Z.confirmCheckMessage),confirmButtonLabel:a.formatMessage(d.Z.continue),onClose:t,onConfirm:o},n().createElement(r.D,null,n().createElement(i.x,null,n().createElement(u._H,{...d.Z.defaultAccessGroupEditWarning,values:{b:e=>n().createElement("b",null,e)}}))))};m.propTypes={onSubmit:s().func,onClose:s().func,isOpen:s().bool};const p=m},91670:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>L});var a=o(66029),n=o.n(a),l=o(86706),s=o(25387),r=o(45697),i=o.n(r),c=o(62012),u=o(47173),d=o(35224),m=o(55140),p=o(7876),f=o(62410),g=o(74982),b=o(97246),h=o(77044),v=o(55218),C=o(5839);const y=({title:e,text:t,onClose:o,onSubmit:l,isOpen:s,confirmButtonLabel:r,isDefault:i,isChanged:c})=>{const[d,m]=(0,a.useState)(!1);return i&&!c&&d?n().createElement(C.Z,{isOpen:d&&s,onClose:()=>{o(),m(!1)},onSubmit:l}):n().createElement(v.Z,{title:e,isOpen:s,confirmButtonLabel:r,confirmButtonVariant:u.Wu.danger,onClose:o,onConfirm:()=>{m(!0),(!i||c)&&l()}},t)};y.propTypes={text:i().node,title:i().node,confirmButtonLabel:i().string,onSubmit:i().func,onClose:i().func,isOpen:i().bool,isDefault:i().bool,isChanged:i().bool},y.defaultProps={isDefault:!1,isChanged:!1};const x=y;var Z=o(29301),k=o(86601),O=o(64756),E=o(84414),R=o(75614),B=o(2550),M=o(14289);const _=(e,t,o=[])=>t?.reduce(((t,{uuid:l,display_name:s,name:r,description:i,modified:c})=>[...t,{uuid:l,title:s||r,cells:[n().createElement(a.Fragment,{key:`${l}-name`},n().createElement(O.Z,{to:M.Z["group-detail-role-detail"].link.replace(":groupId",e).replace(":roleId",l)},s||r)),i,n().createElement(a.Fragment,{key:`${l}-modified`},n().createElement(f.Z,{date:c,type:(0,Z.mh)(c)}))],selected:Boolean(o&&o.find((e=>e.uuid===l)))}]),[])||[],I=e=>e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button",S=(e,t,o)=>{const a=(0,s.YB)(),l=n().createElement(u.zx,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},a.formatMessage(B.Z.addRole));return e?n().createElement(d.u,{content:o||a.formatMessage(B.Z.allRolesAdded)},l):l},w=({groupReducer:{selectedGroup:e,systemGroup:t,groups:o}})=>({roles:e.roles?.data||[],pagination:{...g.he,...e.roles?.meta||{}},groupsPagination:o.pagination||o.meta,groupsFilters:o.filters,isLoading:e.roles?.isLoading,isPlatformDefault:e.platform_default,isAdminDefault:e.admin_default,isChanged:!e.system,disableAddRoles:Object.keys(e.addRoles.pagination||{}).length>0?!(e.addRoles.pagination&&e.addRoles.pagination.count>0&&!e.admin_default):!!e.admin_default,systemGroupUuid:t?.uuid,group:e}),D=({onDefaultGroupChanged:e})=>{const t=(0,s.YB)(),o=(0,m.Z)(),r=(0,l.useDispatch)(),i=(0,E.Z)(),{groupId:u}=(0,c.useParams)(),[d,f]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[C,y]=(0,a.useState)([]),[D,L]=(0,a.useState)([]),[P,T]=(0,a.useState)(!1),[j,N]=(0,a.useState)((()=>null)),[A,G]=(0,a.useState)({}),{userAccessAdministrator:V,orgAdmin:F}=(0,a.useContext)(k.Z),W=(0,a.useRef)(F||V),{roles:U,pagination:$,groupsPagination:H,groupsFilters:z,isLoading:Q,group:Y,isPlatformDefault:q,isAdminDefault:X,isChanged:J,disableAddRoles:K,systemGroupUuid:ee}=(0,l.useSelector)(w),te=(e,t)=>(e.payload.then(t),e),oe=e=>r((0,h.nr)(e,{},{})),ae=e=>r((0,h.yi)(e??u)),ne=()=>r((0,h.WD)({chrome:o})),le=(e,t,o)=>r(te((0,h.W3)(e,t),o)),se=e=>(t,o)=>r((0,h.nV)(t,e,o)),re=[{title:t.formatMessage(B.Z.name),orderBy:"name"},{title:t.formatMessage(B.Z.description)},{title:t.formatMessage(B.Z.lastModified)}];(0,a.useEffect)((()=>{u!==R.Cn?se({...$,offset:0})(u):ee&&se({...$,offset:0})(ee)}),[ee]),(0,a.useEffect)((()=>{U.length>0&&(u!==R.Cn?oe(u):ee&&oe(ee))}),[U]),(0,a.useEffect)((()=>{W.current=F||V}),[F,V]);const ie=(e,t,o)=>n().createElement("p",null,n().createElement(s._H,{...o?B.Z.removeRolesModalText:B.Z.removeRoleModalText,values:{b:e=>n().createElement("b",null,e),name:e,...o?{roles:t}:{role:t}}})),ce=u!==R.Cn?u:ee,ue=()=>{q?ne().then((({value:{data:e}})=>{se({...$,offset:0})(e[0].uuid)})):se({...$,offset:0})(u)};return n().createElement(n().Fragment,null,n().createElement(x,{text:A.text,title:A.title,isOpen:P,isChanged:J,isDefault:q||X,confirmButtonLabel:A.confirmButtonLabel,onClose:()=>T(!1),onSubmit:()=>{T(!1),j(),y([]),e(q&&!J)}}),n().createElement(p.Z,{type:"content",id:"tab-roles"},n().createElement(b.M,{columns:re,isSelectable:W.current&&!X,rows:_(u,U,C),data:U,filterValue:g,fetchData:e=>{se(e)(ce)},emptyFilters:{name:"",description:""},setFilterValue:({name:e,description:t})=>{void 0!==e&&v(e),void 0!==t&&f(t)},isLoading:Q,pagination:$,checkedRows:C,setCheckedItems:e=>{y((t=>e(t).map((({uuid:e,name:t,label:o})=>({uuid:e,label:o||t})))))},titlePlural:t.formatMessage(B.Z.roles).toLowerCase(),titleSingular:t.formatMessage(B.Z.role),toolbarButtons:()=>[...W.current&&!X?[n().createElement(O.Z,{className:`rbac-m-hide-on-sm rbac-c-button__add-role${K&&"-disabled"}`,to:M.Z["group-add-roles"].link.replace(":groupId",u),key:"add-to-group"},S(K,I(name||""),X&&t.formatMessage(B.Z.defaultGroupNotManually))),{label:t.formatMessage(B.Z.addRole),props:{isDisabled:K,className:"rbac-m-hide-on-md"},onClick:()=>i(M.Z["group-add-roles"].link.replace(":groupId",u))},{label:t.formatMessage(B.Z.remove),props:{isDisabled:!C||!C.length>0,variant:"danger"},onClick:()=>{const e=C.length>1;N((()=>()=>le(ce,C.map((e=>e.uuid)),ue))),G({title:t.formatMessage(e?B.Z.removeRolesQuestion:B.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(e?B.Z.removeRoles:B.Z.removeRole),text:ie(name,e?C.length:U.find((e=>e.uuid===C[0].uuid)).name,e)}),T(!0)}}]:[]],actionResolver:()=>[...W.current&&!X?[{title:t.formatMessage(B.Z.remove),onClick:(e,o,a)=>{N((()=>()=>le(ce,[a.uuid],ue))),G({title:t.formatMessage(B.Z.removeRoleQuestion),confirmButtonLabel:t.formatMessage(B.Z.removeRole),text:ie(name,a.title,!1)}),T(!0)}}]:[]],ouiaId:"roles-table",emptyProps:{title:t.formatMessage(B.Z.noGroupRoles),description:[t.formatMessage(X?B.Z.contactServiceTeamForRoles:B.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:g},{key:"description",value:d}],tableId:"group-roles"})),n().createElement(a.Suspense,null,n().createElement(c.Outlet,{context:{[M.Z["group-roles-edit-group"].path]:{group:Y,cancelRoute:M.Z["group-detail-roles"].link.replace(":groupId",u),postMethod:()=>r((0,h.yi)(ce))},[M.Z["group-roles-remove-group"].path]:{postMethod:()=>r((0,h.bt)({...H,offset:0,filters:z,usesMetaInURL:!0,chrome:o})),cancelRoute:M.Z["group-detail-roles"].link.replace(":groupId",u),submitRoute:(0,Z.zk)(M.Z.groups.link,{...H,offset:0},z),groupsUuid:[Y]},[M.Z["group-add-roles"].path]:{afterSubmit:()=>{q||X?ne().then((({value:{data:e}})=>{se($)(e[0].uuid),ae(e[0].uuid)})):(se($)(u),ae())},fetchUuid:ee,selectedRoles:D,setSelectedRoles:L,closeUrl:M.Z["group-detail"].link.replace(":groupId",q?R.Cn:u),addRolesToGroup:(e,t,o)=>r(te((0,h.Wj)(e,t),o)),groupName:Y.name,isDefault:q||X,isChanged:J,onDefaultGroupChanged:e}}})))};D.propTypes={searchFilter:i().string,selectedRoles:i().array,pagination:i().shape({limit:i().number.isRequired,offset:i().number.isRequired,count:i().number}),onDefaultGroupChanged:i().func},D.defaultProps={pagination:g.eX,selectedRoles:[]};const L=D},70347:()=>{},25238:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1908.b2fbbcd69e32b29fc936ba914682d9af.js.map