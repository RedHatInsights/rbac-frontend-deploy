/*! For license information please see 4551.1662534398923.eac340746973ff27a0b4.js.LICENSE.txt */
"use strict";(self.webpackChunkinsights_rbac_frontend=self.webpackChunkinsights_rbac_frontend||[]).push([[4551,7664],{91290:(e,t,r)=>{r.d(t,{ZP:()=>i,iC:()=>o,sN:()=>a});var n=r(40400);const a={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},o=(0,n.IU)(a),i=o},82916:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),o=r(86896),i=r(45697),s=r.n(i),u=r(57262),c=r(15265),l=r(26794),m=r(30893),d=function(e){var t=e.linkDescription,r=e.linkTitle,i=(0,o.Z)(),s=insights.chrome.getEnvironment(),d=insights.chrome.isProd()?"":"".concat(s,".");return(0,n.useContext)(l.Z).orgAdmin?a().createElement(u.Text,{className:"pf-u-mt-0",component:u.TextVariants.h7},"".concat(i.formatMessage(m.Z.usersDescription)," "),t,a().createElement(u.Text,{component:u.TextVariants.a,href:"https://www.".concat(d,"redhat.com/wapps/ugc/protected/usermgt/userList.html"),target:"_blank",rel:"noopener noreferrer"},r,a().createElement(c.ZP,null)),"."):a().createElement(u.Text,{className:"pf-u-mt-0",component:u.TextVariants.h7},"".concat(i.formatMessage(m.Z.usersDescription)," "))};d.propTypes={linkDescription:s().node,linkTitle:s().node},d.defaultProps={linkDescription:"",linkTitle:" user management list "};const f=d},88093:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(87462),a=r(45987),o=r(92950),i=r.n(o),s=r(1936),u=r(45697),c=r.n(u),l=r(94184),m=r.n(l),d=["row"],f=function(e){var t,r=e.row,o=(0,a.Z)(e,d),u=r.status,c=null==u||null===(t=u.props)||void 0===t?void 0:t["data-is-active"];return i().createElement(s.RowWrapper,(0,n.Z)({className:m()("rbac__user-row",{"ins-m-inactive":!c}),row:r},o))};f.propTypes={row:c().shape({status:c().shape({props:c().shape({"data-is-active":c().bool,data:c().shape({isActive:c().bool})})})})};const p=f},46441:(e,t,r)=>{r.d(t,{Z:()=>l});r(71002);var n=r(57262),a=r(92950),o=r.n(a),i=r(45697),s=r.n(i),u=(r(27361),r(48880));s().oneOfType([s().string,s().func,s().object]),s().func.isRequired,s().node.isRequired,s().bool,s().func.isRequired,s().node.isRequired,s().func.isRequired;var c=function(e){var t=e.renderNextButton,r=e.disableBack,i=e.handlePrev,s=e.buttonLabels,c=s.cancel,l=s.back,m=e.context,d=(0,u.default)(),f=(0,a.useContext)(m),p=f.success,g=f.error,h=f.submitting;return p||void 0===g||g||h?null:o().createElement(a.Fragment,null,t(),o().createElement(n.Button,{type:"button",variant:"secondary",isDisabled:r,onClick:i},l),o().createElement(n.Button,{type:"button",variant:"link",onClick:d.onCancel},c))};c.propTypes={disableBack:s().bool,handlePrev:s().func.isRequired,handleNext:s().func.isRequired,nextStep:s().oneOfType([s().string,s().shape({when:s().string.isRequired,stepMapper:s().object.isRequired}),s().func]),buttonLabels:s().shape({submit:s().node.isRequired,cancel:s().node.isRequired,back:s().node.isRequired,next:s().node.isRequired}).isRequired,context:s().object.isRequired,renderNextButton:s().func};const l=c},65731:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(92950),a=r.n(n),o=r(57262),i=r(70363),s=r(43047),u=r(86896),c=r(45697),l=r.n(c),m=r(30893),d=function(e){var t=e.context,r=e.title,c=e.text,l=(0,u.Z)(),d=(0,n.useContext)(i.default).jumpToStep,f=(0,n.useContext)(t).setWizardError;return a().createElement(o.EmptyState,{variant:o.EmptyStateVariant.large},a().createElement(o.EmptyStateIcon,{color:"red",icon:s.ZP}),a().createElement(o.Title,{headingLevel:"h4",size:"lg"},r),a().createElement(o.EmptyStateBody,null,c),a().createElement(o.Button,{onClick:function(){f(void 0),d(0)},variant:"primary"},l.formatMessage(m.Z.returnToStepNumber,{number:1})))};d.propTypes={context:l().object.isRequired,title:l().string.isRequired,text:l().string.isRequired};const f=d},98033:(e,t,r)=>{r.d(t,{Z:()=>j,i:()=>D});var n=r(87462),a=r(4942),o=r(29439),i=r(93433),s=r(92950),u=r.n(s),c=r(28216),l=r(45697),m=r.n(l),d=r(334),f=r(11107),p=r(41800),g=r(90944),h=r(71355),b=r(57262),v=r(1936),y=r(88093),Z=r(61338),E=r(92758),M=r(98614),R=r(36438),O=r(86896),k=r(30893);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e){return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,O.Z)();return t?t.reduce((function(t,r){var o=r.username,c=r.is_active,l=r.email,m=r.first_name,f=r.last_name,p=r.is_org_admin;return[].concat((0,i.Z)(t),[{uuid:o,cells:[p?u().createElement(s.Fragment,null,u().createElement("span",null,u().createElement(M.ZP,{key:"yes-icon",className:"pf-u-mr-sm"}),u().createElement("span",{key:"yes"},a.formatMessage(k.Z.yes)))):u().createElement(s.Fragment,null,u().createElement(R.ZP,{key:"no-icon",className:"pf-u-mr-sm"}),u().createElement("span",{key:"no"},a.formatMessage(k.Z.no))),{title:e?u().createElement(d.Link,{to:"/users/detail/".concat(o)},o.toString()):o.toString()},l.toString(),m.toString(),f.toString(),{title:u().createElement(b.Label,{key:"status",color:c&&"green"},a.formatMessage(c?k.Z.active:k.Z.inactive)),props:{"data-is-active":c}}],selected:Boolean(n&&n.find((function(e){return e.uuid===o})))}])}),[]):[]}},C=function(e){var t=e.users,r=e.fetchUsers,a=e.updateUsersFilters,i=e.isLoading,l=e.pagination,m=e.selectedUsers,g=e.setSelectedUsers,h=e.userLinks,b=e.inModal,M=e.props,R=(0,c.useSelector)((function(e){var t=e.userReducer.users;return{limit:b?t.meta.limit:t.pagination.limit||Z.he.limit,offset:b?t.meta.offset:t.pagination.offset||Z.he.offset,count:b?t.meta.count:t.pagination.count,redirected:!b&&t.pagination.redirected}})),w=(0,O.Z)(),C=(0,d.useHistory)(),x=[{title:w.formatMessage(k.Z.orgAdministrator),key:"org-admin",transforms:[v.nowrap]},{title:w.formatMessage(k.Z.username),key:"username",transforms:[v.sortable]},{title:w.formatMessage(k.Z.email)},{title:w.formatMessage(k.Z.firstName),transforms:[v.nowrap]},{title:w.formatMessage(k.Z.lastName),transforms:[v.nowrap]},{title:w.formatMessage(k.Z.status),transforms:[v.nowrap]}],T=(0,c.useSelector)((function(e){var t=e.userReducer.users.filters;return C.location.search.length>0||Object.keys(t).length>0?t:{status:["Active"]}})),j=(0,s.useState)(b?{username:"",email:"",status:[w.formatMessage(k.Z.active)]}:T),D=(0,o.Z)(j,2),P=D[0],L=D[1];return(0,s.useEffect)((function(){b||R.redirected&&(0,Z.oG)(C,R.limit,R.offset)}),[R.redirected]),(0,s.useEffect)((function(){var e=b?Z.he:(0,Z.rj)(C,R),t=b?{status:P.status}:(0,E.aX)(C,["username","email","status"],P);L(t),r(S(S({},(0,f.jl)(S(S({},e),{},{filters:t}))),{},{inModal:b}))}),[]),(0,s.useEffect)((function(){b||((0,Z.Zc)(C)||(0,Z.oG)(C,l.limit,l.offset),Object.values(P).some((function(e){return(null==e?void 0:e.length)>0}))&&!(0,E.qF)(C,Object.keys(P))&&(0,E.aX)(C,Object.keys(P),P))})),u().createElement(p.M,(0,n.Z)({columns:x,isSelectable:!0,isCompact:!0,borders:!1,createRows:G(h),data:t,ouiaId:"users-table",fetchData:function(e){var t=Object.prototype.hasOwnProperty.call(e,"status")?e.status:P.status,n=e.username,a=e.email,o=e.count,i=e.limit,s=e.offset,u=e.orderBy;r(S(S({},(0,f.jl)({count:o,limit:i,offset:s,orderBy:u,filters:{username:n,email:a,status:t}})),{},{inModal:b})),b||(0,Z.oG)(C,i,s),b||(0,E.MS)(C,{username:n,email:a,status:t})},emptyFilters:{username:"",email:"",status:""},setFilterValue:function(e){var t,r=e.username,n=e.email,o=e.status;t={username:void 0===r?P.username:r,email:void 0===n?P.email:n,status:void 0===o||o===P.status?P.status:o},b||a(t),L(S({username:""},t))},isLoading:i,pagination:l,checkedRows:m,setCheckedItems:function(e){g((function(t){return e(t).map((function(e){var t=e.uuid;return{uuid:t,label:e.username||t}}))}))},sortBy:{index:1,direction:"asc"},rowWrapper:y.Z,titlePlural:w.formatMessage(k.Z.users).toLowerCase(),titleSingular:w.formatMessage(k.Z.user),noDataDescription:[w.formatMessage(k.Z.filterMatchesNoItems,{items:w.formatMessage(k.Z.users).toLowerCase()}),w.formatMessage(k.Z.checkFilterBeginning)],noData:0===t.length&&!P.username&&!P.email,filters:[{key:"username",value:P.username,placeholder:w.formatMessage(k.Z.filterByKey,{key:w.formatMessage(k.Z.username).toLowerCase()})},{key:"email",value:P.email,placeholder:w.formatMessage(k.Z.filterByKey,{key:w.formatMessage(k.Z.email).toLowerCase()})},{key:"status",value:P.status,label:w.formatMessage(k.Z.status),type:"checkbox",items:[{label:w.formatMessage(k.Z.active),value:"Active"},{label:w.formatMessage(k.Z.inactive),value:"Inactive"}]}],tableId:"users-list"},M))},x=function(e){var t=e.userReducer,r=t.users,n=t.isUserDataLoading;return{users:r.data&&r.data.map((function(e){return S(S({},e),{},{uuid:e.username})})),pagination:r.meta,isLoading:n}},T=function(e){return{fetchUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.he;e((0,g.u)(t))},updateUsersFilters:function(t){e((0,g.a)(t))},addNotification:function(){return e(h.addNotification.apply(void 0,arguments))}}};C.propTypes={history:m().shape({goBack:m().func.isRequired,push:m().func.isRequired}),users:m().array,isLoading:m().bool,searchFilter:m().string,fetchUsers:m().func.isRequired,updateUsersFilters:m().func.isRequired,setSelectedUsers:m().func.isRequired,selectedUsers:m().array,pagination:m().shape({limit:m().number,offset:m().number,count:m().number}),userLinks:m().bool,props:m().object,inModal:m().bool},C.defaultProps={users:[],selectedUsers:[],setSelectedUsers:function(){},userLinks:!1,inModal:!1};const j=(0,c.connect)(x,T)(C);var D=(0,c.connect)(x,T,(function(e,t,r){return S(S(S(S({},r),e),t),{},{fetchUsers:function(e){return t.fetchUsers(e||Z.eX)}})}))(C)},45459:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pt});var n=r(87462),a=r(29439),o=r(93433),i=r(4942),s=r(92950),u=r.n(s),c=r(334),l=r(1936),m=r(57262),d=r(45987),f=r(28216),p=r(71355),g=r(93025),h=r(67850),b=r(46966),v=r(73943),y=r(64124),Z=r(96354),E=r(86896),M=r(45697),R=r.n(M),O=r(48880),k=r(71002),w=r(15861),S=r(89168),G=r(84974),C=r(28412),x=r(82644),T=r(29558),j=r(30893),D=r(2034);function P(){P=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new R(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=Z(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function m(){}function d(){}function f(){}var p={};s(p,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(O([])));h&&h!==t&&r.call(h,a)&&(p=h);var b=f.prototype=m.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function n(a,o,i,s){var u=c(e[a],e,o);if("throw"!==u.type){var l=u.arg,m=l.value;return m&&"object"==(0,k.Z)(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(m).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=f,s(b,"constructor",f),s(f,"constructor",d),d.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(y.prototype),s(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(u(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),s(b,i,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}var L=function(){var e=(0,w.Z)(P().mark((function e(t,r,n){var a,o,i,s,u;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,x.Sn)(),s=(0,T.d)({locale:C.locale,messages:D},i),t){e.next=4;break}return e.abrupt("return",void 0);case 4:if(!(t.length>150)){e.next=6;break}throw s.formatMessage(j.Z.maxCharactersWarning,{number:150});case 6:return e.next=8,(0,S.bt)({limit:10,offset:0,filters:{name:t},nameMatch:"exact"}).catch((function(e){console.error(e)}));case 8:if(u=e.sent,!(n?null==u||null===(a=u.data)||void 0===a?void 0:a.some((function(e){return e[r]!==n})):(null==u||null===(o=u.data)||void 0===o?void 0:o.length)>0)){e.next=11;break}throw s.formatMessage(j.Z.nameAlreadyTaken);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),N=(0,G.Z)((function(e,t,r){return L(e,t,r)})),q=r(65731);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e){var t,r=e.formFields,n=(0,E.Z)(),a=(0,s.useContext)(Ze),o=a.submitting,i=a.error,c=a.setWizardError,l=(0,O.default)().getState;return(0,s.useEffect)((function(){c(void 0),L(l().values["group-name"]).then((function(){return c(!1)})).catch((function(){return c(!0)}))}),[]),void 0===i||o?u().createElement(m.Bullseye,null,u().createElement(m.Spinner,{size:"xl"})):!0===i?u().createElement(q.Z,{context:Ze,title:n.formatMessage(j.Z.groupNameTakenTitle),text:n.formatMessage(j.Z.groupNameTakenText)}):u().createElement(u().Fragment,null,u().createElement(m.Title,{headingLevel:"h1",size:"xl",className:"pf-u-mb-lg"},n.formatMessage(j.Z.reviewDetails)),[[I({},null==r||null===(t=r[0])||void 0===t?void 0:t[0])]])};F.propTypes={formFields:R().array};const A=F;var B=r(46441),U=r(19756),V=r(41693),z=r(92607),W=r(23393),H=r(59775),K=function(e,t){return void 0===e||t?"error":"default"},Q=function(e){return(null==e?void 0:e.length)>150?"error":"default"},X=function(e){var t=(0,E.Z)(),r=(0,V.Z)(e).input,n=(0,O.default)(),o=n.getState().values,i=o["group-name"],c=o["group-description"],l=(0,s.useState)(i||""),d=(0,a.Z)(l,2),f=d[0],p=d[1],g=(0,s.useState)(),h=(0,a.Z)(g,2),b=h[0],v=h[1],y=(0,s.useState)(c),Z=(0,a.Z)(y,2),M=Z[0],R=Z[1],k=function(e){r.onChange(void 0),N(e).then((function(){r.onChange(e),v(void 0)})).catch((function(e){v(e)})),p(e)};return(0,s.useEffect)((function(){(null==f?void 0:f.length)>0&&k(f)}),[]),u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,{className:"rbac-l-stack__item-summary"},u().createElement(H.c,{label:t.formatMessage(j.Z.groupName),helperTextInvalid:f?b:t.formatMessage(j.Z.required),isRequired:!0,validated:K(f,b)},u().createElement(z.oi,{value:f,type:"text",validated:K(f,b),onBlur:function(){return""===f&&p(void 0)},onChange:function(e){return k(e)},"aria-label":"Group name"}))),u().createElement(m.StackItem,null,u().createElement(H.c,{label:t.formatMessage(j.Z.groupDescription),helperTextInvalid:t.formatMessage(j.Z.maxCharactersWarning,{number:150}),validated:Q(M)},u().createElement(W.Kx,{value:M,validated:Q(M),onChange:function(e){R(e),n.change("group-description",e)},"aria-label":"Group description",resizeOrientation:"vertical"}))))};X.propTypes={name:R().string,description:R().string,groups:R().array};const Y=X;var J=r(11107),$=r(61338),ee=r(41800),te=r(28090);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?e.reduce((function(e,t){var n=t.uuid,a=t.display_name,i=t.name,s=t.description;return[].concat((0,o.Z)(e),[{uuid:n,cells:[a||i,s],selected:Boolean(r&&r.find((function(e){return e.uuid===n})))}])}),[]):[]},oe=function(e){var t=e.roles,r=e.fetchRoles,n=e.isLoading,o=e.pagination,i=e.selectedRoles,c=e.canSort,m=e.setSelectedRoles,d=(0,E.Z)(),f=(0,s.useState)(""),p=(0,a.Z)(f,2),g=p[0],h=p[1],b=(0,s.useRef)([ne({title:d.formatMessage(j.Z.name),key:"display_name"},c?{transforms:[l.sortable]}:{orderBy:"name"}),{title:d.formatMessage(j.Z.description)}]).current;return(0,s.useEffect)((function(){r({orderBy:"display_name"})}),[]),u().createElement(ee.M,{columns:b,isSelectable:!0,isCompact:!0,borders:!1,createRows:ae,data:t,filterValue:g,filterPlaceholder:d.formatMessage(j.Z.roleName).toLowerCase(),fetchData:function(e){return r((0,J.jl)(ne(ne({},e),{},{filters:{display_name:e.name}})))},setFilterValue:function(e){var t=e.name;return h(t)},isLoading:n,ouiaId:"roles-table",pagination:o,checkedRows:i,setCheckedItems:function(e){m((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:d.formatMessage(j.Z.roles).toLowerCase(),titleSingular:d.formatMessage(j.Z.role),tableId:"roles-list"})};oe.propTypes={history:R().shape({goBack:R().func.isRequired,push:R().func.isRequired}),roles:R().array,isLoading:R().bool,searchFilter:R().string,fetchRoles:R().func.isRequired,setSelectedRoles:R().func.isRequired,selectedRoles:R().array,pagination:R().shape({limit:R().number.isRequired,offset:R().number.isRequired,count:R().number}),canSort:R().bool},oe.defaultProps={roles:[],pagination:$.eX,canSort:!0};const ie=(0,f.connect)((function(e){var t=e.roleReducer,r=t.roles,n=t.isLoading;return{roles:r.data,pagination:r.meta,isLoading:n}}),(function(e){return{fetchRoles:function(t){e((0,te.Kt)((0,J.jl)(t)))},addNotification:function(){return e(p.addNotification.apply(void 0,arguments))}}}))(oe);var se=(0,f.connect)((function(e){var t=e.groupReducer.selectedGroup,r=t.addRoles.roles;return{roles:r,pagination:t.addRoles.pagination||ne(ne({},$.he),{},{count:r&&r.length}),isLoading:!t.addRoles.loaded,groupId:t.uuid}}),(function(e){return{fetchRoles:function(t,r){e((0,U.nr)(t,r))},addNotification:function(){return e(p.addNotification.apply(void 0,arguments))}}}),(function(e,t,r){return ne(ne(ne(ne({},r),e),t),{},{canSort:!1,fetchRoles:function(r){return t.fetchRoles(e.groupId,r)}})}))(oe),ue=function(e){var t=(0,E.Z)(),r=(0,s.useState)([]),n=(0,a.Z)(r,2),o=n[0],i=n[1],c=(0,V.Z)(e).input,l=(0,O.default)();return(0,s.useEffect)((function(){i(l.getState().values["roles-list"]||[])}),[]),(0,s.useEffect)((function(){c.onChange(o),l.change("roles-list",o)}),[o]),u().createElement(s.Fragment,null,u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,null,u().createElement(m.TextContent,null,u().createElement(m.Text,null,t.formatMessage(j.Z.selectRolesForGroupText)))),u().createElement(m.StackItem,null,u().createElement(m.FormGroup,{fieldId:"select-role"},u().createElement(ie,{selectedRoles:o,setSelectedRoles:i})))))};ue.propTypes={selectedRoles:R().array,setSelectedRoles:R().func,title:R().string,description:R().string};const ce=ue;var le=r(98033),me=r(82916),de=function(e){var t=(0,s.useState)([]),r=(0,a.Z)(t,2),n=r[0],o=r[1],i=(0,V.Z)(e).input,c=(0,E.Z)(),l=(0,O.default)();return(0,s.useEffect)((function(){o(l.getState().values["users-list"]||[])}),[]),(0,s.useEffect)((function(){i.onChange(n),l.change("users-list",n)}),[n]),u().createElement(s.Fragment,null,u().createElement(m.Form,null,u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,null,u().createElement(m.TextContent,null,u().createElement(me.Z,{linkDescription:c.formatMessage(j.Z.toManageUsersText)}))),u().createElement(m.StackItem,null,u().createElement(m.FormGroup,{fieldId:"select-user"},u().createElement(m.Card,null,u().createElement(le.i,{selectedUsers:n,setSelectedUsers:o,inModal:!0})))))))};de.propTypes={selectedUsers:R().array,setSelectedUsers:R().func,title:R().string,description:R().string};const fe=de;var pe=function(){var e=(0,E.Z)(),t=(0,O.default)().getState().values,r=t["group-name"],n=t["group-description"],a=t["users-list"],o=t["roles-list"];return u().createElement("div",{className:"rbac"},u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,null,u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,{className:"rbac-l-stack__item-summary"},u().createElement(m.Grid,null,u().createElement(m.GridItem,{md:3},u().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.groupName))),u().createElement(m.GridItem,{md:9},u().createElement(m.Text,{component:m.TextVariants.p},r))),u().createElement(m.Grid,null,u().createElement(m.GridItem,{md:3},u().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.groupDescription))),u().createElement(m.GridItem,{md:9},u().createElement(m.Text,{component:m.TextVariants.p},n))),u().createElement(m.Grid,null,u().createElement(m.GridItem,{md:3},u().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.roles))),u().createElement(m.GridItem,{md:9},u().createElement(m.Text,{component:m.TextVariants.p},o.map((function(e,t){return u().createElement(m.Text,{className:"pf-u-mb-0",key:t},e.label)}))))),u().createElement(m.Grid,null,u().createElement(m.GridItem,{md:3},u().createElement(m.Text,{component:m.TextVariants.h4,className:"rbac-bold-text"},e.formatMessage(j.Z.members))),u().createElement(m.GridItem,{md:9},u().createElement(m.Text,{component:m.TextVariants.p},a.map((function(e,t){return u().createElement(m.Text,{className:"pf-u-mb-0",key:t},e.label)}))))))))))};pe.propTypes={name:R().string,description:R().string,groups:R().array};const ge=pe;var he=r(4682),be=["Content"];function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze=(0,s.createContext)({success:!1,submitting:!1,error:void 0}),Ee=function(e){return u().createElement(h.ZP,(0,n.Z)({},e,{showFormControls:!1}))},Me=function(e){var t=e.Content,r=(0,d.Z)(e,be);return u().createElement(t,r)};Me.propTypes={Content:R().elementType.isRequired};var Re={description:Me,"set-name":Y,"set-roles":ce,"set-users":fe,"summary-content":ge},Oe=function(e,t,r){return function(n){r(n),Object.keys(n).length>0?t(!0):e()}},ke=function(e){var t=e.postMethod,r=e.pagination,o=e.filters,i=(0,f.useDispatch)(),l=(0,E.Z)(),m=(0,s.useRef)(function(){var e=(0,x.Sn)(),t=(0,T.d)({locale:C.locale,messages:D},e);return{fields:[{component:"wizard",name:"wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:t.formatMessage(j.Z.createGroup),fields:[{name:"name-and-description",nextStep:"add-roles",title:t.formatMessage(j.Z.nameAndDescription),fields:[{component:"set-name",name:"group-name",validate:[{type:y.Z.REQUIRED}]},{component:Z.Z.TEXTAREA,name:"group-description",hideField:!0,validate:[{type:y.Z.MAX_LENGTH,threshold:150}]}]},{name:"add-roles",nextStep:"add-users",title:t.formatMessage(j.Z.addRoles),fields:[{component:"set-roles",name:"roles-list"}]},{name:"add-users",nextStep:"review",title:t.formatMessage(j.Z.addMembers),fields:[{component:"set-users",name:"users-list"}]},{name:"review",title:t.formatMessage(j.Z.reviewDetails),buttons:function(e){return u().createElement(B.Z,(0,n.Z)({},e,{context:Ze}))},StepTemplate:A,fields:[{component:"summary-content",name:"summary-content"}]}]}]}}()),d=(0,c.useHistory)().push,h=(0,s.useState)(!1),M=(0,a.Z)(h,2),R=M[0],O=M[1],k=(0,s.useState)({}),w=(0,a.Z)(k,2),S=w[0],G=w[1],P=(0,s.useState)({success:!1,submitting:!1,error:void 0,hideForm:!1}),L=(0,a.Z)(P,2),N=L[0],q=L[1],_=function(){i((0,p.addNotification)({variant:"warning",title:l.formatMessage(j.Z.addingGroupTitle),dismissDelay:8e3,description:l.formatMessage(j.Z.addingGroupCanceledDescription)})),d({pathname:he.Z.groups.path,search:(0,J.GT)(ye({page:1,per_page:r.limit},o))})};return R?u().createElement(v.R,{type:"group",isOpen:R,onModalCancel:function(){return O(!1)},onConfirmCancel:_}):u().createElement(Ze.Provider,{value:ye(ye({},N),{},{setWizardError:function(e){return q((function(t){return ye(ye({},t),{},{error:e})}))},setWizardSuccess:function(e){return q((function(t){return ye(ye({},t),{},{success:e})}))},setHideForm:function(e){return q((function(t){return ye(ye({},t),{},{hideForm:e})}))}})},u().createElement(g.Z,{schema:m.current,subscription:{values:!0},FormTemplate:Ee,componentMapper:ye(ye({},b.ZP),Re),onSubmit:function(e){var n={name:e["group-name"],description:e["group-description"],user_list:e["users-list"].map((function(e){return{username:e.label}})),roles_list:e["roles-list"].map((function(e){return e.uuid}))};d({pathname:he.Z.groups.path,search:(0,J.GT)({page:1,per_page:r.limit})}),i((0,U.Rp)(n)).then((function(){return t({limit:r.limit,offset:0,filters:{}})})).then((function(){i((0,p.addNotification)({variant:"success",title:l.formatMessage(j.Z.addGroupSuccessTitle),dismissDelay:8e3,description:l.formatMessage(j.Z.addGroupSuccessDescription)}))}))},initialValues:S,onCancel:Oe(_,O,G)}))};ke.propTypes={postMethod:R().func,pagination:R().shape({limit:R().number.isRequired}).isRequired,filters:R().object.isRequired};const we=ke;var Se=r(97779),Ge=r(40483),Ce=r(36457);function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=function(e){var t=e.addNotification,r=e.updateGroup,o=e.postMethod,i=e.pagination,l=e.filters,d=e.cancelRoute,f=e.submitRoute,p=void 0===f?d:f,g=e.group,h=e.onClose,v=(0,E.Z)(),M=(0,s.useState)(void 0),R=(0,a.Z)(M,2),O=R[0],k=R[1],w=(0,c.useHistory)().push,S=(0,c.useRouteMatch)("/groups/edit/:id"),G=function(e){k(e)};(0,s.useEffect)((function(){S&&(0,U.yi)(S.params.id).payload.then((function(e){return G(e)})).catch((function(){return G(void 0)}))}),[]),(0,s.useEffect)((function(){k(g)}),[g]);var C=function(){t({variant:"warning",dismissDelay:8e3,title:v.formatMessage(O?j.Z.editingGroup:j.Z.addingGroupTitle),description:v.formatMessage(O?j.Z.editGroupCanceledDescription:j.Z.addingGroupCanceledDescription)}),h(),w(d)},x={fields:[Te(Te({name:"name",label:v.formatMessage(j.Z.name),component:O?Z.Z.TEXT_FIELD:"skeleton"},O?{validateOnMount:!0}:{}),{},{validate:[{type:"validate-group-name",id:S?S.params.id:g.uuid,idKey:"uuid"},{type:y.Z.REQUIRED}]}),{name:"description",label:v.formatMessage(j.Z.description),component:O?Z.Z.TEXTAREA:"skeleton",validate:[{type:y.Z.MAX_LENGTH,threshold:150}]}]},T={"validate-group-name":function(e){var t=e.idKey,r=e.id;return function(e){return N(e,t,r)}}};return u().createElement(Ce.Z,{schema:x,componentMapper:Te(Te({},b.ZP),{},{skeleton:m.Skeleton}),onCancel:C,onSubmit:function(e){var t={uuid:e.uuid,description:e.description||null,name:e.name};o?r(t).then((function(){return o({limit:null==i?void 0:i.limit,filters:l})})).then(w(p)):r(t).then((function(){return w(p)}))},validatorMapper:T,initialValues:Te({},O),FormTemplate:function(e){return u().createElement(Ge.Z,(0,n.Z)({},e,{ModalProps:{onClose:C,isOpen:!0,variant:"medium",title:v.formatMessage(j.Z.editGroupInfo)}}))}})};je.defaultProps={cancelRoute:he.Z.groups.path,onClose:function(){return null},onSubmit:function(){return null}},je.propTypes={addNotification:R().func.isRequired,fetchGroup:R().func.isRequired,inputValue:R().string,updateGroup:R().func.isRequired,postMethod:R().func,pagination:R().shape({limit:R().number.isRequired}).isRequired,filters:R().object.isRequired,cancelRoute:R().oneOfType([R().string,R().shape({pathname:R().string.isRequired,search:R().string,hash:R().string})]),submitRoute:R().oneOfType([R().string,R().shape({pathname:R().string.isRequired,search:R().string,hash:R().string})]),group:R().object,onClose:R().func};const De=(0,f.connect)((function(e){return{isLoading:e.groupReducer.isLoading}}),(function(e){return(0,Se.DE)({addNotification:p.addNotification,updateGroup:U.mD,fetchGroup:U.yi},e)}))(je);var Pe=r(69957),Le=r(19571),Ne=r(44012),qe=function(e){var t=e.removeGroups,r=e.group,o=e.isLoading,i=e.fetchGroup,l=e.groupsUuid,d=e.isModalOpen,f=e.postMethod,p=e.pagination,g=e.filters,h=e.cancelRoute,b=e.submitRoute,v=void 0===b?h:b,y=(0,E.Z)();(0,s.useEffect)((function(){1===l.length&&i(l[0].uuid)}),[]);var Z=(0,c.useHistory)().push,M=(0,s.useState)(!1),R=(0,a.Z)(M,2),O=R[0],k=R[1],w=l.length>1,S=function(){return Z(h)};return u().createElement(m.Modal,{className:"rbac",isOpen:d,variant:m.ModalVariant.small,title:u().createElement(m.Text,null,u().createElement(Pe.ZP,{className:"delete-group-warning-icon"}),"  ",y.formatMessage(w?j.Z.deleteGroupsQuestion:j.Z.deleteGroupQuestion)),onClose:S,actions:[u().createElement(m.Button,{key:"submit",isDisabled:!O,variant:"danger",type:"button",onClick:function(){var e=l.map((function(e){return e.uuid}));t(e).then((function(){return f(e,{limit:null==p?void 0:p.limit,filters:g})})).then(Z(v))}},y.formatMessage(w?j.Z.deleteGroups:j.Z.deleteGroup)),u().createElement(m.Button,{key:"cancel",variant:"link",type:"button",onClick:S},y.formatMessage(j.Z.cancel))]},u().createElement(m.TextContent,null,w?u().createElement(m.Text,null,u().createElement(Ne.Z,(0,n.Z)({},j.Z.deletingGroupsRemovesRoles,{values:{b:function(e){return u().createElement("b",null,e)},count:l.length}}))):o?u().createElement(Le.Z0,null):u().createElement(m.Text,null,u().createElement(Ne.Z,(0,n.Z)({},j.Z.deletingGroupRemovesRoles,{values:{b:function(e){return u().createElement("b",null,e)},name:r.name}}))))," ",u().createElement(m.Checkbox,{isChecked:O,onChange:function(){return k(!O)},label:y.formatMessage(j.Z.understandActionIrreversible),id:"delete-group-check"}))};qe.defaultProps={isModalOpen:!1,group:{},groupsUuid:[],isLoading:!0,cancelUrl:he.Z.groups.path},qe.propTypes={isModalOpen:R().bool,removeGroups:R().func.isRequired,fetchGroup:R().func.isRequired,postMethod:R().func,pagination:R().shape({limit:R().number.isRequired}).isRequired,filters:R().object.isRequired,isLoading:R().bool,group:R().object,groupsUuid:R().array,submitRoute:R().oneOfType([R().string,R().shape({pathname:R().string.isRequired,search:R().string,hash:R().string})]),cancelRoute:R().oneOfType([R().string,R().shape({pathname:R().string.isRequired,search:R().string,hash:R().string})])};const _e=(0,f.connect)((function(e){var t=e.groupReducer.selectedGroup;return{group:t,isLoading:!t.loaded}}),(function(e){return(0,Se.DE)({fetchGroup:U.yi,removeGroups:U.gg},e)}))(qe);var Ie=r(64107),Fe=r(91290),Ae=r(94184),Be=r.n(Ae),Ue=function(e){var t=e.id,r=e.uuid,n=e.bodyContent,o=(0,s.useState)(!1),i=(0,a.Z)(o,2),c=i[0],l=i[1],d=(0,s.useRef)(null);return u().createElement("span",{ref:d,key:"".concat(r,"-popover"),id:t},u().createElement(m.Popover,{zIndex:"110",position:"right",isVisible:c,shouldClose:function(){return l(!1)},hideOnOutsideClick:!0,bodyContent:n,appendTo:d.current},u().createElement(Fe.ZP,{onClick:function(){return l(!c)},className:Be()("pf-c-question-circle-icon",{"icon-active":c})})))};Ue.propTypes={id:R().string.isRequired,uuid:R().string.isRequired,bodyContent:R().string.isRequired};var Ve=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=(0,E.Z)();return t.reduce((function(t,r){var i=r.uuid,l=r.name,m=r.roleCount,d=r.principalCount,f=r.modified,p=r.platform_default,g=r.admin_default;return[].concat((0,o.Z)(t),[{uuid:i,isAdminDefault:g,isPlatformDefault:p,cells:[u().createElement(s.Fragment,{key:i},u().createElement("div",{className:"pf-m-inline-flex"},e?u().createElement(c.Link,{key:"".concat(i,"-link"),state:{uuid:i},to:{pathname:"/groups/detail/".concat(p?"default-access":i)}},l):l,(p||g)&&u().createElement(Ue,{id:"default".concat(g?"-admin":"","-group-popover"),uuid:i,key:"".concat(i,"-popover"),bodyContent:a.formatMessage(g?j.Z.orgAdminInheritedRoles:j.Z.usersInheritedRoles)}))),m,d,u().createElement(s.Fragment,{key:"".concat(i,"-modified")},u().createElement(Ie.Z,{date:f,type:(0,J.mh)(f)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===i})))}])}),[])},ze=function(e){var t=e.history.push,r=e.location.pathname,n=e.tabItems,a=e.isHeader,o=n.find((function(e){var t=e.name;return r.includes(t)}));return u().createElement(m.Tabs,{className:a?"rbac-page-header__tabs":"",activeKey:o?o.eventKey:0,onSelect:function(e,r){return t(n[r].name)}},n.map((function(e){return u().createElement(m.Tab,{title:e.title,key:e.eventKey,eventKey:e.eventKey,name:e.name})})))};ze.propTypes={location:R().shape({pathname:R().string.isRequired}),history:R().shape({push:R().func.isRequired}),tabItems:R().array.isRequired,isHeader:R().bool};const We=(0,c.withRouter)(ze);var He=r(38376),Ke=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=(0,E.Z)();return e.reduce((function(e,t){var a=t.is_active,i=t.username,s=t.email,c=t.first_name,l=t.last_name;return[].concat((0,o.Z)(e),[{uuid:i,username:i,cells:[{title:u().createElement(m.Label,{color:a&&"green"},n.formatMessage(a?j.Z.active:j.Z.inactive)),props:{data:{isActive:a}}},i,s,l,c],selected:r.find((function(e){return e.uuid===i}))}])}),[])},Qe=function(e){var t=e.history.push,r=e.match.params.uuid,n=e.addNotification,o=e.closeUrl,i=e.addMembersToGroup,c=e.fetchMembersForGroup,l=e.fetchGroups,d=(0,s.useState)([]),f=(0,a.Z)(d,2),p=f[0],g=f[1],h=(0,E.Z)(),b=function(){n({variant:"warning",title:h.formatMessage(p.length>1?j.Z.addingGroupMembersTitle:j.Z.addingGroupMemberTitle),dismissDelay:8e3,description:h.formatMessage(p.length>1?j.Z.addingGroupMembersCancelled:j.Z.addingGroupMemberCancelled)}),t(o)};return u().createElement(m.Modal,{title:h.formatMessage(j.Z.addMembers),variant:m.ModalVariant.medium,isOpen:!0,actions:[u().createElement(m.Button,{key:"confirm",ouiaId:"primary-confirm-button",isDisabled:0===p.length,variant:"primary",onClick:function(){var e=p.map((function(e){return{username:e.label}}));e.length>0&&(n({variant:"info",title:h.formatMessage(e.length>1?j.Z.addingGroupMembersTitle:j.Z.addingGroupMemberTitle),dismissDelay:8e3,description:h.formatMessage(e.length>1?j.Z.addingGroupMembersDescription:j.Z.addingGroupMemberDescription)}),i(r,e).then((function(){c(r),l({inModal:!1})}))),t(o)}},h.formatMessage(j.Z.addToGroup)),u().createElement(m.Button,{id:"add-groups-cancel",ouiaId:"secondary-cancel-button",key:"cancel",variant:"link",onClick:b},h.formatMessage(j.Z.cancel))],onClose:b},u().createElement(m.Stack,{hasGutter:!0},u().createElement(m.StackItem,null,u().createElement(m.TextContent,null,u().createElement(me.Z,{linkDescription:h.formatMessage(j.Z.toManageUsersText)}))),u().createElement(m.StackItem,null,u().createElement(le.i,{selectedUsers:p,setSelectedUsers:g,inModal:!0}))))};Qe.defaultProps={users:[],inputValue:"",closeUrl:"/groups",selectedUsers:[]},Qe.propTypes={history:R().shape({goBack:R().func.isRequired,push:R().func}).isRequired,addGroup:R().func.isRequired,addNotification:R().func.isRequired,fetchData:R().func.isRequired,fetchMembersForGroup:R().func.isRequired,inputValue:R().string,users:R().array,selectedUsers:R().array,match:R().object,closeUrl:R().string,addMembersToGroup:R().func.isRequired,fetchGroups:R().func.isRequired};const Xe=(0,c.withRouter)((0,f.connect)((function(e){return{isLoading:e.groupReducer.isLoading}}),(function(e){return(0,Se.DE)({addNotification:p.addNotification,addGroup:U.Rp,addMembersToGroup:U.dy,fetchMembersForGroup:U.nd,fetchGroups:U.bt},e)}))(Qe));var Ye=r(44873),Je=r(1227),$e=r(88093),et=r(26794);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt=function(e){var t=e.groupReducer.selectedGroup;return{principals:t.members.data,pagination:t.members.meta,groupName:t.name,admin_default:t.admin_default,platform_default:t.platform_default,isLoading:t.members.isLoading}},at=function(e,t,r){return u().createElement(Ne.Z,(0,n.Z)({},r?j.Z.removeMembersText:j.Z.removeMemberText,{values:{b:function(e){return u().createElement("b",null,e)},name:e,group:t}}))};const ot=function(){var e=(0,E.Z)(),t=(0,s.useState)(""),r=(0,a.Z)(t,2),i=r[0],d=r[1],p=(0,s.useState)([]),g=(0,a.Z)(p,2),h=g[0],b=g[1],v=(0,s.useState)(!1),y=(0,a.Z)(v,2),Z=y[0],M=y[1],R=(0,s.useState)((function(){return null})),O=(0,a.Z)(R,2),k=O[0],w=O[1],S=(0,s.useState)({}),G=(0,a.Z)(S,2),C=G[0],x=G[1],T=(0,c.useParams)().uuid,D=(0,f.useSelector)(nt,f.shallowEqual),P=D.principals,L=D.pagination,N=D.groupName,q=D.isLoading,_=D.admin_default,I=D.platform_default,F=(0,s.useContext)(et.Z),A=F.userAccessAdministrator,B=F.orgAdmin,V=(0,s.useRef)(B||A),z=[{title:e.formatMessage(j.Z.status),transforms:[l.nowrap]},{title:e.formatMessage(j.Z.username)},{title:e.formatMessage(j.Z.email)},{title:e.formatMessage(j.Z.lastName)},{title:e.formatMessage(j.Z.firstName)}],W=(0,f.useDispatch)(),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;W((0,U.nd)(T,e,t))};(0,s.useEffect)((function(){H()}),[]),(0,s.useEffect)((function(){V.current=B||A}),[B,A]);var K=function(e){return W((0,U.tz)(T,e)).then((function(){b([]),H(void 0,rt(rt({},L),{},{offset:0})),W((0,U.bt)({inModal:!1}))}))},Q=(0,c.useHistory)();return u().createElement(s.Fragment,null,u().createElement(Je.Z,{text:C.text,title:C.title,confirmButtonLabel:C.confirmButtonLabel,isOpen:Z,onClose:function(){return M(!1)},onSubmit:function(){M(!1),k()}}),u().createElement(Ye.Z,{type:"content",id:"tab-principals"},I||_?u().createElement(m.Card,null,u().createElement(m.CardBody,null,u().createElement(m.Bullseye,null,u().createElement(m.TextContent,null,u().createElement(m.Text,{component:m.TextVariants.h1},e.formatMessage(_?j.Z.allOrgAdminsAreMembers:j.Z.allUsersAreMembers)))))):u().createElement(ee.M,{data:(P||[]).map((function(e){return rt(rt({},e),{},{uuid:e.username})})),isSelectable:V.current,createRows:Ke,columns:z,routes:function(){return u().createElement(s.Fragment,null,u().createElement(c.Route,{path:he.Z["group-add-members"].path,render:function(e){return u().createElement(Xe,(0,n.Z)({fetchData:H,closeUrl:"/groups/detail/".concat(T,"/members")},e))}}))},actionResolver:function(){return V.current?[{title:e.formatMessage(j.Z.remove),onClick:function(t,r,n){w((function(){return function(){return K([n.username.title])}})),x({title:e.formatMessage(j.Z.removeMemberQuestion),text:at(n.username.title,N,!1),confirmButtonLabel:e.formatMessage(j.Z.removeMember)}),M(!0)}}]:null},filterPlaceholder:e.formatMessage(j.Z.username).toLowerCase(),titlePlural:e.formatMessage(j.Z.members).toLowerCase(),titleSingular:e.formatMessage(j.Z.member),ouiaId:"members-table",pagination:L,filterValue:i,fetchData:function(e){var t=e.limit,r=e.offset,n=e.name;return H(n,{limit:t,offset:r})},setFilterValue:function(e){var t=e.name;return d(t)},checkedRows:h,isLoading:q,rowWrapper:$e.Z,setCheckedItems:function(e){b((function(t){return e(t)}))},toolbarButtons:function(){return(0,o.Z)(V.current?[u().createElement(c.Link,{to:"/groups/detail/".concat(T,"/members/add_members"),key:"remove-from-group",className:"rbac-m-hide-on-sm"},u().createElement(m.Button,{variant:"primary","aria-label":"Add member"},e.formatMessage(j.Z.addMember))),{label:e.formatMessage(j.Z.addMember),props:{className:"rbac-m-hide-on-md"},onClick:function(){Q.push("/groups/detail/".concat(T,"/members/add_members"))}},{label:e.formatMessage(j.Z.remove),props:{isDisabled:!h||!h.length>0,variant:"danger"},onClick:function(){var t=h.length>1,r=e.formatMessage(t?j.Z.removeMembersQuestion:j.Z.removeMemberQuestion);w((function(){return function(){return K(h.map((function(e){return e.uuid})))}})),x({title:r,confirmButtonLabel:r,text:at(t?h.length:h[0].uuid,N,t)}),M(!0)}}]:[])},emptyProps:{title:e.formatMessage(j.Z.noGroupMembers),description:[e.formatMessage(j.Z.addUserToConfigure),""]},tableId:"group-members"})))};var it=function(e){var t=e.isOpen,r=e.onClose,a=e.onSubmit,o=(0,E.Z)();return u().createElement(Je.Z,{text:u().createElement(m.TextContent,null,u().createElement(m.Text,null,u().createElement(Ne.Z,(0,n.Z)({},j.Z.defaultAccessGroupEditWarning,{values:{b:function(e){return u().createElement("b",null,e)}}})))),title:o.formatMessage(j.Z.warning),withCheckbox:!0,isOpen:t,confirmButtonLabel:o.formatMessage(j.Z.continue),onClose:r,onSubmit:a})};it.propTypes={onSubmit:R().func,onClose:R().func,isOpen:R().bool};const st=it;var ut=function(e){var t=e.history.push,r=e.selectedRoles,o=e.setSelectedRoles,i=e.title,c=e.closeUrl,l=e.addRolesToGroup,d=e.name,f=e.isDefault,p=e.isChanged,g=e.addNotification,h=e.onDefaultGroupChanged,b=e.fetchRolesForGroup,v=e.fetchSystemGroup,y=e.fetchGroup,Z=e.fetchUuid,M=(0,E.Z)(),R=(0,s.useState)(!1),O=(0,a.Z)(R,2),k=O[0],w=O[1],S=function(){o&&o([]),g({variant:"warning",title:M.formatMessage(j.Z.addingGroupRolesTitle),dismissDelay:8e3,description:M.formatMessage(j.Z.addingGroupRolesCancelled)}),t(c)},G=function(){var e=r.map((function(e){return e.uuid}));return l(Z,e,(function(){f?v().then((function(e){var t=e.value.data;b(t[0].uuid),y(t[0].uuid)})):(b(),y()),o([])})),f&&!p&&h(!0),t(c)};return f&&!p&&k?u().createElement(st,{isOpen:k,onClose:S,onSubmit:G}):u().createElement(m.Modal,{title:M.formatMessage(j.Z.addRolesToGroup),variant:m.ModalVariant.medium,isOpen:!0,onClose:function(){S(),w(!0)},actions:[u().createElement(m.Button,{"aria-label":"Save",ouiaId:"primary-save-button",variant:"primary",key:"confirm",isDisabled:0===r.length,onClick:function(){w(!0),(!f||p)&&G()}},M.formatMessage(j.Z.addToGroup)),u().createElement(m.Button,{"aria-label":"Cancel",ouiaId:"secondary-cancel-button",variant:"link",key:"cancel",onClick:S},M.formatMessage(j.Z.cancel))]},u().createElement(m.Stack,{hasGutter:!0},i&&u().createElement(m.StackItem,null,u().createElement(m.Title,{headingLevel:"h4",size:"xl"},i)),u().createElement(m.StackItem,null,u().createElement(m.TextContent,null,u().createElement(m.Text,{component:m.TextVariants.p},u().createElement(Ne.Z,(0,n.Z)({},j.Z.onlyGroupRolesVisible,{values:{b:function(e){return u().createElement("b",null,e)},name:d}}))))),u().createElement(m.StackItem,null,u().createElement(m.Card,null,u().createElement(se,{selectedRoles:r,setSelectedRoles:o})))))};ut.propTypes={history:R().shape({push:R().any,goBack:R().func.isRequired}).isRequired,match:R().shape({params:R().object.isRequired}).isRequired,selectedRoles:R().array,setSelectedRoles:R().func,addRolesToGroup:R().func,closeUrl:R().string,title:R().string,name:R().string,isDefault:R().bool,isChanged:R().bool,addNotification:R().func,onDefaultGroupChanged:R().func,fetchRolesForGroup:R().func,fetchGroup:R().func,fetchSystemGroup:R().func,fetchUuid:R().string};const ct=ut;var lt=function(e){var t=e.title,r=e.text,n=e.onClose,o=e.onSubmit,i=e.isOpen,c=e.confirmButtonLabel,l=e.isDefault,m=e.isChanged,d=(0,s.useState)(!1),f=(0,a.Z)(d,2),p=f[0],g=f[1];return l&&!m&&p?u().createElement(st,{isOpen:p&&i,onClose:function(){n(),g(!1)},onSubmit:function(){o()}}):u().createElement(Je.Z,{text:r,title:t,isOpen:i,confirmButtonLabel:c,onClose:function(){n()},onSubmit:function(){g(!0),(!l||m)&&o()}})};lt.propTypes={text:R().node,title:R().node,confirmButtonLabel:R().string,onSubmit:R().func,onClose:R().func,isOpen:R().bool,isDefault:R().bool,isChanged:R().bool},lt.defaultProps={isDefault:!1,isChanged:!1};const mt=lt;function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t?t.reduce((function(t,r){var a=r.uuid,i=r.display_name,l=r.name,m=r.description,d=r.modified;return[].concat((0,o.Z)(t),[{uuid:a,title:i||l,cells:[u().createElement(s.Fragment,{key:"".concat(a,"-name")},u().createElement(c.Link,{to:"/groups/detail/".concat(e,"/roles/detail/").concat(a)},i||l)),m,u().createElement(s.Fragment,{key:"".concat(a,"-modified")},u().createElement(Ie.Z,{date:d,type:(0,J.mh)(d)}))],selected:Boolean(n&&n.find((function(e){return e.uuid===a})))}])}),[]):[]},gt=function(e){return e.toLowerCase().includes("default access")?"dag-add-role-button":"add-role-button"},ht=function(e,t,r){var n=(0,E.Z)(),a=u().createElement(m.Button,{ouiaId:t,variant:"primary",className:"rbac-m-hide-on-sm","aria-label":"Add role",isAriaDisabled:e},n.formatMessage(j.Z.addRole));return e?u().createElement(m.Tooltip,{content:r||n.formatMessage(j.Z.allRolesAdded)},a):a},bt=function(e){var t=e.roles,r=e.removeRoles,i=e.addRoles,l=e.fetchRolesForGroup,m=e.isLoading,d=e.pagination,f=e.match.params.uuid,p=e.name,g=e.isAdminDefault,h=e.isPlatformDefault,b=e.systemGroupUuid,v=e.isChanged,y=e.onDefaultGroupChanged,Z=e.fetchAddRolesForGroup,M=e.disableAddRoles,R=e.addNotification,O=e.reloadGroup,k=e.fetchSystemGroup,w=(0,E.Z)(),S=(0,s.useState)(""),G=(0,a.Z)(S,2),C=G[0],x=G[1],T=(0,s.useState)(""),D=(0,a.Z)(T,2),P=D[0],L=D[1],N=(0,s.useState)([]),q=(0,a.Z)(N,2),_=q[0],I=q[1],F=(0,s.useState)([]),A=(0,a.Z)(F,2),B=A[0],U=A[1],V=(0,s.useState)(!1),z=(0,a.Z)(V,2),W=z[0],H=z[1],K=(0,s.useState)((function(){return null})),Q=(0,a.Z)(K,2),X=Q[0],Y=Q[1],J=(0,s.useState)({}),$=(0,a.Z)(J,2),te=$[0],re=$[1],ne=(0,s.useContext)(et.Z),ae=ne.userAccessAdministrator,oe=ne.orgAdmin,ie=(0,s.useRef)(oe||ae),se=[{title:w.formatMessage(j.Z.name),orderBy:"name"},{title:w.formatMessage(j.Z.description)},{title:w.formatMessage(j.Z.lastModified)}];(0,s.useEffect)((function(){k(),"default-access"!==f?l(d)(f):b&&l(d)(b)}),[b]),(0,s.useEffect)((function(){k(),"default-access"!==f?Z(f):b&&Z(b)}),[t,b]),(0,s.useEffect)((function(){ie.current=oe||ae}),[oe,ae]);var ue=function(e,t,r){return u().createElement("p",null,u().createElement(Ne.Z,(0,n.Z)({},r?j.Z.removeRolesModalText:j.Z.removeRoleModalText,{values:ft({b:function(e){return u().createElement("b",null,e)},name:e},r?{roles:t}:{role:t})})))},ce="default-access"!==f?f:b,le=(0,c.useHistory)();return u().createElement(u().Fragment,null,u().createElement(mt,{text:te.text,title:te.title,isOpen:W,isChanged:v,isDefault:h||g,confirmButtonLabel:te.confirmButtonLabel,onClose:function(){return H(!1)},onSubmit:function(){H(!1),X(),I([]),y(h&&!v)}}),u().createElement(Ye.Z,{type:"content",id:"tab-roles"},u().createElement(ee.M,{columns:se,isSelectable:ie.current&&!g,createRows:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pt.apply(void 0,[f].concat(t))},data:t,filterValue:P,fetchData:function(e){l(e)(ce)},emptyFilters:{name:"",description:""},setFilterValue:function(e){var t=e.name,r=e.description;void 0!==t&&L(t),void 0!==r&&x(r)},isLoading:m,pagination:d,checkedRows:_,setCheckedItems:function(e){I((function(t){return e(t).map((function(e){var t=e.uuid,r=e.name;return{uuid:t,label:e.label||r}}))}))},titlePlural:w.formatMessage(j.Z.roles).toLowerCase(),titleSingular:w.formatMessage(j.Z.role),toolbarButtons:function(){return(0,o.Z)(ie.current&&!g?[u().createElement(c.Link,{className:"rbac-m-hide-on-sm rbac-c-button__add-role".concat(M&&"-disabled"),to:"/groups/detail/".concat(f,"/roles/add_roles"),key:"add-to-group"},ht(M,gt(p||""),g&&w.formatMessage(j.Z.defaultGroupNotManually))),{label:w.formatMessage(j.Z.addRole),props:{isDisabled:M,className:"rbac-m-hide-on-md"},onClick:function(){le.push("/groups/detail/".concat(f,"/roles/add_roles"))}},{label:w.formatMessage(j.Z.remove),props:{isDisabled:!_||!_.length>0,variant:"danger"},onClick:function(){var e=_.length>1;Y((function(){return function(){return r(ce,_.map((function(e){return e.uuid})),(function(){k().then((function(e){var t=e.value.data;l(ft(ft({},d),{},{offset:0}))(t[0].uuid)}))}))}})),re({title:w.formatMessage(e?j.Z.removeRolesQuestion:j.Z.removeRoleQuestion),confirmButtonLabel:w.formatMessage(e?j.Z.removeRoles:j.Z.removeRole),text:ue(p,e?_.length:t.find((function(e){return e.uuid===_[0].uuid})).name,e)}),H(!0)}}]:[])},actionResolver:function(){return(0,o.Z)(ie.current&&!g?[{title:w.formatMessage(j.Z.remove),onClick:function(e,t,n){Y((function(){return function(){return r(ce,[n.uuid],(function(){k().then((function(e){var t=e.value.data;l(ft(ft({},d),{},{offset:0}))(t[0].uuid)}))}))}})),re({title:w.formatMessage(j.Z.removeRoleQuestion),confirmButtonLabel:w.formatMessage(j.Z.removeRole),text:ue(p,n.title,!1)}),H(!0)}}]:[])},routes:function(){return u().createElement(s.Fragment,null,u().createElement(c.Route,{path:he.Z["group-add-roles"].path,render:function(e){return u().createElement(ct,(0,n.Z)({fetchUuid:ce,fetchGroup:function(e){return O(null!=e?e:ce)},fetchRolesForGroup:function(e){return l(ft(ft({},d),{},{offset:0}))(null!=e?e:ce)},fetchSystemGroup:k,selectedRoles:B,setSelectedRoles:U,closeUrl:"/groups/detail/".concat(h?"default-access":f,"/roles"),addRolesToGroup:i,name:p,isDefault:h||g,isChanged:v,addNotification:R,onDefaultGroupChanged:y},e))}}))},ouiaId:"roles-table",emptyProps:{title:w.formatMessage(j.Z.noGroupRoles),description:[w.formatMessage(g?j.Z.contactServiceTeamForRoles:j.Z.addRoleToConfigureAccess),""]},filters:[{key:"name",value:P},{key:"description",value:C}],tableId:"group-roles"})))},vt=function(e,t){return e.payload.then(t),e};bt.propTypes={history:R().shape({goBack:R().func.isRequired,push:R().func.isRequired}),roles:R().array,isLoading:R().bool,searchFilter:R().string,fetchRolesForGroup:R().func.isRequired,fetchAddRolesForGroup:R().func.isRequired,selectedRoles:R().array,addRoles:R().func,name:R().string,removeRoles:R().func,pagination:R().shape({limit:R().number.isRequired,offset:R().number.isRequired,count:R().number}),match:R().shape({params:R().object.isRequired}).isRequired,isAdminDefault:R().bool,isPlatformDefault:R().bool,isChanged:R().bool,onDefaultGroupChanged:R().func,disableAddRoles:R().bool.isRequired,addNotification:R().func,reloadGroup:R().func,systemGroupUuid:R().string,fetchSystemGroup:R().func},bt.defaultProps={roles:[],pagination:$.eX,selectedRoles:[]};const yt=(0,f.connect)((function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.systemGroup,a=r.roles;return{roles:a,pagination:r.pagination||ft(ft({},$.he),{},{count:a&&a.length}),isLoading:!r.loaded,name:r.name,isPlatformDefault:r.platform_default,isAdminDefault:r.admin_default,isChanged:!r.system,disableAddRoles:!(r.addRoles.pagination&&r.addRoles.pagination.count>0&&!r.admin_default),systemGroupUuid:null==n?void 0:n.uuid}}),(function(e){return{addRoles:function(t,r,n){return e(vt((0,U.Wj)(t,r),n))},removeRoles:function(t,r,n){return e(vt((0,U.W3)(t,r),n))},fetchRolesForGroup:function(t){return function(r,n){return e((0,U.nV)(r,t,n))}},fetchAddRolesForGroup:function(t){return e((0,U.nr)(t,{},{}))},addNotification:function(){return e(p.addNotification.apply(void 0,arguments))},reloadGroup:function(t){return e((0,U.yi)(t))},fetchSystemGroup:function(){return e((0,U.WD)())}}}))(bt);var Zt=r(67643),Et=r(76137);function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ot=function(e){var t=e.match.params.uuid,r=e.group,o=e.fetchGroup,i=e.fetchSystemGroup,l=e.removeGroups,d=e.isFetching,p=e.onDelete,g=(0,E.Z)(),h=(0,f.useDispatch)(),b=(0,c.useHistory)(),y=(0,c.useLocation)(),Z="default-access"===t,M=[{eventKey:0,title:g.formatMessage(j.Z.roles),name:"/groups/detail/".concat(t,"/roles")},{eventKey:1,title:g.formatMessage(j.Z.members),name:"/groups/detail/".concat(t,"/members")}],R=(0,f.useSelector)((function(e){var t=e.groupReducer,r=t.groups,n=t.error,a=t.systemGroup;return{pagination:r.pagination||r.meta,filters:r.filters,groupExists:n!==J.VG,systemGroupUuid:null==a?void 0:a.uuid}}),f.shallowEqual),O=R.pagination,k=R.filters,w=R.groupExists,S=R.systemGroupUuid,G=(0,s.useState)(!1),C=(0,a.Z)(G,2),x=C[0],T=C[1],D=(0,s.useState)(!1),P=(0,a.Z)(D,2),L=P[0],N=P[1],q=(0,s.useState)(!1),_=(0,a.Z)(q,2),I=_[0],F=_[1];(0,s.useEffect)((function(){i();var e=Z?S:t;return o(e),insights.chrome.appObjectId(e),function(){return insights.chrome.appObjectId(void 0)}}),[t,S]);var A,B=function(){return[{title:g.formatMessage(j.Z.groups),to:(0,J.zk)(he.Z.groups.path,O,k)},w?{title:d?void 0:r.name,isActive:!0}:{title:g.formatMessage(j.Z.invalidGroup),isActive:!0}]},V=[u().createElement(m.DropdownItem,{component:u().createElement(c.Link,{onClick:function(){return N(!1)},to:(y.pathname.includes("members")?he.Z["group-detail-members-edit"]:he.Z["group-detail-roles-edit"]).path.replace(":uuid",Z?"default-access":t)},g.formatMessage(j.Z.edit)),key:"edit-group"}),u().createElement(m.DropdownItem,{component:u().createElement(c.Link,{onClick:function(){return p(t)},to:function(){return(y.pathname.includes("members")?he.Z["group-detail-members-remove"]:he.Z["group-detail-roles-remove"]).path.replace(":uuid",t)}},g.formatMessage(j.Z.delete)),className:"rbac-c-group__action",key:"delete-group"})],z=Z?S:t;return u().createElement(s.Fragment,null,x&&u().createElement(v.R,{type:"group",isOpen:x,customTitle:u().createElement("div",null,g.formatMessage(j.Z.restoreDefaultAccessQuestion)),customDescription:u().createElement(Ne.Z,(0,n.Z)({},j.Z.restoreDefaultAccessDescription,{values:{b:function(e){return u().createElement("b",null,e)}}})),customPrimaryButtonTitle:g.formatMessage(j.Z.continue),customSecondaryButtonTitle:g.formatMessage(j.Z.cancel),onModalCancel:function(){return T(!1)},onConfirmCancel:function(){l([S]).then((function(){return i().then((function(){F(!1)}))})),T(!1),b.push("/groups/detail/default-access/roles")}}),w?u().createElement(s.Fragment,null,u().createElement(He.Q,{breadcrumbs:B()},u().createElement(m.Split,{hasGutter:!0},u().createElement(m.SplitItem,{isFilled:!0},u().createElement(He.y,{title:!d&&r?u().createElement(s.Fragment,null,r.platform_default&&!r.system?(A=r.name,u().createElement("div",{style:{display:"inline-flex"}},A,u().createElement("div",{className:"pf-u-ml-sm"},u().createElement(m.Popover,{"aria-label":"default-group-icon",bodyContent:u().createElement(Ne.Z,(0,n.Z)({},j.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return u().createElement("b",null,e)}}}))},u().createElement(Fe.ZP,{className:"rbac-default-group-info-icon"}))))):r.name):void 0,description:!d&&r?r.description:void 0})),r.platform_default&&!r.system?u().createElement(m.SplitItem,null,u().createElement("div",{className:"rbac-default-group-reset-btn"},u().createElement(m.Button,{variant:"link",onClick:function(){return T(!0)}},g.formatMessage(j.Z.restoreToDefault)),u().createElement(m.Popover,{"aria-label":"default-group-icon",position:m.PopoverPosition.bottomEnd,bodyContent:u().createElement(Ne.Z,(0,n.Z)({},j.Z.restoreDefaultAccessInfo,{values:{b:function(e){return u().createElement("b",null,e)}}}))},u().createElement(Fe.ZP,{className:"rbac-default-group-info-icon pf-u-mt-sm"})))):null,u().createElement(m.SplitItem,null,r.platform_default||r.admin_default?null:u().createElement(m.Dropdown,{ouiaId:"group-title-actions-dropdown",toggle:u().createElement(m.KebabToggle,{onToggle:function(e){return N(e)},id:"group-actions-dropdown"}),isOpen:L,isPlain:!0,position:"right",dropdownItems:V}))),I?u().createElement(m.Alert,{variant:"info",isInline:!0,title:g.formatMessage(j.Z.defaultAccessGroupChanged),action:u().createElement(m.AlertActionCloseButton,{onClose:function(){return F(!1)}}),className:"pf-u-mb-lg pf-u-mt-sm"},u().createElement(Ne.Z,(0,n.Z)({},j.Z.defaultAccessGroupNameChanged,{values:{b:function(e){return u().createElement("b",null,e)}}}))):null),u().createElement(We,{isHeader:!0,tabItems:M}),u().createElement(c.Route,{path:[he.Z["group-detail-roles-remove"].path,he.Z["group-detail-members-remove"].path],render:function(e){return u().createElement(_e,(0,n.Z)({},e,{postMethod:function(){h((0,U.bt)(Rt(Rt({},O),{},{offset:0,filters:k,inModal:!1})))},cancelRoute:"group/detail/".concat(t),submitRoute:(0,J.zk)(he.Z.groups.path,Rt(Rt({},O),{},{offset:0}),k),isModalOpen:!0,groupsUuid:[r]}))}}),u().createElement(c.Route,{path:[he.Z["group-detail-roles-edit"].path,he.Z["group-detail-members-edit"].path],render:function(e){return u().createElement(De,(0,n.Z)({},e,{group:r,cancelRoute:"group/detail/".concat(t),postMethod:function(){return o(z)}}))}}),u().createElement(c.Route,{path:he.Z["group-detail-roles"].path,render:function(e){return u().createElement(yt,(0,n.Z)({},e,{onDefaultGroupChanged:F}))}}),u().createElement(c.Route,{path:he.Z["group-detail-members"].path,component:ot}),u().createElement(c.Route,{render:function(){return u().createElement(c.Redirect,{to:"/groups/detail/".concat(t,"/roles")})}}),!r&&u().createElement(Le.Wi,null)):u().createElement(s.Fragment,null,u().createElement("section",{className:"pf-c-page__main-breadcrumb pf-u-pb-md"},u().createElement(Et.Z,B())),u().createElement(Zt.Z,{title:g.formatMessage(j.Z.groupNotFound),description:[g.formatMessage(j.Z.groupDoesNotExist,{id:t})],actions:[u().createElement(m.Button,{key:"back-button",className:"pf-u-mt-xl",ouiaId:"back-button",variant:"primary","aria-label":"Back to previous page",onClick:function(){return b.goBack()}},g.formatMessage(j.Z.backToPreviousPage))]})))};Ot.propTypes={location:R().shape({pathname:R().string.isRequired}),history:R().shape({push:R().func.isRequired}),match:R().object,group:R().shape({uuid:R().string,name:R().string,description:R().string,admin_default:R().bool,platform_default:R().bool,system:R().bool}),isFetching:R().bool,fetchGroup:R().func,fetchSystemGroup:R().func,removeGroups:R().func,onDelete:R().func,defaultUuid:R().string},Ot.defaultProps={isFetching:!1};const kt=(0,f.connect)((function(e){var t=e.groupReducer,r=t.selectedGroup,n=t.isRecordLoading,a=t.isRecordRolesLoading;return{group:r,isFetching:n||a}}),(function(e){return(0,Se.DE)({fetchGroup:U.yi,fetchSystemGroup:U.WD,removeGroups:U.gg},e)}))(Ot);var wt=r(15608),St=["className","row"],Gt=function(e){var t=e.className,r=e.row,a=(0,d.Z)(e,St);return u().createElement(l.RowWrapper,(0,n.Z)({className:Be()(t,{"rbac-c-group-default":r.isPlatformDefault||r.isAdminDefault}),row:r},a))};Gt.propTypes={row:R().shape({isAdminDefault:R().bool,isPlatformDefault:R().bool}),className:R().string};const Ct=Gt;var xt=r(93327),Tt=r(92758);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Pt=function(){var e=(0,E.Z)(),t=(0,f.useDispatch)(),r=(0,c.useHistory)(),i=function(e){return t((0,U.bt)(Dt(Dt({},e),{},{inModal:!1})))},d=(0,s.useContext)(et.Z),p=d.orgAdmin,g=d.userAccessAdministrator,h=p||g,b=[{title:e.formatMessage(j.Z.name),key:"name",transforms:[l.sortable]},{title:e.formatMessage(j.Z.roles)},{title:e.formatMessage(j.Z.members)},{title:e.formatMessage(j.Z.lastModified),key:"modified",transforms:[l.sortable]}],v=(0,f.useSelector)((function(e){var t,r,n,a=e.groupReducer,i=a.groups,s=a.isLoading,u=a.adminGroup,c=a.systemGroup;return{groups:[].concat((0,o.Z)(null!=u&&null!==(t=u.name)&&void 0!==t&&t.match(new RegExp(i.filters.name,"i"))?[u]:[]),(0,o.Z)(null!=c&&null!==(r=c.name)&&void 0!==r&&r.match(new RegExp(i.filters.name,"i"))?[c]:[]),(0,o.Z)((null==i||null===(n=i.data)||void 0===n?void 0:n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.platform_default,r=e.admin_default;return!(t||r)})))||[])),meta:(null==i?void 0:i.pagination)||(null==i?void 0:i.meta),filters:null==i?void 0:i.filters,isLoading:s,systemGroup:c}}),f.shallowEqual),y=v.groups,Z=v.meta,M=v.filters,R=v.isLoading,O=v.systemGroup,k=(0,s.useState)(Z),w=(0,a.Z)(k,2),S=w[0],G=w[1],C=(0,s.useState)(M.name||""),x=(0,a.Z)(C,2),T=x[0],D=x[1],P=(0,s.useState)([]),L=(0,a.Z)(P,2),N=L[0],q=L[1],_=(0,s.useState)([]),I=(0,a.Z)(_,2),F=I[0],A=I[1];(0,s.useEffect)((function(){var e=(0,$.rj)(r,S);G(e);var n=(0,Tt.aX)(r,["name"],{name:T}).name;D(n),insights.chrome.appNavClick({id:"groups",secondaryNav:!0}),i(Dt(Dt({},e),{},{filters:{name:n}})),t((0,U.fB)(n)),t((0,U.WD)(n))}),[]),(0,s.useEffect)((function(){(0,$.Zc)(r)||(0,$.oG)(r,S.limit,S.offset),(null==T?void 0:T.length)>0&&!(0,Tt.qF)(r,["name"])&&(0,Tt.aX)(r,["name"],{name:T})}));var B=function(e){q((function(t){return e(t).filter((function(e){var t=e.platform_default,r=e.admin_default;return!(t||r)})).map((function(e){return{uuid:e.uuid,label:e.name}}))}))};(0,s.useEffect)((function(){S.redirected&&(0,$.oG)(r,S.limit,S.offset)}),[S.redirected]),(0,s.useEffect)((function(){D(M.name),G(Z)}),[M,Z]);var V=function(){return u().createElement(s.Fragment,null,u().createElement(c.Route,{exact:!0,path:he.Z["add-group"].path},u().createElement(we,{pagination:S,filters:M,postMethod:function(e){i(e),D("")}})),u().createElement(c.Route,{exact:!0,path:he.Z["group-edit"].path},u().createElement(De,{pagination:S,filters:M,postMethod:function(e){i(e)},cancelRoute:(0,J.zk)(he.Z.groups.path,S,M),submitRoute:(0,J.zk)(he.Z.groups.path,Dt(Dt({},S),{},{offset:0}),M)})),u().createElement(c.Route,{exact:!0,path:he.Z["remove-group"].path},u().createElement(_e,{pagination:S,filters:M,postMethod:function(e,t){i(t),q(N.filter((function(t){return!e.includes(t.uuid)})))},cancelRoute:(0,J.zk)(he.Z.groups.path,S,M),submitRoute:(0,J.zk)(he.Z.groups.path,Dt(Dt({},S),{},{offset:0}),M),isModalOpen:!0,groupsUuid:F})))},z=function(t){var n=t.isPlatformDefault,a=t.isAdminDefault;return n||a||!h?null:[{title:e.formatMessage(j.Z.edit),onClick:function(e,t,n){r.push("/groups/edit/".concat(n.uuid))}},{title:e.formatMessage(j.Z.delete),onClick:function(e,t,n){A([n]),r.push(he.Z["remove-group"].path)}}]},W=function(){return(0,o.Z)(h?[u().createElement(c.Link,{to:he.Z["add-group"].path,key:"add-group",className:"rbac-m-hide-on-sm"},u().createElement(m.Button,{ouiaId:"create-group-button",variant:"primary","aria-label":"Create group"},e.formatMessage(j.Z.createGroup))),{label:e.formatMessage(j.Z.createGroup),props:{className:"rbac-m-hide-on-md"},onClick:function(){r.push(he.Z["add-group"].path)}},{label:e.formatMessage(j.Z.edit),props:{isDisabled:!(1===N.length)},onClick:function(){return r.push("/groups/edit/".concat(N[0].uuid))}},{label:e.formatMessage(j.Z.delete),props:{isDisabled:!N.length>0},onClick:function(){A(N),r.push(he.Z["remove-group"].path)}}]:[])};return u().createElement(c.Switch,null,u().createElement(xt.Z,{pageAction:"role-detail",path:he.Z["group-detail-role-detail"].path,render:function(e){return u().createElement(wt.Z,e)}}),u().createElement(xt.Z,{pageAction:"group-detail",path:he.Z["group-detail"].path,render:function(e){return u().createElement(kt,(0,n.Z)({},e,{defaultUuid:null==O?void 0:O.uuid,onDelete:function(e){D(""),q(N.filter((function(t){return t.uuid!=e})))}}))}}),u().createElement(xt.Z,{pageAction:"group-list",path:he.Z.groups.path,render:function(){return u().createElement(m.Stack,{className:"rbac-c-groups"},u().createElement(m.StackItem,null,u().createElement(He.Q,{paddingBottom:!0},u().createElement(He.y,{title:e.formatMessage(j.Z.groups)}))),u().createElement(m.StackItem,null,u().createElement(Ye.Z,{type:"content",id:"tab-groups"},u().createElement(ee.M,{data:y.map((function(e){return e.platform_default||e.admin_default?Dt(Dt({},e),{},{principalCount:"All".concat(e.admin_default?" org admins":"")}):e})),createRows:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ve.apply(void 0,[h].concat(t))},columns:b,isSelectable:h,checkedRows:N,setCheckedItems:B,routes:V,actionResolver:z,titlePlural:e.formatMessage(j.Z.groups).toLowerCase(),titleSingular:e.formatMessage(j.Z.group).toLowerCase(),ouiaId:"groups-table",pagination:S,filterValue:T,fetchData:function(e){var t=e.name,n=e.count,a=e.limit,o=e.offset,s=e.orderBy;return(0,$.oG)(r,a,o),(0,Tt.MS)(r,{name:t}),i({count:n,limit:a,offset:o,orderBy:s,filters:{name:t}})},setFilterValue:function(e){var t=e.name;return D(void 0===t?"":t)},toolbarButtons:W,isLoading:!R&&0===(null==y?void 0:y.length)&&0===(null==T?void 0:T.length)||R,filterPlaceholder:e.formatMessage(j.Z.name).toLowerCase(),rowWrapper:Ct,tableId:"groups"}))))}}))}}}]);
//# sourceMappingURL=../sourcemaps/4551.b0f17ba5eb52a1ba4bfc4a657110c7ca.js.map