{"version":3,"file":"js/345.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./node_modules/@patternfly/react-component-groups/dist/esm/WarningModal/WarningModal.js","webpack:///./node_modules/@patternfly/react-core/dist/esm/components/Text/TextContent.js","webpack:///./src/smart-components/role/add-role-permissions/add-role-permission-success.js","webpack:///./src/smart-components/role/add-role-permissions/review-template.js","webpack:///./src/smart-components/role/add-role-permissions/add-role-permission-wizard.js","webpack:///./src/smart-components/role/add-role-permissions/add-role-permissions-summary-content.js","webpack:///./src/smart-components/role/add-role-permissions/schema.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState } from 'react';\nimport { Button, Modal, ModalVariant, ButtonVariant, Checkbox } from '@patternfly/react-core';\nconst WarningModal = (_a) => {\n    var { isOpen, onConfirm, onClose, children, confirmButtonLabel = 'Confirm', cancelButtonLabel = 'Cancel', variant = ModalVariant.small, titleIconVariant = 'warning', withCheckbox = false, checkboxLabel = 'I understand that this action cannot be undone', confirmButtonVariant = ButtonVariant.primary, ouiaId = 'WarningModal' } = _a, props = __rest(_a, [\"isOpen\", \"onConfirm\", \"onClose\", \"children\", \"confirmButtonLabel\", \"cancelButtonLabel\", \"variant\", \"titleIconVariant\", \"withCheckbox\", \"checkboxLabel\", \"confirmButtonVariant\", \"ouiaId\"]);\n    const [checked, setChecked] = useState(false);\n    return (React.createElement(Modal, Object.assign({ variant: variant, isOpen: isOpen, onClose: onClose, onEscapePress: onClose, titleIconVariant: titleIconVariant, actions: [\n            React.createElement(Button, { ouiaId: `${ouiaId}-confirm-button`, key: \"confirm\", variant: confirmButtonVariant, onClick: () => {\n                    onConfirm === null || onConfirm === void 0 ? void 0 : onConfirm();\n                    setChecked(false);\n                }, isDisabled: withCheckbox && !checked }, confirmButtonLabel),\n            React.createElement(Button, { ouiaId: `${ouiaId}-cancel-button`, key: \"cancel\", variant: ButtonVariant.link, onClick: onClose }, cancelButtonLabel),\n        ], ouiaId: ouiaId }, props),\n        children,\n        withCheckbox ? (React.createElement(Checkbox, { isChecked: checked, onChange: (_event, value) => setChecked(value), label: checkboxLabel, id: \"warning-modal-check\", className: \"pf-v5-u-mt-lg\", ouiaId: `${ouiaId}-confirm-checkbox` })) : null));\n};\nexport default WarningModal;\n","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Content/content.mjs';\nimport { css } from '@patternfly/react-styles';\nexport const TextContent = (_a) => {\n    var { children, className = '', isVisited = false } = _a, props = __rest(_a, [\"children\", \"className\", \"isVisited\"]);\n    return (React.createElement(\"div\", Object.assign({}, props, { className: css(styles.content, isVisited && styles.modifiers.visited, className) }), children));\n};\nTextContent.displayName = 'TextContent';\n//# sourceMappingURL=TextContent.js.map","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, EmptyState, EmptyStateIcon, EmptyStateBody, EmptyStateHeader, EmptyStateFooter } from '@patternfly/react-core';\nimport { CheckCircleIcon } from '@patternfly/react-icons';\nimport { useDispatch } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport AppLink from '../../../presentational-components/shared/AppLink';\nimport { fetchRole } from '../../../redux/actions/role-actions.js';\nimport messages from '../../../Messages';\nimport pathnames from '../../../utilities/pathnames.js';\n\nconst AddRolePermissionSuccess = ({ currentRoleID }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  return (\n    <>\n      <EmptyState>\n        <EmptyStateHeader\n          titleText={<>{intl.formatMessage(messages.permissionsAddedSuccessfully)}</>}\n          icon={<EmptyStateIcon color=\"green\" icon={CheckCircleIcon} />}\n          headingLevel=\"h4\"\n        />\n        <EmptyStateBody />\n        <EmptyStateFooter>\n          <AppLink to={pathnames['role-detail'].link.replace(':roleId', currentRoleID)}>\n            <Button onClick={() => dispatch(fetchRole(currentRoleID))}>{intl.formatMessage(messages.exit)}</Button>\n          </AppLink>\n        </EmptyStateFooter>\n      </EmptyState>\n    </>\n  );\n};\n\nexport default AddRolePermissionSuccess;\n\nAddRolePermissionSuccess.propTypes = {\n  currentRoleID: PropTypes.string.isRequired,\n};\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport { AddRolePermissionWizardContext } from './add-role-permission-wizard';\nimport '../add-role/review.scss';\n\nconst ReviewTemplate = ({ formFields }) => {\n  const { submitting } = useContext(AddRolePermissionWizardContext);\n\n  if (submitting) {\n    return (\n      <Bullseye>\n        <Spinner size=\"xl\" />\n      </Bullseye>\n    );\n  }\n\n  return <div className=\"rbac\">{[[{ ...formFields?.[0]?.[0] }]]}</div>;\n};\n\nReviewTemplate.propTypes = {\n  formFields: PropTypes.array,\n};\n\nexport default ReviewTemplate;\n","import React, { useState, useEffect, useRef, createContext, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { Wizard } from '@patternfly/react-core/deprecated';\nimport FormRenderer from '@data-driven-forms/react-form-renderer/form-renderer';\nimport Pf4FormTemplate from '@data-driven-forms/pf4-component-mapper/form-template';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/component-mapper';\nimport WarningModal from '@patternfly/react-component-groups/dist/dynamic/WarningModal';\nimport { useFlag } from '@unleash/proxy-client-react';\nimport { updateRole } from '../../../redux/actions/role-actions.js';\nimport AddPermissionsTable from '../add-role/add-permissions';\nimport AddRolePermissionSummaryContent from './add-role-permissions-summary-content';\nimport AddRolePermissionSuccess from './add-role-permission-success';\nimport CostResources from '../add-role/cost-resources';\nimport InventoryGroupsRole from '../add-role/inventory-groups-role';\nimport { schemaBuilder } from './schema';\nimport useAppNavigate from '../../../hooks/useAppNavigate';\nimport messages from '../../../Messages';\nimport pathnames from '../../../utilities/pathnames';\n\nconst FormTemplate = (props) => <Pf4FormTemplate {...props} showFormControls={false} />;\n\nexport const mapperExtension = {\n  'add-permissions-table': AddPermissionsTable,\n  'inventory-groups-role': InventoryGroupsRole,\n  'cost-resources': CostResources,\n  review: AddRolePermissionSummaryContent,\n};\n\nexport const AddRolePermissionWizardContext = createContext({\n  success: false,\n  submitting: false,\n  error: undefined,\n});\n\nconst AddRolePermissionWizard = ({ role }) => {\n  const intl = useIntl();\n  const [cancelWarningVisible, setCancelWarningVisible] = useState(false);\n  const [currentRoleID, setCurrentRoleID] = useState('');\n  const navigate = useAppNavigate();\n  const dispatch = useDispatch();\n  const enableWorkspacesNameChange = useFlag('platform.rbac.groups-to-workspaces-rename');\n  const [wizardContextValue, setWizardContextValue] = useState({\n    success: false,\n    submitting: false,\n    error: undefined,\n    hideForm: false,\n  });\n  const container = useRef(document.createElement('div'));\n  const setWizardError = (error) => setWizardContextValue((prev) => ({ ...prev, error }));\n  const setWizardSuccess = (success) => setWizardContextValue((prev) => ({ ...prev, success }));\n  const setHideForm = (hideForm) => setWizardContextValue((prev) => ({ ...prev, hideForm }));\n  const schema = useMemo(() => schemaBuilder(container.current, enableWorkspacesNameChange), []);\n\n  useEffect(() => {\n    setCurrentRoleID(role.uuid);\n  });\n\n  useEffect(() => {\n    container.current.hidden = cancelWarningVisible;\n  }, [cancelWarningVisible]);\n\n  const handleWizardCancel = () => {\n    setCancelWarningVisible(true);\n  };\n\n  const handleConfirmCancel = () => {\n    navigate(pathnames['role-detail'].link.replace(':roleId', role.uuid));\n  };\n\n  const onSubmit = async (formData) => {\n    const {\n      'add-permissions-table': selectedPermissions,\n      'cost-resources': costResources = [],\n      'inventory-groups-role': invResources = [],\n    } = formData;\n\n    const selectedPermissionIds = [...role.access.map((record) => record.permission), ...selectedPermissions.map((record) => record.uuid)];\n    const roleData = {\n      ...role,\n      access: [\n        ...selectedPermissions.reduce(\n          (acc, { uuid: permission, requires }) => [\n            ...acc,\n            ...[permission, ...requires.filter((require) => !selectedPermissionIds.includes(require))].map((permission) => ({\n              permission,\n              resourceDefinitions: [...costResources, ...invResources]?.find((r) => r.permission === permission)\n                ? permission.includes('inventory')\n                  ? [\n                      {\n                        attributeFilter: {\n                          key: 'group.id',\n                          operation: 'in',\n                          value: invResources?.find((g) => g.permission === permission)?.groups?.map((group) => group?.id),\n                        },\n                      },\n                    ]\n                  : permission.includes('cost-management')\n                  ? [\n                      {\n                        attributeFilter: {\n                          key: `cost-management.${permission.split(':')[1]}`,\n                          operation: 'in',\n                          value: costResources?.find((r) => r.permission === permission).resources,\n                        },\n                      },\n                    ]\n                  : []\n                : [],\n            })),\n          ],\n          role.access\n        ),\n      ],\n      accessCount: role.accessCount + selectedPermissions.length,\n    };\n\n    setWizardContextValue((prev) => ({ ...prev, submitting: true }));\n    dispatch(updateRole(currentRoleID, roleData))\n      .then(() => setWizardContextValue((prev) => ({ ...prev, submitting: false, success: true, hideForm: true })))\n      .catch(() => {\n        setWizardContextValue((prev) => ({ ...prev, submitting: false, success: false, hideForm: true }));\n        navigate(pathnames['role-detail'].link.replace(':roleId', role.uuid));\n      });\n  };\n\n  return (\n    <AddRolePermissionWizardContext.Provider\n      value={{ ...wizardContextValue, setWizardError, setWizardSuccess, setHideForm, rolePermissions: role.access }}\n    >\n      <WarningModal\n        title={intl.formatMessage(messages.exitItemAdding, { item: intl.formatMessage(messages.permissions).toLocaleLowerCase() })}\n        isOpen={cancelWarningVisible}\n        onClose={() => setCancelWarningVisible(false)}\n        confirmButtonLabel={intl.formatMessage(messages.discard)}\n        onConfirm={handleConfirmCancel}\n      >\n        {intl.formatMessage(messages.discardedInputsWarning)}\n      </WarningModal>\n      {wizardContextValue.hideForm ? (\n        wizardContextValue.success ? (\n          <Wizard\n            title={intl.formatMessage(messages.addPermissions)}\n            isOpen\n            steps={[\n              {\n                name: 'success',\n                component: <AddRolePermissionSuccess currentRoleID={currentRoleID} />,\n                isFinishedStep: true,\n              },\n            ]}\n            onClose={handleConfirmCancel}\n          />\n        ) : null\n      ) : (\n        <FormRenderer\n          container={container}\n          schema={schema}\n          subscription={{ values: true }}\n          FormTemplate={FormTemplate}\n          initialValues={{\n            'role-uuid': role.uuid,\n            'role-type': 'create',\n            'role-name': role.display_name,\n            'role-description': role.description,\n          }}\n          componentMapper={{ ...componentMapper, ...mapperExtension }}\n          onSubmit={onSubmit}\n          onCancel={(values) => {\n            if (values && values['add-permissions-table']?.length > 0) {\n              handleWizardCancel();\n            } else {\n              handleConfirmCancel();\n            }\n          }}\n        />\n      )}\n    </AddRolePermissionWizardContext.Provider>\n  );\n};\n\nAddRolePermissionWizard.defaultProps = {\n  role: {},\n};\n\nAddRolePermissionWizard.propTypes = {\n  role: PropTypes.object,\n};\n\nexport default AddRolePermissionWizard;\n","import React from 'react';\nimport { Grid, GridItem, Stack, StackItem, Text, TextContent, TextVariants, Title } from '@patternfly/react-core';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport { useIntl } from 'react-intl';\nimport messages from '../../../Messages';\n\nconst AddRolePermissionSummaryContent = () => {\n  const intl = useIntl();\n  const formOptions = useFormApi();\n  const {\n    'role-name': name,\n    'role-description': description,\n    'add-permissions-table': selectedPermissions,\n    'resource-definitions': resourceDefinitions,\n    'has-cost-resources': hasCostResources,\n  } = formOptions.getState().values;\n\n  return (\n    <Stack hasGutter>\n      <StackItem>\n        <TextContent>\n          <Title headingLevel=\"h1\" size=\"xl\" className=\"pf-v5-u-mb-sm\">\n            {intl.formatMessage(messages.reviewDetails)}\n          </Title>\n        </TextContent>\n      </StackItem>\n      <StackItem className=\"rbac-l-stack__item-summary\">\n        <Grid hasGutter>\n          <GridItem span={3}>\n            <Text className=\"pf-v5-c-title\" component={TextVariants.h6}>\n              {intl.formatMessage(messages.roleName)}\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <Text component={TextVariants.p}>{name}</Text>\n          </GridItem>\n          <GridItem span={3}>\n            <Text className=\"pf-v5-c-title\" component={TextVariants.h6}>\n              {intl.formatMessage(messages.roleDescription)}\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <Text component={TextVariants.p}>{description}</Text>\n          </GridItem>\n          <GridItem span={3}>\n            <Text className=\"pf-v5-c-title\" component={TextVariants.h6}>\n              {intl.formatMessage(messages.addedPermissions)}\n            </Text>\n          </GridItem>\n          <GridItem span={9}>\n            <TextContent component={TextVariants.p}>\n              {selectedPermissions.map((permission, index) => (\n                <Text key={index}> {permission.uuid} </Text>\n              ))}\n            </TextContent>\n          </GridItem>\n          {hasCostResources && (\n            <React.Fragment>\n              <GridItem span={3}>\n                <Text className=\"pf-v5-c-title\" component={TextVariants.h6}>\n                  {intl.formatMessage(messages.resourceDefinitions)}\n                </Text>\n              </GridItem>\n              <GridItem span={9}>\n                <TextContent component={TextVariants.p}>\n                  {resourceDefinitions.map(({ resources }) => resources.map((resource, index) => <Text key={index}> {resource} </Text>))}\n                </TextContent>\n              </GridItem>\n            </React.Fragment>\n          )}\n        </Grid>\n      </StackItem>\n    </Stack>\n  );\n};\n\nexport default AddRolePermissionSummaryContent;\n","import React from 'react';\nimport AddPermissionTemplate from '../add-role/add-permissions-template';\nimport ReviewTemplate from './review-template';\nimport { locale } from '../../../AppEntry';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport messages from '../../../Messages';\nimport providerMessages from '../../../locales/data.json';\nimport { validateNextAddRolePermissionStep } from '../permission-wizard-helper';\nimport InventoryGroupsRoleTemplate from '../add-role/inventory-groups-role-template';\n\nexport const schemaBuilder = (container, featureFlag) => {\n  const cache = createIntlCache();\n  const intl = createIntl({ locale, messages: providerMessages }, cache);\n\n  return {\n    fields: [\n      {\n        component: 'wizard',\n        name: 'wizard',\n        isDynamic: true,\n        inModal: true,\n        showTitles: true,\n        crossroads: ['role-type'],\n        title: intl.formatMessage(messages.addPermissions),\n        container,\n        fields: [\n          {\n            name: 'add-permissions',\n            title: intl.formatMessage(messages.addPermissions),\n            StepTemplate: AddPermissionTemplate,\n            nextStep: ({ values }) => validateNextAddRolePermissionStep('add-permissions', values),\n            fields: [\n              {\n                component: 'add-permissions-table',\n                name: 'add-permissions-table',\n              },\n            ],\n          },\n          {\n            name: 'inventory-groups-role',\n            title: intl.formatMessage(featureFlag ? messages.workspacesAccessTitle : messages.inventoryGroupsAccessTitle),\n            StepTemplate: InventoryGroupsRoleTemplate,\n            nextStep: ({ values }) => validateNextAddRolePermissionStep('inventory-groups-role', values),\n            fields: [\n              {\n                component: 'plain-text',\n                name: 'text-description',\n                label: <p>{intl.formatMessage(featureFlag ? messages.workspacesAccessDescription : messages.inventoryGroupsAccessDescription)}</p>,\n              },\n              {\n                component: 'inventory-groups-role',\n                name: 'inventory-groups-role',\n                validate: [\n                  (value = []) =>\n                    value?.every(({ groups, permission }) => groups?.length > 0 && permission)\n                      ? undefined\n                      : intl.formatMessage(messages.assignAtLeastOneInventoryGroup),\n                ],\n              },\n            ],\n          },\n          {\n            name: 'cost-resources-definition',\n            title: intl.formatMessage(messages.defineCostResources),\n            nextStep: 'review',\n            fields: [\n              {\n                component: 'plain-text',\n                name: 'text-description',\n                label: <p>{intl.formatMessage(messages.applyCostPermissionText)}</p>,\n              },\n              {\n                component: 'cost-resources',\n                name: 'cost-resources',\n                validate: [\n                  (value = []) =>\n                    value.every(({ resources }) => resources && resources.length > 0)\n                      ? undefined\n                      : intl.formatMessage(messages.assignAtLeastOneResource),\n                ],\n              },\n            ],\n          },\n          {\n            name: 'review',\n            title: intl.formatMessage(messages.reviewDetails),\n            StepTemplate: ReviewTemplate,\n            fields: [\n              {\n                component: 'review',\n                name: 'review',\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  };\n};\n"],"names":["_a","isOpen","onConfirm","onClose","children","confirmButtonLabel","cancelButtonLabel","variant","Modal","small","titleIconVariant","withCheckbox","checkboxLabel","confirmButtonVariant","Button","primary","ouiaId","props","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__rest","checked","setChecked","useState","assign","onEscapePress","actions","key","onClick","isDisabled","link","Checkbox","isChecked","onChange","_event","value","label","id","className","TextContent","isVisited","css","content","modifiers","visited","displayName","AddRolePermissionSuccess","currentRoleID","intl","dispatch","useDispatch","EmptyState","EmptyStateHeader","titleText","formatMessage","permissionsAddedSuccessfully","icon","EmptyStateIcon","color","headingLevel","EmptyStateBody","EmptyStateFooter","AppLink","to","pathnames","replace","exit","propTypes","isRequired","ReviewTemplate","formFields","submitting","useContext","AddRolePermissionWizardContext","Bullseye","Spinner","size","FormTemplate","showFormControls","mapperExtension","review","formOptions","name","description","selectedPermissions","resourceDefinitions","hasCostResources","getState","values","Stack","hasGutter","StackItem","Title","reviewDetails","Grid","GridItem","span","Text","component","h6","roleName","roleDescription","addedPermissions","map","permission","index","uuid","resources","resource","createContext","success","error","undefined","AddRolePermissionWizard","role","cancelWarningVisible","setCancelWarningVisible","setCurrentRoleID","navigate","useAppNavigate","enableWorkspacesNameChange","useFlag","wizardContextValue","setWizardContextValue","hideForm","container","useRef","document","createElement","schema","useMemo","featureFlag","cache","locale","messages","fields","isDynamic","inModal","showTitles","crossroads","title","addPermissions","StepTemplate","nextStep","workspacesAccessTitle","inventoryGroupsAccessTitle","workspacesAccessDescription","inventoryGroupsAccessDescription","validate","every","groups","assignAtLeastOneInventoryGroup","defineCostResources","applyCostPermissionText","assignAtLeastOneResource","schemaBuilder","current","useEffect","hidden","handleConfirmCancel","Provider","setWizardError","prev","setWizardSuccess","setHideForm","rolePermissions","access","WarningModal","exitItemAdding","item","permissions","toLocaleLowerCase","discard","discardedInputsWarning","Wizard","steps","isFinishedStep","subscription","initialValues","display_name","componentMapper","onSubmit","async","formData","costResources","invResources","selectedPermissionIds","record","roleData","reduce","acc","requires","filter","require","includes","find","r","attributeFilter","operation","g","group","split","accessCount","then","catch","onCancel","defaultProps"],"sourceRoot":""}