{"version":3,"file":"js/5581.1664266643034.7dacf0e009fc27db2de7.js","mappings":"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","sources":["webpack:///./node_modules/@patternfly/react-tokens/dist/js/global_breakpoint_2xl.js","webpack:///./node_modules/@patternfly/react-tokens/dist/js/global_breakpoint_lg.js","webpack:///./node_modules/@patternfly/react-tokens/dist/js/global_breakpoint_sm.js","webpack:///./node_modules/@patternfly/react-tokens/dist/js/global_breakpoint_xl.js","webpack:///./node_modules/@patternfly/react-tokens/dist/js/global_breakpoint_xs.js","webpack:///./src/smart-components/role/role-resource-definitions-table-helpers.js","webpack:///./src/smart-components/role/ResourceDefinitionsFormTemplate.js","webpack:///./src/smart-components/role/edit-resource-definitions-modal.js","webpack:///./src/smart-components/role/role-resource-definitions.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/useScreenSize/breakpoints.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/useScreenSize/getVariant.js","webpack:///./src/smart-components/role/roles.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/useScreenSize/useScreenSize.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/useScreenSize/isSmallScreen.js","webpack:///./src/smart-components/role/role-table-helpers.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.global_breakpoint_2xl = {\n  \"name\": \"--pf-global--breakpoint--2xl\",\n  \"value\": \"1450px\",\n  \"var\": \"var(--pf-global--breakpoint--2xl)\"\n};\nexports[\"default\"] = exports.global_breakpoint_2xl;","\"use strict\";\nexports.__esModule = true;\nexports.global_breakpoint_lg = {\n  \"name\": \"--pf-global--breakpoint--lg\",\n  \"value\": \"992px\",\n  \"var\": \"var(--pf-global--breakpoint--lg)\"\n};\nexports[\"default\"] = exports.global_breakpoint_lg;","\"use strict\";\nexports.__esModule = true;\nexports.global_breakpoint_sm = {\n  \"name\": \"--pf-global--breakpoint--sm\",\n  \"value\": \"576px\",\n  \"var\": \"var(--pf-global--breakpoint--sm)\"\n};\nexports[\"default\"] = exports.global_breakpoint_sm;","\"use strict\";\nexports.__esModule = true;\nexports.global_breakpoint_xl = {\n  \"name\": \"--pf-global--breakpoint--xl\",\n  \"value\": \"1200px\",\n  \"var\": \"var(--pf-global--breakpoint--xl)\"\n};\nexports[\"default\"] = exports.global_breakpoint_xl;","\"use strict\";\nexports.__esModule = true;\nexports.global_breakpoint_xs = {\n  \"name\": \"--pf-global--breakpoint--xs\",\n  \"value\": \"0\",\n  \"var\": \"var(--pf-global--breakpoint--xs)\"\n};\nexports[\"default\"] = exports.global_breakpoint_xs;","export const createRows = (data) =>\n  data.reduce(\n    (acc, value) => [\n      ...acc,\n      {\n        cells: [value],\n      },\n    ],\n    []\n  );\n","import React from 'react';\nimport ModalFormTemplate from '../common/ModalFormTemplate';\nimport { Alert } from '@patternfly/react-core';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport './role-permissions.scss';\n\nconst ResourceDefinitionsFormTemplate = ({ ModalProps, ...props }) => {\n  const intl = useIntl();\n  const formOptions = useFormApi();\n  const values = formOptions.getState().values;\n\n  return (\n    <ModalFormTemplate\n      {...props}\n      ModalProps={{\n        ...ModalProps,\n        onClose: () => ModalProps.onClose(values),\n      }}\n      alert={\n        values['dual-list-select']\n          ? undefined\n          : () => (\n              <div className=\"rbac-m-resource-definitions\">\n                <Alert className=\"pf-c-modal__alert\" variant=\"danger\" isInline title={intl.formatMessage(messages.defineAtLeastOneResource)} />\n              </div>\n            )\n      }\n    />\n  );\n};\n\nResourceDefinitionsFormTemplate.propTypes = {\n  ModalProps: PropTypes.object,\n};\n\nexport default ResourceDefinitionsFormTemplate;\n","import React, { useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport componentTypes from '@data-driven-forms/react-form-renderer/component-types';\nimport FormRenderer from '../common/form-renderer';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { updateRole, fetchRole } from '../../redux/actions/role-actions';\nimport paths from '../../utilities/pathnames';\nimport { getResource, getResourceDefinitions } from '../../redux/actions/cost-management-actions';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/component-mapper';\nimport { WarningModal } from '../common/warningModal';\nimport { Spinner, Modal, ModalVariant, Bullseye } from '@patternfly/react-core';\nimport ResourceDefinitionsFormTemplate from './ResourceDefinitionsFormTemplate';\nimport flatten from 'lodash/flattenDeep';\nimport { useIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport './role-permissions.scss';\n\nconst createOptions = (resources) =>\n  Object.entries(resources).reduce(\n    (acc, [key, value]) => [\n      ...acc,\n      ...value.map((r) => ({\n        value: r.value,\n        path: key,\n        label: r.value,\n      })),\n    ],\n    []\n  );\n\nconst initialState = {\n  changedResources: undefined,\n  cancelWarningVisible: false,\n  resourcesPath: undefined,\n  loadingStateVisible: true,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'update':\n      return {\n        ...state,\n        ...action.payload,\n      };\n    default:\n      throw new Error();\n  }\n}\n\nconst createEditResourceDefinitionsSchema = (resources, resourcesPath, options) => {\n  const intl = useIntl();\n  return {\n    fields: [\n      {\n        component: componentTypes.DUAL_LIST_SELECT,\n        name: 'dual-list-select',\n        leftTitle: intl.formatMessage(messages.resourcesAvailable),\n        rightTitle: intl.formatMessage(messages.resourcesDefined),\n        filterOptionsTitle: intl.formatMessage(messages.filterByResource),\n        filterValueTitle: intl.formatMessage(messages.filterByResource),\n        options: [...(resourcesPath && resources ? options : [])],\n        validate: [{ type: 'validate-resources' }],\n        isSearchable: true,\n      },\n    ],\n  };\n};\n\nconst selector = ({ costReducer: { resourceTypes, isLoading, loadingResources, resources } }, resourcesPath) => ({\n  resourceTypes: resourceTypes.data,\n  resources: resources[resourcesPath] ? { resourcesPath: resources[resourcesPath] } : resources,\n  isLoading,\n  isLoadingResources: loadingResources > 0,\n});\n\nconst validatorMapper = {\n  'validate-resources': () => (value) => value && value.length > 0 ? undefined : 'At least one resource must be defined for this permission',\n};\n\nconst EditResourceDefinitionsModal = ({ cancelRoute }) => {\n  const intl = useIntl();\n  const routeMatch = useRouteMatch(paths['role-detail-permission-edit'].path);\n  const {\n    params: { permissionId, roleId },\n  } = useRouteMatch(routeMatch);\n  const { replace, push } = useHistory();\n\n  const dispatch = useDispatch();\n  const fetchResourceDefinitions = () => dispatch(getResourceDefinitions());\n\n  const [state, dispatchLocally] = useReducer(reducer, initialState);\n\n  const { definedResources, role } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      definedResources: state.roleReducer.selectedRole?.access\n        ? flatten(\n            state.roleReducer.selectedRole.access\n              .filter((a) => a.permission === permissionId)\n              .map((access) => access.resourceDefinitions.map((resource) => resource.attributeFilter.value))\n          )\n        : [],\n      isRecordLoading: state.roleReducer.isRecordLoading,\n    }),\n    shallowEqual\n  );\n\n  const { resourceTypes, isLoading, isLoadingResources, resources } = useSelector((props) => selector(props, state.resourcesPath), shallowEqual);\n\n  useEffect(() => {\n    fetchResourceDefinitions();\n  }, [permissionId]);\n\n  useEffect(() => {\n    if (!isLoading) {\n      let path = resourceTypes.find((r) => r.value === permissionId.split(':')?.[1])?.path;\n      if (path) {\n        dispatchLocally({ type: 'update', payload: { resourcesPath: path.split('/')[5] } });\n        dispatch(getResource(path));\n      }\n    }\n  }, [resourceTypes]);\n\n  const onCancel = () => replace(cancelRoute);\n\n  const handleCancel = (data) => {\n    if (data['dual-list-select'] === definedResources) {\n      onCancel();\n    } else {\n      dispatchLocally({\n        type: 'update',\n        payload: {\n          changedResources: data['dual-list-select'],\n          cancelWarningVisible: true,\n        },\n      });\n    }\n  };\n\n  const handleSubmit = (data) => {\n    dispatchLocally({ type: 'update', payload: { changedResources: data['dual-list-select'] } });\n    const newAccess = {\n      permission: permissionId,\n      resourceDefinitions: [\n        {\n          attributeFilter: {\n            key: `cost-management.${permissionId.split(':')?.[1]}`,\n            operation: data['dual-list-select'].length === 1 ? 'equal' : 'in',\n            value: data['dual-list-select'].length === 1 ? data['dual-list-select'][0] : data['dual-list-select'],\n          },\n        },\n      ],\n    };\n    dispatch(updateRole(roleId, { ...role, access: [...role.access.filter((item) => item.permission !== permissionId), newAccess] }), true).then(\n      () => {\n        dispatch(fetchRole(roleId));\n        push(cancelRoute);\n      }\n    );\n  };\n\n  const options = createOptions(resources);\n\n  return (\n    <React.Fragment>\n      <WarningModal\n        customTitle={intl.formatMessage(messages.exitEditResourceDefinitions)}\n        customDescription={intl.formatMessage(messages.changesWillBeLost)}\n        isOpen={state.cancelWarningVisible}\n        onModalCancel={() => dispatchLocally({ type: 'update', payload: { cancelWarningVisible: false } })}\n        onConfirmCancel={onCancel}\n      ></WarningModal>\n      {(isLoading || isLoadingResources) && state.loadingStateVisible ? (\n        <Modal\n          variant={ModalVariant.large}\n          className=\"rbac-m-resource-definitions\"\n          isOpen={true}\n          title={intl.formatMessage(messages.editResourceDefinitions)}\n          onClose={() => {\n            dispatchLocally({ type: 'update', payload: { loadingStateVisible: false } });\n            onCancel();\n          }}\n        >\n          <Bullseye>\n            <Spinner />\n          </Bullseye>\n        </Modal>\n      ) : (\n        <FormRenderer\n          schema={createEditResourceDefinitionsSchema(resources, state.resourcesPath, options)}\n          componentMapper={componentMapper}\n          initialValues={{ 'dual-list-select': state.changedResources || definedResources || [] }}\n          onSubmit={handleSubmit}\n          onCancel={(data) => handleCancel(data)}\n          validatorMapper={validatorMapper}\n          FormTemplate={(props) => (\n            <ResourceDefinitionsFormTemplate\n              {...props}\n              ModalProps={{\n                onClose: handleCancel,\n                isOpen: !state.cancelWarningVisible,\n                variant: 'large',\n                title: intl.formatMessage(messages.editResourceDefinitions),\n                description: intl.formatMessage(messages.editPermissionsUsingArrows),\n              }}\n            />\n          )}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nEditResourceDefinitionsModal.propTypes = {\n  cancelRoute: PropTypes.string.isRequired,\n};\n\nexport default EditResourceDefinitionsModal;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport { TextContent, Text, TextVariants, Level, LevelItem, Button } from '@patternfly/react-core';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { TableToolbarViewOld } from '../../presentational-components/shared/table-toolbar-view-old';\nimport { createRows } from './role-resource-definitions-table-helpers';\nimport { useParams, Link, Route } from 'react-router-dom';\nimport { TopToolbar } from '../../presentational-components/shared/top-toolbar';\nimport { PageHeaderTitle } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { ToolbarTitlePlaceholder } from '../../presentational-components/shared/loader-placeholders';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { fetchRole } from '../../redux/actions/role-actions';\nimport paths from '../../utilities/pathnames';\nimport EditResourceDefinitionsModal from './edit-resource-definitions-modal';\nimport { getBackRoute } from '../../helpers/shared/helpers';\nimport flatten from 'lodash/flatten';\nimport { useIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport './role-permissions.scss';\n\nconst ResourceDefinitions = () => {\n  const intl = useIntl();\n  const [config, setConfig] = useState({\n    pagination: {\n      ...defaultSettings,\n      filter: '',\n    },\n  });\n\n  const { pagination, filter } = config;\n\n  const dispatch = useDispatch();\n\n  const { roleId, permissionId } = useParams();\n\n  const { role, permission, isRecordLoading, rolesPagination, rolesFilters } = useSelector(\n    (state) => ({\n      role: state.roleReducer.selectedRole,\n      permission: state.roleReducer.selectedRole.access\n        ? {\n            ...state.roleReducer.selectedRole?.access.find((a) => a.permission === permissionId),\n          }\n        : {},\n      isRecordLoading: state.roleReducer.isRecordLoading,\n      rolesPagination: state.roleReducer?.roles?.pagination || defaultSettings,\n      rolesFilters: state.roleReducer?.roles?.filters || {},\n    }),\n    shallowEqual\n  );\n\n  const fetchData = () => {\n    dispatch(fetchRole(roleId));\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [roleId]);\n\n  useEffect(() => {\n    setConfig({\n      ...config,\n      pagination: {\n        ...config.pagination,\n        count: role.access ? role.access.length : 0,\n      },\n    });\n  }, [role]);\n\n  const filteredRows = permission.resourceDefinitions\n    ? flatten(permission.resourceDefinitions.map((definition) => definition.attributeFilter.value)).filter((value) =>\n        filter ? value.includes(filter) : true\n      )\n    : [];\n\n  const routes = () => (\n    <Fragment>\n      <Route exact path={paths['role-detail-permission-edit'].path}>\n        <EditResourceDefinitionsModal\n          cancelRoute={paths['role-detail-permission'].path.replace(':roleId', roleId).replace(':permissionId', permissionId)}\n        />\n      </Route>\n    </Fragment>\n  );\n\n  const toolbarButtons = () =>\n    !role.system\n      ? [\n          <Fragment key=\"edit-resource-definitions\">\n            <Link to={`/roles/detail/${roleId}/permission/${permissionId}/edit`}>\n              <Button variant=\"primary\" aria-label=\"Edit\">\n                {intl.formatMessage(messages.edit)}\n              </Button>\n            </Link>\n          </Fragment>,\n        ]\n      : [];\n\n  return (\n    <Fragment>\n      <TopToolbar\n        breadcrumbs={[\n          { title: intl.formatMessage(messages.roles), to: getBackRoute(routes.roles, rolesPagination, rolesFilters) },\n          { title: isRecordLoading ? undefined : role && (role.display_name || role.name), to: `/roles/detail/${roleId}` },\n          { title: permissionId, isActive: true },\n        ]}\n      >\n        <Level>\n          <LevelItem>\n            <PageHeaderTitle title={permissionId || <ToolbarTitlePlaceholder />} className=\"rbac-page-header__title\" />\n          </LevelItem>\n        </Level>\n      </TopToolbar>\n      <section className=\"pf-c-page__main-section rbac-c-role__permissions\">\n        <TextContent>\n          <Text component={TextVariants.h1}>{intl.formatMessage(messages.definedResources)}</Text>\n        </TextContent>\n        <TableToolbarViewOld\n          columns={[{}]}\n          createRows={createRows}\n          data={filteredRows.slice(pagination.offset, pagination.offset + pagination.limit)}\n          filterValue={filter}\n          fetchData={({ limit, offset, name }) =>\n            setConfig({\n              ...config,\n              filter: name,\n              pagination: {\n                ...config.pagination,\n                limit,\n                offset,\n              },\n            })\n          }\n          isCompact\n          routes={routes}\n          setFilterValue={({ name }) =>\n            setConfig({\n              ...config,\n              filter: name,\n            })\n          }\n          toolbarButtons={toolbarButtons}\n          isLoading={isRecordLoading}\n          pagination={{\n            ...pagination,\n            count: filteredRows.length,\n          }}\n          titlePlural={intl.formatMessage(messages.resources).toLowerCase()}\n          titleSingular={intl.formatMessage(messages.resource).toLowerCase()}\n          hideHeader\n          tableId=\"role-resource-definitions\"\n        />\n      </section>\n    </Fragment>\n  );\n};\n\nexport default ResourceDefinitions;\n","import xsBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_xs';\nimport smBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_sm';\nimport mdBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_md';\nimport lgBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_lg';\nimport xlBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_xl';\nimport xxlBreakpoint from '@patternfly/react-tokens/dist/js/global_breakpoint_2xl';\nvar breakPoints = {\n    xs: parseInt(xsBreakpoint.value.replace('px', '')),\n    sm: parseInt(smBreakpoint.value.replace('px', '')),\n    md: parseInt(mdBreakpoint.value.replace('px', '')),\n    lg: parseInt(lgBreakpoint.value.replace('px', '')),\n    xl: parseInt(xlBreakpoint.value.replace('px', '')),\n    '2xl': parseInt(xxlBreakpoint.value.replace('px', '')),\n};\nexport default breakPoints;\n//# sourceMappingURL=breakpoints.js.map","import breakpoints from './breakpoints';\nvar getVariant = function () {\n    var width = window.innerWidth;\n    var result;\n    for (var _i = 0, _a = Object.entries(breakpoints); _i < _a.length; _i++) {\n        var _b = _a[_i], variant = _b[0], size = _b[1];\n        if (size >= width) {\n            break;\n        }\n        result = variant;\n    }\n    return result;\n};\nexport default getVariant;\n//# sourceMappingURL=getVariant.js.map","import React, { Fragment, Suspense, useState, useEffect, lazy, useContext } from 'react';\nimport { useIntl } from 'react-intl';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { Link, Route, Switch, useHistory } from 'react-router-dom';\nimport { cellWidth, nowrap, sortable } from '@patternfly/react-table';\nimport { Button, Stack, StackItem } from '@patternfly/react-core';\nimport { createRows } from './role-table-helpers';\nimport { getBackRoute, mappedProps } from '../../helpers/shared/helpers';\nimport { fetchRolesWithPolicies } from '../../redux/actions/role-actions';\nimport { TopToolbar, TopToolbarTitle } from '../../presentational-components/shared/top-toolbar';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport RemoveRole from './remove-role-modal';\nimport Section from '@redhat-cloud-services/frontend-components/Section';\nimport Role from './role';\nimport paths from '../../utilities/pathnames';\nimport EditRole from './edit-role-modal';\nimport PageActionRoute from '../common/page-action-route';\nimport ResourceDefinitions from './role-resource-definitions';\nimport PermissionsContext from '../../utilities/permissions-context';\nimport { syncDefaultPaginationWithUrl, applyPaginationToUrl, isPaginationPresentInUrl } from '../../helpers/shared/pagination';\nimport { syncDefaultFiltersWithUrl, applyFiltersToUrl, areFiltersPresentInUrl } from '../../helpers/shared/filters';\nimport { useScreenSize, isSmallScreen } from '@redhat-cloud-services/frontend-components/useScreenSize';\nimport messages from '../../Messages';\nimport './roles.scss';\n\nconst AddRoleWizard = lazy(() => import(/* webpackChunkname: \"AddRoleWizard\" */ './add-role-new/add-role-wizard'));\n\nconst selector = ({ roleReducer: { roles, isLoading } }) => ({\n  roles: roles.data,\n  filters: roles.filters,\n  meta: roles.pagination,\n  isLoading,\n});\n\nconst Roles = () => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const { roles, filters, meta, isLoading } = useSelector(selector, shallowEqual);\n  const fetchData = (options) => {\n    return dispatch(fetchRolesWithPolicies({ ...options, inModal: false }));\n  };\n  const history = useHistory();\n  const { userAccessAdministrator, orgAdmin } = useContext(PermissionsContext);\n  const [pagination, setPagination] = useState(meta);\n  const [filterValue, setFilterValue] = useState(filters.display_name || '');\n  const screenSize = useScreenSize();\n  const columns = [\n    { title: intl.formatMessage(messages.name), key: 'display_name', transforms: [cellWidth(20), sortable] },\n    { title: intl.formatMessage(messages.description) },\n    { title: intl.formatMessage(messages.permissions), transforms: [nowrap] },\n    { title: intl.formatMessage(messages.groups), transforms: [nowrap] },\n    { title: intl.formatMessage(messages.lastModified), key: 'modified', transforms: [nowrap, sortable] },\n  ];\n  const [sortByState, setSortByState] = useState({ index: 0, direction: 'asc' });\n  const orderBy = `${sortByState?.direction === 'desc' ? '-' : ''}${columns[sortByState?.index].key}`;\n\n  useEffect(() => {\n    const syncedPagination = syncDefaultPaginationWithUrl(history, pagination);\n    setPagination(syncedPagination);\n    const { display_name } = syncDefaultFiltersWithUrl(history, ['display_name'], { display_name: filterValue });\n    setFilterValue(display_name);\n    insights.chrome.appNavClick({ id: 'roles', secondaryNav: true });\n    fetchData({ ...syncedPagination, orderBy, filters: { display_name } });\n  }, []);\n\n  useEffect(() => {\n    setFilterValue(filters.display_name);\n    setPagination(meta);\n  }, [filters, meta]);\n\n  useEffect(() => {\n    meta.redirected && applyPaginationToUrl(history, meta.limit, meta.offset);\n  }, [meta.redirected]);\n\n  useEffect(() => {\n    isPaginationPresentInUrl(history) || applyPaginationToUrl(history, pagination.limit, pagination.offset);\n    filterValue?.length > 0 &&\n      !areFiltersPresentInUrl(history, ['display_name']) &&\n      syncDefaultFiltersWithUrl(history, ['display_name'], { display_name: filterValue });\n  });\n\n  const routes = () => (\n    <Suspense fallback={<Fragment />}>\n      <Route exact path={paths['add-role'].path}>\n        <AddRoleWizard pagination={pagination} orderBy={orderBy} filters={{ display_name: filterValue }} />\n      </Route>\n      <Route exact path={paths['remove-role'].path}>\n        {!isLoading && (\n          <RemoveRole\n            afterSubmit={() => fetchData({ ...pagination, offset: 0, orderBy, filters: { display_name: filterValue } }, true)}\n            routeMatch={paths['remove-role'].path}\n            cancelRoute={getBackRoute(paths.roles.path, pagination, filters)}\n            submitRoute={getBackRoute(paths.roles.path, { ...pagination, offset: 0 }, filters)}\n          />\n        )}\n      </Route>\n      <Route exact path={paths['edit-role'].path}>\n        {!isLoading && (\n          <EditRole\n            afterSubmit={() => fetchData({ ...pagination, offset: 0, orderBy, filters: { display_name: filterValue } }, true)}\n            routeMatch={paths['edit-role'].path}\n            cancelRoute={getBackRoute(paths.roles.path, pagination, filters)}\n            submitRoute={getBackRoute(paths.roles.path, { ...pagination, offset: 0 }, filters)}\n          />\n        )}\n      </Route>\n    </Suspense>\n  );\n\n  const actionResolver = ({ system }) => {\n    return system\n      ? []\n      : [\n          {\n            title: intl.formatMessage(messages.edit),\n            onClick: (_event, _rowId, role) => history.push(`/roles/edit/${role.uuid}`),\n          },\n          {\n            title: intl.formatMessage(messages.delete),\n            onClick: (_event, _rowId, role) => history.push(`/roles/remove/${role.uuid}`),\n          },\n        ];\n  };\n\n  const toolbarButtons = () =>\n    orgAdmin || userAccessAdministrator\n      ? [\n          <Link to={paths['add-role'].path} key=\"add-role\" className=\"rbac-m-hide-on-sm\">\n            <Button ouiaId=\"create-role-button\" variant=\"primary\" aria-label=\"Create role\">\n              {intl.formatMessage(messages.createRole)}\n            </Button>\n          </Link>,\n          ...(isSmallScreen(screenSize)\n            ? [\n                {\n                  label: intl.formatMessage(messages.createRole),\n                  onClick: () => {\n                    history.push(paths['add-role'].path);\n                  },\n                },\n              ]\n            : []),\n        ]\n      : [];\n  const fetchTableData = (config) => {\n    const { name, count, limit, offset, orderBy } = config;\n    applyPaginationToUrl(history, limit, offset);\n    applyFiltersToUrl(history, { display_name: name });\n    return fetchData(mappedProps({ count, limit, offset, orderBy, filters: { display_name: name } }));\n  };\n\n  const rows = createRows(roles);\n  const renderRolesList = () => (\n    <Stack className=\"rbac-c-roles\">\n      <StackItem>\n        <TopToolbar>\n          <TopToolbarTitle title={intl.formatMessage(messages.roles)} />\n        </TopToolbar>\n      </StackItem>\n      <StackItem>\n        <Section type=\"content\" id={'tab-roles'}>\n          <TableToolbarView\n            actionResolver={actionResolver}\n            sortBy={sortByState}\n            columns={columns}\n            rows={rows}\n            data={roles}\n            filterValue={filterValue}\n            fetchData={(config) => {\n              const { name, count, limit, offset, orderBy } = config;\n              applyPaginationToUrl(history, limit, offset);\n              applyFiltersToUrl(history, { display_name: name });\n              return fetchData(mappedProps({ count, limit, offset, orderBy, filters: { display_name: name } }));\n            }}\n            setFilterValue={({ name = '' }) => setFilterValue(name)}\n            isLoading={!isLoading && roles?.length === 0 && filterValue?.length === 0 ? true : isLoading}\n            pagination={pagination}\n            routes={routes}\n            ouiaId=\"roles-table\"\n            titlePlural={intl.formatMessage(messages.roles).toLowerCase()}\n            titleSingular={intl.formatMessage(messages.role).toLowerCase()}\n            toolbarButtons={toolbarButtons}\n            filterPlaceholder={intl.formatMessage(messages.name).toLowerCase()}\n            tableId=\"roles\"\n            testRoles={true}\n            onSort={(e, index, direction) => {\n              const orderBy = `${direction === 'desc' ? '-' : ''}${columns[index].key}`;\n              setSortByState({ index, direction });\n              fetchTableData({\n                ...pagination,\n                offset: 0,\n                orderBy,\n                ...(filters?.length > 0\n                  ? {\n                      ...filters.reduce(\n                        (acc, curr) => ({\n                          ...acc,\n                          [curr.key]: curr.value,\n                        }),\n                        {}\n                      ),\n                    }\n                  : { name: filterValue }),\n              });\n            }}\n          />\n        </Section>\n      </StackItem>\n    </Stack>\n  );\n\n  return (\n    <Switch>\n      <PageActionRoute pageAction=\"role-detail-permission\" path={paths['role-detail-permission'].path}>\n        <ResourceDefinitions />\n      </PageActionRoute>\n      <PageActionRoute pageAction=\"role-detail\" path={paths['role-detail'].path}>\n        <Role onDelete={() => setFilterValue('')} />\n      </PageActionRoute>\n      <PageActionRoute pageAction=\"roles-list\" path={paths.roles.path} render={() => renderRolesList()} />\n    </Switch>\n  );\n};\n\nexport default Roles;\n","import { useEffect, useRef, useState } from 'react';\nimport getVariant from './getVariant';\nvar useScreen = function () {\n    var _a = useState(function () { return getVariant(); }), variant = _a[0], setVariant = _a[1];\n    var prev = useRef(variant);\n    useEffect(function () {\n        function handleResize() {\n            var newVariant = getVariant();\n            if (newVariant !== prev.current) {\n                prev.current = newVariant;\n                setVariant(newVariant);\n            }\n        }\n        window.addEventListener('resize', handleResize);\n        return function () { return window.removeEventListener('resize', handleResize); };\n    }, []);\n    return variant;\n};\nexport default useScreen;\n//# sourceMappingURL=useScreenSize.js.map","import breakpoints from './breakpoints';\nvar isSmallScreen = function (screenSize) { return (breakpoints === null || breakpoints === void 0 ? void 0 : breakpoints[screenSize]) <= breakpoints.sm; };\nexport default isSmallScreen;\n//# sourceMappingURL=isSmallScreen.js.map","import React, { Fragment } from 'react';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat';\nimport { Link } from 'react-router-dom';\nimport { getDateFormat } from '../../helpers/shared/helpers';\n\nexport const createRows = (data) =>\n  data.reduce(\n    (acc, { uuid, display_name, name, description, system, accessCount, groups_in_count: groupsCount, modified }) => [\n      ...acc,\n      {\n        uuid,\n        system,\n        cells: [\n          <Fragment key={`${uuid}-name`}>\n            <Link to={`/roles/detail/${uuid}`}>{display_name || name}</Link>\n          </Fragment>,\n          description,\n          <Fragment key={`${uuid}-accessCount`}>\n            <Link to={`/roles/detail/${uuid}`}>{accessCount}</Link>\n          </Fragment>,\n          groupsCount,\n          <Fragment key={`${uuid}-modified`}>\n            <DateFormat date={modified} type={getDateFormat(modified)} />\n          </Fragment>,\n        ],\n      },\n    ],\n    []\n  );\n"],"names":["exports","createRows","data","reduce","acc","value","cells","ResourceDefinitionsFormTemplate","ModalProps","props","intl","useIntl","values","useFormApi","getState","ModalFormTemplate","onClose","alert","undefined","className","Alert","variant","isInline","title","formatMessage","messages","propTypes","PropTypes","initialState","changedResources","cancelWarningVisible","resourcesPath","loadingStateVisible","reducer","state","action","type","payload","Error","createEditResourceDefinitionsSchema","resources","options","fields","component","componentTypes","name","leftTitle","rightTitle","filterOptionsTitle","filterValueTitle","validate","isSearchable","validatorMapper","length","EditResourceDefinitionsModal","cancelRoute","routeMatch","useRouteMatch","paths","params","permissionId","roleId","useHistory","replace","push","dispatch","useDispatch","useReducer","dispatchLocally","useSelector","role","roleReducer","selectedRole","definedResources","access","flatten","filter","a","permission","map","resourceDefinitions","resource","attributeFilter","isRecordLoading","shallowEqual","costReducer","resourceTypes","isLoading","loadingResources","isLoadingResources","selector","useEffect","getResourceDefinitions","path","find","r","split","getResource","onCancel","handleCancel","Object","entries","key","label","createOptions","customTitle","customDescription","isOpen","onModalCancel","onConfirmCancel","Modal","ModalVariant","Bullseye","Spinner","schema","componentMapper","initialValues","onSubmit","newAccess","operation","updateRole","item","then","fetchRole","FormTemplate","description","useState","pagination","defaultSettings","config","setConfig","useParams","rolesPagination","roles","rolesFilters","filters","count","filteredRows","definition","includes","routes","Fragment","Route","exact","breadcrumbs","to","getBackRoute","display_name","isActive","Level","LevelItem","PageHeaderTitle","TextContent","Text","TextVariants","columns","slice","offset","limit","filterValue","fetchData","isCompact","setFilterValue","toolbarButtons","system","Link","Button","titlePlural","toLowerCase","titleSingular","hideHeader","tableId","xs","parseInt","sm","md","lg","xl","result","width","window","innerWidth","_i","_a","breakpoints","_b","AddRoleWizard","lazy","meta","setVariant","prev","fetchRolesWithPolicies","inModal","history","useContext","PermissionsContext","userAccessAdministrator","orgAdmin","setPagination","screenSize","useRef","handleResize","newVariant","current","addEventListener","removeEventListener","transforms","cellWidth","sortable","nowrap","index","direction","sortByState","setSortByState","orderBy","syncedPagination","syncDefaultPaginationWithUrl","syncDefaultFiltersWithUrl","insights","chrome","appNavClick","id","secondaryNav","redirected","applyPaginationToUrl","isPaginationPresentInUrl","areFiltersPresentInUrl","Suspense","fallback","afterSubmit","submitRoute","actionResolver","onClick","_event","_rowId","uuid","ouiaId","isSmallScreen","rows","accessCount","groupsCount","groups_in_count","modified","DateFormat","date","getDateFormat","Switch","pageAction","onDelete","render","Stack","StackItem","Section","sortBy","applyFiltersToUrl","mappedProps","filterPlaceholder","testRoles","onSort","e","fetchTableData","curr"],"sourceRoot":""}