{"version":3,"sources":["webpack:///./src/smart-components/myUserAccess/ResourceDefinitionsModal.js","webpack:///./src/helpers/access/access-helper.js","webpack:///./src/redux/actions/access-actions.js","webpack:///./src/presentational-components/myUserAccess/ResourceDefinitionsLink.js","webpack:///./src/smart-components/myUserAccess/mua-table-helpers.js","webpack:///./src/smart-components/myUserAccess/MUAAccessTable.js","webpack:///./src/smart-components/myUserAccess/MUARolesTable.js","webpack:///./src/smart-components/myUserAccess/CommonBundleView.js","webpack:///./src/smart-components/myUserAccess/bundles/rhel.js"],"names":["ResourceDefinitionsModal","isOpen","handleClose","permission","resourceDefinitions","useState","filterValue","rows","map","attributeFilter","value","slice","defaultSettings","pagination","count","length","setRows","handleFilterValue","name","limit","offset","isFilter","filter","includes","actions","key","variant","onClick","onClose","title","description","columns","data","setFilterValue","config","ouiaId","noData","createRows","cells","titlePlural","titleSingular","noDataDescription","fetchData","tableId","propTypes","PropTypes","isRequired","accessApi","getAccessApi","getPrincipalAccess","username","application","ResourceDefinitionsLink","access","MUAAccessTable","filters","setFilters","apps","hasActiveFilters","showResourceDefinitions","rdOpen","rdPermission","setRdConfig","useRef","current","dispatch","useDispatch","useSelector","state","permissions","accessReducer","isLoading","shallowEqual","apiProps","applicationParam","type","ActionTypes","payload","AccessHelper","join","handleRdClick","index","useEffect","filteredRows","Fragment","onRdClick","reduce","acc","split","appName","operation","meta","Suspense","fallback","lazy","transforms","sortable","cellTransforms","compoundExpand","cellWidth","MUARolesTable","fetchRoles","fetchRoleForPrincipal","roles","rolesWithAccess","expanded","setExpanded","orderBy","scope","debouncedFetch","useCallback","debounce","isCompact","isExpandable","onExpand","_event","_rowIndex","colIndex","rowData","uuid","i","display_name","accessCount","props","component","parent","compoundParent","colSpan","className","Table","aria-label","borders","TableVariant","TableHeader","TableBody","sortBy","direction","filterPlaceholder","fetchUsers","withRouter","connect","roleReducer","CommonBundleView","isOrgAdmin","useContext","OrgAdminContext","setName","setPermission","setApplication","handleSetFilters","placeholder","items","app","label","createFilter","RhelBundle"],"mappings":"g2BAMA,IAAMA,EAA2B,SAAC,GAA6D,IAA3DC,EAA2D,EAA3DA,OAAQC,EAAmD,EAAnDA,YAAaC,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,oBAA0B,GAExCC,eAAS,iBAAO,CACnEC,YAAa,GACbC,KAAMH,EAAoBI,KAAI,qBAAGC,gBAAmBC,SAAqBC,MAAM,EAAGC,YAClFC,WAAY,EAAF,KACLD,MADK,IAERE,MAAOV,EAAoBW,aAP8D,kBAEpFR,EAFoF,EAEpFA,KAAMM,EAF8E,EAE9EA,WAAYP,EAFkE,EAElEA,YAAeU,EAFmD,KAWvFC,EAAoB,SAAC,GAAD,QAAGC,YAAH,MAAU,GAAV,EAAcC,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,OAAUC,EAA/B,+DACxBL,GAAQ,YAAiC,IAA9BH,EAA8B,EAA9BA,WAAYP,EAAkB,EAAlBA,YACfC,EAAOH,EACVI,KAAI,qBAAGC,gBAAmBC,SAC1BY,QAAO,SAACZ,GAAD,OAAWA,EAAMa,SAASL,MACjCP,MAAMS,EAAQD,GACjB,MAAO,CACLZ,OACAD,YAAae,EAAWH,EAAOZ,EAC/BO,WAAY,EAAF,KACLA,GADK,IAERO,OAAQC,EAAW,EAAID,EACvBD,QACAL,MAAOP,EAAKQ,cAKpB,OACE,kBAAC,IAAD,CACES,QAAS,CACP,kBAAC,KAAD,CAAQC,IAAI,eAAeC,QAAQ,UAAUC,QAASzB,GAAtD,UAIFwB,QAAQ,QACRzB,OAAQA,EACR2B,QAAS1B,EACT2B,MAAM,uBACNC,YACE,gEACoC,gCAAS3B,GAD7C,gBAKF,kBAAC,IAAD,CACE4B,QA9CU,CAAC,IA+CXC,KAAMzB,EACND,YAAaA,EACb2B,eAAgB,SAACC,GAAD,OAAYjB,EAAkBiB,GAAQ,IACtDrB,WAAYA,EACZsB,OAAO,4BACPC,OAAuC,IAA/BhC,EAAoBW,OAC5BsB,WAAY,SAACL,GAAD,OAAUA,EAAKxB,KAAI,SAACE,GAAD,MAAY,CAAE4B,MAAO,CAAC5B,QACrD6B,YAAY,uBACZC,cAAc,sBACdC,kBAAmB,CAAC,yCAAD,OAA0CtC,EAA1C,gBACnBuC,UAAWzB,EACX0B,QAAQ,iCAMhB3C,EAAyB4C,UAAY,CACnC3C,OAAQ4C,SACR3C,YAAa2C,oBACb1C,WAAY0C,sBACZzC,oBAAqByC,YACnBA,UAAgB,CACdpC,gBAAiBoC,UAAgB,CAC/BnC,MAAOmC,wBACNC,cAELA,YAGJ,W,6PClFMC,GAAYC,E,SAAAA,MAEX,SAAeC,EAAtB,kC,oCAAO,oGAAoC9B,EAApC,EAAoCA,MAAOC,EAA3C,EAA2CA,OAAQ8B,EAAnD,EAAmDA,SAAnD,IAA6DC,mBAA7D,MAA2E,GAA3E,WACQJ,EAAUE,mBAAmBE,EAAaD,EAAU/B,EAAOC,GADnE,oF,sBCDA,I,sBCADgC,EAA0B,SAAC,GAAwB,IAAtBzB,EAAsB,EAAtBA,QAAS0B,EAAa,EAAbA,OAC1C,OAA6C,IAAtCA,EAAOjD,oBAAoBW,OAChC,qCAEA,uBACEY,QAAS,WAEP,OADAA,KACO,IAGR0B,EAAOjD,oBAAoBW,SAKlCqC,EAAwBR,UAAY,CAClCjB,QAASkB,oBACTQ,OAAQR,UAAgB,CAAEzC,oBAAqByC,uBAA8BC,YAG/E,UCpBO,I,yOCMP,IAAMQ,EAAiB,SAAC,GAA6E,IAA3EC,EAA2E,EAA3EA,QAASC,EAAkE,EAAlEA,WAAYC,EAAsD,EAAtDA,KAAMC,EAAgD,EAAhDA,iBAAkBC,EAA8B,EAA9BA,wBAA8B,GAC9BtD,cAAS,CAAEuD,QAAQ,IADW,kBAC1FA,EAD0F,EAC1FA,OAAQC,EADkF,EAClFA,aAAczD,EADoE,EACpEA,oBAAuB0D,EAD6C,KAElF/B,GAAYgC,YAAO,CAClC,CAAElC,MAAO,eACT,CAAEA,MAAO,iBACT,CAAEA,MAAO,cAHwB,WAI7B8B,EAA0B,CAAC,CAAE9B,MAAO,yBAA4B,MAJ9DmC,QAOFC,GAAWC,mBATkF,GAUhEC,kBACjC,SAACC,GAAD,MAAY,CACVC,YAAaD,EAAME,cAAcjB,OACjCkB,UAAWH,EAAME,cAAcC,aAEjCC,gBALMH,EAV2F,EAU3FA,YAAaE,EAV8E,EAU9EA,UAQf7B,EAAY,SAAC,GAAiC,IAA/BS,EAA+B,EAA/BA,YAAgBsB,EAAe,uBAC5CC,GAAmBvB,aAAA,EAAAA,EAAapC,QAAS,EAAIoC,EAAcM,EACjEQ,EH1B8B,SAACQ,GAAD,MAAe,CAC/CE,KAAMC,KACNC,QAASC,EAAgCL,IGwB9BxB,C,iWAAmB,CAAD,CAAGE,YAAauB,EAAiBK,KAAK,MAASN,MAGtEO,EAAgB,SAACC,GAAD,OACpBnB,EAAY,CACVF,QAAQ,EACRC,aAAcQ,EAAYrC,KAAKiD,GAAO9E,WACtCC,oBAAqBiE,EAAYrC,KAAKiD,GAAO7E,wBAGjD8E,gBAAU,WACRxC,EAAU9B,QACT,IAEH,IAAMuE,GAAed,aAAA,EAAAA,EAAarC,OAAQ,GAE1C,OACE,kBAAC,EAAAoD,SAAD,KACE,kBAAC,IAAD,CACErD,QAASA,EACTM,WAAY,SAACL,GAAD,OD9CM,SAACA,EAAM2B,EAAyB0B,GAAhC,OACxBrD,EAAKsD,QAAO,SAACC,EAAD,EAAiCN,GAAU,IAAnC9E,EAAmC,EAAnCA,WAAekD,EAAoB,wBAClBlD,EAAWqF,MAAM,KADC,WAC9CC,EAD8C,KACrCd,EADqC,KAC/Be,EAD+B,KAErD,oBACKH,GADL,CAEE,CACEjD,MAAO,CACLmD,EACAd,EACAe,GAHG,WAIC/B,EACA,CACE,kBAAC,EAAAyB,SAAD,CAAU3D,IAAI,MACZ,kBAAC,EAAD,CAAyBE,QAAS,kBAAM0D,EAAUJ,IAAQ5B,OAAQA,MAGtE,UAIT,IC0ByBhB,CAAWL,EAAM2B,EAAyBqB,IAChEhD,KAAMmD,EACNzC,UAAWA,EACXa,QAASA,EACTtB,eAAgBuB,EAChBe,UAAWA,EACX1D,WAAYwD,aAAF,EAAEA,EAAasB,KACzBxD,OAAO,oBACPI,YAAY,cACZC,cAAc,aACdJ,QAASmC,IAAcb,GAA4C,IAAxByB,EAAapE,OACxD0B,kBAAmB,CAAC,uDAAwD,yDAC5EE,QAAQ,eAEV,kBAAC,EAAAiD,SAAD,CAAUC,SAAU,kBAAC,EAAAT,SAAD,OACjBxB,GACC,kBAAC5D,EAAA,QAAD,CACEI,oBAAqBA,EACrBH,OAAQ2D,EACR1D,YAAa,kBAAM4D,EAAY,CAAEF,QAAQ,KACzCzD,WAAY0D,OAQxBP,EAAeV,UAAY,CACzBW,QAASV,YAAkBA,YAAkBC,WAC7CU,WAAYX,oBACZY,KAAMZ,YAAkBA,YAAkBC,WAC1CY,iBAAkBb,SAClBc,wBAAyBd,UAG3B,U,moBC5EA,IAAM7C,GAA2B8F,WAAK,kBAAM,2CAKtC/D,EAAU,CACd,CACEF,MAAO,QACPJ,IAAK,eACLsE,WAAY,CAACC,aAEf,cACA,CACEnE,MAAO,cACPoE,eAAgB,CAACC,kBAAgBC,eAAU,OAIzCC,EAAgB,SAAC,GAUjB,IATJC,EASI,EATJA,WACAC,EAQI,EARJA,sBACAC,EAOI,EAPJA,MACAhC,EAMI,EANJA,UACAiC,EAKI,EALJA,gBACAjD,EAII,EAJJA,QACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,KACAE,EACI,EADJA,wBACI,GAC4BtD,cAAS,IADrC,WACGoG,EADH,KACaC,EADb,QAEiErG,cAAS,CAAEuD,QAAQ,IAFpF,kBAEKA,EAFL,EAEKA,OAAQC,EAFb,EAEaA,aAAczD,EAF3B,EAE2BA,oBAAuB0D,EAFlD,MAIJoB,gBAAU,WACRmB,EAAW,CAAElF,MAAO,GAAIC,OAAQ,EAAGuF,QAAS,eAAgBC,MAAO,YAAazD,YAAaM,EAAKsB,KAAK,SACtG,IAEH,IA8DI8B,GAAiBC,iBACnBC,KAAS,SAAC5F,EAAOC,EAAQF,EAAMiC,EAAahD,EAAYwG,GACtD,IAAMjC,GAAmBvB,aAAA,EAAAA,EAAapC,QAAS,EAAIoC,EAAcM,EACjE,OAAO4C,EAAW,CAAElF,QAAOC,SAAQwF,MAAO,YAAaD,UAASzF,OAAMiC,YAAauB,EAAiBK,KAAK,KAAM5E,iBAC9G,KACH,IAeF,OACE,kBAAC,EAAAiF,SAAD,KACE,kBAAC,IAAD,CACE7B,QAASA,EACTxB,QAASA,EACTiF,WAAW,EACXC,cAAc,EACdC,SAnBW,SAACC,EAAQC,EAAWC,EAAUpH,EAAQqH,GAChDrH,EAOHyG,GAAY,SAACD,GAAD,SAAC,KAAmBA,GAApB,UAA+Ba,EAAQC,MAAQ,QAN3Db,GAAY,SAACD,GAAD,SAAC,KAAmBA,GAApB,UAA+Ba,EAAQC,KAAOF,OAEzC,IAAbA,GACFf,EAAsBgB,EAAQC,QAe9BlF,WA1Fa,SAACL,GAClB,OAAOA,aAAP,EAAOA,EAAMsD,QACX,SAACC,EAAD,EAA8DiC,GAA9D,IAAQD,EAAR,EAAQA,KAAME,EAAd,EAAcA,aAAcvG,EAA5B,EAA4BA,KAAMY,EAAlC,EAAkCA,YAAa4F,EAA/C,EAA+CA,YAA/C,oBACKnC,GADL,CAEE,CACEgC,OACAjF,MAAO,CACL,CAAET,MAAO4F,GAAgBvG,EAAMyG,MAAO,CAAEC,UAAW,KAAM3H,QAAQ,IACjE,CAAE4B,MAAOC,EAAa6F,MAAO,CAAE1H,QAAQ,IACvC,CAAE4B,MAAO6F,EAAaC,MAAO,CAAE1H,OAA2B,IAAnBwG,EAASc,OAGpD,CACEA,KAAM,GAAF,OAAKA,EAAL,WACJM,OAAQ,EAAIL,EACZM,eAAgB,EAChBxF,MAAO,CACL,CACEqF,MAAO,CAAEI,QAAS,EAAGC,UAAW,mBAChCnG,OAAO2E,aAAA,EAAAA,EAAkBe,IACvB,kBAAC,EAAAU,MAAD,CACE9F,OAAO,mCACP+F,aAAW,eACXC,SAAS,EACTzG,QAAS0G,uBACT9F,MAAK,CAAG,cAAe,gBAAiB,aAAnC,WAAoDqB,EAA0B,CAAC,wBAA0B,KAC9GpD,KAAMiG,EAAgBe,GAAMlE,OAAO7C,KAAI,SAAC6C,GAAD,MAAa,CAClDf,MAAO,GAAF,WACAe,EAAOlD,WAAWqF,MAAM,MADxB,IAEC7B,EACA,CACE,kBAAC,EAAAyB,SAAD,CAAU3D,IAAI,MACZ,kBAAC,EAAD,CACEE,QAAS,kBACPmC,EAAY,CACVF,QAAQ,EACRC,aAAcR,EAAOlD,WACrBC,oBAAqBiD,EAAOjD,uBAGhCiD,OAAQA,MAId,UAIR,kBAAC,EAAAgF,YAAD,MACA,kBAAC,EAAAC,UAAD,OAGF,kBAAC,KAAD,aAMV,KAiCEnG,OAAO,cACPH,KAAMuE,EAAMvE,KACZU,UAAW,YAAgF,IAA7EvB,EAA6E,EAA7EA,MAAOC,EAAsE,EAAtEA,OAAQF,EAA8D,EAA9DA,KAAMiC,EAAwD,EAAxDA,YAAahD,EAA2C,EAA3CA,WAA2C,IAA/BwG,QAC1DE,EAAe1F,EAAOC,EAAQF,EAAMiC,EAAahD,OADwC,MAArB,eAAqB,IAG3FoI,OAAQ,CAAEtD,MAAO,EAAGuD,UAAW,OAC/BvG,eAAgBuB,EAChBe,UAAWA,EACX1D,WAAY0F,EAAMZ,KAClB8C,kBAAkB,YAClBlG,YAAY,QACZC,cAAc,OACdG,QAAQ,cAEV,kBAAC,EAAAiD,SAAD,CAAUC,SAAU,kBAAC,EAAAT,SAAD,OACjBxB,GACC,kBAAC,EAAD,CACExD,oBAAqBA,EACrBH,OAAQ2D,EACR1D,YAAa,kBAAM4D,EAAY,CAAEF,QAAQ,KACzCzD,WAAY0D,OAQxBuC,EAAcxD,UAAY,CACxByD,WAAYxD,SACZyD,sBAAuBzD,SACvB6F,WAAY7F,SACZ0D,MAAO1D,WACP0B,UAAW1B,SACX2D,gBAAiB3D,WACjBU,QAASV,YAAkBA,YAAkBC,WAC7CU,WAAYX,oBACZY,KAAMZ,YAAkBA,YAAkBC,WAC1Ca,wBAAyBd,UAa3B,SAAe8F,iBAAWC,cAVF,SAAC,GAAD,QAAGC,YAAH,MAA6D,CACnFtC,MADsB,EAAkBA,MAExChC,UAFsB,EAAyBA,UAG/CiC,gBAHsB,EAAoCA,oBAKjC,SAACvC,GAAD,MAAe,CACxCoC,WAAY,SAAC5B,GAAD,OAAcR,GAASoC,QAAW5B,KAC9C6B,sBAAuB,SAACiB,GAAD,OAAUtD,GAASqC,QAAsBiB,QAGxCqB,CAA6CxC,ICnLhE,IA2BD0C,EAAmB,SAAC,GAAa,IAAXrF,EAAW,EAAXA,KACpBsF,GAAaC,gBAAWC,KADO,GAEb5I,cAAS,IAFI,WAE9Ba,EAF8B,KAExBgI,EAFwB,QAGD7I,cAAS,IAHR,WAG9BF,EAH8B,KAGlBgJ,EAHkB,QAIC9I,cAAS,IAJV,WAI9B8C,EAJ8B,KAIjBiG,EAJiB,KAK/BC,EAAmB,SAAC,GAAsC,IAApCnI,EAAoC,EAApCA,KAAMiC,EAA8B,EAA9BA,YAAahD,EAAiB,EAAjBA,WACzB,iBAATe,GACTgI,EAAQhI,GAGgB,iBAAff,GACTgJ,EAAchJ,GAGZgD,GACFiG,EAAsC,iBAAhBjG,EAA2B,GAAKA,IAIpDI,EA9CoB,SAAC,GAAD,IAASwF,EAAT,EAASA,WAAT,IAAqB7H,YAArB,MAA4B,GAA5B,MAAgCiC,YAAhC,OAC1B,CACE1B,IAAK,cACLf,WAHwB,MAA8C,GAA9C,EAIxB4I,YAAa,wBACb3E,KAAM,WACN4E,MANwB,EAAG9F,KAMfjD,KAAI,SAACgJ,GAAD,MAAU,CAAEC,MAAOD,EAAK9I,MAAO8I,QANvB,WAQtBT,EACA,CACE,CACEtH,IAAK,OACLkD,KAAM,OACNjE,MAAOQ,EACPuI,MAAO,YACPH,YAAa,wBASjB,KAsBYI,CAAa,CAAEjG,OAAMsF,aAAY7H,OAAMiC,cAAahD,eACpE,OAAO4I,EACL,kBAAC,EAAD,CAAevF,WAAY6F,EAAkB9F,QAASA,EAASE,KAAMA,IAErE,kBAAC,EAAD,CAAgBD,WAAY6F,EAAkB9F,QAASA,EAASE,KAAMA,EAAMC,iBAAkBxC,EAAKH,OAAS,GAAKoC,EAAYpC,OAAS,KAI1I+H,EAAiBlG,UAAY,CAC3Ba,KAAMZ,YAAkBA,YAAkBC,YAG5C,UC9DA,IAAM6G,EAAa,SAAC,GAAD,IAAGlG,EAAH,EAAGA,KAAH,OAAc,kBAAC,EAAD,CAAkBA,KAAMA,KAEzDkG,EAAW/G,UAAY,CACrBa,KAAMZ,YAAkBA,YAAkBC,YAG5C","file":"js/4250.a138d77dc1d2d9a5a7b3.js","sourcesContent":["import { Button, Modal } from '@patternfly/react-core';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { defaultSettings } from '../../helpers/shared/pagination';\n\nconst ResourceDefinitionsModal = ({ isOpen, handleClose, permission, resourceDefinitions }) => {\n  const columns = [''];\n  const [{ rows, pagination, filterValue }, setRows] = useState(() => ({\n    filterValue: '',\n    rows: resourceDefinitions.map(({ attributeFilter: { value } }) => value).slice(0, defaultSettings.limit),\n    pagination: {\n      ...defaultSettings,\n      count: resourceDefinitions.length,\n    },\n  }));\n\n  const handleFilterValue = ({ name = '', limit, offset }, isFilter = false) =>\n    setRows(({ pagination, filterValue }) => {\n      const rows = resourceDefinitions\n        .map(({ attributeFilter: { value } }) => value)\n        .filter((value) => value.includes(name))\n        .slice(offset, limit);\n      return {\n        rows,\n        filterValue: isFilter ? name : filterValue,\n        pagination: {\n          ...pagination,\n          offset: isFilter ? 0 : offset,\n          limit,\n          count: rows.length,\n        },\n      };\n    });\n\n  return (\n    <Modal\n      actions={[\n        <Button key=\"close-action\" variant=\"primary\" onClick={handleClose}>\n          Close\n        </Button>,\n      ]}\n      variant=\"large\"\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"Resource definitions\"\n      description={\n        <p>\n          View resource definitions for the <strong>{permission}</strong> permission\n        </p>\n      }\n    >\n      <TableToolbarView\n        columns={columns}\n        data={rows}\n        filterValue={filterValue}\n        setFilterValue={(config) => handleFilterValue(config, true)}\n        pagination={pagination}\n        ouiaId=\"resource-definition-table\"\n        noData={resourceDefinitions.length === 0}\n        createRows={(data) => data.map((value) => ({ cells: [value] }))}\n        titlePlural=\"Resource definitions\"\n        titleSingular=\"Resource definition\"\n        noDataDescription={[`There are no resource definitions for ${permission} permission`]}\n        fetchData={handleFilterValue}\n        tableId=\"resource-definitions-modal\"\n      />\n    </Modal>\n  );\n};\n\nResourceDefinitionsModal.propTypes = {\n  isOpen: PropTypes.bool,\n  handleClose: PropTypes.func.isRequired,\n  permission: PropTypes.string.isRequired,\n  resourceDefinitions: PropTypes.arrayOf(\n    PropTypes.shape({\n      attributeFilter: PropTypes.shape({\n        value: PropTypes.string.isRequired,\n      }).isRequired,\n    })\n  ).isRequired,\n};\n\nexport default ResourceDefinitionsModal;\n","import { getAccessApi } from '../shared/user-login';\n\nconst accessApi = getAccessApi();\n\nexport async function getPrincipalAccess({ limit, offset, username, application = '' }) {\n  return await accessApi.getPrincipalAccess(application, username, limit, offset);\n}\n","import * as ActionTypes from '../action-types';\nimport * as AccessHelper from '../../helpers/access/access-helper';\n\nexport const getPrincipalAccess = (apiProps) => ({\n  type: ActionTypes.GET_PRINCIPAL_ACCESS,\n  payload: AccessHelper.getPrincipalAccess(apiProps),\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ResourceDefinitionsLink = ({ onClick, access }) => {\n  return access.resourceDefinitions.length === 0 ? (\n    <span>N/A</span>\n  ) : (\n    <a\n      onClick={() => {\n        onClick();\n        return false;\n      }}\n    >\n      {access.resourceDefinitions.length}\n    </a>\n  );\n};\n\nResourceDefinitionsLink.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  access: PropTypes.shape({ resourceDefinitions: PropTypes.array.isRequired }).isRequired,\n};\n\nexport default ResourceDefinitionsLink;\n","import React, { Fragment } from 'react';\nimport ResourceDefinitionsLink from '../../presentational-components/myUserAccess/ResourceDefinitionsLink';\n\nexport const createRows = (data, showResourceDefinitions, onRdClick) =>\n  data.reduce((acc, { permission, ...access }, index) => {\n    const [appName, type, operation] = permission.split(':');\n    return [\n      ...acc,\n      {\n        cells: [\n          appName,\n          type,\n          operation,\n          ...(showResourceDefinitions\n            ? [\n                <Fragment key=\"rd\">\n                  <ResourceDefinitionsLink onClick={() => onRdClick(index)} access={access} />\n                </Fragment>,\n              ]\n            : []),\n        ],\n      },\n    ];\n  }, []);\n","import React, { Fragment, Suspense, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { getPrincipalAccess } from '../../redux/actions/access-actions';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { createRows } from './mua-table-helpers';\nimport ResourceDefinitionsModal from './ResourceDefinitionsModal';\n\nconst MUAAccessTable = ({ filters, setFilters, apps, hasActiveFilters, showResourceDefinitions }) => {\n  const [{ rdOpen, rdPermission, resourceDefinitions }, setRdConfig] = useState({ rdOpen: false });\n  const { current: columns } = useRef([\n    { title: 'Application' },\n    { title: 'Resource type' },\n    { title: 'Operation' },\n    ...(showResourceDefinitions ? [{ title: 'Resource definitions' }] : []),\n  ]);\n\n  const dispatch = useDispatch();\n  const { permissions, isLoading } = useSelector(\n    (state) => ({\n      permissions: state.accessReducer.access,\n      isLoading: state.accessReducer.isLoading,\n    }),\n    shallowEqual\n  );\n\n  const fetchData = ({ application, ...apiProps }) => {\n    const applicationParam = application?.length > 0 ? application : apps;\n    dispatch(getPrincipalAccess({ application: applicationParam.join(','), ...apiProps }));\n  };\n\n  const handleRdClick = (index) =>\n    setRdConfig({\n      rdOpen: true,\n      rdPermission: permissions.data[index].permission,\n      resourceDefinitions: permissions.data[index].resourceDefinitions,\n    });\n\n  useEffect(() => {\n    fetchData(defaultSettings);\n  }, []);\n\n  const filteredRows = permissions?.data || [];\n\n  return (\n    <Fragment>\n      <TableToolbarView\n        columns={columns}\n        createRows={(data) => createRows(data, showResourceDefinitions, handleRdClick)}\n        data={filteredRows}\n        fetchData={fetchData}\n        filters={filters}\n        setFilterValue={setFilters}\n        isLoading={isLoading}\n        pagination={permissions?.meta}\n        ouiaId=\"permissions-table\"\n        titlePlural=\"permissions\"\n        titleSingular=\"permission\"\n        noData={!isLoading && !hasActiveFilters && filteredRows.length === 0}\n        noDataDescription={['You do not have individual permissions for Insights.', 'Contact your Org. Administrator for more information.']}\n        tableId=\"mua-access\"\n      />\n      <Suspense fallback={<Fragment />}>\n        {rdOpen && (\n          <ResourceDefinitionsModal\n            resourceDefinitions={resourceDefinitions}\n            isOpen={rdOpen}\n            handleClose={() => setRdConfig({ rdOpen: false })}\n            permission={rdPermission}\n          />\n        )}\n      </Suspense>\n    </Fragment>\n  );\n};\n\nMUAAccessTable.propTypes = {\n  filters: PropTypes.arrayOf(PropTypes.object).isRequired,\n  setFilters: PropTypes.func.isRequired,\n  apps: PropTypes.arrayOf(PropTypes.string).isRequired,\n  hasActiveFilters: PropTypes.bool,\n  showResourceDefinitions: PropTypes.bool,\n};\n\nexport default MUAAccessTable;\n","import React, { Fragment, useCallback, useEffect, useState, lazy, Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport debounce from 'lodash/debounce';\nimport { TableToolbarView } from '../../presentational-components/shared/table-toolbar-view';\nimport { fetchRoles, fetchRoleForPrincipal } from '../../redux/actions/role-actions';\nimport { ListLoader } from '../../presentational-components/shared/loader-placeholders';\n\nconst ResourceDefinitionsModal = lazy(() => import('./ResourceDefinitionsModal'));\n\nimport { Table, TableHeader, TableBody, TableVariant, compoundExpand, cellWidth, sortable } from '@patternfly/react-table';\nimport ResourceDefinitionsLink from '../../presentational-components/myUserAccess/ResourceDefinitionsLink';\n\nconst columns = [\n  {\n    title: 'Roles',\n    key: 'display_name',\n    transforms: [sortable],\n  },\n  'Description',\n  {\n    title: 'Permissions',\n    cellTransforms: [compoundExpand, cellWidth(20)],\n  },\n];\n\nconst MUARolesTable = ({\n  fetchRoles,\n  fetchRoleForPrincipal,\n  roles,\n  isLoading,\n  rolesWithAccess,\n  filters,\n  setFilters,\n  apps,\n  showResourceDefinitions,\n}) => {\n  const [expanded, setExpanded] = useState({});\n  const [{ rdOpen, rdPermission, resourceDefinitions }, setRdConfig] = useState({ rdOpen: false });\n\n  useEffect(() => {\n    fetchRoles({ limit: 20, offset: 0, orderBy: 'display_name', scope: 'principal', application: apps.join(',') });\n  }, []);\n\n  const createRows = (data) => {\n    return data?.reduce(\n      (acc, { uuid, display_name, name, description, accessCount }, i) => [\n        ...acc,\n        {\n          uuid,\n          cells: [\n            { title: display_name || name, props: { component: 'th', isOpen: false } },\n            { title: description, props: { isOpen: false } },\n            { title: accessCount, props: { isOpen: expanded[uuid] === 2 } },\n          ],\n        },\n        {\n          uuid: `${uuid}-groups`,\n          parent: 2 * i,\n          compoundParent: 2,\n          cells: [\n            {\n              props: { colSpan: 4, className: 'pf-m-no-padding' },\n              title: rolesWithAccess?.[uuid] ? (\n                <Table\n                  ouiaId=\"permissions-in-role-nested-table\"\n                  aria-label=\"Simple Table\"\n                  borders={false}\n                  variant={TableVariant.compact}\n                  cells={['Application', 'Resource type', 'Operation', ...(showResourceDefinitions ? ['Resource definitions'] : [])]}\n                  rows={rolesWithAccess[uuid].access.map((access) => ({\n                    cells: [\n                      ...access.permission.split(':'),\n                      ...(showResourceDefinitions\n                        ? [\n                            <Fragment key=\"rd\">\n                              <ResourceDefinitionsLink\n                                onClick={() =>\n                                  setRdConfig({\n                                    rdOpen: true,\n                                    rdPermission: access.permission,\n                                    resourceDefinitions: access.resourceDefinitions,\n                                  })\n                                }\n                                access={access}\n                              />\n                            </Fragment>,\n                          ]\n                        : []),\n                    ],\n                  }))}\n                >\n                  <TableHeader />\n                  <TableBody />\n                </Table>\n              ) : (\n                <ListLoader />\n              ),\n            },\n          ],\n        },\n      ],\n      []\n    );\n  };\n\n  let debouncedFetch = useCallback(\n    debounce((limit, offset, name, application, permission, orderBy) => {\n      const applicationParam = application?.length > 0 ? application : apps;\n      return fetchRoles({ limit, offset, scope: 'principal', orderBy, name, application: applicationParam.join(','), permission });\n    }, 800),\n    []\n  );\n\n  const onExpand = (_event, _rowIndex, colIndex, isOpen, rowData) => {\n    if (!isOpen) {\n      setExpanded((expanded) => ({ ...expanded, [rowData.uuid]: colIndex }));\n      // Permissions\n      if (colIndex === 2) {\n        fetchRoleForPrincipal(rowData.uuid);\n      }\n    } else {\n      setExpanded((expanded) => ({ ...expanded, [rowData.uuid]: -1 }));\n    }\n  };\n\n  return (\n    <Fragment>\n      <TableToolbarView\n        filters={filters}\n        columns={columns}\n        isCompact={false}\n        isExpandable={true}\n        onExpand={onExpand}\n        createRows={createRows}\n        ouiaId=\"roles-table\"\n        data={roles.data}\n        fetchData={({ limit, offset, name, application, permission, orderBy = 'display_name' }) => {\n          debouncedFetch(limit, offset, name, application, permission, orderBy);\n        }}\n        sortBy={{ index: 0, direction: 'asc' }}\n        setFilterValue={setFilters}\n        isLoading={isLoading}\n        pagination={roles.meta}\n        filterPlaceholder=\"role name\"\n        titlePlural=\"roles\"\n        titleSingular=\"role\"\n        tableId=\"mua-roles\"\n      />\n      <Suspense fallback={<Fragment />}>\n        {rdOpen && (\n          <ResourceDefinitionsModal\n            resourceDefinitions={resourceDefinitions}\n            isOpen={rdOpen}\n            handleClose={() => setRdConfig({ rdOpen: false })}\n            permission={rdPermission}\n          />\n        )}\n      </Suspense>\n    </Fragment>\n  );\n};\n\nMUARolesTable.propTypes = {\n  fetchRoles: PropTypes.func,\n  fetchRoleForPrincipal: PropTypes.func,\n  fetchUsers: PropTypes.func,\n  roles: PropTypes.object,\n  isLoading: PropTypes.bool,\n  rolesWithAccess: PropTypes.object,\n  filters: PropTypes.arrayOf(PropTypes.object).isRequired,\n  setFilters: PropTypes.func.isRequired,\n  apps: PropTypes.arrayOf(PropTypes.string).isRequired,\n  showResourceDefinitions: PropTypes.bool,\n};\n\nconst mapStateToProps = ({ roleReducer: { roles, isLoading, rolesWithAccess } }) => ({\n  roles,\n  isLoading,\n  rolesWithAccess,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  fetchRoles: (apiProps) => dispatch(fetchRoles(apiProps)),\n  fetchRoleForPrincipal: (uuid) => dispatch(fetchRoleForPrincipal(uuid)),\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MUARolesTable));\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport OrgAdminContext from '../../utilities/org-admin-context';\nimport MUAAccessTable from './MUAAccessTable';\nimport MUARolesTable from './MUARolesTable';\n\n// TODO: Add permissions back when we support partial matching\n\nexport const createFilter = ({ apps, isOrgAdmin, name = '', application = [] /* permission = '' */ }) => [\n  {\n    key: 'application',\n    value: application,\n    placeholder: 'Filter by application',\n    type: 'checkbox',\n    items: apps.map((app) => ({ label: app, value: app })),\n  },\n  ...(isOrgAdmin\n    ? [\n        {\n          key: 'name',\n          type: 'text',\n          value: name,\n          label: 'Role name',\n          placeholder: 'Filter by role name',\n        },\n        // {\n        //   key: 'permission',\n        //   value: permission,\n        //   placeholder: 'Filter by permission',\n        //   type: 'text',\n        // },\n      ]\n    : []),\n];\n\nconst CommonBundleView = ({ apps }) => {\n  const isOrgAdmin = useContext(OrgAdminContext);\n  const [name, setName] = useState('');\n  const [permission, setPermission] = useState('');\n  const [application, setApplication] = useState([]);\n  const handleSetFilters = ({ name, application, permission }) => {\n    if (typeof name === 'string') {\n      setName(name);\n    }\n\n    if (typeof permission === 'string') {\n      setPermission(permission);\n    }\n\n    if (application) {\n      setApplication(typeof application === 'string' ? [] : application);\n    }\n  };\n\n  const filters = createFilter({ apps, isOrgAdmin, name, application, permission });\n  return isOrgAdmin ? (\n    <MUARolesTable setFilters={handleSetFilters} filters={filters} apps={apps} />\n  ) : (\n    <MUAAccessTable setFilters={handleSetFilters} filters={filters} apps={apps} hasActiveFilters={name.length > 0 || application.length > 0} />\n  );\n};\n\nCommonBundleView.propTypes = {\n  apps: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default CommonBundleView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonBundleView from '../CommonBundleView';\n\nconst RhelBundle = ({ apps }) => <CommonBundleView apps={apps} />;\n\nRhelBundle.propTypes = {\n  apps: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default RhelBundle;\n"],"sourceRoot":""}